--- common-channel.c.orig	2007-08-08 17:39:36.000000000 +0200
+++ common-channel.c	2007-08-08 18:33:14.000000000 +0200
@@ -311,10 +311,10 @@
 		send_msg_channel_eof(channel);
 	}
 
-	/* And if we can't receive any more data from them either, close up */
+	/* And if we can't receive any more data from them either, close up (server only) */
 	if (!channel->sent_close
 			&& channel->readfd == FD_CLOSED
-			&& (ERRFD_IS_WRITE(channel) || channel->errfd == FD_CLOSED)
+			&& !ERRFD_IS_WRITE(channel)
 			&& !write_pending(channel)) {
 		TRACE(("sending close, readfd is closed"))
 		send_msg_channel_close(channel);
