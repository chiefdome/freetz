--- Makefile.orig	2009-09-06 00:16:58.000000000 +0200
+++ Makefile	2009-09-04 23:49:49.000000000 +0200
@@ -1,45 +1,11 @@
-TGT=noip2
-CC=gcc
-PKG=noip-2.1.tgz
+TGT = noip2
+CC = mipsel-linux-gcc
 
-PREFIX=/usr/local
-CONFDIR=${PREFIX}/etc
-BINDIR=${PREFIX}/bin
+PREFIX = /var/tmp/flash/mod
+CONFDIR = /var/tmp/flash/mod
+BINDIR = /usr/bin
 
-# these defines are for Linux
-LIBS=
-ARCH=linux
+ARCH = mipsel-linux
 
-# for Mac OS X and BSD systems that have getifaddr(), uncomment the next line
-#ARCH=bsd_with_getifaddrs
-
-# for early BSD systems without getifaddrs(), uncomment the next line
-#ARCH=bsd
-
-
-# for solaris, uncomment the next two lines
-# LIBS=-lsocket -lnsl
-# ARCH=sun
-
-${TGT}: Makefile ${TGT}.c 
-	${CC} -Wall -g -D${ARCH} -DPREFIX=\"${PREFIX}\" ${TGT}.c -o ${TGT} ${LIBS}
-
-install: ${TGT} 
-	if [ ! -d ${BINDIR} ]; then mkdir -p ${BINDIR};fi
-	if [ ! -d ${CONFDIR} ]; then mkdir -p ${CONFDIR};fi
-	cp ${TGT} ${BINDIR}/${TGT}
-	${BINDIR}/${TGT} -C -c /tmp/no-ip2.conf
-	mv /tmp/no-ip2.conf ${CONFDIR}/no-ip2.conf
-
-package: ${TGT}
-	rm  -f *.bak
-	mv ${TGT} binaries/${TGT}-`uname -m`
-	scp a-k:/local/bin/noip2 binaries/noip2-`ssh a-k uname -m`
-	cd ..; tar zcvf /tmp/${PKG} noip-2.0/*
-	scp /tmp/${PKG} a-k:/opt/www/${PKG}
-	rm /tmp/${PKG}
-
-clean: 
-	rm -f *o
-	rm -f binaries/*
-	rm -f ${TGT}
+${TGT}: Makefile ${TGT}.c
+	    ${CC} -Os -pipe -march=4kc -Wa,--trap -D${ARCH} -DPREFIX=\"${PREFIX}\" ${TGT}.c -o ${TGT}
