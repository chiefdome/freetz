#!/var/tmp/sh
##################################################################################
## dtmfbox - internal script
##################################################################################
. ./script/script_funcs.sh
if [ "$?" = "1" ]; then exit 1; fi

menue_ansage() {
   display_text "Hauptmenue" &
   say_or_beep "`SPEECH_INTERNAL`" &
}

##################################################################################
## STARTUP
##################################################################################
if [ "$EVENT" = "STARTUP" ]; 
then 
   menue_ansage &
else
   exit 1
fi

##################################################################################
## LOOP
##################################################################################
while [ "1" = "1" ];
do    
  . "$SCRIPT_WAITEVENT" "GET"

  ##############################################################################
  ## DTMF
  ##############################################################################
  if [ "$EVENT" = "DTMF" ]; 
  then
      # change scriptfile 
      CHANGE_SCRIPT=$SCRIPT_INTERNAL_SUB\_$DTMF.sh

      if [ -f "$CHANGE_SCRIPT" ]; 
      then       
        dtmfbox_change_script "$SRC_CON" "$CHANGE_SCRIPT" "none"
      else
        menue_ansage
      fi
  fi

  ##############################################################################
  ## DISCONNECT
  ##############################################################################
  if [ "$EVENT" = "DISCONNECT" ] || [ "$EVENT" = "" ];
  then
    disconnect
    exit
  fi

done;

   