--- common/resolver.c.orig	2006-07-23 16:55:14.000000000 +0200
+++ common/resolver.c	2008-04-26 20:05:15.000000000 +0200
@@ -41,14 +41,16 @@
 #ifdef _LINUX
 	memset(&res, 0, sizeof(res));
 	res.options = RES_DEBUG;
-	res_ninit(&res);
+	//res_ninit(&res);
+	res_init();
 #else
 	res_init();
 #endif
 
 	memset(answer, 0, sizeof(answer));
 #ifdef _LINUX
-	ret = res_nquery(&res, label, C_IN, rrtype, answer, sizeof(answer));
+	//ret = res_nquery(&res, label, C_IN, rrtype, answer, sizeof(answer));
+	ret = res_query(label, C_IN, rrtype, answer, sizeof(answer));
 #else
 	ret = res_query(label, C_IN, rrtype, answer, sizeof(answer));
 #endif
@@ -64,7 +66,7 @@
 	/* Skip Query part */
 	for (count = ntohs(header->qdcount); count--; ptr += ret + QFIXEDSZ)
 	{
-		if ((ret = dn_skipname(ptr, endptr)) < 0) return -1;
+		//if ((ret = dn_skipname(ptr, endptr)) < 0) return -1;
 	}
 
 	/* Only look at the Answer section */
