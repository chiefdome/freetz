--- libc/sysdeps/linux/common/bits/in.h.orig	2010-08-11 20:57:17.000000000 +0200
+++ libc/sysdeps/linux/common/bits/in.h	2010-08-11 21:04:06.000000000 +0200
@@ -133,6 +133,8 @@
 #define IPV6_IPSEC_POLICY	34
 #define IPV6_XFRM_POLICY	35
 
+ #include <linux/version.h>
+ #if LINUX_VERSION_CODE >= KERNEL_VERSION(2,6,14)
 #define IPV6_RECVPKTINFO	49
 #define IPV6_PKTINFO		50
 #define IPV6_RECVHOPLIMIT	51
@@ -147,6 +149,19 @@
 
 #define IPV6_RECVTCLASS		66
 #define IPV6_TCLASS		67
+ #else
+#define IPV6_RECVPKTINFO	IPV6_2292PKTINFO
+#define IPV6_PKTINFO		IPV6_2292PKTINFO
+#define IPV6_RECVHOPLIMIT	IPV6_2292HOPLIMIT
+#define IPV6_HOPLIMIT		IPV6_2292HOPLIMIT
+#define IPV6_RECVHOPOPTS	IPV6_2292HOPOPTS
+#define IPV6_HOPOPTS		IPV6_2292HOPOPTS
+#define IPV6_RECVRTHDR		IPV6_2292RTHDR
+#define IPV6_RTHDR		IPV6_2292RTHDR
+#define IPV6_RECVDSTOPTS	IPV6_2292DSTOPTS
+#define IPV6_DSTOPTS		IPV6_2292DSTOPTS
+#define IPV6_PKTOPTIONS		IPV6_2292PKTOPTIONS
+ #endif
 
 /* Obsolete synonyms for the above.  */
 #define IPV6_ADD_MEMBERSHIP	IPV6_JOIN_GROUP
