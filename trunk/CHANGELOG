$Id$

TODO:
- classpath, jamvm

Latest changes:
- Many makefile changes, some big, some small, some cosmetic, to
    * make default target indirectly dependent on 'precompiled':
        + simple 'make' now also executed 'precompiled'
        + old 'firmware' target renamed to 'firmware-nocompile'
        + new 'firmware' target depends on 'firmware-nocompile' and
          'precompiled'
        + The purpose of 'firmware-nocompile' is to enable users to build a
          firmware manually in special cases (e.g. 'precompiled' failure or
          the wish to build packages containing binaries).
    * make the hierarchical build more consistent,
    * avoid spurious unnecessary rebuilds,
    * no longer support "external compiler" option in menuconfig. This means
      that ds26 does not support external toolchains anymore, because we assume
      that experts who need this will manage to set it up by themselves using
      links etc.
    * include timestamp into firmware name
    * add makefile prerequisites for target binaries so as to avoid files
      being stripped and copied unnecessarily. How to:
        + avoid doing anything in synthetic targets like xy-precompiled
        + make sure to have targets for source binaries as well as target
          binaries (e.g. source/xy-1.3/src/xy and
          packages/xy-1.3/root/usr/bin/xy)
    * add xy-uninstall to all packages and shared libs,
    * add config option "all modules", if "replace kernel" is active,
    * make more packages work with + without LFS (large file support)
    * compile gcc with "--with-float=soft",
    * not always include toolchain stuff into big makefile,
    * add libgcc_s to DS_INSTALL_BASE (i.e. it will always be installed)
    * add each single 'tools' package to 'noconfig_targets',
    * make DL_DIR and PACKAGES_DIR order-only prerequisites for many dependent
      targets,
    * rename busybox-tools targets so they do not collide with busybox package
      targets anymore, but adhere to naming conventions instead,
    * delete firmware images in common-clean, fix delete command
    * get make structure more in sync with Buildroot,
    * create a clearer dependency structure and
    * achieve world domination in general...
- Multi-job build improvements:
    * Added new config option for multiple jobs. This can now be configured in
      menuconfig.
    * New multijob config option will be used for kernel toolchain, target
      toolchain, libs and packages.
    * Targets that cannot be compiled with multiple jobs should use $(MAKE1)
      instead of $(MAKE).
    * multijob.sh is not needed anymore and will be removed in future releases.
      It now does not do anything anymore, just prints a "deprecated" warning.
    * Target "packages-precompiled" is removed because it is obsolete with these
      changes.
- Enhance fwmod so it can be used to handle FW images by either specifying an
  alternative DOT_CONFIG file name or by explicitly providing command line
  parameters for often-used settings needed to unpack different firmware
  versions. Just call fwmod without any parameters to get a proper description.
  BTW: The DOT_CONFIG alternative may be a very small file consisting only of
  about five settings, if fwmod is just used to unpack (-u) an image.
- New packages, libs, modules:
    * Added section 'debug helpers' in menuconfig
    * Debug helper package strace (binary only)
    * Binary package inotify-tools (inotifywait, inotifywatch), including
      patches to inotify-enable uClibc
    * Debug helper package lsof 4.78, binary-only
    * Spindown-CGI and sg3_utils (by IPPF user 'derheimi')
    * Libusb added to menuconfig
    * Apache 1.3.37 + PHP 5.2.1 package group added. Please cf. menuconfig
      online help (press 'H' at packages / testing / Apache + PHP) for more
      information and/or check out http://www.ip-phone-forum.de/showthread.php?t=127089
      for tips, tricks, patches and extensions.
    * Ctorrent 1.3.4-dnh3
    * Bluetooth kernel modules
    * Nano editor 2.0.6
    * OpenNTPD 3.9p1

- Updates packages, libs, modules:
    * (Download) toolchain (target)
        + add gcc-4.2.0 + binutils 2.17.50.0.16 and make them default
        + Remove uclibc download package for download toolchain, instead
          copy libs from toolchain
    * BusyBox 1.5.1 (target and tools instances)
        + 'getcons' applet reactivated (broken patch finally repaired)
        + 'ar' applet now included by default (needed by debootstrap, needs
           just 600 bytes)
        + fix stty option parsing, reactivating old 100-profile.patch
    * Lua 5.1.2
    * Ntfs-3g 1.516
    * Callmonitor 1.9.5
    * Syslogd-CGI 0.2.2: allow rotating log files with a value of '-b 1'
    * SquashFS 2.2-r
    * Lzma 4.43
    * Iptables 1.3.7
    * Classpath 0.95
    * FUSE 2.6.5
    * Dnsmasq 2.39
    * Transmission 0.72
    * Libevent 1.3b
    * Tor 0.1.2.14
    * Rudi-Shell: save screen real estate by suppressing HTML H1 element
      "Rudi-Shell"
    * Cifsmount package 0.2 features a CGI (web config) interface for up to
      three mounts, start/stop scripts and convenience script 'cifsmount' for
      more easier command line (un-)mounting.
    * Debootstrap build process simplified by removing the "convert Debian
      package to DS-Mod package" intermediate staging step and providing an
      extensive description about how to build + update the DS-Mod package in
      packages/debootstrap-0.3.3.2/README instead. This results in
        + an updated download package 0.2 with mentioned README and without
          binary
        + the removal of 01_trap.patch (patched file is part of DS-Mod package)
        + a dramatically simplified debootstrap.mk
    * CRC_CCITT compiled as kernel module (Config.4mb_26)
    * Fakeroot 1.7.1 (build tools section)
    * uClibc++ to 0.2.2
- Firmware updates:
    * USB-Labor 29.04.34-7422
    * 7150 firmware 38.04.32
    * Phone-Labor 29.04.34-7269
    * 7050 firmware 14.04.33
    * Remove 7140 international (kernel 2.4.17_mvl21)
    * ECO-Labor 29.04.33-7238
    * Add AVM web interface for W900V
    * Extension for W701V: /sbin/mailer is copied from tk-firmware
    * Add ATA Patch for W701V and W900V (Inet over LAN A)
    * W900V: make web interface available for OEM=avm
    * W900V: copy modules from tk-firmware
    * W701V: integrate copy modules: modules are copied from tk-firmware
      (29.04.33), so self.built kernel can be used
    * run_mount patch enables all firmwares with USB host to mount all file
      systems, not just FAT
- Fix tools/ds_download  (fallback mirror download did not work)
- Mount sysfs to /sys, symlink /var/sysfs to /sys
- Sync uclibc.mk with buildroot structure
- Fix typo in fwmod: libc.so.0 was not copied into firmware, but as it already
  exists nobody noticed this.
- 'make %lib%-clean' will now remove files from toolchain and root/(usr/)lib
- depmod.pl moved to tools directory and removed from kernel build
- Fix netsnmp build (fails with multiple jobs) 
- Fix bird build (fails with multiple jobs)
- Mention 'make precompiled' in previously outdated README
- Add uClibc config for 04.30
- Fix typo in make/libs/Makefile.in concerning libpcap, making it dependent on
  libncurses config switch accidentally.
- Fix awk segfault (busybox) when called without any parameters
- Clean up some obsolete code in Config.in and fwmod
- Fix small error in netsnmp package (update to 0.3): create /var/lib/snmp
- Mod version number now says ds26-14.x rather than ds-0.2.9-14
- Bugfix for tools/busybox: make-include tried to apply all tools patches
  instead of only busybox-specific ones.

=== in preparation for release ds26-15 ===

- Added libelf library needed by ltrace - BUILD OK, BUT UNTESTED
- Added debug helper package ltrace (binary only) - COMPILES, BUT CRASHES

=== release ds26-14.4 ===

- Busybox patch for 'ash' shell: When a remote client (e.g. ssh) was killed,
  the remaining shell process would get into an endless loop stressing the CPU
  with >90%, making the system slow, unresponsive and possibly instable.
- Rudi Shell: new optional environment variable (or non-GUI POST parameter,
  respecively) FORM_download_name enables users to define a target name for
  files downloaded via scripting.
- Menuconfig: help texts for all brandings explaining briefly what a branding
  is and explaining that at least one of them should be selected for the
  firmware to work.
- Bump callmonitor version to 1.9.2
- Fix busybox rebuild when config changes (copied from openwrt) 
- Add FritzBox Fon (06.04.30) to ds26
- Disable CONFIG_KMOD kernel option (module auto-loader) because of missing
  symbol in original kernel. This is needed to make iptables run smoothly, but
  also makes it necessary to load iptables modules with modprobe or insmod.
- Update Firewall CGI to explicitly use modprobe/rmmod, because CONFIG_KMOD
  was removed from default kernel config
- Version update for USB and VPN 'labor' firmware (AURA 7125, VPN 6937)
- Ntfs3g: bump version to 1.417
- Fix typo in make/avm-gpl/avm-gpl.mk
- Minor menuconfig improvements:
  * Don't show open source package selection, always usedefault (currently
    04.30 for 7141, 04.29 for all other supported boxes)
  * Rename "firmware type" to "hardware type"
  * Rename "firmware version" to "firmware language"
- Kernel build: do not use /sbin/depmod while cross-compiling
- Integrate new AVM open source package (7141-04.30)
- Bftpd: bump version to 1.8 and update download site
- Fix typo in toolchain/make/target/uclibc/uclibc.mk causing make to always use
  the precompiled uClibc, the manual build never got fired.
- Update Speedport W701V to firmware version 33.04.26
- Improved menuconfig tool adopted from buildroot2:
  * Comprehensive online help
  * Options' help texts also show dependency information:
    + Which condition(s) does an option depend on?
    + By which other option(s) was an option selected?
    + Which other options does an option select?
    + Where is an option defined (file name + line no.)?
  * Seach mode: wildcard search for option names via "/" hotkey.
    By the way: search mode also has online help.
- Added download mirror #3 to Config.in
- tools/make/busybox-tools.mk: activate download target on demand to avoid
  collision with identical target for regular busybox on one hand and to
  avoid make complaining about a missing target when building tools busybox
  from scratch on the other hand.
- tools/ds_download: changed 'od -D' to 'od -d' to make it compatible with
  old versions of GNU coreutils (e.g. od 5.2.1)

=== release ds26-14.3 ===

- Cross-cutting changes in ds-mod-specific package download:
  * New shell script tools/ds_download provides a uniform way to download
    ds-mod-specific packages such as application and add-on packages as well
    as precompiled toolchains. The script first checks a predefined list of
    download servers (mirrors) and only uses an optionally provided "original"
    server as fallback, which is important for new package versions not
    available on mirrors yet.
  * New variable DL_TOOL in Makefile points to tools/ds_download
  * List of download sites (mirrors) can be edited in menuconfig (Advanced
    options -> DS-Mod package download sites). Currently there are five slots
    for download servers, two of which have default values. Two others are
    reserved for later use and #5 is freely editable by users. This enables
    users to set up their private mirrors on their own LAN or WAN servers.
  * *.mk files loading mod-specific packages have all been made "mirror-aware",
    i.e. they all call DL_TOOL with the appropriate parameters. Specifically,
    all former primary download sites have been preserved as fallback servers.
- Major menuconfig restructuring. For example (there is more):
  * Iptables' shared libs and kernel modules are dependent on a top level
    setting and can be deselected as  whole groups.
  * JamVM + classpath + ffi-sable can now be found in one place and are also
    interdependent.
  * Sub-menus in packages section
  * Major case first letters in package names
  * More and improved menu descriptions
  * Removed redundant library descriptions for iptables and classpath stuff by
    putting them in groups (see above).
  * Some changes in include structure ('source' commands in Config.in files),
    e.g. several libs' descriptions are now closer to their required top level
    applications.
- Fix firmware build: iptables binary was always included in image, even if not
  selected in menuconfig.
- Fix syslogd ring buffer size parameter leading to "Starting syslogd...failed";
  package version updated to 0.2.1
- Mini_fo package now listed as regular package, not "testing" anymore (no
  known problem reports)
- Tinyproxy package now listed as "testing" and "unfinished, experts only",
  because there is no web config yet.
- Obsolete package telefon removed (and "obsolete" section with it)
- Fix make target 'busybox-tools-clean', so busybox and makedevs are removed.
  This avoids an error when subsequently calling 'make precompiled' again.
- Fix mini_fo: use modprobe instead of insmod, because module path can differ
  with other box types. Package updated to 0.2.
- External IP can now be determined without calling external servers: Shell
  script /bin/get_ip prints external IP to stdout, giving the user a choice
  between three different methods:
    -w, --webcm    - webcm CGI handler method [default]
    -d, --dsld     - showdsldstat method (use only with kernel 2.6 firmwares)
    -e, --extquery - external site query method (ask whatismyip.org)
- Fix typo in make target 'kernel-clean'
- netsnmp.cgi is now executable, so the package can be web-configured.
- Fix typo in kernel/Config.in: DS_MODULE_crc-ccitt -> DS_MODULE_crc_ccitt.
  So menuconfig no longer complains about DS_MODULE_ppp_async.
- Suppress tar "lone zero block" warning when unpacking certain firmware images
- Don't be so restrictive on addon-names (e.g. openvpn-2.1.offline)

=== release ds-0.2.9_26-14.2 ===

- Fix fakeroot problems with chown (operation not permitted) on systems with
  newer glibc + coreutils combinations using *at(). The version has been
  promoted to fakeroot-1.5.10 and a new patch for *at() is available.
- Fix package virtualip-cgi and promote to version 0.4.1. There were bugs in
  the make script and in the download package itself.
- Fixed 'tar --exclude .svn' for dnsmasq, cifsmount and deco: option was not
  set for '*-package' targets (tar -c), but for unpack targets (tar -x).
- Remove "depends on DS_REPLACE_KERNEL" for iptables libs
- Checking for and cleaning up Subversion directories in build/modified
  before packing firmware image
- Updated copyright notices and acknowledgements
- Updated MOTD to reflect DS-Mod_26 series (different ASCII art) 
- Fix menuconfig warning concerning download toolchain
- Remove kernel-toolchain from target-toolchain prerequisites 
- Add gcc-4.1.2 to target toolchain menu after it has been fixed
- FUSE module got lost when removed KERNEL_MODULES_DIR
- Add mirror for download toolchain
- Added, fixed and enhanced a few help texts for menuconfig in Config.in and
  toolchain/Config.in.
- Introducing detailed help texts for menuconfig's shared library section.
  Unfortunately, this blows up libs/Config.in immensely - even more so, because
  sub-menus cannot get their own help texts for technical reasons. So, for menus
  containing several entries there is a lot of redundancy (i.e. repetition). The
  worst example is iptables, but there are others as well.
- Add xdelta3 (for binary diffs) to build tools
- Added and enhanced menuconfig help texts for several packages: screen,
  matrixtunnel, lynx, dropbear, wol-cgi, mini_fo, lua, callmonitor, samba, mc,
  cifsmount, deco.
- Set tinyproxy autostart to manual
- Bump 5050 Firmware to 04.31
- Add patch and modules for mppe-mppc
- Increase MOD_LIMIT default to 61440
- Extra patch for soft-float problem
- Delete some unnecessary files
- Forgot to add patches for gdb 6.3 and 6.4

=== patch ds-0.2.9_26-14.1-p2 ===

- add ubik2_boot_0, ubik2_boot_last to device.table (should fix 7050 Image)
- chmod +x for 250-orangebox.sh

=== patch ds-0.2.9_26-14.1-p1 ===

- hide depmod output
- fixed gdb-dirclean target
- fixed 120-rc.S-dev.patch for 2170,3131,3170,5050,7050
- added gdb-clean and gdb-dirclean targets
- reverted .phony targets (toolchain)
- fixes gdb build
- added 140-printk.patch for 7140 and 7141
- fixed deco (select DS_LIB_libncurses)
- fix typo in /root/usr/mww/cgi-bin/file.cgi
- add printk.patch for labors
- libraries are also having dependencies...

=== release ds-0.2.9_26-14.1 ===

- fixed jamvm patch (100-fix-trace.patch)
- fixed typo in deco.mk
- changed all library-dependencies in packages makefiles. Hopefully there will
  be no more sensless configure runs.
- add "--exclude .svn" to tar for all package-targets
- added gdb
- fixed deco.mk (forgot ncurses dependency, wrong path)
- removed ar7kernel-loader
- added evalzmaloader (thanks Enrik) http://www.wehavemorefun.de/fritzbox/EVA
- fix error with download and external toolchain:
  uClibc-libs are not in /root/lib
- updated download toolchain to 0.2
- add/remove patches for (non-working) uClibc-0.9.28.3/1
- fix 7170 Labor patches

=== release ds-0.2.9_26-14 ===

- fix precompiled toolchain download URL in toolchain/make/download-toolchain.mk
- add forgotten cpmaccfg in make/Config.in
- remove precompiled libs from root/lib
- Moving all files back to SVN project's trunk, because we have given up plans
  to merge the repository with Danisahne's Sourceforge repository one day
  (licencing issues concerning AVM copyrighted file patches). So we thought we
  could as well have our own trunk again.
- added download location for toolchain (thanks @ DPR)
- updated orangebox to 1.05
- fixed download toolchain
- disable tr069 if selected openssl
- updated orangebox to 1.02
- fix dropbear-sshd-only package
- try different binutil download locations (stable, developer) for target toolchain
- fixed rebuilding of a kernel with different modules
- small fixes in download-toolchain.mk, kernel/Config.in and make/deco/Config.in
- worked on precompiled toolchain
- fixed netsnmp-package
- added busybox patch
- updated 7050 to 04.31
- updated 7170_phone_labor to 6572
- added deco and tinyproxy
- prepare for downloadable toolchain (i386)
- added more packages to ./packages
- updated netsnmp-package to 0.2
- added tinyproxy-1.7.0 package
- added deco-39 package
- new patch fixes mc-4.5.0 build error on GNOME systems
- change in lzma.mk (dos2unix no more needed, thanks aholler)
- remove getcons (not working for me)
- fixed typo in menuconfig (uClibc-version)
- fixed busybox patch (440-httpd_chdir.patch)
- added fon_7150
- fixed openvpn-lzo_conf
- fixed download location of target toolchain binutils
- fixed openvpn-lzo.cgi
- fixed Config.in
- fixed pingtunnel/Config.in
- fixed jamvm/Config.in
- fixed target "openvpn-package" (exclude .svn directories)
- added ./packages/openvpn-2.1_rc2/
- updated openssl to 0.9.8e
- updated to openvpn-2.1_rc2-dsmod-0.6c
- removed ./dl/openvpn-2.1_rc2-dsmod-0.6b.tar.bz2
- fixed bug in modhosts (http://www.ip-phone-forum.de/showthread.php?t=128048)
- removed packages from dl/
- updated bird.mk
- added 2170, 3131, 3170 and 5050 (untested)
- added cifsmount (Package and kernel-patch)
- removed iptables from vpnc-script
- updated dropbear to 0.49
- added debootstrap, lynx and netsnmp (thanks to derheimi)
- added gcc-4.1.2 to toolchain-options
- fixed classpath, fuse, jamvm, ntfs
- updated callmonitor to 1.8.3
- other small changes
- added 7050
- updated openvpn to 2.1_rc2
- downgrade matrixssl to 1.7.3 (because of download-source)
- fixed ntfs-3g (2 fuse patches)
- more busybox-patches
- vpnc updated to 0.4.0
- updated backup/restore-cgi to Haserl 0.9.x syntax
- added matrixssl-1-8-3-open (lib)
- added matrixtunnel-0.2 (package)
- added Rudi-Shell
- minor fixes in bird.mk, readline.mk
- added fuse 2.6.3
- added ntfs-3g-1.0
- added classpath-0.93
- added libffi-sable-3325
- added jamvm-1.4.5
- minor fixes in pingtunnel.mk, streamripper.mk, tcpdump.mk and bird.mk
- added busybox-patch (tar -t segfault)
- added pingtunnel
- minor fixes in libpcap-patches, busybox-patches
- added tcpdump
- haserl updated to 0.9.16
- minor changes in file.cgi, modhosts
- added bird-1.0.11 (thanks to derheimi)
- added streamripper-1.61.17
- added libmad-0.15.1b 
- added Lua scripting language
- updated dnsmasq to version 2.38
- updated busybox-patches
- make target for uclibc-utils
- added backup/restore-cgi
- added 7140 30.04.30
- moved missing files into branch
- restructured SVN to hold branches (for a later merge into official svn)
- added haserl
- target toolchain update (binutils 2.17, gcc-4.1.1, uclibc-0.9.28.1) (edit: not working)
- added libpcap
- added knock-package
- updatet 7141 to 40.04.30
- added cpmaccfg-package
- added shadow000's webinterface mod (orangebox)
- fixed calllist for labor-firmwares (foncalls.patch)
- update to busybox-1.4.1
- cpmac-ioctl.patch
- kernel-printk.patch
- update to busybox-1.4.0
- added some kernel-modules (ntfs, cifs, smbfs)
- fixed W701V-webmenu patch
- more W701V fixes
- added some iptable-modules
- updated openvpn-Package to 0.6b
- updated .version
- fixed W701V patch
- added avm-ftpd-remove patch
- fixed modules_install with parallel make
- added unionfs 
- added libreadline
- initial checkin
