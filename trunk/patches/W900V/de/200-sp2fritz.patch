diff -burN usr/www/all/html/de/css/fb2.css usr/www/all/html/de/css/fb2.css
--- usr/www/all/html/de/css/fb2.css	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/css/fb2.css	2006-12-13 17:03:02.000000000 +0100
@@ -1,12 +1,11 @@
 body			{ font-family: Arial, Helvetica, sans-serif; color: #000000; margin: 15px 0px 0px 0px; 
 				 background-color: #fff1b1;
-				 background-image: url(../html/<? echo $var:lang ?>/images/bg_ramp.jpg);
+				 background-image: url(../html/de/images/bg_ramp.jpg);
 				 background-repeat: repeat-x;
 				 background-position: 0 0; }
 p, table, form, div, textarea, label, ul, ol, li
 				{ font-size: 13px; padding: 0px; margin: 0px; }
-input, select, button
-				{ font-size: 13px; }
+input, select	{ font-size: 13px; }
 div,ul,ol,li		{ text-align: left; }
 tr,td			{ padding: 1px 0px; margin: 0px; text-align: left; }
 img				{ border: 0px none; }
@@ -14,9 +13,9 @@
 a:visited		{ color: #003366; text-decoration: none; }
 a:active		{ color: #0066cc; text-decoration: underline; }
 a:hover		{ color: #0066cc; text-decoration: underline; }
-.fw_header	{ background: url("../html/<? echo $var:lang ?>/images/fw_header.gif") top left no-repeat; width: 806px; height: 102px; }
-.fw_bg_body	{ background: url("../html/<? echo $var:lang ?>/images/fw_bg_body.gif") top left; background-repeat: repeat-y; width: 806px; text-align: left; }
-.fw_footer		{ background: url("../html/<? echo $var:lang ?>/images/fw_footer.gif") top left no-repeat; width: 806px; height: 44px; }
+.fw_header	{ background: url("../html/de/images/fw_header.gif") top left no-repeat; width: 806px; height: 102px; }
+.fw_bg_body	{ background: url("../html/de/images/fw_bg_body.gif") top left; background-repeat: repeat-y; width: 806px; text-align: left; }
+.fw_footer		{ background: url("../html/de/images/fw_footer.gif") top left no-repeat; width: 806px; height: 44px; }
 table			{ border-collapse: collapse; }
 .fs10			{ font-size: 13px;}
 .fs9				{ font-size: 12px;}
@@ -33,13 +32,13 @@
 /* Menü per List */
 ul.LMenu 		{ width: 174px; margin-left: 16px; list-style-type: none;}
 ul.LMenu li.LMenuitem 
-				{ height: 25px; background-image: url("../html/<? echo $var:lang ?>/images/MenuL1.gif"); font-size: 12px; font-weight: bold; }
+				{ height: 25px; background-image: url("../html/de/images/MenuL1.gif"); font-size: 12px; font-weight: bold; }
 ul.LMenu li.LSubitem 
-				{ height: 25px; background-image: url("../html/<? echo $var:lang ?>/images/MenuL2.gif"); font-size: 12px; }
+				{ height: 25px; background-image: url("../html/de/images/MenuL2.gif"); font-size: 12px; }
 ul.LMenu li.LMenuitemaktiv 
-				{ height: 25px; background-image: url("../html/<? echo $var:lang ?>/images/Menuaktiv.gif"); font-size: 12px; font-weight: bold; }
+				{ height: 25px; background-image: url("../html/de/images/Menuaktiv.gif"); font-size: 12px; font-weight: bold; }
 ul.LMenu li.LSubitemaktiv 
-				{ height:25px; background-image: url("../html/<? echo $var:lang ?>/images/Menuaktiv.gif"); font-size: 12px; }
+				{ height:25px; background-image: url("../html/de/images/Menuaktiv.gif"); font-size: 12px; }
 ul.LMenu li.LMenuitem a, ul.LMenu li.LMenuitem img, ul.LMenu li.LMenuitemaktiv a, ul.LMenu li.LMenuitemaktiv img 
 				{ position: relative; top: 5px; left: 15px; }
 ul.LMenu li.LSubitem img, ul.LMenu li.LSubitem a, ul.LMenu li.LSubitemaktiv img, ul.LMenu li.LSubitemaktiv a 
@@ -55,11 +54,8 @@
 .b10 			{ padding-bottom: 10px; }
 .mb5 			{ margin-bottom: 5px; }
 .mb10 			{ margin-bottom: 10px; } 
-.mb20			{ margin-bottom: 20px; } 
 .mt10 			{ margin-top: 10px; } 
-.mt20 			{ margin-top: 20px; } 
 .ml25 			{ margin-left: 25px; }
-.fett			{ font-weight:bold; }
 .errorMessage { font-family: Arial, Helvetica, sans-serif; font-size: 13px; font-weight: bold; color: #CC0000; text-align: center;
 				 margin: 5px; padding: 2px; background-color: white; }
 .Dialogtitel 		{ font-weight: bold; }
@@ -81,14 +77,14 @@
 .tMinigrau 		{ height: 12px; font-size: 12px; background-color:#F8F8F8; }
 .tborder		{ background-color:#FFFFFF; border: 1px solid #C6C7BE; }
 .tborder th		{ background-color:#F8F8F8;}
-.rundlt			{ background: url("../html/<? echo $var:lang ?>/images/brd_lt.gif") top left no-repeat; }
-.rundrt			{ background: url("../html/<? echo $var:lang ?>/images/brd_rt.gif") top right no-repeat; }
-.rundlb			{ background: url("../html/<? echo $var:lang ?>/images/brd_lb.gif") bottom left no-repeat; }
-.rundrb			{ background: url("../html/<? echo $var:lang ?>/images/brd_rb.gif") bottom right no-repeat; }
-.ecklm			{ background: url("../html/<? echo $var:lang ?>/images/beck_lm.gif") top left no-repeat; }
-.eckrm			{ background: url("../html/<? echo $var:lang ?>/images/beck_rm.gif") top right no-repeat; }
-.ecklb 			{ background: url("../html/<? echo $var:lang ?>/images/beck_lb.gif") bottom left no-repeat; }
-.eckrb			{ background: url("../html/<? echo $var:lang ?>/images/beck_rb.gif") bottom right no-repeat; }
+.rundlt			{ background: url("../html/de/images/brd_lt.gif") top left no-repeat; }
+.rundrt			{ background: url("../html/de/images/brd_rt.gif") top right no-repeat; }
+.rundlb			{ background: url("../html/de/images/brd_lb.gif") bottom left no-repeat; }
+.rundrb			{ background: url("../html/de/images/brd_rb.gif") bottom right no-repeat; }
+.ecklm			{ background: url("../html/de/images/beck_lm.gif") top left no-repeat; }
+.eckrm			{ background: url("../html/de/images/beck_rm.gif") top right no-repeat; }
+.ecklb 			{ background: url("../html/de/images/beck_lb.gif") bottom left no-repeat; }
+.eckrb			{ background: url("../html/de/images/beck_rb.gif") bottom right no-repeat; }
 .backtitel		{ background-color: #e1f4ff; margin: 0px; padding: 0px; clear:left; }
 .backdialog		{ background-color: #fbfaf7; margin: 0px; padding: 0px; clear:left; }
 .backframe		{ background-color: #ffffff; margin: 0px; padding: 0px; clear:left; }
@@ -96,9 +92,9 @@
 .foretitel		{ text-align: center; font-weight: bold; padding: 5px 10px;}
 .foredialog		{ padding: 10px; }
 .forebuttons	{ text-align: right; padding: 7px 10px;}
-.tabs 			{ float: left; width: 100%; background: url("../html/<? echo $var:lang ?>/images/beck_bm.gif") bottom left repeat-x; }
-.tabs li 			{ list-style:none; float:left; background: #edede5 url("../html/<? echo $var:lang ?>/images/brd_rt.gif") right top no-repeat; margin: 0 2px 0 0;}
-.tabs a 		{ display:block; background: url("../html/<? echo $var:lang ?>/images/brd_lt.gif") left top no-repeat; padding: 3px 15px; }
+.tabs 			{ float: left; width: 100%; background: url("../html/de/images/beck_bm.gif") bottom left repeat-x; }
+.tabs li 			{ list-style:none; float:left; background: #edede5 url("../html/de/images/brd_rt.gif") right top no-repeat; margin: 0 2px 0 0;}
+.tabs a 		{ display:block; background: url("../html/de/images/brd_lt.gif") left top no-repeat; padding: 3px 15px; }
 .tabs a:link, .tabs a:visited
 				{ color: #000000; text-decoration: none; }
 .tabs a:hover, .tabs a:active
diff -burN usr/www/all/html/de/fon/buchsend.html usr/www/all/html/de/fon/buchsend.html
--- usr/www/all/html/de/fon/buchsend.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/buchsend.html	2006-12-13 17:03:02.000000000 +0100
@@ -30,7 +30,7 @@
 				<th class="c2"><? echo $var:Text4 ?></th>
 				<th class="c3"><? echo $var:Text5 ?></th>
 			</tr>
-<? if neq <? query telcfg:settings/HotDialEntry/count ?> 0 `
+<? if neq <? multiquerycount telcfg:settings/HotDialEntry/list ?> 0 `
 			<tr>
 				<td class="c1"><input type="checkbox" name="all" id="all" onclick="CheckAll()" /></td>
 				<td colspan="2"><label for="all"><? echo $var:Text8 ?></label></td>
@@ -43,7 +43,7 @@
 				<td class="c3"><span title="$2">$2</span></td>
 			</tr>
 ` ?>
-<? if eq <? query telcfg:settings/HotDialEntry/count ?> 0 `
+<? if eq <? multiquerycount telcfg:settings/HotDialEntry/list ?> 0 `
 			<tr class="Dialoglist"><td colspan=3 class="ac" style="font-size: 13px;">$var:Text9</td></tr>
 ` ?>
 		</table>
diff -burN usr/www/all/html/de/fon/dect.html usr/www/all/html/de/fon/dect.html
--- usr/www/all/html/de/fon/dect.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/dect.html	2007-07-11 22:32:04.000000000 +0200
@@ -6,12 +6,12 @@
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
  	<ul class="tabs">
  		<li class="tabs_on"><a href="javascript:uiDoCancel()"><? echo '$var:Text21' ?></a></li>
-<? if eq '$var:usePSTN' 1 `
  		<li><a href="javascript:uiDoDectMsn()"><? echo '$var:Text22' ?></a></li>
-` ?>
 <? if eq '<? query box:settings/expertmode/activated ?>' '1' `
  		<li><a href="javascript:uiDoListDect()"><? echo '$var:Text23' ?></a></li>
 ` ?>
+ 		<li><a href="javascript:uiDoSetupDect()"><? echo '$var:Text28' ?></a></li>
+ 		<li><a href="javascript:uiDoEditDect()"><? echo '$var:Text29' ?></a></li>
  	</ul>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<p class="mb10"><? echo $var:Text3 ?></p>
diff -burN usr/www/all/html/de/fon/dect.inc usr/www/all/html/de/fon/dect.inc
--- usr/www/all/html/de/fon/dect.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/dect.inc	2007-07-11 22:32:04.000000000 +0200
@@ -7,9 +7,11 @@
 <? setvariable var:Text7 'Festnetz:' ?>
 <? setvariable var:Text16 'Internet:' ?>
 <? setvariable var:Text17 'Keine Rufnummern eingerichtet' ?>
-<? setvariable var:Text18 'Sie können die Telefonbucheinträge an ein Mobilteil senden.' ?>
+<? setvariable var:Text18 'Übersicht' ?>
 <? setvariable var:Text19 'Telefonbuch senden' ?>
-<? setvariable var:Text20 'Geben Sie hier Ihre Festnetzrufnummern ein:' ?>
+<? setvariable var:Text20 'Geben Sie hier Ihre Festnetz ein:' ?>
 <? setvariable var:Text21 'Übersicht' ?>
-<? setvariable var:Text22 'Festnetzrufnummern' ?>
-<? setvariable var:Text23 'Interne Nummern' ?>
+<? setvariable var:Text22 'Sie können die Telefonbucheinträge an ein Mobilteil senden.' ?>
+<? setvariable var:Text23 'Intern' ?>
+<? setvariable var:Text28 'Zuordnung' ?>
+<? setvariable var:Text29 'Mobilteile' ?>
diff -burN usr/www/all/html/de/fon/dect.js usr/www/all/html/de/fon/dect.js
--- usr/www/all/html/de/fon/dect.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/dect.js	2007-07-11 22:32:04.000000000 +0200
@@ -64,8 +64,6 @@
 ` ?>
 ` ?>
 	jslDisplay("uiSendBook" , ("<? echo $var:handsetfound ?>" == "1"));
-	jslSetValue("uiPostPageMaster", "dect");
-	jslSetValue("uiPostParent", "dect");
 }
 function uiDoSave() {
 	var nr = jslGetValue("uiViewNr");
@@ -81,6 +79,18 @@
 function uiDoDectMsn() {
 	jslGoTo("", "dectmsn");
 }
+function uiDoSetupDect() {
+	jslGoTo("fon", "fonsetupdect");
+}
+function uiDoEditDect() {
+	jslGoTo("fon", "foneditdect");
+}
+function uiDoSetupIsdn() {
+	jslGoTo("fon", "fonsetupisdn");
+}
+function uiDoEditIsdn() {
+	jslGoTo("fon", "foneditisdn");
+}
 function uiDoHelp() {
 	jslPopHelp("hilfe_fon_dect");
 }
@@ -116,6 +126,7 @@
 	element.options[element.length]=eintrag;
 }
 function uiDoSendBook() {
+	jslSetValue("uiPostPageMaster", "dect");
 	jslGoTo("fon", "buchsend");
 }
 </script>
diff -burN usr/www/all/html/de/fon/dial.html usr/www/all/html/de/fon/dial.html
--- usr/www/all/html/de/fon/dial.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/dial.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,11 +1,7 @@
 <? include ../html/$var:lang/fon/dial.inc ?>
 <div id="content">
 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-<? if eq '$var:pagename' 'dialbuch' `
-		<? echo '$var:Text24' ?>
-` `
-		<? echo '$var:Text25' ?>
-` ?>		
+		<? echo '$var:Text23' ?>
 	</div></div></div></div></div></div>
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 	<ul class="tabs">
@@ -17,10 +13,11 @@
 			<li class="tabs_on"><a href="javascript:jslGoTo('','')"><? echo '$var:Text26' ?></a></li>
 		</ul>
 		<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-			<p class="mb10"><? echo $var:Text28 ?></p>
-			<p><input type="checkbox" id="uiViewClickToDial" name="uiViewClickToDial" onclick="OnClickClickToDial()">&nbsp;<label for="uiViewClickToDial"><? echo $var:Text20 ?></label></p>
+			<p class="mt10"><input type="checkbox" id="uiViewClickToDial" name="uiViewClickToDial" onclick="OnClickClickToDial()">&nbsp;<label for="uiViewClickToDial"><? echo $var:Text20 ?></label></p>
 			<div class="ml25">
-				<p><? echo $var:Text22 ?>&nbsp;<select id="uiViewPort" name="uiViewPort" class="Eingabefeld"></select></p>
+				<p class="mb5"><? echo $var:Text21 ?></p>
+				<p style="float: left;"><? echo $var:Text22 ?>&nbsp;<select id="uiViewPort" name="uiViewPort" class="Eingabefeld"></select></p>
+				<p class="ar"><input type="button" id="uiViewTest" onclick="uiDoTest()" value="<? echo $var:Text27 ?>" class="Pushbutton" disabled></p>
 			</div>
 		</div></div></div></div></div></div>
 		<? include ../html/$var:lang/home/rbb_applycancel.html ?>
diff -burN usr/www/all/html/de/fon/dial.inc usr/www/all/html/de/fon/dial.inc
--- usr/www/all/html/de/fon/dial.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/dial.inc	2006-12-13 17:03:02.000000000 +0100
@@ -1,14 +1,9 @@
 <? include ../html/$var:lang/global.inc ?>
 <? setvariable var:Text20 'Wählhilfe verwenden' ?>
+<? setvariable var:Text21 'Anwahl durch Anklicken der Rufnummern in der Anrufliste.' ?>
 <? setvariable var:Text22 'Verbindung mit dem Telefon' ?>
 <? setvariable var:Text23 'Telefonie' ?>
 <? setvariable var:Text24 'Telefonbuch' ?>
 <? setvariable var:Text25 'Anrufliste' ?>
 <? setvariable var:Text26 'Wählhilfe' ?>
 <? setvariable var:Text27 'Telefon testen' ?>
-<? setvariable var:Text28 'Die Wählhilfe unterstützt die Anwahl einer Rufnummer aus der Anrufliste und dem Telefonbuch durch einfaches Anklicken der Rufnummer oder des Namens.' ?>
-<? setvariable var:jstr0 'Nebenstelle FON 1' ?>
-<? setvariable var:jstr1 'Nebenstelle FON 2' ?>
-<? setvariable var:jstr2 'Nebenstelle FON 3' ?>
-<? setvariable var:jstr3 'DECT-Telefone' ?>
-<? setvariable var:jstr4 'Das Telefon sollte jetzt klingeln.' ?>
diff -burN usr/www/all/html/de/fon/dial.js usr/www/all/html/de/fon/dial.js
--- usr/www/all/html/de/fon/dial.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/dial.js	2007-07-11 22:32:04.000000000 +0200
@@ -1,5 +1,4 @@
 <!--		../fon/dial.js		-->
-<? include ../html/$var:lang/fon/dial.inc ?>
 <style type="text/css">
 <!--
 #content {width: 560px; margin: auto;}
@@ -8,19 +7,24 @@
 </style>
 <script type=text/javascript>
 <? include ../html/$var:lang/js/jsl.js ?>
-var g_Fon1 = "<? print $var:jstr0 ?>";
-var g_Fon2 = "<? print $var:jstr1 ?>";
-var g_Fon3 = "<? print $var:jstr2 ?>";
-var g_txtIsdn = "<? print $var:jstr3 ?>";
-var g_txtFonring = "<? print $var:jstr4 ?>";
+var g_Fon1 = "Nebenstelle FON 1";
+var g_Fon2 = "Nebenstelle FON 2";
+var g_txtIsdn = "ISDN/DECT-Telefone";
+var g_txtFonring = "Das Telefon sollte jetzt klingeln.";
 function uiDoOnLoad() {
 	jslSetChecked("uiViewClickToDial", jslGetValue("uiPostClickToDial") == "1");
+	var name = jslGetValue("uiPostFon0");
+	if (name.length == 0) name = g_Fon1;
+	jslAddOption("uiViewPort", "1", name, false);
+	name = jslGetValue("uiPostFon1");
+	if (name.length == 0) name = g_Fon2;
+	jslAddOption("uiViewPort", "2", name, false);
 	jslAddOption("uiViewPort", "50", g_txtIsdn, false);
 	for (var i=1; i<9; i++) {
 		name = jslGetValue("uiPostIsdnNumber"+i);
 		if (name.length > 0) jslAddOption("uiViewPort", "5"+i, jslGetValue("uiPostIsdn"+i), false);
 	}
-	jslSetSelection("uiViewPort", "50");
+	jslSetSelection("uiViewPort", "1");
 	if (jslGetValue("uiTestPort") != "") {
 		jslSetSelection("uiViewPort", jslGetValue("uiTestPort"));
 	} else {
@@ -62,5 +66,6 @@
 	jslFormSubmitEx("", "");
 }
 function OnClickClickToDial () {
+	jslSetEnabled("uiViewTest", jslGetChecked("uiViewClickToDial"));
 }
 </script>
diff -burN usr/www/all/html/de/fon/durchwahl.html usr/www/all/html/de/fon/durchwahl.html
--- usr/www/all/html/de/fon/durchwahl.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/durchwahl.html	2006-12-13 17:03:02.000000000 +0100
@@ -5,9 +5,10 @@
 	</div></div></div></div></div></div>
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 	<ul class="tabs">
-		<li><a href="javascript:jslGoTo('fon', 'rulall')"><? echo '$var:Text50' ?></a></li>
-		<li class="tabs_on"><a href="javascript:uiDoCancel()"><? echo '$var:Text51' ?></a></li>
+ 		<li><a href="javascript:jslGoTo('fon', 'rulall')">Rufumleitung</a></li>
+ 		<li class="tabs_on"><a href="javascript:uiDoCancel()">Durchwahl (Call Through)</a></li>
 	</ul>
+	
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<p class="mb10"><? echo $var:Text18 ?></p>
 		<p class="mb10"><input type="checkbox" id="uiViewAktiv" onclick="OnClickAktiv()">&nbsp;<label for="uiViewAktiv"><? echo $var:Text20 ?></label></p>
@@ -22,7 +23,8 @@
 	</div></div></div></div></div></div>
 	<div class="backdialog" id="uiDurchwahl" style="display:none"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<div>
-			<p class="mb10"><label for="uiViewCalls"><? echo $var:Text23 ?></label>&nbsp;<select class="Eingabefeld" size="1" id="uiViewCalls"></select></p>
+			<p class="mb10"><label for="uiViewCalls"><? echo $var:Text23 ?></label>&nbsp;<select class="Eingabefeld" size="1" id="uiViewCalls">
+			</select></p>
 		</div>
 		<p class="mb5" style="padding-top: 5px;"><b><? echo $var:Text24 ?></b></p>
 		<table style="margin-left: 25px" id="t1">
diff -burN usr/www/all/html/de/fon/durchwahl.inc usr/www/all/html/de/fon/durchwahl.inc
--- usr/www/all/html/de/fon/durchwahl.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/durchwahl.inc	2006-12-13 17:03:02.000000000 +0100
@@ -16,7 +16,7 @@
 <? setvariable var:Text15 'Direktruf' ?>
 <? setvariable var:Text16 'FON 2' ?>
 <? setvariable var:Text17 'Durchwahl (Call Through)' ?>
-<? setvariable var:Text18 'Mit der Durchwahl können Sie sich von unterwegs mit der FRITZ!Box verbinden und über eine andere Rufnummer (z.B. über das Internet) weitervermitteln lassen.' ?>
+<? setvariable var:Text18 'Mit der Durchwahlfunktion können ankommende Rufe durch die weitere Eingabe einer Zielrufnummer über die $var:BoxName weitervermittelt werden.' ?>
 <? setvariable var:Text20 'Durchwahl (Call Through) aktiv' ?>
 <? setvariable var:Text21 'definierte Durchwahl' ?>
 <? setvariable var:Text22 'Anlagenkopplung' ?>
@@ -47,5 +47,3 @@
 <? setvariable var:Text47 'Rufnummer für die Kopplung (MSN)' ?>
 <? setvariable var:Text48 'FON 3' ?>
 <? setvariable var:Text49 'FON 4' ?>
-<? setvariable var:Text50 'Rufumleitung' ?>
-<? setvariable var:Text51 'Durchwahl (Call Through)' ?>
diff -burN usr/www/all/html/de/fon/durchwahl.js usr/www/all/html/de/fon/durchwahl.js
--- usr/www/all/html/de/fon/durchwahl.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/durchwahl.js	2006-12-13 17:03:02.000000000 +0100
@@ -39,12 +39,6 @@
 var g_mldDeleteRul = "Wollen Sie diese Rufumleitung löschen ?";
 var g_preInternet	= "Internet: ";
 var g_preFestnetz	= "Festnetz: ";
-var g_txt_Sofort = "Sofort";
-var g_txt_Kurz = "Verzögert kurz";
-var g_txt_lang = "Verzögert lang";
-var g_txt_Busy = "bei Besetzt";
-var g_txt_NoNrDurchwahl	= "Bitte geben Sie im Feld 'Durchwahl für Anrufe..' eine Rufnummer an.";
-var g_txt_NoNrWeiterleiten	= "Bitte geben Sie im Feld 'Anrufe weiterleiten..' eine Rufnummer an.";
 var g_expertMode = "<? query box:settings/expertmode/activated ?>";
 var g_msn0 = "<? query telcfg:settings/MSN/MSN0 ?>";
 var g_msn1 = "<? query telcfg:settings/MSN/MSN1 ?>";
@@ -73,6 +67,14 @@
 	}
 	jslSetChecked("uiViewCtId", CallerID.length > 0); 
 	jslSetValue("uiViewRufnummer", CallerID);
+	jslDisplay("Art", true);
+	var msn = jslGetValue("uiPostCtMsn");
+	if (msn == "POTS") {
+		OnChangeOnArt(0);
+	} else {
+		if (msn.substr(0, 3) != "SIP") jslSetValue("uiViewArtNummer", msn);
+		OnChangeOnArt(1);
+	}
 	OnClickAktiv();
 	
 	OnChangeMode(aktiv == "2" ? 1:0);
@@ -83,7 +85,6 @@
 	jslCopyValue("uiViewAmt", "uiPostAmt");
 }
 function fillId(id) {
-<? if eq '$var:usePSTN' 1 `
 	// Auswahl mit den vorgegebenen MSN füllen
 	addMsn(id, g_msn0);
 	addMsn(id, g_msn1);
@@ -96,21 +97,16 @@
 	addMsn(id, g_msn8);
 	addMsn(id, g_msn9);
 	addOption(id, "POTS", g_preFestnetz+g_Pots);
-` ?>
 	
 	// Sip Zugänge anfügen
 <? multiquery sip:settings/sip/list(ID,displayname) '
 	if ("$3" != "") addOption(id, "SIP"+"$2", g_preInternet+jslGetValue("ui$1"));
 ' ?>
-<? if eq '$var:usePSTN' 0 `
-	addOption(id, "Leer", "");
-` ?>
+//	addOption(id, "Leer", "");
 }
 function uiDoSave() {
 	if (jslGetChecked("uiViewAktiv")) {
 		if (jslGetChecked("uiViewDurchwahl")) {
-			if ( jslGetValue( "uiViewCalls") == "Leer") { alert( g_txt_NoNrDurchwahl); return;}
-			if ( jslGetValue( "uiViewWeiterleiten") == "Leer") { alert( g_txt_NoNrWeiterleiten); return;}
 			var pin = jslGetValue("uiViewPin");
 			if ((pin!="****") && (pin.length != 4 || !valIsZahl(pin))) {alert(g_mldPin); return;}
 			if (jslGetChecked("uiViewCtId")) {
@@ -131,6 +127,12 @@
 				if (DispatchNummer == "") {alert(g_mldNoDispatchnummer); return;}
 				if (!isRufnummer(DispatchNummer)) {alert(g_mldErrDispatchnummer); return;}
 			}
+			if (jslGetChecked("uiViewArtAnalog")) {
+				jslSetValue("uiPostCtMsn", "POTS");
+			} else {
+				if (!valIsZahl(jslGetValue("uiViewArtNummer"))) {alert(g_mldDigit); return;}
+				jslCopyValue("uiPostCtMsn", "uiViewArtNummer");
+			}
 			var amt = jslGetValue("uiViewAmt");
 			if (!valIsZahl(amt)) {alert(g_mldAmtDigit); return;}
 			if (amt.length == 0) alert(g_mldNoAmt);
@@ -211,14 +213,9 @@
 			if (!g_InitMode0) {
 				g_InitMode0 = true;
 				fillId("uiViewCalls");
-<? if eq '$var:usePSTN' 0 `
-				jslSetSelection("uiViewCalls", "Leer");
-` ?>
 				jslSetSelection("uiViewCalls", jslGetValue("uiPostCtMsn"));
+		
 				fillId("uiViewWeiterleiten");
-<? if eq '$var:usePSTN' 0 `
-				jslSetSelection("uiViewWeiterleiten", "Leer");
-` ?>
 				jslSetSelection("uiViewWeiterleiten", jslGetValue("uiPostWeiterleiten"));
 			}
 			break;
@@ -273,10 +270,10 @@
 }
 function ActionDisplay(n) {
 	switch (n) {
-		case "0": return g_txt_Sofort;
-		case "1": return g_txt_Kurz;
-		case "2": return g_txt_lang;
-		case "3": return g_txt_Busy;
+		case "0": return "Sofort";
+		case "1": return "Verzögert kurz";
+		case "2": return "Verzögert lang";
+		case "3": return "bei Besetzt";
 	}
 	return n;
 }
diff -burN usr/www/all/html/de/fon/fon1dect.frm usr/www/all/html/de/fon/fon1dect.frm
--- usr/www/all/html/de/fon/fon1dect.frm	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/fon/fon1dect.frm	2007-04-07 10:17:16.000000000 +0200
@@ -0,0 +1,14 @@
+<input type="hidden" name="dect:settings/MSN<? echo $var:MsnNr ?>/MSN" value="<? query dect:settings/MSN<? echo $var:MsnNr ?>/MSN ?>" id="uiPostThisMSN">
+<input type="hidden" name="dect:settings/MSN<? echo $var:MsnNr ?>/CLIR" value="<? query dect:settings/MSN<? echo $var:MsnNr ?>/CLIR ?>" id="uiPostCLIR">
+<input type="hidden" name="dect:settings/MSN<? echo $var:MsnNr ?>/CallWaiting" value="<? query dect:settings/MSN<? echo $var:MsnNr ?>/CallWaiting ?>" id="uiPostCallWaiting">
+<input type="hidden" name="dect:settings/MSN<? echo $var:MsnNr ?>/BusyOnBusy" value="<? query dect:settings/MSN<? echo $var:MsnNr ?>/BusyOnBusy ?>" id="uiPostBusyOnBusy">
+<input type="hidden" name="dect:settings/MSN<? echo $var:MsnNr ?>/Handsets" value="<? query dect:settings/MSN<? echo $var:MsnNr ?>/Handsets ?>" id="uiPostHandsets">
+<? repeat [ 1 8 ] `
+<input type="hidden" name="telcfg:settings/NTHotDialList/Number$0" value="<? query telcfg:settings/NTHotDialList/Number$0 ?>" id="uiInt$0" disabled>` ?>
+<? multiquery sip:settings/sip/list(displayname) '
+<input type="hidden" name="sip:settings/$1/displayname" value="$2" id="ui$1" disabled>' ?>
+<? repeat [ 0 9 ] `
+<input type="hidden" name="telcfg:settings/MSN/MSN$0" value="<? query telcfg:settings/MSN/MSN$0 ?>" id="uiMsn$0" disabled>` ?>
+<input type="hidden" name="telcfg:settings/MSN/POTS" value="<? query telcfg:settings/MSN/POTS ?>" id="uiPots" disabled>
+<? repeat [ 0 4 ] `
+<input type="hidden" name="dect:settings/MSN$0/MSN" value="<? query dect:settings/MSN$0/MSN ?>" id="uiPostMSN$0" disabled>` ?>
diff -burN usr/www/all/html/de/fon/fon1dect.html usr/www/all/html/de/fon/fon1dect.html
--- usr/www/all/html/de/fon/fon1dect.html	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/fon/fon1dect.html	2007-04-05 21:48:50.000000000 +0200
@@ -0,0 +1,36 @@
+<? include ../html/$var:lang/fon/fon1dect.inc ?>
+<div id="content">
+ 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
+		<? echo $var:Text1 ?>
+	</div></div></div></div></div></div>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<p><? echo $var:Text2 ?><script type="text/javascript">document.write(uiIndexMSN("<? echo $var:MsnNr ?>"));</script></p>	 
+		<table>
+			<tr>
+				<td><select size="1" id="uiViewMSN" class="Eingabefeld" style="width:200px"></select></td>
+			</tr>
+		</table>
+		<p><? echo $var:Text3 ?></p>
+		<table>
+			<tr>
+				<td style="{text-align: left; width: 150px;"><input type="checkbox" name="uiViewCLIR" id="uiViewCLIR0">&nbsp;<label for="uiViewCLIR"><? echo $var:Text11 ?></label></td>
+				<td style="{text-align: left; width: 150px;"><input type="checkbox" name="uiViewCallWaiting" id="uiViewCallWaiting">&nbsp;<label for="uiViewCallWaiting"><? echo $var:Text12 ?></label></td>
+				<td style="{text-align: left; width: 150px;"><input type="checkbox" name="uiViewBusyOnBusy" id="uiViewBusyOnBusy">&nbsp;<label for="uiViewBusyOnBusy"><? echo $var:Text13 ?></label></td>
+			</tr>
+		</table>
+		<p><? echo $var:Text4 ?></p>
+		<table>
+			<tr>
+				<td style="{text-align: left; width: 150px;"><input type="checkbox" name="uiViewHandset0" id="uiViewHandset0" disabled>&nbsp;<label for="uiViewHandset0"><? echo $var:Text15 ?></label></td>
+				<td style="{text-align: left; width: 150px;"><input type="checkbox" name="uiViewHandset2" id="uiViewHandset2" disabled>&nbsp;<label for="uiViewHandset2"><? echo $var:Text17 ?></label></td>
+				<td style="{text-align: left; width: 150px;"><input type="checkbox" name="uiViewHandset4" id="uiViewHandset4" disabled>&nbsp;<label for="uiViewHandset4"><? echo $var:Text19 ?></label></td>
+			</tr>
+			<tr>
+				<td style="{text-align: left; width: 150px;"><input type="checkbox" name="uiViewHandset1" id="uiViewHandset1" disabled>&nbsp;<label for="uiViewHandset1"><? echo $var:Text16 ?></label></td>
+				<td style="{text-align: left; width: 150px;"><input type="checkbox" name="uiViewHandset3" id="uiViewHandset3" disabled>&nbsp;<label for="uiViewHandset3"><? echo $var:Text18 ?></label></td>
+				<td style="{text-align: left; width: 150px;"><input type="checkbox" name="uiViewHandset5" id="uiViewHandset5" disabled>&nbsp;<label for="uiViewHandset5"><? echo $var:Text20 ?></label></td>
+			</tr>
+		</table>
+	</div></div></div></div></div></div>
+	<? include ../html/$var:lang/home/rbb_applycancel.html ?>
+</div>
diff -burN usr/www/all/html/de/fon/fon1dect.inc usr/www/all/html/de/fon/fon1dect.inc
--- usr/www/all/html/de/fon/fon1dect.inc	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/fon/fon1dect.inc	2007-04-04 23:26:18.000000000 +0200
@@ -0,0 +1,14 @@
+<? include ../html/$var:lang/global.inc ?>
+<? setvariable var:Text1 'MSN zuordnen' ?>
+<? setvariable var:Text2 'MSN ' ?>
+<? setvariable var:Text3 'Leistungsmerkmale' ?>
+<? setvariable var:Text4 'Zuordnung' ?>
+<? setvariable var:Text11 'Anonym anrufen' ?>
+<? setvariable var:Text12 'Anklopfen' ?>
+<? setvariable var:Text13 'MSN besetzt' ?>
+<? setvariable var:Text15 'Mobilteil 1' ?>
+<? setvariable var:Text16 'Mobilteil 2' ?>
+<? setvariable var:Text17 'Mobilteil 3' ?>
+<? setvariable var:Text18 'Mobilteil 4' ?>
+<? setvariable var:Text19 'Mobilteil 5' ?>
+<? setvariable var:Text20 'Mobilteil 6' ?>
diff -burN usr/www/all/html/de/fon/fon1dect.js usr/www/all/html/de/fon/fon1dect.js
--- usr/www/all/html/de/fon/fon1dect.js	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/fon/fon1dect.js	2007-04-07 10:17:10.000000000 +0200
@@ -0,0 +1,173 @@
+<!--		../fon/fon1dect.js		-->
+<style type="text/css">
+<!--
+#content {width: 540px; margin: auto;}
+td {padding: 5px 5px;}
+th {padding: 5px 5px;}
+-->
+</style>
+<script type="text/javascript">
+<? include ../html/$var:lang/js/val.js ?>
+<? include ../html/$var:lang/js/jsl.js ?>
+var g_txt_Festnetz	= "Festnetz: ";
+var g_txt_Internet	= "Internet: ";
+var g_txt_Intern		= "Intern: ";
+<? multiquery sip:settings/sip/list '
+var g_$1;
+' ?>
+var g_msn0;
+var g_msn1;
+var g_msn2;
+var g_msn3;
+var g_msn4;
+var g_msn5;
+var g_msn6;
+var g_msn7;
+var g_msn8;
+var g_msn9;
+var g_pots;
+var g_int1;
+var g_int2;
+var g_int3;
+var g_int4;
+var g_int5;
+var g_int6;
+var g_int7;
+var g_int8;
+var g_MsnGesperrt = new Array(0, 0, 0, 0, 0);
+var g_Index = new Array("A", "B", "C", "D", "E");
+var g_Handsets;
+var g_MsnNr;
+var g_OptsCount = 0;
+var g_mldNoNummer = "Geben Sie bitte eine Rufnummer an.";
+var g_mldNoHandset = "Wählen Sie bitte mind. ein Mobilteil aus.";
+var g_mldNoOpts = "Es sind bereits alle verfügbaren Rufnummern zugeordnet.";
+function uiDoOnLoad() {
+	g_Handsets = 0;
+
+<? multiquery dect:settings/Handset/list(Subscribed) `
+<? if eq $2 1 `
+	 g_Handsets |= (1<<$0);
+` ?>
+` ?>
+
+<? multiquery sip:settings/sip/list '
+	g_$1 = jslGetValue("ui$1");
+' ?>
+	g_msn0 = jslGetValue("uiMsn0");
+	g_msn1 = jslGetValue("uiMsn1");
+	g_msn2 = jslGetValue("uiMsn2");
+	g_msn3 = jslGetValue("uiMsn3");
+	g_msn4 = jslGetValue("uiMsn4");
+	g_msn5 = jslGetValue("uiMsn5");
+	g_msn6 = jslGetValue("uiMsn6");
+	g_msn7 = jslGetValue("uiMsn7");
+	g_msn8 = jslGetValue("uiMsn8");
+	g_msn9 = jslGetValue("uiMsn9");
+	g_pots = jslGetValue("uiPots");
+	g_int1 = jslGetValue("uiInt1");
+	g_int2 = jslGetValue("uiInt2");
+	g_int3 = jslGetValue("uiInt3");
+	g_int4 = jslGetValue("uiInt4");
+	g_int5 = jslGetValue("uiInt5");
+	g_int6 = jslGetValue("uiInt6");
+	g_int7 = jslGetValue("uiInt7");
+	g_int8 = jslGetValue("uiInt8");
+
+	fillId("uiViewMSN", jslGetValue("uiPostThisMSN"));
+	if (g_OptsCount == 1) {alert(g_mldNoOpts); return;}
+
+	jslSetChecked("uiViewCLIR", jslGetValue("uiPostCLIR") == "1");
+	jslSetChecked("uiViewCallWaiting", jslGetValue("uiPostCallWaiting") == "1");
+	jslSetChecked("uiViewBusyOnBusy", jslGetValue("uiPostBusyOnBusy") == "1");
+
+	var bits = jslGetValue("uiPostHandsets");
+	for (var j=0; j<6; j++) {
+		if ((g_Handsets & (1<<j)) != 0)	{
+			jslEnable("uiViewHandset"+j);
+		} 
+		jslSetChecked("uiViewHandset"+j, (bits & g_Handsets & (1<<j)) != 0);
+	}
+}
+function uiDoSave() {
+	if (jslGetValue("uiViewMSN") == "Leer") {alert(g_mldNoNummer); return;}
+
+	var bits=0
+	for (var j=0; j<6; j++) {
+		if (jslGetChecked("uiViewHandset"+j)) bits |= 1<<j;
+	}
+	if (bits == 0) {alert(g_mldNoHandset); return;}
+
+	jslCopyValue("uiPostThisMSN", "uiViewMSN");
+	jslSetValue("uiPostHandsets", bits);
+
+	jslSetValue("uiPostCLIR", jslGetChecked("uiViewCLIR") ? "1":"0");
+	jslSetValue("uiPostCallWaiting", jslGetChecked("uiViewCallWaiting") ? "1":"0");
+	jslSetValue("uiPostBusyOnBusy", jslGetChecked("uiViewBusyOnBusy") ? "1":"0");
+
+	jslSubmitFormEx("fon", jslGetValue("uiPostPageMaster"));
+}
+function uiDoCancel() {
+	jslGoTo("fon", jslGetValue("uiPostPageMaster"));
+}
+function uiDoHelp() {
+	jslPopHelp("hilfe_fon_fon1dect");
+}
+function isFrei(msn) {
+	for (var i=0; i<5; i++) {
+		if (i != g_MsnNr && msn == jslGetValue("uiPostMSN"+i)) return false;
+	}
+	return true;
+} 
+function fillId(id, nr) {
+<? if eq '$var:usePSTN' 1 `
+	// Auswahl mit den vorgegebenen MSN füllen und Eintrag msn selektieren
+	addMsn(id, g_msn0, g_txt_Festnetz);
+	addMsn(id, g_msn1, g_txt_Festnetz);
+	addMsn(id, g_msn2, g_txt_Festnetz);
+	addMsn(id, g_msn3, g_txt_Festnetz);
+	addMsn(id, g_msn4, g_txt_Festnetz);
+	addMsn(id, g_msn5, g_txt_Festnetz);
+	addMsn(id, g_msn6, g_txt_Festnetz);
+	addMsn(id, g_msn7, g_txt_Festnetz);
+	addMsn(id, g_msn8, g_txt_Festnetz);
+	addMsn(id, g_msn9, g_txt_Festnetz);
+	addMsn(id, g_pots, g_txt_Festnetz);
+` ?> 
+	// Sip Zugänge anfügen
+<? multiquery sip:settings/sip/list(ID,displayname) '
+	if ("$3" != "" && isFrei("$3")) addOption(id, "$3", g_txt_Internet+g_$1);
+' ?>
+	// Interne Nummern anfügen
+	addMsn(id, g_int1, g_txt_Intern);
+	addMsn(id, g_int2, g_txt_Intern);
+	addMsn(id, g_int3, g_txt_Intern);
+	addMsn(id, g_int4, g_txt_Intern);
+	addMsn(id, g_int5, g_txt_Intern);
+	addMsn(id, g_int6, g_txt_Intern);
+	addMsn(id, g_int7, g_txt_Intern);
+	addMsn(id, g_int8, g_txt_Intern);
+
+	addOption(id, "Leer", "");
+	jslSetSelection(id, nr=="" ? "Leer":nr);
+}
+function addMsn (id, msn, prefix) {
+	if (msn != "" && isFrei(msn)) addOption(id, msn, prefix+msn);
+}
+function addOption (id, val, text) {
+	var element;
+	element = document.getElementById(id);
+	if (element == null) return;
+//	var i=0;
+//	for (i=0; i<element.length; i++) {
+//		if (element.options[i].value == val) return; // Wert schon vorhanden
+//	}
+	g_OptsCount++;
+	var eintrag = new Option(text, val, false, false);
+	element.options[element.length]=eintrag;
+}
+function uiIndexMSN(nr) {
+	g_MsnNr = nr;
+	return g_Index[Number(nr)];
+}
+</script>
diff -burN usr/www/all/html/de/fon/fon1.frm usr/www/all/html/de/fon/fon1.frm
--- usr/www/all/html/de/fon/fon1.frm	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/fon1.frm	2006-12-13 17:03:02.000000000 +0100
@@ -1,4 +1,4 @@
-<input type="hidden" name="var:FonNr" value="<? echo $var:FonNr ?>" id="uiPostFonNr">
+<input type="hidden" name="var:FonNr" value="<? echo $var:FonNr ?>">
 <input type="hidden" name="telcfg:settings/MSN/Port<? echo $var:FonNr ?>/Name" value="<? query telcfg:settings/MSN/Port<? echo $var:FonNr ?>/Name ?>" id="uiPostName0">
 <input type="hidden" name="telcfg:settings/MSN/Port<? echo $var:FonNr ?>/AllIncomingCalls" value="<? query telcfg:settings/MSN/Port<? echo $var:FonNr ?>/AllIncomingCalls ?>" id="uiPostAll0">
 <input type="hidden" name="telcfg:settings/MSN/Port<? echo $var:FonNr ?>/MSN0" value="<? query telcfg:settings/MSN/Port<? echo $var:FonNr ?>/MSN0 ?>" id="uiPostNr00">
diff -burN usr/www/all/html/de/fon/fon1.html usr/www/all/html/de/fon/fon1.html
--- usr/www/all/html/de/fon/fon1.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/fon1.html	2006-12-13 17:03:02.000000000 +0100
@@ -5,11 +5,9 @@
 	</div></div></div></div></div></div>
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 	<ul class="tabs">
-		<li class="tabs_on"><a href="javascript:uiDoFon1()"><? echo '$var:Text10' ?></a></li>
-		<li><a href="javascript:uiDoKlingelsperre()"><? echo '$var:Text11' ?></a></li>
-<? if eq <? query box:settings/expertmode/activated ?> 1 `
-		<li><a href="javascript:uiDoMerkmale()"><? echo '$var:Text9' ?></a></li>
-` ?>
+ 		<li class="tabs_on"><a href="javascript:uiDoFon1()">Nebenstelle</a></li>
+ 		<li><a href="javascript:uiDoKlingelsperre()">Klingelsperre</a></li>
+ 		<li><a href="javascript:uiDoMerkmale()">Merkmale der Nebenstelle</a></li>
 	</ul>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<p><? echo $var:Text2 ?></p>
@@ -22,10 +20,10 @@
 			<p><input type="checkbox" id="uiViewGlobal0">&nbsp;<label for="uiViewGlobal0"><? echo $var:Text4 ?></label></p>
 			<p style="padding-top:10px"><label for="uiViewN00"><? echo $var:Text5 ?></label></p>
 			<p class="combo">
-				<select size="1" id="uiViewN00" class="Eingabefeld" style="width:200px" onchange="OnChangeOutgoingNo(id)"></select>
+				<select size="1" id="uiViewN00" class="Eingabefeld" style="width:200px"></select>
 			</p>
 			<p style="padding-top:10px"><label for="uiViewN01"><? echo $var:Text6 ?></label></p>
-			<table id="uiViewTableIncomingNo">
+			<table>
 				<tr>
 					<td style="vertical-align:top">
 						<p class="combo">
diff -burN usr/www/all/html/de/fon/fon1.inc usr/www/all/html/de/fon/fon1.inc
--- usr/www/all/html/de/fon/fon1.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/fon1.inc	2006-12-13 17:03:02.000000000 +0100
@@ -7,8 +7,4 @@
 <? setvariable var:Text6 'zusätzliche Rufnummern' ?>
 <? setvariable var:Text7 'Weitere Leistungsmerkmale' ?>
 <? setvariable var:Text8 'Unter Merkmale der Nebenstelle können Sie zusätzliche Leistungsmerkmale aktivieren.' ?>
-<? setvariable var:Text9 'Merkmale des Telefoniegerätes' ?>
-<? setvariable var:Text10 'Nebenstelle' ?>
-<? setvariable var:Text11 'Klingelsperre' ?>
-<? setvariable var:Text12 '<Rufnummer bei Ausgehende Anrufe>' ?>
-<? setvariable var:Text13 '(ausgehende Rufnummer)' ?>
+<? setvariable var:Text9 'Merkmale der Nebenstelle' ?>
diff -burN usr/www/all/html/de/fon/fon1isdn.frm usr/www/all/html/de/fon/fon1isdn.frm
--- usr/www/all/html/de/fon/fon1isdn.frm	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/fon1isdn.frm	2006-12-13 17:03:02.000000000 +0100
@@ -1,16 +1,5 @@
-<input type="hidden" name="var:FonNr" value="<? echo $var:FonNr ?>" id="uiPostFonNr">
-<input type="hidden" name="var:IsdnNr" value="<? echo $var:IsdnNr ?>" id="uiPostIsdnNr">
-<input type="hidden" name="var:parent" value="<? echo $var:parent ?>" id="uiPostParent">
-<input type="hidden" name="var:ShowIsdnDefault" value="<? echo $var:ShowIsdnDefault ?>" id="uiShowIsdnDefault">
-<? repeat [ 1 8 ] `
-<input type="hidden" name="telcfg:settings/NTHotDialList/Name$0" value="<? query telcfg:settings/NTHotDialList/Name$0 ?>" id="uiPostName$0" disabled>
-<input type="hidden" name="telcfg:settings/NTHotDialList/Number$0" value="<? query telcfg:settings/NTHotDialList/Number$0 ?>" id="uiPostNummer$0" disabled>
-<input type="hidden" name="telcfg:settings/NTHotDialList/Type$0" value="<? query telcfg:settings/NTHotDialList/Type$0 ?>" id="uiPostIsdnType$0" disabled>
-` ?>
+<input type="hidden" name="telcfg:settings/NTHotDialList/Name<? echo $var:IsdnNr ?>" value="<? query telcfg:settings/NTHotDialList/Name<? echo $var:IsdnNr ?> ?>" id="uiPostName">
+<input type="hidden" name="telcfg:settings/NTHotDialList/Number<? echo $var:IsdnNr ?>" value="<? query telcfg:settings/NTHotDialList/Number<? echo $var:IsdnNr ?> ?>" id="uiPostRufnummer">
 <? repeat [ 0 9 ] `
 <input type="hidden" name="telcfg:settings/MSN/MSN$0" value="<? query telcfg:settings/MSN/MSN$0 ?>" id="uiMsn$0" disabled>` ?>
 <input type="hidden" name="telcfg:settings/MSN/POTS" value="<? query telcfg:settings/MSN/POTS ?>" id="uiPots" disabled>
-<? repeat [ 0 2 ] `
-<input type="hidden" name="telcfg:settings/FaxModem$0/Number" value="<? query telcfg:settings/FaxModem$0/Number ?>" id="uiPostIsdnFaxNumber$0" disabled>
-<input type="hidden" name="telcfg:settings/FaxModem$0/Type" value="<? query telcfg:settings/FaxModem$0/Type ?>" id="uiPostIsdnFaxType$0" disabled>
-` ?>
diff -burN usr/www/all/html/de/fon/fon1isdn.html usr/www/all/html/de/fon/fon1isdn.html
--- usr/www/all/html/de/fon/fon1isdn.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/fon1isdn.html	2006-12-13 17:03:02.000000000 +0100
@@ -3,14 +3,6 @@
  	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
 		<? echo $var:Text1 ?>
 	</div></div></div></div></div></div>
-<? if eq '$var:parent' 'fondevices' `
-	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
-	<ul class="tabs">
-		<li class="tabs_on"><a href="javascript:uiDoRefresh()"><? echo '$var:Text5' ?></a></li>
-		<li><a href="javascript:uiDoIsdn()"><? echo '$var:Text6' ?></a></li>
-		<li><a href="javascript:uiDoOptionen()"><? echo '$var:Text7' ?></a></li>
-	</ul>
-` ?>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<table>
 			<tr>
diff -burN usr/www/all/html/de/fon/fon1isdn.inc usr/www/all/html/de/fon/fon1isdn.inc
--- usr/www/all/html/de/fon/fon1isdn.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/fon1isdn.inc	2006-12-13 17:03:02.000000000 +0100
@@ -1,14 +1,6 @@
 <? include ../html/$var:lang/global.inc ?>
-<? if eq '$var:parent' 'fondevices' `
-<? setvariable var:Text1 'ISDN-Endgeräte' ?>
-` `
 <? setvariable var:Text1 'Interne Nummer' ?>
-` ?>
 <? setvariable var:Text2 'Nummer' ?>
 <? setvariable var:Text3 '5' ?>
 <? setvariable var:Text4 'Bezeichnung' ?>
-<? setvariable var:Text5 'Rufnummer des Endgerätes' ?>
-<? setvariable var:Text6 'FON S0' ?>
-<? setvariable var:Text7 'Leistungsmerkmale' ?>
-<? setvariable var:Text8 '' ?>
-<? setvariable var:Text9 '' ?>
+<? setvariable var:Text5 'Rufnummer des Telefons' ?>
diff -burN usr/www/all/html/de/fon/fon1isdn.js usr/www/all/html/de/fon/fon1isdn.js
--- usr/www/all/html/de/fon/fon1isdn.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/fon1isdn.js	2006-12-13 17:03:02.000000000 +0100
@@ -10,39 +10,22 @@
 <? include ../html/$var:lang/js/jsl.js ?>
 var g_mldNoName = "Geben Sie bitte eine Bezeichnung an.";
 var g_mldNoNummer = "Geben Sie bitte eine Rufnummer an.";
-var g_mldNoFaxListSpace = "ACHTUNG! Keine Rufnummerzuweisung möglich.\x0aDie Liste der zuweisbaren Rufnummern ist voll.";
-var g_mldAssignErr1 = "ACHTUNG !! Unzulässige Rufnummernzuweisung!\x0aSie wollen unzulässigerweise ihrem Faxgerät eine Rufnummer zuweisen, die schon von einem Telefon benutzt wird.";
-var g_mldAssignErr2 = "ACHTUNG !! Unzulässige Rufnummernzuweisung!\x0aSie wollen unzulässigerweise ihrem Telefon eine Rufnummer zuweisen, die schon von einem Faxgerät benutzt wird.";
-var g_txt_TkAnlage = "ISDN-Telefonanlage";
-var g_mld_TkAnlageforbidden = "ACHTUNG! Unzulässige Bezeichung!\x0aDer Begriff 'ISDN-Telefonanlage' ist reservierter Begriff, der anderweitig nicht verwendet werden darf.\x0aBitte geben Sie eine andere Bezeichnung ein.";
 function uiDoOnLoad() {
-	fillId("uiViewRufnummer", jslGetValue("uiPostNummer"+jslGetValue("uiPostIsdnNr")));
-	jslCopyValue("uiViewName", "uiPostName"+jslGetValue("uiPostIsdnNr"));
+	fillId("uiViewRufnummer", jslGetValue("uiPostRufnummer"));
+	jslCopyValue("uiViewName", "uiPostName");
 }
 function uiDoSave() {
 	if (jslGetValue("uiViewName") == "") {alert(g_mldNoName); return;}
-	if (jslGetValue("uiViewName") == g_txt_TkAnlage) {alert(g_mld_TkAnlageforbidden); return;}
 	if (jslGetValue("uiViewRufnummer") == "") {alert(g_mldNoNummer); return;}
-	jslCopyValue("uiPostName"+jslGetValue("uiPostIsdnNr"), "uiViewName");
-	jslCopyValue("uiPostNummer"+jslGetValue("uiPostIsdnNr"), "uiViewRufnummer");
-	jslEnable("uiPostName"+jslGetValue("uiPostIsdnNr"));
-	jslEnable("uiPostNummer"+jslGetValue("uiPostIsdnNr"));
-	jslSubmitFormEx("fon", jslGetValue("uiPostParent"));
+	jslCopyValue("uiPostName", "uiViewName");
+	jslCopyValue("uiPostRufnummer", "uiViewRufnummer");
+	jslSubmitFormEx("fon", jslGetValue("uiPostPageMaster"));
 }
 function uiDoCancel() {
-	jslGoTo("fon", jslGetValue("uiPostParent"));
-}
-function uiDoRefresh() {
-	jslGoTo("", "");
-}
-function uiDoIsdn() {
-	jslGoTo("fon", "isdn");
-}
-function uiDoOptionen() {
-	jslGoTo("fon", "isdnoptionen");
+	jslGoTo("fon", jslGetValue("uiPostPageMaster"));
 }
 function uiDoHelp() {
-<? if eq '$var:parent' 'fonlistdect' `
+<? if eq '$var:pagemaster' 'fonlistdect' `
 	jslPopHelp("hilfe_fon_dect_fon1isdn");
 ` `
 	jslPopHelp("hilfe_fon_fon1isdn");
@@ -50,11 +33,9 @@
 }
 function fillId(id, nr) {
 	// Auswahl mit den vorgegebenen MSN füllen und Eintrag msn selektieren
-<? if eq '$var:usePSTN' 1 `
 <? repeat [ 0 9 ] `
-	addMsn(id, jslGetValue("uiMsn$10"));` ?>
+	addMsn(id, jslGetValue("uiMsn$0"));` ?>
 	addMsn(id, jslGetValue("uiPots"));
-` ?>
 	// Sip Zugänge anfügen
 <? multiquery sip:settings/sip/list(displayname) '
 	addMsn(id, "$2");' ?>
@@ -76,42 +57,4 @@
 	var eintrag = new Option(val, val, false, false);
 	element.options[element.length]=eintrag;
 }
-function inFaxList( number) {
-	if (number == "") return false
-	for(var i=0;i<3;i++) {
-		if ((jslGetValue( "uiPostIsdnFaxType"+i) == "0") && 
-			(jslGetValue( "uiPostIsdnFaxNumber"+i) == number))
-			return true;
-	}
-	return false;
-}
-function allocationExists( number) {
-	if ( number =="") return false;
-	for(var i=1;i<9;i++) {
-		if ( jslGetValue( "uiPostNummer"+i) == number) return true;
-	}
-	return false;
-}
-function getCurrentFreeFaxPos( oldNumber) {
-	var rc = "";
-	for(var i=0;i<3;i++) {
-		if (jslGetValue( "uiPostIsdnFaxNumber"+i) == oldNumber) {
-			var bNoFurtherNo = true;
-			for( var j=1;j<9;j++) {
-				if ((jslGetValue( "uiPostNummer"+j) == oldNumber) &&
-					(jslGetValue("uiPostIsdnNr") != j)) {
-					bNoFurtherNo =false;
-					break;
-				}
-			}
-			if ( bNoFurtherNo == true) {
-				return i;
-			}
-		}
-		if (jslGetValue( "uiPostIsdnFaxNumber"+i) == "") {
-			return i;
-		}
-	}
-	return "";
-}
 </script>
diff -burN usr/www/all/html/de/fon/fon1.js usr/www/all/html/de/fon/fon1.js
--- usr/www/all/html/de/fon/fon1.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/fon1.js	2006-12-13 17:03:02.000000000 +0100
@@ -11,7 +11,7 @@
 <? include ../html/$var:lang/js/jsl.js ?>
 var g_txt_Festnetz		= "Festnetz: ";
 var g_txt_Nebenstelle	= "Nebenstelle FON";
-var g_txt_Titel 	= "Nebenstelle FON ";
+var g_txt_Titel 			= "Nebenstelle Fon ";
 <? multiquery sip:settings/sip/list '
 var g_$1;
 ' ?>
@@ -25,10 +25,6 @@
 var g_msn7;
 var g_msn8;
 var g_msn9;
-var g_mldNoNotation = "Es müssen für Ihr Telefonie-Endgerät eine Bezeichnung vergeben werden !!";
-var g_txt_TkAnlage = "ISDN-Telefonanlage";
-var g_mld_TkAnlageforbidden = "ACHTUNG! Unzulässige Bezeichung!\x0aDer Begriff 'ISDN-Telefonanlage' ist reservierter Begriff, der anderweitig nicht verwendet werden darf.\x0aBitte geben Sie eine andere Bezeichnung ein.";
-var g_txt_OldDefault = "Fon ";		// nicht übersetzen
 function uiDoOnLoad() {
 <? multiquery sip:settings/sip/list '
 	g_$1 = jslGetValue("ui$1");
@@ -56,7 +52,7 @@
 	jslSetChecked("uiViewGlobal0", jslGetValue("uiPostAll0") == "1");
 }
 function uiDoSave() {
-	uiDoSaveGo(jslGetValue("uiPostPageMaster"));
+	uiDoSaveGo("fonlist");
 }
 function uiDoFon1() {
 	jslGoTo("fon", "fon1");
@@ -85,7 +81,7 @@
 	jslSubmitFormEx("fon", page);
 }
 function uiDoCancel() {
-	jslGoTo("fon", jslGetValue("uiPostPageMaster"));
+	jslGoTo("fon", "fonlist");
 }
 function uiDoHelp() {
 	jslPopHelp("hilfe_fon_nebenstelle");
@@ -122,12 +118,6 @@
 	var eintrag = new Option(text, val, false, false);
 	element.options[element.length]=eintrag;
 }
-function getSelectedOptionText( id) {
-	var element;
-	element = document.getElementById(id);
-	if (element == null) return;
-	return element.options[element.selectedIndex].text;
-}
 function isFilled(id) {
 	var element = document.getElementById(id);
 	if (element == null) return false;
@@ -150,14 +140,6 @@
 		case "uiViewN08": enableSelect("09"); break;
 	}
 }
-function OnChangeOutgoingNo(id) {
-	if (getSelectedOptionText("uiViewN00") != "") {
-		jslSetSpanText( "spanOutgoingNo", getSelectedOptionText("uiViewN00"));
-		jslDisplay( "idShowOutgoingNo", true);
-	} else {
-		jslDisplay( "idShowOutgoingNo", false);
-	}
-}
 function SetChecked (postid, viewid) {
 	jslSetChecked(viewid, jslGetValue(postid) != "0");
 }
diff -burN usr/www/all/html/de/fon/fonbuch1.html usr/www/all/html/de/fon/fonbuch1.html
--- usr/www/all/html/de/fon/fonbuch1.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/fonbuch1.html	2006-12-13 17:03:02.000000000 +0100
@@ -6,25 +6,25 @@
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<table style="margin:auto">
 			<tr>
-				<td class="c1"><label for="uiViewName"><? echo $var:Text2 ?></label></td>
+				<td class="c1"><label for="uiViewName">Name</label></td>
 				<td><input type="text" size="21" maxlength="19" id="uiViewName" class="Eingabefeld"></td>
 			</tr>
 			<tr>
-				<td class="c1"><label for="uiViewNumber"><? echo $var:Text3 ?></label></td>
+				<td class="c1"><label for="uiViewNumber">Rufnummer</label></td>
 				<td><input type="text" size="32" maxlength="48" id="uiViewNumber" class="Eingabefeld"></td>
 			</tr>
 			<tr>
-				<td class="c1"><label for="uiViewCode"><? echo $var:Text4 ?></label></td>
-				<td><? echo $var:Text5 ?><input type="text" size="3" maxlength="2" id="uiViewCode" class="Eingabefeld"></td>
+				<td class="c1"><label for="uiViewCode">Kurzwahl</label></td>
+				<td>**7 <input type="text" size="3" maxlength="2" id="uiViewCode" class="Eingabefeld"></td>
 			</tr>
 			<tr>
-				<td class="c1"><label for="uiViewVanity"><? echo $var:Text6 ?></label></td>
-				<td><? echo $var:Text7 ?><input type="text" size="9" maxlength="8" id="uiViewVanity" class="Eingabefeld"></td>
+				<td class="c1"><label for="uiViewVanity">Vanity</label></td>
+				<td>**8 <input type="text" size="9" maxlength="8" id="uiViewVanity" class="Eingabefeld"></td>
 			</tr>
 			<tr>
-				<td colspan="2">
-					<p class="mt10"><input type="checkbox" id="uiViewVIP">&nbsp;<label for="uiViewVIP"><? echo $var:Text8 ?></label></p>
-					<p class="ml25"><? echo $var:Text9 ?></p>
+				<td colspan=2>
+					<p class="mt10"><input type="checkbox" id="uiViewVIP">&nbsp;<label for="uiViewVIP">Wichtige Person</label></p>
+					<p class="ml25">Sie sind auch bei aktivierter Klingelsperre für diese Person erreichbar.</p>
 				</td>
 			</tr>
 		</table>
diff -burN usr/www/all/html/de/fon/fonbuch1.inc usr/www/all/html/de/fon/fonbuch1.inc
--- usr/www/all/html/de/fon/fonbuch1.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/fonbuch1.inc	2006-12-13 17:03:02.000000000 +0100
@@ -1,10 +1,2 @@
 <? include ../html/$var:lang/global.inc ?>
 <? setvariable var:Text1 'Telefonbucheintrag' ?>
-<? setvariable var:Text2 'Name' ?>
-<? setvariable var:Text3 'Rufnummer' ?>
-<? setvariable var:Text4 'Kurzwahl' ?>
-<? setvariable var:Text5 '**7 ' ?>
-<? setvariable var:Text6 'Vanity' ?>
-<? setvariable var:Text7 '**8 ' ?>
-<? setvariable var:Text8 'Wichtige Person' ?>
-<? setvariable var:Text9 'Sie sind auch bei aktivierter Klingelsperre für diese Person erreichbar.' ?>
diff -burN usr/www/all/html/de/fon/fonbuch1.js usr/www/all/html/de/fon/fonbuch1.js
--- usr/www/all/html/de/fon/fonbuch1.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/fonbuch1.js	2006-12-13 17:03:02.000000000 +0100
@@ -36,13 +36,13 @@
 	var number = FormatNumber(jslGetValue("uiViewNumber"));
 	jslSetValue("uiPostNumber", number);
 	jslSetValue("uiPostName", name);
-	jslSubmitFormEx("", jslGetValue("uiPostPageMaster"), "fonbuch1");
+	jslSubmitFormEx("", "fonbuch", "fonbuch1");
 }
 function uiDoHelp() {
 	jslPopHelp("hilfe_fon_telefonbucheintrag");
 }
 function uiDoCancel() {
-	jslGoTo("", jslGetValue("uiPostPageMaster"));
+	jslGoTo("", "fonbuch");
 }
 // Ggf. Registar anhängen
 function FormatNumber (n) {
diff -burN usr/www/all/html/de/fon/fonbuch.frm usr/www/all/html/de/fon/fonbuch.frm
--- usr/www/all/html/de/fon/fonbuch.frm	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/fonbuch.frm	2006-12-13 17:03:02.000000000 +0100
@@ -11,6 +11,10 @@
 <? repeat [ 0 2 ] `
 <input type="hidden" name="telcfg:settings/MSN/Port$0/Name" value="<? query telcfg:settings/MSN/Port$0/Name ?>" id="uiPostFon$0" disabled>
 ` ?>
+<? repeat [ 1 8 ] `
+<input type="hidden" name="telcfg:settings/NTHotDialList/Name$0" value="<? query telcfg:settings/NTHotDialList/Name$0 ?>" id="uiPostIsdn$0" disabled>
+<input type="hidden" name="telcfg:settings/NTHotDialList/Number$0" value="<? query telcfg:settings/NTHotDialList/Number$0 ?>" id="uiPostIsdnNumber$0" disabled>
+` ?>
 <? multiquery telcfg:settings/HotDialEntry/list(Code,Vanity,Number,Name) '
 <input type="hidden" name="telcfg:settings/$1/Name" value="$5" id="uiPostName$0" disabled>
 <input type="hidden" name="telcfg:settings/$1/Number" value="$4" id="uiPostNumber$0" disabled>
diff -burN usr/www/all/html/de/fon/fonbuch.html usr/www/all/html/de/fon/fonbuch.html
--- usr/www/all/html/de/fon/fonbuch.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/fonbuch.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,7 +1,7 @@
 <? include ../html/$var:lang/fon/fonbuch.inc ?> 
 <div id="content">
  	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo '$var:Text1' ?>
+		<? echo '$var:Text12' ?>
 	</div></div></div></div></div></div>
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 	 	<ul class="tabs">
@@ -23,11 +23,11 @@
 <? multiquery telcfg:settings/HotDialEntry/list(Code,Vanity,Number,Name) `
 			<script type="text/javascript">document.write(TrFon("$0", "$5", "$4", "$2", "$3"));</script>
 ` ?>
-<? if eq <? query telcfg:settings/HotDialEntry/count ?> 0 `
+<? if eq <? multiquerycount telcfg:settings/HotDialEntry/list ?> 0 `
 			<tr class="Dialoglist"><td colspan=6 class="ac fs10">$var:Text10</td></tr>
 ` ?>
 		</table>
-		<p class="mt10 ar"><input type="button" id="uiViewNewButton" onclick="uiDoNew('<? query telcfg:settings/HotDialEntry/newid ?>')" value="<? echo $var:Text9 ?>" class="Pushbutton" style="width:180px" disabled></p>
+		<p class="mt10 ar"><input type="button" id="uiViewNewButton" onclick="uiDoNew('<? query telcfg:settings/HotDialEntry/newid ?>')" value="<? echo $var:Text9 ?>" class="Pushbutton" style="width:180px"></p>
 		<? include ../html/$var:lang/home/error.html ?>
 	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
diff -burN usr/www/all/html/de/fon/fonbuch.inc usr/www/all/html/de/fon/fonbuch.inc
--- usr/www/all/html/de/fon/fonbuch.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/fonbuch.inc	2006-12-13 17:03:02.000000000 +0100
@@ -1,6 +1,6 @@
 <? include ../html/$var:lang/global.inc ?>
 <? setvariable var:Text1 'Telefonbuch' ?>
-<? setvariable var:Text2 'Hier können Sie die Rufnummern Ihrer Bekannten angeben. In der Anrufliste werden diese Rufnummern durch den jeweiligen Namen ersetzt.' ?>
+<? setvariable var:Text2 'Hier können Sie die Telefonnummern Ihrer Bekannten angeben. In der Anrufliste werden diese Telefonnummern durch den Namen ersetzt.' ?>
 <? setvariable var:Text4 'Kurzwahl' ?>
 <? setvariable var:Text5 'Vanity' ?>
 <? setvariable var:Text6 'Rufnummer' ?>
diff -burN usr/www/all/html/de/fon/fonbuch.js usr/www/all/html/de/fon/fonbuch.js
--- usr/www/all/html/de/fon/fonbuch.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/fonbuch.js	2007-07-11 22:32:03.000000000 +0200
@@ -21,7 +21,7 @@
 var g_mldDelete = "Wollen Sie diesen Eintrag löschen ?";
 var g_qstDial = "Wollen Sie die Verbindung jetzt herstellen?";
 var g_txtBtn_Delete = "Löschen";
-var g_txtBtn_Change = "Bearbeiten";
+var g_txtBtn_Change = "Ändern";
 var g_txtmld_1 = "Verbindung mit ";
 var g_txtmld_2 = "wird hergestellt...\x0A\x0ANehmen Sie jetzt den Hörer von Telefon ";
 var g_txtmld_3 = " auf.\x0A\x0AUm die Anwahl zu beenden klicken Sie auf Abbrechen.";
@@ -37,7 +37,6 @@
 			jslFormSubmitEx("", "");
 		}
 	}
-	jslEnable("uiViewNewButton");
 }
 function uiDoDelete(nr) {
 	if (!confirm(g_mldDelete)) return;
@@ -50,7 +49,6 @@
 	jslCopyValue("uiPostVanity", "uiPostVanity"+nr);
 	jslCopyValue("uiPostNumber", "uiPostNumber"+nr);
 	jslCopyValue("uiPostName", "uiPostName"+nr);
-	jslSetValue("uiPostPageMaster", "fonbuch");
 	jslSubmitFormEx("", "fonbuch1", "fonbuch");
 }
 function uiDoNew(wahl) {
@@ -59,11 +57,10 @@
 	jslSetValue("uiPostVanity", "");
 	jslSetValue("uiPostNumber", "");
 	jslSetValue("uiPostName", "");
-	jslSetValue("uiPostPageMaster", "fonbuch");
 	jslSubmitFormEx("", "fonbuch1", "fonbuch");
 }
 function GetFreeCode () {
-	var n = <? query telcfg:settings/HotDialEntry/count ?>;
+	var n = <? multiquerycount telcfg:settings/HotDialEntry/list ?>;
 	var i;
 	var c = 0;
 	while (c<99) {
@@ -144,6 +141,17 @@
 function uiDialPortDisplay (n) {
 	var name = n;
 	switch (n) {
+		case "1":
+			name = jslGetValue("uiPostFon0");
+			if (name.length == 0) name = g_Fon1;
+			break;
+		case "2":
+			name = jslGetValue("uiPostFon1");
+			if (name.length == 0) name = g_Fon2;
+			break;
+		case "50": 	name = g_txtIsdn; break;
+<? repeat [ 1 8 ] `	case "5$0": name = jslGetValue("uiPostIsdnNumber$0"); break;
+` ?>
 	}
 	return name;
 }
diff -burN usr/www/all/html/de/fon/foncalls.frm usr/www/all/html/de/fon/foncalls.frm
--- usr/www/all/html/de/fon/foncalls.frm	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/foncalls.frm	2006-12-13 17:03:02.000000000 +0100
@@ -2,21 +2,17 @@
 <input type="hidden" name="var:showDialing" value="<? echo $var:showDialing ?>" id="uiPostShowDialing" />
 <input type="hidden" name="var:tabFoncalls" value="<? echo $var:tabFoncalls ?>" id="uiPostTab">
 <input type="hidden" name="var:TestPort" value="<? echo $var:TestPort?>" id="uiTestPort">
-<input type="hidden" name="var:kurzwahl" value="" id="uiPostKurzwahl">
-<input type="hidden" name="var:kwCode" value="" id="uiPostCode">
-<input type="hidden" name="var:kwVanity" value="" id="uiPostVanity">
-<input type="hidden" name="var:kwNumber" value="" id="uiPostNumber">
-<input type="hidden" name="var:kwName" value="" id="uiPostName">
 <input type="hidden" name="telcfg:settings/ClearJournal" value="1" id="uiPostClearJournal" disabled>
 <input type="hidden" name="telcfg:settings/UseClickToDial" value="<? query telcfg:settings/UseClickToDial ?>" id="uiPostClickToDial" disabled>
 <input type="hidden" name="telcfg:settings/DialPort" value="<? query telcfg:settings/DialPort ?>" id="uiPostDialPort" disabled>
-<input type="hidden" name="telcfg:settings/UseJournal" value="<? query telcfg:settings/UseJournal ?>" id="uiPostUseJournal">
 <input type="hidden" name="telcfg:command/Dial" value="" id="uiPostDial" disabled>
 <input type="hidden" name="telcfg:command/Hangup" value="" id="uiPostHangup" disabled>
 <? repeat [ 0 2 ] `
 <input type="hidden" name="telcfg:settings/MSN/Port$0/Name" value="<? query telcfg:settings/MSN/Port$0/Name ?>" id="uiPostFon$0" disabled>
 ` ?>
-<? multiquery telcfg:settings/HotDialEntry/list(Code) `<input type="hidden" name="telcfg:settings/$1/Code" value="$2" id="uiPostCode$0" disabled>
+<? repeat [ 1 8 ] `
+<input type="hidden" name="telcfg:settings/NTHotDialList/Name$0" value="<? query telcfg:settings/NTHotDialList/Name$0 ?>" id="uiPostIsdn$0" disabled>
+<input type="hidden" name="telcfg:settings/NTHotDialList/Number$0" value="<? query telcfg:settings/NTHotDialList/Number$0 ?>" id="uiPostIsdnNumber$0" disabled>
 ` ?>
 </form>
 <form method="GET" action="../cgi-bin/webcm" target="_self" id="uiPostExport">
diff -burN usr/www/all/html/de/fon/foncalls.html usr/www/all/html/de/fon/foncalls.html
--- usr/www/all/html/de/fon/foncalls.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/foncalls.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,7 +1,7 @@
 <? include ../html/$var:lang/fon/foncalls.inc ?>
 <div id="content">
  	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo '$var:Text1' ?>
+		<? echo '$var:Text25' ?>
 	</div></div></div></div></div></div>
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 	 	<ul class="tabs">
@@ -9,8 +9,7 @@
 	 		<li><a href="javascript:jslGoTo(jslGetValue('uiPostMenu'),'dial')"><? echo '$var:Text26' ?></a></li>
 	 	</ul>
 		<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-			<p class="mb10"><? echo $var:Text2 ?></p>
-			<p class="ml25 mb10" id="UseJournal" style="display:none"><input type="checkbox" id="uiViewUseJournal">&nbsp;<label for="uiViewUseJournal"><? echo $var:Text27 ?></label></p>
+			<p class="mb5"><? echo $var:Text2 ?></p>
 			<table id="tLegende">
 				<tr>
 					<td><img src="../html/<? echo $var:lang ?>/images/Callout.gif"><? echo $var:Text4 ?></td>
@@ -18,20 +17,19 @@
 					<td><img src="../html/<? echo $var:lang ?>/images/Callinfailed.gif"><? echo $var:Text6 ?></td>
 				</tr>
 			</table>
-			<div class="mt10 mb5 tborder" style="height: 280px; width: 538px; overflow: auto">
+			<div class="mt10 mb5 tborder" style="height: 280px; width: 518px; overflow: auto">
 				<table id="tClient">
 					<tr>
 						<th class="c1"></th>
-						<th class="c3"><nobr><? echo '$var:Text7' ?></nobr></th>
-						<th class="c8"><nobr><? echo '$var:Text24' ?> / <? echo '$var:Text8' ?></nobr></th>
-						<th class="c5"><nobr><? echo '$var:Text9' ?></nobr></th>
-						<th class="c7"><nobr><? echo '$var:Text18' ?></nobr></th>
-						<th class="c6"><nobr><? echo '$var:Text10' ?></nobr></th>
-						<th class="c9">&nbsp;</th>
+						<th class="c3"><nobr><? echo $var:Text7 ?></nobr></th>
+						<th class="c8"><nobr><? echo $var:Text24 ?> / <? echo $var:Text8 ?></nobr></th>
+						<th class="c5"><nobr><? echo $var:Text9 ?></nobr></th>
+						<th class="c7"><nobr><? echo $var:Text18 ?></nobr></th>
+						<th class="c6"><nobr><? echo $var:Text10 ?></nobr></th>
 					</tr>
 					<!-- "<? query telcfg:settings/RefreshJournal ?>" -->
-<? if eq $var:max `` `<? setvariable var:max 9 ?>` ?>
-<? setvariable var:cnt `<? query telcfg:settings/Journal/count ?>` ?> 
+<? if eq $var:max `` `<? setvariable var:max 13 ?>` ?>
+<? setvariable var:cnt `<? multiquerycount telcfg:settings/Journal/list ?>` ?> 
 <? if eq $var:showall 1 `
 <? multiquery telcfg:settings/Journal/list(Type,Date,Number,Port,Duration,Route,RouteType,Name) `
 					<script type="text/javascript">document.write(TrCall("$12", "$13", "$19", "$14", "$15", "$17", "$18", "$16"));</script>
@@ -43,28 +41,22 @@
 ` ?>
 <? if eq $var:cnt 0 `
 					<tr>
-						<td colspan="7" style="font-size: 13px; text-align:center"><? if eq '<? query telcfg:settings/UseJournal ?>' '1' '$var:Text11' '$var:Text28' ?></td>
+						<td colspan="6" style="font-size: 13px; text-align:center">$var:Text11</td>
 					</tr>
 ` ?>
 				</table>
 			</div>
-			<p class="ar">
-				<input type="button" onclick="uiDoExport()" value="<? echo $var:Text19 ?>" class=Pushbutton style="display:none" id="buttonExport">
-				<input type="button" onclick="uiDoClear()" value="<? echo $var:Text16 ?>" class=Pushbutton id="buttonClear">
-				<input type="button" onclick="uiDoRefresh()" value="<? echo $var:Text17 ?>" class=Pushbutton id="buttonRefresh">
 <? if neq $var:showall 1 `
 <? if gt $var:cnt $var:max `
-				<input type="button" value="$var:Text12 $var:cnt $var:Text13" onclick="uiDoShowAll()" />
+			<p class="ar"><input type="button" value="$var:Text12 $var:cnt $var:Text13" onclick="uiDoShowAll()" /></p>
 ` ?>
 ` ?>
-			</p>
 		</div></div></div></div></div></div>
 		<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
-<? if eq '<? query box:settings/expertmode/activated ?>' '1' `
-			<input type="button" onclick="uiDoSave()" value="<? echo '$var:txtApply' ?>" class="Pushbutton" id="buttonSave">
-			<input type="button" onclick="uiDoCancel()" value="<? echo '$var:txtCancel' ?>" class="Pushbutton" id="buttonCancel">
-` ?>
-			<input type="button" onclick="uiDoHelp()" value="<? echo $var:txtHelp ?>" class="Pushbutton" id="buttonHelp">
+			<input type="button" onclick="uiDoExport()" value="<? echo $var:Text19 ?>" class=Pushbutton style="display:none" id="buttonExport">
+			<input type="button" onclick="uiDoClear()" value="<? echo $var:Text16 ?>" class=Pushbutton>
+			<input type="button" onclick="uiDoRefresh()" value="<? echo $var:Text17 ?>" class=Pushbutton>
+			<input type="button" onclick="uiDoHelp()" value="<? echo $var:txtHelp ?>" class="Pushbutton">
 		</div></div></div></div></div></div>
 	</div></div></div></div></div></div></div>
 </div>
diff -burN usr/www/all/html/de/fon/foncalls.inc usr/www/all/html/de/fon/foncalls.inc
--- usr/www/all/html/de/fon/foncalls.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/foncalls.inc	2006-12-13 17:03:02.000000000 +0100
@@ -22,31 +22,3 @@
 <? setvariable var:Text24 'Name' ?>
 <? setvariable var:Text25 'Telefonie' ?>
 <? setvariable var:Text26 'Wählhilfe' ?>
-<? setvariable var:Text27 'Anrufliste verwenden' ?>
-<? setvariable var:Text28 'Die Anrufliste wird nicht verwendet.' ?>
-<? setvariable var:jstr0 `Nebenstelle FON 1` ?>
-<? setvariable var:jstr1 `Nebenstelle FON 2` ?>
-<? setvariable var:jstr2 `Nebenstelle FON 3` ?>
-<? setvariable var:jstr3 `FON 1` ?>
-<? setvariable var:jstr4 `FON 2` ?>
-<? setvariable var:jstr5 `FON 3` ?>
-<? setvariable var:jstr6 `Durchwahl` ?>
-<? setvariable var:jstr7 `FON S0` ?>
-<? setvariable var:jstr8 `Fon/Fax PC` ?>
-<? setvariable var:jstr9 `Anrufbeantworter` ?>
-<? setvariable var:jstr10 `Data S0` ?>
-<? setvariable var:jstr11 `Data PC` ?>
-<? setvariable var:jstr12 `ISDN-Telefone` ?>
-<? setvariable var:jstr13 `alle Telefone` ?>
-<? setvariable var:jstr14 `Alle Einträge in der Anrufliste werden jetzt gelöscht.` ?>
-<? setvariable var:jstr15 `Wollen Sie die Verbindung jetzt herstellen?` ?>
-<? setvariable var:jstr16 `unbekannt` ?>
-<? setvariable var:jstr17 `Festnetz` ?>
-<? setvariable var:jstr18 `Internet: ` ?>
-<? setvariable var:jstr19 `eingehender Anruf` ?>
-<? setvariable var:jstr20 `eingehender Anruf in Abwesenheit` ?>
-<? setvariable var:jstr21 `ausgehender Anruf` ?>
-<? setvariable var:jstr22 `zum Telefonbuch hinzufügen` ?>
-<? setvariable var:jstr23 `Verbindung mit %1 wird hergestellt...` ?>
-<? setvariable var:jstr24 `Nehmen Sie jetzt den Hörer von Telefon %1 auf.` ?>
-<? setvariable var:jstr25 `Um die Anwahl zu beenden klicken Sie auf Abbrechen.` ?>
diff -burN usr/www/all/html/de/fon/foncalls.js usr/www/all/html/de/fon/foncalls.js
--- usr/www/all/html/de/fon/foncalls.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/foncalls.js	2007-07-11 22:32:04.000000000 +0200
@@ -23,65 +21,49 @@
 </style>
 <script type=text/javascript>
 <? include ../html/$var:lang/js/jsl.js ?>
-var g_qstClear = "<? print $var:jstr14 ?>";
-var g_qstDial = "<? print $var:jstr15 ?>";
-var g_txtUnbekannt = "<? print $var:jstr16 ?>";
-var g_txtFestnetz 	= "<? print $var:jstr17 ?>";
-var g_txtInternetprefix = "<? print $var:jstr18 ?>";
-var g_txtAddBuch = "<? print $var:jstr22 ?>";
-var g_sym1 = "<img src=\"../html/<? echo $var:lang ?>/images/Callin.gif\" title=\"<? print $var:jstr19 ?>\">";
-var g_sym2 = "<img src=\"../html/<? echo $var:lang ?>/images/Callinfailed.gif\" title=\"<? print $var:jstr20 ?>\">";
-var g_sym3 = "<img src=\"../html/<? echo $var:lang ?>/images/Callout.gif\" title=\"<? print $var:jstr21 ?>\">";
-var g_sym0 = "<img src=\"../html/<? echo $var:lang ?>/images/Callno.gif\">";
-var g_Fon1 = "<? print $var:jstr0 ?>";
-var g_Fon2 = "<? print $var:jstr1 ?>";
-var g_Fon3 = "<? print $var:jstr2 ?>";
-var g_Port0 = "<? print $var:jstr3 ?>";
-var g_Port1 = "<? print $var:jstr4 ?>";
-var g_Port2 = "<? print $var:jstr5 ?>";
-var g_Port3 = "<? print $var:jstr6 ?>";
-var g_Port4 = "<? print $var:jstr7 ?>";
-var g_Port5 = "<? print $var:jstr8 ?>";
-var g_Port6 = "<? print $var:jstr9 ?>";
-var g_Port36 = "<? print $var:jstr10 ?>";
-var g_Port37 = "<? print $var:jstr11 ?>";
-var g_txtIsdn = "<? print $var:jstr12 ?>";
-var g_alleTelefone = "<? print $var:jstr13 ?>";
-var g_txtMld1 = "<? print $var:jstr23 ?>";
-var g_txtMld2 = "<? print $var:jstr24 ?>";
-var g_txtMld3 = "<? print $var:jstr25 ?>";
-var g_Loaded = false;
-var g_expertMode	= "<? query box:settings/expertmode/activated ?>";
+var g_qstClear = "Alle Einträge in der Anrufliste werden jetzt gelöscht.";
+var g_qstDial = "Wollen Sie die Verbindung jetzt herstellen?";
+var g_txtUnbekannt = "unbekannt";
+var g_txtFestnetz 	= "Festnetz";
+var g_txtInternetprefix = "Internet: ";
+var g_sym1 = "<img src=\"../html/<? echo $var:lang ?>/images/Callin.gif\" title=\"eingehender Anruf\">";
+var g_sym2 = "<img src=\"../html/<? echo $var:lang ?>/images/Callinfailed.gif\" title=\"eingehender Anruf in Abwesenheit\">";
+var g_sym3 = "<img src=\"../html/<? echo $var:lang ?>/images/Callout.gif\" title=\"ausgehender Anruf\">";
+var g_sym0 = "<img src=\"../html/<? echo $var:lang ?>/images/Callno.gif\" style=\"vertical-align:text-top\">";
+var g_Fon1 = "Nebenstelle FON 1";
+var g_Fon2 = "Nebenstelle FON 2";
+var g_Fon3 = "Nebenstelle FON 3";
+var g_Port0 = "FON 1";
+var g_Port1 = "FON 2";
+var g_Port2 = "FON 3";
+var g_Port3 = "Durchwahl";
+var g_Port4 = "FON S0";
+var g_Port5 = "CAPI";
+var g_Port6 = "Anrufbeantworter";
+var g_Port36 = "DATA S0";
+var g_Port37 = "CAPI Data";
+var g_txtIsdn = "ISDN/DECT-Telefone";
+var g_alleTelefone = "alle Telefone";
+var g_txtmld_1 = "Verbindung mit ";
+var g_txtmld_2 = "wird hergestellt...\x0A\x0ANehmen Sie jetzt den Hörer von Telefon ";
+var g_txtmld_3 = " auf.\x0A\x0AUm die Anwahl zu beenden klicken Sie auf Abbrechen.";
 function uiDoOnLoad() {
-	// telcfg:settings/HotDialRefresh
-	var i = "<? query telcfg:settings/HotDialRefresh ?>";
 	jslZebrastreifen("tClient");
 	if (jslGetValue("uiPostShowDialing") != "") {
-		var mld = jslPrintf1(g_txtMld1, jslGetValue("uiPostShowDialing"))+"\x0A\x0A"+jslPrintf1(g_txtMld2, jslGetValue("uiPostDialPort"))+"\x0A\x0A"+g_txtMld3;
+		var mld = g_txtMld_1+jslGetValue("uiPostShowDialing")+g_txtMld_2+uiDialPortDisplay(jslGetValue("uiPostDialPort"))+g_txtMld_3;
 		jslSetValue("uiPostShowDialing", "");
 		if (!confirm(mld)) {
 			jslEnable("uiPostHangup");
 			jslFormSubmitEx("", "");
 		}
 	}
-	if (g_expertMode == "1") {
-		jslDisplay("UseJournal", true);
-		jslSetChecked("uiViewUseJournal", jslGetValue("uiPostUseJournal") == "1");
-	}
 	jslDisplay("buttonExport", true);
-	g_Loaded = true;
 }
 function uiDoRefresh() {
-	jslGoTo("", "foncalls");
+	jslGoTo(jslGetValue("uiPostMenu"), "foncalls");
 }
 function uiDoCancel() {
-	jslGoTo("", "foncalls");
-}
-function uiDoSave() {
-	if (g_expertMode == "1") {
-		jslSetValue("uiPostUseJournal", jslGetChecked("uiViewUseJournal") ? "1":"0");
-		jslFormSubmitEx("", "foncalls");
-	}
+	jslGoTo(jslGetValue("uiPostMenu"), "foncalls");
 }
 function uiDoClear() {
 	if (!confirm(g_qstClear)) return;
@@ -105,6 +87,17 @@
 function uiDialPortDisplay (n) {
 	var name = n;
 	switch (n) {
+		case "1":
+			name = jslGetValue("uiPostFon0");
+			if (name.length == 0) name = g_Fon1;
+			break;
+		case "2":
+			name = jslGetValue("uiPostFon1");
+			if (name.length == 0) name = g_Fon2;
+			break;
+		case "50": 	name = g_txtIsdn; break;
+<? repeat [ 1 8 ] `	case "5$0": name = jslGetValue("uiPostIsdnNumber$0"); break;
+` ?>
 	}
 	return name;
 }
@@ -187,12 +180,6 @@
 function span(str) {
 	return "<nobr><span title=\""+ str + "\">" + str + "</span></nobr>";
 }
-function BuchBtn(click, name) {
-	return name == "" ? BmpBtn(click, g_txtAddBuch, "../html/<? echo $var:lang ?>/images/fonbuch.gif") : "";
-}
-function BmpBtn(click, value, bmp) {
-	return "<button type=\"button\" onClick=\""+click+"\" value=\""+value+"\" title=\""+value+"\" style=\"width: 34px; text-align:center\"><img src=\""+bmp+"\" align=middle width=16 height=16 hspace=4></button></td>";
-}
 function TrCall(type, datum, name, rufnummer, port, route, routetype, dauer) {
 	var str = "<tr>";
 	str += "<td class=\"c1\">"+ uiCallSymbol(type)+"</td>";
@@ -201,36 +188,8 @@
 	str += "<td class=\"c5\">"+ uiPortDisplay(port)+"</td>";
 	str += "<td class=\"c7\">"+ uiRouteDisplay(route, routetype)+"</td>";
 	str += "<td class=\"c6\">"+ span(dauer)+"</td>";
-	str += "<td class=\"c9\">"+ BuchBtn("uiDoBuch('"+name+"','"+rufnummer+"')", name) + "</td>";
 	str += "</tr>";
 	g_foundRul = true;
 	return str;
 }
-function uiDoBuch(name, nummer) {
-	if (!g_Loaded) return;	// Seite nicht komplett geladen, GetFreeCode scheitert
-	jslSetValue("uiPostKurzwahl", "<? querytext telcfg:settings/HotDialEntry/newid ?>");
-	jslSetValue("uiPostCode", GetFreeCode());
-	jslSetValue("uiPostVanity", "");
-	jslSetValue("uiPostNumber", nummer);
-	jslSetValue("uiPostName", name);
-	jslSetValue("uiPostPageMaster", "foncalls");
-	jslGoTo("", "fonbuch1");
-}
-function GetFreeCode () {
-	var n = <? querytext telcfg:settings/HotDialEntry/count ?>;
-	var i;
-	var c = 0;
-	while (c<99) {
-		c = c+1;
-		var code_besetzt = false;
-		for (i=0; i<n; i++) {
-			if (Number(jslGetValue("uiPostCode"+i)) == c) code_besetzt = true;
-		}
-		if (!code_besetzt) {
-			if (c < 10) return "0"+c;
-			return c;
-		}
-	}
-	return "01";
-}
 </script>
diff -burN usr/www/all/html/de/fon/foneditdect.frm usr/www/all/html/de/fon/foneditdect.frm
--- usr/www/all/html/de/fon/foneditdect.frm	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/fon/foneditdect.frm	2007-04-04 11:49:58.000000000 +0200
@@ -0,0 +1,8 @@
+<input type="hidden" name="dect:command/StartSubscription" id="uiPostStartSubscription" disabled>
+<input type="hidden" name="dect:command/Unsubscribe" id="uiPostUnsubscribe" disabled>
+<input type="hidden" name="dect:command/PageHandsets" id="uiPostPageHandsets" disabled>
+<input type="hidden" name="dect:command/DateTime" id="uiPostDateTime" disabled>
+<? repeat [ 0 5 ] `
+<input type="hidden" name="dect:settings/Handset$0/Subscribed" value="<? query dect:settings/Handset$0/Subscribed ?>" id="uiPostSubscribed$0" disabled>
+<input type="hidden" name="dect:settings/Handset$0/Type" value="<? query dect:settings/Handset$0/Type ?>" id="uiPostType$0" disabled>
+` ?>
diff -burN usr/www/all/html/de/fon/foneditdect.html usr/www/all/html/de/fon/foneditdect.html
--- usr/www/all/html/de/fon/foneditdect.html	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/fon/foneditdect.html	2007-04-05 21:01:22.000000000 +0200
@@ -0,0 +1,68 @@
+<? include ../html/$var:lang/fon/foneditdect.inc ?> 
+<div id="content">
+ 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
+		<? echo '$var:Text23' ?>
+	</div></div></div></div></div></div>
+	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
+ 	<ul class="tabs">
+<? if eq $var:pagename 'foneditdect' `
+ 		<li><a href="javascript:uiDoDect()"><? echo '$var:Text24' ?></a></li>
+<? if eq '$var:usePSTN' 1 `
+ 		<li><a href="javascript:uiDoDectMsn()"><? echo '$var:Text25' ?></a></li>
+` ?>
+<? if eq '<? query box:settings/expertmode/activated ?>' '1' `
+ 		<li><a href="javascript:uiDoListDect()"><? echo '$var:Text26' ?></a></li>
+` ?>
+ 		<li><a href="javascript:uiDoSetupDect()"><? echo '$var:Text28' ?></a></li>
+ 		<li class="tabs_on"><a href="javascript:uiDoCancel()"><? echo '$var:Text29' ?></a></li>
+` `
+ 		<li><a href="javascript:uiDoIsdn()"><? echo '$var:Text24' ?></a></li>
+<? if eq '$var:usePSTN' 1 `
+ 		<li><a href="javascript:uiDoMsn()"><? echo '$var:Text25' ?></a></li>
+` ?>
+<? if eq '<? query box:settings/expertmode/activated ?>' '1' `
+ 		<li><a href="javascript:uiDoListIsdn()"><? echo '$var:Text26' ?></a></li>
+` ?>
+ 		<li><a href="javascript:uiDoOptionen()"><? echo '$var:Text27' ?></a></li>
+ 		<li><a href="javascript:uiDoSetupIsdn()"><? echo '$var:Text28' ?></a></li>
+ 		<li class="tabs_on"><a href="javascript:uiDoCancel()"><? echo '$var:Text29' ?></a></li>
+` ?>
+ 	</ul>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<p class="mb10"><? echo $var:Text17 ?></p>
+		<table id="tHandsets" class="tborder">
+			<tr>
+				<th class="c1"><? echo $var:Text3 ?></th>
+				<th class="c2"><? echo $var:Text4 ?></th>
+				<th class="c3"><? echo $var:Text20 ?></th>
+				<th class="c4"></th>
+				<th class="c5"></th>
+			</tr>	
+<? repeat [ 0 5 ] '
+			<tr id="uiViewHandset$0" style="display:none">
+				<td class="c1"><option value="$0"><script type="text/javascript">document.write($0+1);</script></option></td>
+				<td class="c2"><input type="checkbox" id="uiViewSubscribed$0" disabled></td>
+				<td class="c3"><input type="checkbox" id="uiViewType$0" disabled></td>
+				<td class="c4"></td>
+				<td class="c5"><button type="button" id="uiViewDelete$0" onclick="uiDoDelete($0)" title="$var:Text31" style="width: 30px">
+					<img src="../html/<? echo $var:lang ?>/images/loeschen.gif" align="bottom" width="16" height="16" hspace="4">
+				</button></td>
+			</tr>
+' ?>
+			<tr id="uiNichts" style="display:none"><td colspan=5 class="ac"><? echo '$var:Text32' ?></td></tr>
+		</table>
+		<p class="mt10 ar"><input type="button" value="<? echo $var:Text21 ?>" id="uiViewNew" onclick="uiDoNew()" class="Pushbutton" style="width:180px;"></p>		
+	</div></div></div></div></div></div>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<p class="mb5"><? echo $var:Text35 ?></p>
+		<div style="text-align: right;">
+		  <input type="button" value="<? echo $var:Text33 ?>" id="uiViewPage" onclick="uiDoPage()" class="Pushbutton" style="width:180px;">
+		  <input type="button" value="<? echo $var:Text34 ?>" id="uiViewDateTime" onclick="uiDoDateTime()" class="Pushbutton" style="width:180px;">
+		</div>
+	</div></div></div></div></div></div>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
+		<input type="button" onclick="uiDoRefresh()" value="<? echo $var:txtRefresh ?>" class=Pushbutton>
+		<input type="button" onclick="uiDoHelp()" value="<? echo $var:txtHelp ?>" class="Pushbutton" id="buttonHilfe">
+	</div></div></div></div></div></div>
+	</div></div></div></div></div></div></div>
+</div>
diff -burN usr/www/all/html/de/fon/foneditdect.inc usr/www/all/html/de/fon/foneditdect.inc
--- usr/www/all/html/de/fon/foneditdect.inc	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/fon/foneditdect.inc	2007-07-11 22:32:04.000000000 +0200
@@ -0,0 +1,25 @@
+<? include ../html/$var:lang/global.inc ?>
+<? setvariable var:Text3 'Nummer' ?>
+<? setvariable var:Text4 'Angemeldet' ?>
+<? setvariable var:Text7 'Einstellung ändern' ?>
+<? setvariable var:Text16 'Mobilteile an- und abmelden' ?>
+<? setvariable var:Text17 'Sie können DECT-Telefone an der FRITZ!Box an- und abmelden. Zum Anmelden eines DECT-Telefons müssen Sie die System-PIN (im Lieferzustand: 0000) am Mobilteil eingeben.' ?>
+<? setvariable var:Text20 'Swissvoice/GAP' ?>
+<? setvariable var:Text21 'Mobilteil anmelden' ?>
+<? setvariable var:Text22 'Zurück' ?>
+<? if eq $var:pagename 'foneditdect' `
+<? setvariable var:Text23 'DECT-Endgeräte' ?>
+` `
+<? setvariable var:Text23 'ISDN-Endgeräte' ?>
+` ?>
+<? setvariable var:Text24 'Übersicht' ?>
+<? setvariable var:Text25 'Festnetz' ?>
+<? setvariable var:Text26 'Intern' ?>
+<? setvariable var:Text27 'Optionen' ?>
+<? setvariable var:Text28 'Zuordnung' ?>
+<? setvariable var:Text29 'Mobilteile' ?>
+<? setvariable var:Text31 'Abmelden' ?>
+<? setvariable var:Text32 'Es sind keine Mobilteile angemeldet' ?>
+<? setvariable var:Text33 'Mobilteile pagen' ?>
+<? setvariable var:Text34 'Datum und Uhrzeit setzen' ?>
+<? setvariable var:Text35 'Mit Hilfe der Paging-Funktion können Sie Mobilteile lokalisieren. Per Knopfdruck können auch Datum und Uhrzeit der DECT-Telefone gesetzt werden.' ?>
diff -burN usr/www/all/html/de/fon/foneditdect.js usr/www/all/html/de/fon/foneditdect.js
--- usr/www/all/html/de/fon/foneditdect.js	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/fon/foneditdect.js	2007-04-05 21:03:54.000000000 +0200
@@ -0,0 +1,101 @@
+<!--		../fon/foneditdect.js		-->
+<style type="text/css">
+<!--
+#content {width: 560px; margin: auto;}
+#tHandsets {width: 100%;}
+#tHandsets td {padding: 2px 3px;}
+#tHandsets th {padding: 2px 3px;}
+#tHandsets .c1 {text-align: center}
+#tHandsets .c2 {text-align: center}
+#tHandsets .c3 {text-align: center}
+#tHandsets .c4 {width: 0px;}
+#tHandsets .c5 {width: 30px;}
+.mt10 {margin-top: 10px;}
+.ar {text-align: right;}
+.ac {text-align: center;}
+-->
+</style>
+<script type="text/javascript">
+<? include ../html/$var:lang/js/jsl.js ?>
+var g_mldUnsubscribe	= "Wollen Sie das Mobilteil abmelden ?";
+var g_New = -1;
+function uiDoOnLoad() {
+	var bFound = false;
+	for (var i=0; i<=5; i++) {
+		if (jslGetValue("uiPostSubscribed"+i) == "1") {
+			jslSetChecked("uiViewSubscribed"+i, jslGetValue("uiPostSubscribed"+i) == "1");
+			jslSetChecked("uiViewType"+i, jslGetValue("uiPostType"+i) == "1");
+			jslDisplay("uiViewHandset"+i, true); bFound=true;
+		} else {
+			jslDisable("uiViewDelete"+i)
+			if (g_New == -1) g_New = i;
+		}
+	}
+	jslDisplay("uiNichts", !bFound);
+	jslSetEnabled("uiViewPage", bFound);
+	if (g_New == -1) jslDisable("uiViewNew");
+	jslZebrastreifen("tHandsets");
+}
+function uiDoHelp() {
+	jslPopHelp("hilfe_fon_editdect");
+}
+function uiDoCancel() {
+	jslGoTo("", "");
+}
+function uiDoRefresh() {
+<? if eq '$var:pagename' 'foneditdect' `
+	jslGoTo("fon", "foneditdect");
+` `	
+	jslGoTo("fon", "foneditisdn");
+` ?>
+}
+function uiDoIsdn() {
+	jslGoTo("fon", "isdn");
+}
+function uiDoListIsdn() {
+	jslGoTo("fon", "fonlistisdn");
+}
+function uiDoMsn() {
+	jslSetValue("uiPostPageMaster", "isdn");
+	jslGoTo("fon", "isdnmsn");
+}
+function uiDoOptionen() {
+	jslGoTo("fon", "isdnoptionen");
+}
+function uiDoSetupIsdn() {
+	jslGoTo("fon", "fonsetupisdn");
+}
+function uiDoDect() {
+	jslGoTo("fon", "dect");
+}
+function uiDoListDect() {
+	jslGoTo("fon", "fonlistdect");
+}
+function uiDoDectMsn() {
+	jslGoTo("fon", "dectmsn");
+}
+function uiDoSetupDect() {
+	jslGoTo("fon", "fonsetupdect");
+}
+function uiDoDelete(nr) {
+	if (!confirm(g_mldUnsubscribe)) return;
+	jslSetValue("uiPostUnsubscribe", nr);
+	jslEnable("uiPostUnsubscribe");
+	jslSubmitFormEx("fon", "", "");
+}
+function uiDoNew() {
+	jslSetValue("uiPostStartSubscription", "0");
+	jslEnable("uiPostStartSubscription");
+	jslSubmitFormEx("fon", "", "");
+}
+function uiDoPage () {
+	jslSetValue("uiPostPageHandsets", "0");
+	jslEnable("uiPostPageHandsets");
+	jslSubmitFormEx("fon", "", "");
+}
+function uiDoDateTime () {
+	jslSetValue("uiPostDateTime", "0");
+	jslEnable("uiPostDateTime");
+	jslSubmitFormEx("fon", "", "");
+}
+</script>
diff -burN usr/www/all/html/de/fon/foneditisdn.frm usr/www/all/html/de/fon/foneditisdn.frm
--- usr/www/all/html/de/fon/foneditisdn.frm	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/fon/foneditisdn.frm	2007-04-03 09:42:14.000000000 +0200
@@ -0,0 +1 @@
+<? include ../html/$var:lang/fon/foneditdect.frm ?>
diff -burN usr/www/all/html/de/fon/foneditisdn.html usr/www/all/html/de/fon/foneditisdn.html
--- usr/www/all/html/de/fon/foneditisdn.html	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/fon/foneditisdn.html	2007-04-03 09:42:50.000000000 +0200
@@ -0,0 +1 @@
+<? include ../html/$var:lang/fon/foneditdect.html ?>
diff -burN usr/www/all/html/de/fon/foneditisdn.js usr/www/all/html/de/fon/foneditisdn.js
--- usr/www/all/html/de/fon/foneditisdn.js	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/fon/foneditisdn.js	2007-04-03 09:43:36.000000000 +0200
@@ -0,0 +1 @@
+<? include ../html/$var:lang/fon/foneditdect.js ?>
diff -burN usr/www/all/html/de/fon/fonlist.html usr/www/all/html/de/fon/fonlist.html
--- usr/www/all/html/de/fon/fonlist.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/fonlist.html	2007-07-11 22:32:03.000000000 +0200
@@ -6,12 +6,12 @@
 <? if eq '$var:usePSTN' 1 `
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
  	<ul class="tabs">
- 		<li class="tabs_on"><a href="javascript:uiDoCancel()"><? echo '$var:Text15' ?></a></li>
+ 		<li class="tabs_on"><a href="javascript:uiDoCancel()">Übersicht</a></li>
  		<li><a href="javascript:uiDoMsn()"><? echo '$var:Text12' ?></a></li>
  	</ul>
 ` ?>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p class="mb10"><? echo '$var:Text16' ?></p>
+		<p class="mb10">Hier können Sie einstellen, auf welche Rufnummern die angeschlossenen analogen Telefone reagieren sollen.</p>
 		<table id="tFon" class="tborder">
 			<tr>
 				<th class="c1"><? echo $var:Text3 ?></th>
@@ -23,7 +23,15 @@
 				<td class="c1"><? echo $var:Text6 ?></td>
 				<td class="c2"><? query telcfg:settings/MSN/Port0/Name ?></td>
 				<td class="c3"><script type="text/javascript">document.write(uiNummerDisplay("<? query telcfg:settings/MSN/Port0/MSN0 ?>"));</script></td>
-				<td class="c4" style="text-align: right;"><button type="button" id="uiViewEdit0" onclick="uiEditFon(0)" title="<? echo $var:txtIconBtnEdit ?>" style="width: 30px">
+				<td class="c4" style="text-align: right;"><button type="button" id="uiViewEdit0" onclick="uiEditFon(0)" title="<? echo $var:Text7 ?>" style="width: 30px">
+					<img src="../html/<? echo $var:lang ?>/images/bearbeiten.gif" align="bottom" width="16" height="16" hspace="4">
+				</button></td>
+			</tr>
+			<tr>
+				<td class="c1"><? echo $var:Text8 ?></td>
+				<td class="c2"><? query telcfg:settings/MSN/Port1/Name ?></td>
+				<td class="c3"><script type="text/javascript">document.write(uiNummerDisplay("<? query telcfg:settings/MSN/Port1/MSN0 ?>"));</script></td>
+				<td class="c4" style="text-align: right;"><button type="button" id="uiViewEdit1" onclick="uiEditFon(1)" title="<? echo $var:Text7 ?>" style="width: 30px">
 					<img src="../html/<? echo $var:lang ?>/images/bearbeiten.gif" align="bottom" width="16" height="16" hspace="4">
 				</button></td>
 			</tr>
diff -burN usr/www/all/html/de/fon/fonlistisdn.html usr/www/all/html/de/fon/fonlistisdn.html
--- usr/www/all/html/de/fon/fonlistisdn.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/fonlistisdn.html	2007-07-11 22:32:04.000000000 +0200
@@ -9,6 +9,8 @@
 		<li><a href="javascript:uiDoDect()"><? echo '$var:Text24' ?></a></li>
 		<li><a href="javascript:uiDoDectMsn()"><? echo '$var:Text25' ?></a></li>
 		<li class="tabs_on"><a href="javascript:uiDoCancel()"><? echo '$var:Text26' ?></a></li>
+ 		<li><a href="javascript:uiDoSetupDect()"><? echo '$var:Text28' ?></a></li>
+ 		<li><a href="javascript:uiDoEditDect()"><? echo '$var:Text29' ?></a></li>
 ` `
 		<li><a href="javascript:uiDoIsdn()"><? echo '$var:Text24' ?></a></li>
 <? if eq '$var:usePSTN' 1 `
@@ -17,9 +19,9 @@
 <? if eq '<? query box:settings/expertmode/activated ?>' '1' `
 		<li class="tabs_on"><a href="javascript:uiDoCancel()"><? echo '$var:Text26' ?></a></li>
 ` ?>
-<? if eq '$var:pagemaster' 'isdn' `
 		<li><a href="javascript:uiDoOptionen()"><? echo '$var:Text27' ?></a></li>
-` ?>
+ 		<li><a href="javascript:uiDoSetupIsdn()"><? echo '$var:Text28' ?></a></li>
+ 		<li><a href="javascript:uiDoEditIsdn()"><? echo '$var:Text29' ?></a></li>
 ` ?>
 	</ul>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
@@ -37,10 +39,10 @@
 				<td class="c1">5$0</td>
 				<td class="c2"><? query telcfg:settings/NTHotDialList/Name$0 ?></td>
 				<td class="c3"><? query telcfg:settings/NTHotDialList/Number$0 ?></td>
-				<td class="c4"><button type="button" id="uiViewEdit0" onclick="uiEditISDN($0)" title="<? echo $var:txtIconBtnEdit ?>" style="width: 30px">
+				<td class="c4"><button type="button" id="uiViewEdit0" onclick="uiEditISDN($0)" title="$var:Text7" style="width: 30px">
 					<img src="../html/<? echo $var:lang ?>/images/bearbeiten.gif" align="bottom" width="16" height="16" hspace="4">
 				</button></td>
-				<td class="c5"><button type="button" id="uiViewDelete0" onclick="uiDeleteISDN($0)" title="<? echo $var:txtIconBtnDelete ?>" style="width: 30px">
+				<td class="c5"><button type="button" id="uiViewDelete0" onclick="uiDeleteISDN($0)" title="$var:Text31" style="width: 30px">
 					<img src="../html/<? echo $var:lang ?>/images/loeschen.gif" align="bottom" width="16" height="16" hspace="4">
 				</button></td>
 			</tr>
diff -burN usr/www/all/html/de/fon/fonlistisdn.inc usr/www/all/html/de/fon/fonlistisdn.inc
--- usr/www/all/html/de/fon/fonlistisdn.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/fonlistisdn.inc	2007-07-11 22:32:04.000000000 +0200
@@ -2,23 +2,16 @@
 <? setvariable var:Text3 'Nummer' ?>
 <? setvariable var:Text4 'Bezeichnung' ?>
 <? setvariable var:Text7 'Einstellung ändern' ?>
-<? if eq $var:pagename 'fonlistdect' `
-<? setvariable var:Text16 'Interne Nummern für DECT-Telefone' ?>
-<? setvariable var:Text17 'Für die DECT-Telefone der FRITZ!Box können interne Nummern eingerichtet werden. Die Telefone können so über die Anwahl **<Nummer> von anderen Telefonen an der FRITZ!Box erreicht werden.' ?>
-` `
-<? setvariable var:Text16 'Interne Nummern für ISDN-Telefone' ?>
-<? setvariable var:Text17 'Für die Telefone am FON S0-Anschluss der FRITZ!Box können interne Nummern eingerichtet werden. Die Telefone können so über die Anwahl **<Nummer> von anderen Telefonen an der FRITZ!Box erreicht werden.' ?>
-` ?>
+<? setvariable var:Text16 'Intern für ISDN/DECT-Telefone' ?>
+<? setvariable var:Text17 'Für die DECT-Telefone oder Telefone am FON S0-Anschluss der FRITZ!Box können interne Nummern eingerichtet werden. Die Telefone können so über die Anwahl **<Nummer> von anderen Telefonen an der FRITZ!Box erreicht werden.' ?>
 <? setvariable var:Text20 'Rufnummer des Telefons' ?>
 <? setvariable var:Text31 'Nummer löschen' ?>
 <? setvariable var:Text21 'Neue Nummer' ?>
 <? setvariable var:Text22 'Zurück' ?>
-<? if eq $var:pagename 'fonlistdect' `
-<? setvariable var:Text23 'DECT-Endgeräte' ?>
-` `
-<? setvariable var:Text23 'ISDN-Endgeräte' ?>
-` ?>
+<? setvariable var:Text23 'Telefonie-Geräte' ?>
 <? setvariable var:Text24 'Übersicht' ?>
-<? setvariable var:Text25 'Festnetzrufnummern' ?>
-<? setvariable var:Text26 'Interne Nummern' ?>
-<? setvariable var:Text27 'Leistungsmerkmale' ?>
+<? setvariable var:Text25 'Festnetz' ?>
+<? setvariable var:Text26 'Intern' ?>
+<? setvariable var:Text27 'Optionen' ?>
+<? setvariable var:Text28 'Zuordnung' ?>
+<? setvariable var:Text29 'Mobilteile' ?>
diff -burN usr/www/all/html/de/fon/fonlistisdn.js usr/www/all/html/de/fon/fonlistisdn.js
--- usr/www/all/html/de/fon/fonlistisdn.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/fonlistisdn.js	2007-07-11 22:32:04.000000000 +0200
@@ -29,6 +29,18 @@
 	if (g_New == 0) jslDisable("uiViewNew");
 	jslZebrastreifen("tISDN");
 }
+function uiDoSetupDect() {
+	jslGoTo("fon", "fonsetupdect");
+}
+function uiDoEditDect() {
+	jslGoTo("fon", "foneditdect");
+}
+function uiDoSetupIsdn() {
+	jslGoTo("fon", "fonsetupisdn");
+}
+function uiDoEditIsdn() {
+	jslGoTo("fon", "foneditisdn");
+}
 function uiDoHelp() {
 <? if eq '$var:pagename' 'fonlistdect' `
 	jslPopHelp("hilfe_fon_listdect");
@@ -40,10 +52,10 @@
 	jslGoTo("", "");
 }
 function uiDoIsdn() {
-	jslGoTo("fon", jslGetValue("uiPostPageMaster"));
+	jslGoTo("fon", "isdn");
 }
 function uiDoMsn() {
-//	jslSetValue("uiPostPageMaster", "isdn");
+	jslSetValue("uiPostPageMaster", "isdn");
 	jslGoTo("fon", "isdnmsn");
 }
 function uiDoOptionen() {
@@ -56,7 +68,7 @@
 	jslGoTo("fon", "dectmsn");
 }
 function uiEditISDN(nr) {
-	jslCopyValue("uiPostParent", "uiPostPageName");
+	jslCopyValue("uiPostPageMaster", "uiPostPageName");
 	jslSetValue("uiPostIsdnNr", nr);
 	jslSubmitFormEx("fon", "fon1isdn", jslGetValue("uiPostPageName"));
 }
@@ -69,7 +81,7 @@
 	jslSubmitFormEx("fon", "", "");
 }
 function uiNewISDN() {
-	jslCopyValue("uiPostParent", "uiPostPageName");
+	jslCopyValue("uiPostPageMaster", "uiPostPageName");
 	jslSetValue("uiPostIsdnNr", g_New);
 	jslSubmitFormEx("fon", "fon1isdn", jslGetValue("uiPostPageName"));
 }
diff -burN usr/www/all/html/de/fon/fonsetupdect.frm usr/www/all/html/de/fon/fonsetupdect.frm
--- usr/www/all/html/de/fon/fonsetupdect.frm	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/fon/fonsetupdect.frm	2007-04-07 10:17:26.000000000 +0200
@@ -0,0 +1,9 @@
+<input type="hidden" name="var:MsnNr" value="<? echo $var:MsnNr ?>" id="uiPostMsnNr">
+<input type="hidden" name="dect:settings/RingOnAllMSNs" value="<? query dect:settings/RingOnAllMSNs ?>" id="uiPostRingOnAllMSNs" disabled>
+<? repeat [ 0 4 ] `
+<input type="hidden" name="dect:settings/MSN$0/MSN" value="<? query dect:settings/MSN$0/MSN ?>" id="uiPostMSN$0" disabled>
+<input type="hidden" name="dect:settings/MSN$0/CLIR" value="<? query dect:settings/MSN$0/CLIR ?>" id="uiPostCLIR$0" disabled>
+<input type="hidden" name="dect:settings/MSN$0/CallWaiting" value="<? query dect:settings/MSN$0/CallWaiting ?>" id="uiPostCallWaiting$0" disabled>
+<input type="hidden" name="dect:settings/MSN$0/BusyOnBusy" value="<? query dect:settings/MSN$0/BusyOnBusy ?>" id="uiPostBusyOnBusy$0" disabled>
+<input type="hidden" name="dect:settings/MSN$0/Handsets" value="<? query dect:settings/MSN$0/Handsets ?>" id="uiPostHandsets$0" disabled>
+` ?>
diff -burN usr/www/all/html/de/fon/fonsetupdect.html usr/www/all/html/de/fon/fonsetupdect.html
--- usr/www/all/html/de/fon/fonsetupdect.html	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/fon/fonsetupdect.html	2007-04-05 22:25:30.000000000 +0200
@@ -0,0 +1,72 @@
+<? include ../html/$var:lang/fon/fonsetupdect.inc ?> 
+<div id="content">
+ 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
+		<? echo '$var:Text23' ?>
+	</div></div></div></div></div></div>
+	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
+ 	<ul class="tabs">
+<? if eq $var:pagename 'fonsetupdect' `
+ 		<li><a href="javascript:uiDoDect()"><? echo '$var:Text24' ?></a></li>
+<? if eq '$var:usePSTN' 1 `
+ 		<li><a href="javascript:uiDoDectMsn()"><? echo '$var:Text25' ?></a></li>
+` ?>
+<? if eq '<? query box:settings/expertmode/activated ?>' '1' `
+ 		<li><a href="javascript:uiDoListDect()"><? echo '$var:Text26' ?></a></li>
+` ?>
+ 		<li class="tabs_on"><a href="javascript:uiDoCancel()"><? echo '$var:Text28' ?></a></li>
+ 		<li><a href="javascript:uiDoEditDect()"><? echo '$var:Text29' ?></a></li>
+` `
+ 		<li><a href="javascript:uiDoIsdn()"><? echo '$var:Text24' ?></a></li>
+<? if eq '$var:usePSTN' 1 `
+ 		<li><a href="javascript:uiDoMsn()"><? echo '$var:Text25' ?></a></li>
+` ?>
+<? if eq '<? query box:settings/expertmode/activated ?>' '1' `
+ 		<li><a href="javascript:uiDoListIsdn()"><? echo '$var:Text26' ?></a></li>
+` ?>
+ 		<li><a href="javascript:uiDoOptionen()"><? echo '$var:Text27' ?></a></li>
+ 		<li class="tabs_on"><a href="javascript:uiDoCancel()"><? echo '$var:Text28' ?></a></li>
+ 		<li><a href="javascript:uiDoEditIsdn()"><? echo '$var:Text29' ?></a></li>
+` ?>
+ 	</ul>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<p class="mb10"><? echo $var:Text1 ?></p>
+		<p class="mb10"><input type="checkbox" id="uiViewRingOnAllMSNs" onclick="uiRingOnAllMSNs()">&nbsp;<label for="uiViewRingOnAllMSNs"><? echo $var:Text2 ?></label></p>
+	</div></div></div></div></div></div>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<p class="mb10"><? echo $var:Text17 ?></p>
+		<table id="tMSN" class="tborder">
+			<tr>
+				<th class="c1"><? echo $var:Text3 ?></th>
+				<th class="c2"><? echo $var:Text4 ?></th>
+				<th class="c3"><? echo $var:Text5 ?></th>
+				<th class="c4"><? echo $var:Text6 ?></th>
+				<th class="c5"><? echo $var:Text7 ?></th>
+				<th class="c6"><? echo $var:Text8 ?></th>
+				<th class="c7"></th>
+				<th class="c8"></th>
+			</tr>	
+<? repeat [ 0 4 ] '
+			<tr id="uiViewMSN$0" style="display:none">
+				<td class="c1"><option value="$0"><script type="text/javascript">document.write(uiIndexMSN("$0"));</script></option></td>
+				<td class="c2"><? query dect:settings/MSN$0/MSN ?></td>
+				<td class="c3"><input type="checkbox" id="uiViewCLIR$0" disabled></td>
+				<td class="c4"><input type="checkbox" id="uiViewCallWaiting$0" disabled></td>
+				<td class="c5"><input type="checkbox" id="uiViewBusyOnBusy$0" disabled></td>
+				<td class="c6"><script type="text/javascript">document.write(uiListHandsets("<? query dect:settings/MSN$0/Handsets ?>"));</script></td>
+				<td class="c7"><button type="button" id="uiViewEdit$0" onclick="uiEditMSN($0)" title="$var:Text30" style="width: 30px">
+					<img src="../html/<? echo $var:lang ?>/images/bearbeiten.gif" align="bottom" width="16" height="16" hspace="4">
+				</button></td>
+				<td class="c8"><button type="button" id="uiViewDelete$0" onclick="uiDeleteMSN($0)" title="$var:Text31" style="width: 30px">
+					<img src="../html/<? echo $var:lang ?>/images/loeschen.gif" align="bottom" width="16" height="16" hspace="4">
+				</button></td>
+			</tr>
+' ?>
+			<tr id="uiNichts" style="display:none"><td colspan=5 class="ac">Es sind keine MSNs eingerichtet</td></tr>
+		</table>
+		<p class="mt10 ar"><input type="button" value="<? echo $var:Text21 ?>" id="uiViewNew" onclick="uiNewMSN()" class="Pushbutton" style="width:180px;"></p>
+	</div></div></div></div></div></div>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
+		<input type="button" onclick="uiDoHelp()" value="<? echo $var:txtHelp ?>" class="Pushbutton" id="buttonHilfe">
+	</div></div></div></div></div></div>
+	</div></div></div></div></div></div></div>
+</div>
diff -burN usr/www/all/html/de/fon/fonsetupdect.inc usr/www/all/html/de/fon/fonsetupdect.inc
--- usr/www/all/html/de/fon/fonsetupdect.inc	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/fon/fonsetupdect.inc	2007-07-11 22:32:04.000000000 +0200
@@ -0,0 +1,29 @@
+<? include ../html/$var:lang/global.inc ?>
+<? setvariable var:Text1 'Die Mobilteile können so eingerichtet werden, dass sie auf alle eingehenden Anrufe reagieren. Durch das Setzen dieser Option gehen alle Rufnummernzuordnungen verloren.' ?>
+<? setvariable var:Text2 'Auf alle Rufnummern reagieren' ?>
+<? setvariable var:Text3 'MSN' ?>
+<? setvariable var:Text4 'Rufnummer' ?>
+<? setvariable var:Text5 'Anonym' ?>
+<? setvariable var:Text6 'Anklopfen' ?>
+<? setvariable var:Text7 'MSN besetzt' ?>
+<? setvariable var:Text8 'Mobilteile' ?>
+<? setvariable var:Text17 'Ordnen Sie den Mobilteilen bis zu fünf Rufnummern zu, auf die die Mobilteile reagieren und die für abgehende Anrufe verwendet werden können.' ?>
+<? setvariable var:Text21 'Neue Zuordnung' ?>
+<? if eq $var:pagename 'fonsetupdect' `
+<? setvariable var:Text23 'DECT-Endgeräte' ?>
+` `
+<? setvariable var:Text23 'ISDN-Endgeräte' ?>
+` ?>
+<? setvariable var:Text24 'Übersicht' ?>
+<? setvariable var:Text25 'Festnetz' ?>
+<? setvariable var:Text26 'Intern' ?>
+<? setvariable var:Text27 'Optionen' ?>
+<? setvariable var:Text28 'Zuordnung' ?>
+<? setvariable var:Text29 'Mobilteile' ?>
+<? setvariable var:Text30 'Zuordnung ändern' ?>
+<? setvariable var:Text31 'Zuordnung löschen' ?>
+<? setvariable var:Text50 'A' ?>
+<? setvariable var:Text51 'B' ?>
+<? setvariable var:Text52 'C' ?>
+<? setvariable var:Text53 'D' ?>
+<? setvariable var:Text54 'E' ?>
diff -burN usr/www/all/html/de/fon/fonsetupdect.js usr/www/all/html/de/fon/fonsetupdect.js
--- usr/www/all/html/de/fon/fonsetupdect.js	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/fon/fonsetupdect.js	2007-04-07 11:17:14.000000000 +0200
@@ -0,0 +1,140 @@
+<!--		../fon/fonsetupdect.js		-->
+<style type="text/css">
+<!--
+#content {width: 560px; margin: auto;}
+#tMSN {width: 100%;}
+#tMSN td {padding: 2px 3px;}
+#tMSN th {padding: 2px 3px;}
+#tMSN .c1 {text-align: center}
+#tMSN .c2 {text-align: left}
+#tMSN .c3 {text-align: center}
+#tMSN .c4 {text-align: center}
+#tMSN .c5 {text-align: center}
+#tMSN .c6 {text-align: left}
+#tMSN .c7, #tMSN .c8 {width: 30px;}
+.mt10 {margin-top: 10px;}
+.ar {text-align: right;}
+.ac {text-align: center;}
+-->
+</style>
+<script type="text/javascript">
+<? include ../html/$var:lang/js/jsl.js ?>
+var g_mldDelete	= "Wollen Sie diese Zuordnung löschen ?";
+var g_mldAllOn	= "Wollen Sie alle bestehenden Zuordnungen löschen ?";
+var g_New = -1;
+var g_Sequence = new Array("1 ", "2 ", "3 ", "4 ", "5 ", "6 ");
+var g_Index = new Array("A", "B", "C", "D", "E");
+var g_Handsets;
+function uiDoOnLoad() {
+	g_Handsets = 0;
+
+<? multiquery dect:settings/Handset/list(Subscribed) `
+<? if eq $2 1 `
+	 g_Handsets |= (1<<$0);
+` ?>
+` ?>
+
+	jslSetChecked("uiViewRingOnAllMSNs", jslGetValue("uiPostRingOnAllMSNs") == "1");
+	jslSetEnabled("uiViewNew", jslGetValue("uiPostRingOnAllMSNs") != "1");
+
+	var bFound = false;
+	for (var i=0; i<5; i++) {
+		if (jslGetValue("uiPostMSN"+i) != "") {
+			jslSetChecked("uiViewCLIR"+i, jslGetValue("uiPostCLIR"+i) == "1");
+			jslSetChecked("uiViewCallWaiting"+i, jslGetValue("uiPostCallWaiting"+i) == "1");
+			jslSetChecked("uiViewBusyOnBusy"+i, jslGetValue("uiPostBusyOnBusy"+i) == "1");
+			jslDisplay("uiViewMSN"+i, true); bFound=true;
+		} else {
+			jslDisable("uiViewEdit"+i)
+			jslDisable("uiViewDelete"+i)
+			if (g_New == -1) g_New = i;
+		}
+	}
+	jslDisplay("uiNichts", !bFound);
+	if (g_New == -1) jslDisable("uiViewNew");
+	jslZebrastreifen("tMSN");
+}
+function uiDoHelp() {
+	jslPopHelp("hilfe_fon_setupdect");
+}
+function uiDoCancel() {
+	jslGoTo("", "");
+}
+function uiDoIsdn() {
+	jslGoTo("fon", "isdn");
+}
+function uiDoMsn() {
+	jslSetValue("uiPostPageMaster", "isdn");
+	jslGoTo("fon", "isdnmsn");
+}
+function uiDoOptionen() {
+	jslGoTo("fon", "isdnoptionen");
+}
+function uiDoListIsdn() {
+	jslGoTo("fon", "fonlistisdn");
+}
+function uiDoEditIsdn() {
+	jslGoTo("fon", "foneditisdn");
+}
+function uiDoDect() {
+	jslGoTo("fon", "dect");
+}
+function uiDoListDect() {
+	jslGoTo("fon", "fonlistdect");
+}
+function uiDoEditDect() {
+	jslGoTo("fon", "foneditdect");
+}
+function uiDoDectMsn() {
+	jslGoTo("fon", "dectmsn");
+}
+function uiEditMSN(nr) {
+	jslCopyValue("uiPostPageMaster", "uiPostPageName");
+	jslSetValue("uiPostMsnNr", nr);
+	jslSubmitFormEx("fon", "fon1dect", jslGetValue("uiPostPageName"));
+}
+function uiDeleteMSN(nr) {
+	if (!confirm(g_mldDelete)) return;
+	jslSetValue("uiPostMSN"+nr, "");
+	jslEnable("uiPostMSN"+nr);
+	jslSubmitFormEx("fon", "", "");
+}
+function uiNewMSN() {
+	jslCopyValue("uiPostPageMaster", "uiPostPageName");
+	jslSetValue("uiPostMsnNr", g_New);
+	jslSubmitFormEx("fon", "fon1dect", jslGetValue("uiPostPageName"));
+}
+function uiRingOnAllMSNs() {
+	var bFound = false;
+	if (jslGetChecked("uiViewRingOnAllMSNs")) {
+		for (var j=0; j<5; j++) {
+			if (jslGetValue("uiPostMSN"+j) != "") bFound=true;
+		}
+		if (bFound) {
+			if (!confirm(g_mldAllOn)) {
+				jslSetChecked("uiViewRingOnAllMSNs", false);
+				return;
+			} 
+			for (var i=0; i<5; i++) {
+				jslSetValue("uiPostMSN"+i, "");
+				jslEnable("uiPostMSN"+i);
+			}
+		}
+	}
+	jslSetValue("uiPostRingOnAllMSNs", jslGetChecked("uiViewRingOnAllMSNs") ? "1":"0");
+	jslEnable("uiPostRingOnAllMSNs");
+	jslSubmitFormEx("fon", "", "");
+}
+function uiIndexMSN(nr) {
+	return g_Index[Number(nr)];
+}
+function uiListHandsets(bitset) {
+	var bits = Number(bitset);
+	var list = "";
+	for (var j=0; j<6; j++) {
+//		if (bits & g_Handsets & (1<<j) != 0)	list += g_Sequence[j];
+		if ((bits & (1<<j)) != 0)	list += g_Sequence[j];
+	}
+	return list;
+}
+</script>
diff -burN usr/www/all/html/de/fon/fonsetupisdn.frm usr/www/all/html/de/fon/fonsetupisdn.frm
--- usr/www/all/html/de/fon/fonsetupisdn.frm	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/fon/fonsetupisdn.frm	2007-04-03 09:28:14.000000000 +0200
@@ -0,0 +1 @@
+<? include ../html/$var:lang/fon/fonsetupdect.frm ?>
diff -burN usr/www/all/html/de/fon/fonsetupisdn.html usr/www/all/html/de/fon/fonsetupisdn.html
--- usr/www/all/html/de/fon/fonsetupisdn.html	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/fon/fonsetupisdn.html	2007-04-03 09:29:30.000000000 +0200
@@ -0,0 +1 @@
+<? include ../html/$var:lang/fon/fonsetupdect.html ?>
diff -burN usr/www/all/html/de/fon/fonsetupisdn.js usr/www/all/html/de/fon/fonsetupisdn.js
--- usr/www/all/html/de/fon/fonsetupisdn.js	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/fon/fonsetupisdn.js	2007-04-03 09:28:58.000000000 +0200
@@ -0,0 +1 @@
+<? include ../html/$var:lang/fon/fonsetupdect.js ?>
diff -burN usr/www/all/html/de/fon/isdn.frm usr/www/all/html/de/fon/isdn.frm
--- usr/www/all/html/de/fon/isdn.frm	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/isdn.frm	2006-12-13 17:03:02.000000000 +0100
@@ -1,7 +1,3 @@
-<input type="hidden" name="var:FonNr" value="<? echo $var:FonNr ?>" id="uiPostFonNr">
-<input type="hidden" name="var:IsdnNr" value="<? echo $var:IsdnNr ?>" id="uiPostIsdnNr">
-<input type="hidden" name="var:parent" value="<? echo $var:parent ?>" id="uiPostParent">
-<input type="hidden" name="var:ShowIsdnDefault" value="<? echo $var:ShowIsdnDefault ?>" id="uiShowIsdnDefault">
 <input type="hidden" name="telcfg:settings/MSN/POTS" value="<? query telcfg:settings/MSN/POTS ?>" id="uiPostPots">
 <input type="hidden" name="telcfg:settings/MSN/NTDefault" value="<? query telcfg:settings/MSN/NTDefault ?>" id="uiPostNTDefault">
 <input type="hidden" name="telcfg:settings/MSN/MSN0" value="<? query telcfg:settings/MSN/MSN0 ?>" id="uiPostMsn0" disabled>
@@ -17,13 +13,3 @@
 <? multiquery sip:settings/sip/list(displayname) '
 <input type="hidden" name="sip:settings/$1/displayname" value="$2" id="uiPost$1" disabled>
 ' ?>
-<input type="hidden" name="telcfg:settings/MSN/Port3/BusyOnBusy" value="<? query telcfg:settings/MSN/Port3/BusyOnBusy ?>" id="uiPostBusy">
-<input type="hidden" name="telcfg:settings/MSN/Port3/CallWaitingProt" value="<? query telcfg:settings/MSN/Port3/CallWaitingProt ?>" id="uiPostWaiting">
-<input type="hidden" name="telcfg:settings/MSN/Port3/NoRingWithNightSetting" value="<? query telcfg:settings/MSN/Port3/NoRingWithNightSetting?>" id="uiPostNoRingNS">
-<input type="hidden" name="telcfg:settings/MSN/Port3/RingAllowed" value="<? query telcfg:settings/MSN/Port3/RingAllowed ?>" id="uiPostRingAllowed0">
-<input type="hidden" name="telcfg:settings/MSN/Port3/NoRingTime" value="<? query telcfg:settings/MSN/Port3/NoRingTime?>" id="uiPostNoRingTime0">
-<input type="hidden" name="telcfg:settings/MSN/Port3/COLR" value="<? query telcfg:settings/MSN/Port3/COLR?>" id="uiPostColr">
-<input type="hidden" name="telcfg:settings/MSN/Port3/MWI_Voice" value="<? query telcfg:settings/MSN/Port3/MWI_Voice?>" id="uiPostMwiVoice">
-<input type="hidden" name="telcfg:settings/MSN/Port3/MWI_Fax" value="<? query telcfg:settings/MSN/Port3/MWI_Fax?>" id="uiPostMwiFax">
-<input type="hidden" name="telcfg:settings/MSN/Port3/MWI_Mail" value="<? query telcfg:settings/MSN/Port3/MWI_Mail?>" id="uiPostMwiMail">
-<input type="hidden" name="telcfg:settings/MSN/Port3/MWI_Once" value="<? query telcfg:settings/MSN/Port3/MWI_Once ?>" id="uiPostMwiOnce">
diff -burN usr/www/all/html/de/fon/isdn.html usr/www/all/html/de/fon/isdn.html
--- usr/www/all/html/de/fon/isdn.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/isdn.html	2007-07-11 22:32:04.000000000 +0200
@@ -5,21 +5,16 @@
 	</div></div></div></div></div></div>
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 	<ul class="tabs">
-<? if eq '$var:pagemaster' 'fondevices' `
-<? if eq '$var:ShowIsdnDefault' '0' `
-		<li><a href="javascript:uiDoEditIsdn()"><? echo '$var:Text24' ?></a></li>
-` ?>
-` ?>
-		<li class="tabs_on"><a href="javascript:uiDoRefresh()"><? echo $var:Text18 ?></a></li>
-<? if neq '$var:pagemaster' 'fondevices' `
+ 		<li class="tabs_on"><a href="javascript:uiDoCancel()"><? echo $var:Text18 ?></a></li>
 <? if eq '$var:usePSTN' 1 `
 		<li><a href="javascript:uiDoMsn()"><? echo '$var:Text19' ?></a></li>
 ` ?>
 <? if eq '<? query box:settings/expertmode/activated ?>' '1' `
 		<li><a href="javascript:uiDoListIsdn()"><? echo '$var:Text20' ?></a></li>
 ` ?>
-` ?>
 		<li><a href="javascript:uiDoOptionen()"><? echo $var:Text21 ?></a></li>
+ 		<li><a href="javascript:uiDoSetupIsdn()"><? echo '$var:Text28' ?></a></li>
+ 		<li><a href="javascript:uiDoEditIsdn()"><? echo '$var:Text29' ?></a></li>
 	</ul>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<p class="mb10"><? echo $var:Text3 ?></p>
@@ -29,22 +24,16 @@
 		</p>
 		<p class="mb10"><? echo $var:Text5 ?></p>
 		<p class="Left25 mb5"><? echo $var:Text6 ?></p>
-		<table id="t1" class="Left50 tborder mt5" style="width: 300px">
-			<tr ><th class="c2"><b><? echo $var:Text25 ?></b></th><th class="c1"><b><? echo $var:Text26 ?></b></th></tr>
+		<table id="t1" class="Left50 tborder" style="width: 300px">
 <? multiquery sip:settings/sip/list(displayname) `
-			<tr id="uiSip$0" style="display:none"><td class="c2">&nbsp;$2</td><td class="c1">$var:Text16</td></tr>
+			<tr id="uiSip$0" style="display:none"><td class="c1">$var:Text16</td><td class="c2">$2</td></tr>
 ` ?>
-<? if eq '$var:usePSTN' 1 `
 <? repeat [ 0 9 ] `
-			<tr id="uiMsn$10" style="display:none"><td class="c2">&nbsp;<? query telcfg:settings/MSN/MSN$10 ?></td><td class="c1">$var:Text7</td></tr> 
-` ?>
-			<tr id="uiPots" style="display:none"><td class="c2">&nbsp;<? query telcfg:settings/MSN/POTS ?></td><td class="c1"><? echo $var:Text7 ?></td></tr>
+			<tr id="uiMsn$0" style="display:none"><td class="c1">$var:Text7</td><td class="c2"><? query telcfg:settings/MSN/MSN$0 ?></td></tr> 
 ` ?>
+			<tr id="uiPots" style="display:none"><td class="c1"><? echo $var:Text7 ?></td><td class="c2"><? query telcfg:settings/MSN/POTS ?></td></tr>
 			<tr id="uiNichts" style="display:none"><td colspan=2 class="ac"><? echo $var:Text17 ?></td></tr>
 		</table>
-<? if eq '<? query box:settings/expertmode/activated ?>' '1' `
-		<p class="mb5">&nbsp;</p>
-` ?>
 	</div></div></div></div></div></div>
 	<div class="backdialog" id="uiSendBook" style="display:none"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<p class="mb5"><? echo $var:Text22 ?></p>
diff -burN usr/www/all/html/de/fon/isdn.inc usr/www/all/html/de/fon/isdn.inc
--- usr/www/all/html/de/fon/isdn.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/isdn.inc	2007-07-11 22:32:04.000000000 +0200
@@ -1,41 +1,17 @@
 <? include ../html/$var:lang/global.inc ?>
-<? setvariable var:Text1 'ISDN-Endgeräte' ?>
-<? setvariable var:Text3 'ISDN-Endgeräte ohne eingestellte MSN führen ausgehende Anrufe über die Hauptrufnummer und reagieren auf alle einkommenden Anrufe.' ?>
+<? setvariable var:Text1 'Telefonie-Geräte' ?>
+<? setvariable var:Text3 'Telefonie-Geräte ohne eingestellte MSN führen ausgehende Anrufe über die Hauptrufnummer und reagieren auf alle einkommenden Anrufe.' ?>
 <? setvariable var:Text4 'Hauptrufnummer' ?>
-<? setvariable var:Text5 'Auf Wunsch können Sie an Ihren ISDN-Endgeräten folgende MSN einstellen. Hinweise dazu entnehmen Sie den Unterlagen des ISDN-Endgeräts.' ?>
+<? setvariable var:Text5 'Auf Wunsch können Sie an Ihren Telefonie-Geräten folgende MSN einstellen. Hinweise dazu entnehmen Sie den Unterlagen des Telefonie-Geräts.' ?>
 <? setvariable var:Text6 'vorhandene Rufnummern' ?>
 <? setvariable var:Text7 'Festnetz:' ?>
 <? setvariable var:Text16 'Internet:' ?>
 <? setvariable var:Text17 'Keine Rufnummern eingerichtet' ?>
-<? if eq '$var:pagemaster' 'fondevices' `
-<? setvariable var:Text18 'FON S0' ?>
-<? setvariable var:Text24 'Rufnummer des Endgerätes' ?>
-` `
 <? setvariable var:Text18 'Übersicht' ?>
-<? setvariable var:Text24 'Interne Nummer' ?>
-` ?>
-<? setvariable var:Text19 'Festnetzrufnummern' ?>
-<? setvariable var:Text20 'Interne Nummern' ?>
-<? setvariable var:Text21 'Leistungsmerkmale' ?>
+<? setvariable var:Text19 'Festnetz' ?>
+<? setvariable var:Text20 'Intern' ?>
+<? setvariable var:Text21 'Optionen' ?>
 <? setvariable var:Text22 'Sie können die Telefonbucheinträge an ein Mobilteil senden.' ?>
 <? setvariable var:Text23 'Telefonbuch senden' ?>
-<? setvariable var:Text24 'Rufnummer des Endgerätes' ?>
-<? setvariable var:Text25 'Rufnummer' ?>
-<? setvariable var:Text26 'Verbindung via' ?>
-<? setvariable var:Text30 'Weitere Leistungsmerkmale für ISDN-Endgeräte' ?>
-<? setvariable var:Text31 'Aktivieren Sie die gewünschten Komfort- und Leistungsmerkmale' ?>
-<? setvariable var:Text32 'Ruf abweisen bei besetzt (Busy on busy).' ?>
-<? setvariable var:Text33 'Einkommende Rufe werden abgelehnt, wenn mit der angerufenen MSN bereits ein Gespräch geführt wird.' ?>
-<? setvariable var:Text34 'Eigene Rufnummer unterdrücken (COLR).' ?>
-<? setvariable var:Text35 'Die eigene Rufnummer erscheint nicht im Display des Anrufenden.' ?>
-<? setvariable var:Text36 'Ruf abweisen bei besetzt durch das ISDN-Endgerät bestimmen.' ?>
-<? setvariable var:Text38 'Neue Nachrichten am Telefon signalisieren (MWI)' ?>
-<? setvariable var:Text39 'Die FRITZ!Box informiert Sie über das Telefon, ob sich neue Nachrichten in der Mailbox Ihres Telefonie-Anbieters befinden. Bei neuen Nachrichten finden Sie einen Eintrag in der Anrufliste Ihres Telefons.' ?>
-<? setvariable var:Text40 'Die Benachrichtigung erfolgt durch ein kurzes Klingeln des Telefons an dieser Nebenstelle. Welche Nachrichten sollen berücksichtigt werden?' ?>
-<? setvariable var:Text41 'neue Sprachnachricht' ?>
-<? setvariable var:Text42 'neues Fax' ?>
-<? setvariable var:Text43 'neue E-Mail' ?>
-<? setvariable var:Text44 'Informationen senden' ?>
-<? setvariable var:Text45 'für' ?>
-<? setvariable var:Text46 'nur bei der ersten neuen Nachricht' ?>
-<? setvariable var:Text47 'bei jeder neuen Nachricht' ?>
+<? setvariable var:Text28 'Zuordnung' ?>
+<? setvariable var:Text29 'Mobilteile' ?>
diff -burN usr/www/all/html/de/fon/isdn.js usr/www/all/html/de/fon/isdn.js
--- usr/www/all/html/de/fon/isdn.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/isdn.js	2007-07-11 22:32:04.000000000 +0200
@@ -3,17 +3,13 @@
 <!--
 #content {width: 580px; margin: auto;}
 .pFett {font-weight: bold; margin-bottom: 10px;}
-.c1 {width: 150px; margin-left: 5px; padding: 2px 5px;}
-.c2 { margin-left: 5px; padding: 2px 0px;}
+.c1 {width: 60px; padding: 1px 5px;}
+.c2 {padding: 1px 0px;}
 .Left20 {margin-left: 20px;}
 .Left25 {margin-left: 25px;}
 .Left50 {margin-left: 50px;}
 .ar {text-align: right;}
 .ac {text-align: center;}
-#tMerkmale .c3 {padding: 4px 5px; text-align: center; vertical-align: top;}
-#tMerkmale .c4 {padding: 5px 5px;}
-.ml25 {margin-left: 25px;}
-.mt10 {margin-top: 10px;}
 -->
 </style>
 <script type="text/javascript">
@@ -25,7 +21,6 @@
 <? multiquery sip:settings/sip/list '
 var g_$1;
 ' ?>
-<? if eq '$var:usePSTN' 1 `
 var g_msn0;
 var g_msn1;
 var g_msn2;
@@ -36,12 +31,10 @@
 var g_msn7;
 var g_msn8;
 var g_msn9;
-` ?>
 function uiDoOnLoad() {
 <? multiquery sip:settings/sip/list '
 	g_$1 = jslGetValue("uiPost$1");
 ' ?>
-<? if eq '$var:usePSTN' 1 `
 	g_msn0 = jslGetValue("uiPostMsn0");
 	g_msn1 = jslGetValue("uiPostMsn1");
 	g_msn2 = jslGetValue("uiPostMsn2");
@@ -52,20 +45,17 @@
 	g_msn7 = jslGetValue("uiPostMsn7");
 	g_msn8 = jslGetValue("uiPostMsn8");
 	g_msn9 = jslGetValue("uiPostMsn9");
-` ?>
 	fillId("uiViewNr", jslGetValue("uiPostNTDefault"));
 	var bFound = false;
 <? multiquery sip:settings/sip/list(displayname) `
 	if (valIsZahlVorhanden("$2")) {jslDisplay("uiSip$0", true); bFound = true;}
 ` ?>
-<? if eq '$var:usePSTN' 1 `
 	for (var i=0; i<10; i++) {
 		if (jslGetValue("uiPostMsn"+i) != "") {jslDisplay("uiMsn"+i, true); bFound = true;}
 	}
 	if (jslGetValue("uiPostPots") != "") {jslDisplay("uiPots", true); bFound = true;}
-` ?>
 	if (!bFound) jslDisplay("uiNichts", true);
-	jslZebrastreifen("t1","#FFFFFF","#F8F8F8");
+	jslZebrastreifen("t1", "#F8F8F8", "#FFFFFF");
 <? setvariable var:handsetfound 0 ?>
 <? multiquery dect:settings/Handset/list(Subscribed,Type) `
 <? if eq $2 1 `
@@ -75,23 +65,26 @@
 ` ?>
 ` ?>
 	jslDisplay("uiSendBook" , ("<? echo $var:handsetfound ?>" == "1"));
-	jslSetValue("uiPostPageMaster", "isdn");
-	jslSetValue("uiPostParent", "isdn");
 }
 function uiDoSave() {
 	var nr = jslGetValue("uiViewNr");
 	jslSetValue("uiPostNTDefault", nr == "Leer" ? "":nr);
 	jslFormSubmitEx("fon", "isdn");
 }
-function uiDoRefresh() {
-	jslGoTo("", "");
-}
 function uiDoCancel() {
-<? if eq '$var:pagemaster' 'fondevices' `
-	jslGoTo("fon", jslGetValue("uiPostPageMaster"));
-` `
 	jslGoTo("fon", "isdn");
-` ?>
+}
+function uiDoSetupDect() {
+	jslGoTo("fon", "fonsetupdect");
+}
+function uiDoEditDect() {
+	jslGoTo("fon", "foneditdect");
+}
+function uiDoSetupIsdn() {
+	jslGoTo("fon", "fonsetupisdn");
+}
+function uiDoEditIsdn() {
+	jslGoTo("fon", "foneditisdn");
 }
 function uiDoHelp() {
 	jslPopHelp("hilfe_fon_isdn");
@@ -103,9 +96,6 @@
 function uiDoOptionen() {
 	jslGoTo("fon", "isdnoptionen");
 }
-function uiDoEditIsdn() {
-	jslGoTo("fon", "fon1isdn");
-}
 function uiDoListIsdn() {
 	jslGoTo("fon", "fonlistisdn");
 }
@@ -140,16 +130,6 @@
 	var eintrag = new Option(text, val, false, false);
 	element.options[element.length]=eintrag;
 }
-function SetChecked (postid, viewid) {
-	jslSetChecked(viewid, jslGetValue(postid) != "0");
-}
-function GetChecked (postid, viewid) {
-	jslSetValue(postid, jslGetChecked(viewid) ? "1":"0");
-}
-function OnOnce(n) {
-	jslSetChecked("uiViewEinmal", n==0);
-	jslSetChecked("uiViewImmer", n==1);
-}
 function uiDoSendBook() {
 	jslSetValue("uiPostPageMaster", "isdn");
 	jslGoTo("fon", "buchsend");
diff -burN usr/www/all/html/de/fon/isdnoptionen.frm usr/www/all/html/de/fon/isdnoptionen.frm
--- usr/www/all/html/de/fon/isdnoptionen.frm	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/isdnoptionen.frm	2006-12-13 17:03:02.000000000 +0100
@@ -1,7 +1,3 @@
-<input type="hidden" name="var:FonNr" value="<? echo $var:FonNr ?>" id="uiPostFonNr">
-<input type="hidden" name="var:IsdnNr" value="<? echo $var:IsdnNr ?>" id="uiPostIsdnNr">
-<input type="hidden" name="var:ShowIsdnDefault" value="<? echo $var:ShowIsdnDefault ?>" id="uiShowIsdnDefault">
-<input type="hidden" name="var:parent" value="<? echo $var:parent ?>" id="uiPostParent">
 <input type="hidden" name="telcfg:settings/MSN/Port3/BusyOnBusy" value="<? query telcfg:settings/MSN/Port3/BusyOnBusy ?>" id="uiPostBusy">
 <input type="hidden" name="telcfg:settings/MSN/Port3/CallWaitingProt" value="<? query telcfg:settings/MSN/Port3/CallWaitingProt ?>" id="uiPostWaiting">
 <input type="hidden" name="telcfg:settings/MSN/Port3/NoRingWithNightSetting" value="<? query telcfg:settings/MSN/Port3/NoRingWithNightSetting?>" id="uiPostNoRingNS">
diff -burN usr/www/all/html/de/fon/isdnoptionen.html usr/www/all/html/de/fon/isdnoptionen.html
--- usr/www/all/html/de/fon/isdnoptionen.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/isdnoptionen.html	2007-07-11 22:32:04.000000000 +0200
@@ -1,25 +1,20 @@
 <? include ../html/$var:lang/fon/isdnoptionen.inc ?>
 <div id="content">
 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo '$var:Text48' ?>
+		Telefonie-Geräte
 	</div></div></div></div></div></div>
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 	<ul class="tabs">
-<? if eq '$var:pagemaster' 'fondevices' `
-<? if eq '$var:ShowIsdnDefault' '0' `
-		<li><a href="javascript:uiDoEditIsdn()"><? echo '$var:Text53' ?></a></li>
-` ?>
-` ?>
-		<li><a href="javascript:uiDoIsdn()"><? echo '$var:Text49' ?></a></li>
-<? if neq '$var:pagemaster' 'fondevices' `
+ 		<li><a href="javascript:uiDoIsdn()">Übersicht</a></li>
 <? if eq '$var:usePSTN' 1 `
-		<li><a href="javascript:uiDoMsn()"><? echo '$var:Text50' ?></a></li>
+ 		<li><a href="javascript:uiDoMsn()">Festnetz</a></li>
 ` ?>
 <? if eq '<? query box:settings/expertmode/activated ?>' '1' `
-		<li><a href="javascript:uiDoListIsdn()"><? echo '$var:Text51' ?></a></li>
-` ?>
+ 		<li><a href="javascript:uiDoListIsdn()">Intern</a></li>
 ` ?>
-		<li class="tabs_on"><a href="javascript:uiDoRefresh()"><? echo '$var:Text52' ?></a></li>
+ 		<li class="tabs_on"><a href="javascript:uiDoCancel()">Optionen</a></li>
+ 		<li><a href="javascript:uiDoSetupIsdn()"><? echo '$var:Text28' ?></a></li>
+ 		<li><a href="javascript:uiDoEditIsdn()"><? echo '$var:Text29' ?></a></li>
 	</ul>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<p class="mb5"><? echo $var:Text2 ?></p>
diff -burN usr/www/all/html/de/fon/isdnoptionen.inc usr/www/all/html/de/fon/isdnoptionen.inc
--- usr/www/all/html/de/fon/isdnoptionen.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/isdnoptionen.inc	2007-07-11 22:32:04.000000000 +0200
@@ -1,11 +1,11 @@
 <? include ../html/$var:lang/global.inc ?>
-<? setvariable var:Text1 'Weitere Leistungsmerkmale für ISDN-Telefone' ?>
-<? setvariable var:Text2 'Aktivieren Sie die gewünschten Komfort- und Leistungsmerkmale' ?>
+<? setvariable var:Text1 'Weitere Optionen für ISDN-Telefone' ?>
+<? setvariable var:Text2 'Aktivieren Sie die gewünschten Komfort- und Optionen' ?>
 <? setvariable var:Text3 'Ruf abweisen bei besetzt (Busy on busy).' ?>
 <? setvariable var:Text4 'Einkommende Rufe werden abgelehnt, wenn mit der angerufenen MSN bereits ein Gespräch geführt wird.' ?>
 <? setvariable var:Text5 'Eigene Rufnummer unterdrücken (COLR).' ?>
 <? setvariable var:Text6 'Die eigene Rufnummer erscheint nicht im Display des Anrufenden.' ?>
-<? setvariable var:Text7 'Ruf abweisen bei besetzt durch das ISDN-Endgerät bestimmen.' ?>
+<? setvariable var:Text7 'Ruf abweisen bei besetzt durch das Telefonie-Gerät bestimmen.' ?>
 <? setvariable var:Text8 'Klingelsperre' ?>
 <? setvariable var:Text9 'Einstellungen der Nachtschaltung gelten' ?>
 <? setvariable var:Text10 'individuelle Einstellung' ?>
@@ -18,6 +18,8 @@
 <? setvariable var:Text18 'von' ?>
 <? setvariable var:Text19 ':' ?>
 <? setvariable var:Text20 'bis' ?>
+<? setvariable var:Text28 'Zuordnung' ?>
+<? setvariable var:Text29 'Mobilteile' ?>
 <? setvariable var:Text38 'Neue Nachrichten am Telefon signalisieren (MWI)' ?>
 <? setvariable var:Text39 'Die FRITZ!Box informiert Sie über das Telefon, ob sich neue Nachrichten in der Mailbox Ihres Telefonie-Anbieters befinden. Bei neuen Nachrichten finden Sie einen Eintrag in der Anrufliste Ihres Telefons.' ?>
 <? setvariable var:Text40 'Die Benachrichtigung erfolgt durch ein kurzes Klingeln des Telefons an dieser Nebenstelle. Welche Nachrichten sollen berücksichtigt werden?' ?>
@@ -28,14 +30,3 @@
 <? setvariable var:Text45 'für' ?>
 <? setvariable var:Text46 'nur bei der ersten neuen Nachricht' ?>
 <? setvariable var:Text47 'bei jeder neuen Nachricht' ?>
-<? setvariable var:Text48 'ISDN-Endgeräte' ?>
-<? if eq '$var:pagemaster' 'fondevices' `
-<? setvariable var:Text49 'FON S0' ?>
-<? setvariable var:Text53 'Rufnummer des Endgerätes' ?>
-` `
-<? setvariable var:Text49 'Übersicht' ?>
-<? setvariable var:Text53 'Interne Nummer' ?>
-` ?>
-<? setvariable var:Text50 'Festnetzrufnummern' ?>
-<? setvariable var:Text51 'Interne Nummern' ?>
-<? setvariable var:Text52 'Leistungsmerkmale' ?>
diff -burN usr/www/all/html/de/fon/isdnoptionen.js usr/www/all/html/de/fon/isdnoptionen.js
--- usr/www/all/html/de/fon/isdnoptionen.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/isdnoptionen.js	2007-07-11 22:32:04.000000000 +0200
@@ -159,6 +159,7 @@
 			var startm = 0;
 			var endh = 0;
 			var endm = 0;
+			
 			var str = jslGetValue("uiPostNachtStart");
 			var n1 = str.indexOf(":");
 			if (n1 != -1) {
@@ -171,6 +172,7 @@
 				endh = Number(str.slice(0, n1));
 				endm = Number(str.slice(n1+1));
 			}
+			
 			jslSetValue("uiPostRingAllowed0", "1");	// Klingeln immer erlaubt, ausser Zeitraum
 			if (Number(starth)==0 && Number(startm)==0 && Number(endh)==0 && Number(endm)==0) {
 				jslSetValue("uiPostNoRingTime0"+n, "");
@@ -184,6 +186,7 @@
 		}
 	} else {
 		jslSetValue("uiPostNoRingNS", "0");
+		
 		var starth = jslGetValue("uiViewStartHH");
 		if (!valIsZahlVorhanden(starth)) {alert(g_mldStunden); return;}
 		if (Number(starth)<0 || Number(starth)>23) {alert(g_mldStunden); return;}
@@ -216,24 +219,10 @@
 			}
 		}
 	}
-<? if eq '$var:pagemaster' 'fondevices' `
-	jslFormSubmitEx("fon", jslGetValue("uiPostPageMaster"));
-` `
 	jslFormSubmitEx("fon", "isdnoptionen");
-` ?>
-}
-function uiDoEditIsdn() {
-	jslGoTo("fon", "fon1isdn");
-}
-function uiDoRefresh() {
-	jslGoTo("", "");
 }
 function uiDoCancel() {
-<? if eq '$var:pagemaster' 'fondevices' `
-	jslGoTo("fon", jslGetValue("uiPostPageMaster"));
-` `
 	jslGoTo("fon", "isdnoptionen");
-` ?>
 }
 function uiDoIsdn() {
 	jslGoTo("fon", "isdn");
@@ -245,6 +234,18 @@
 function uiDoListIsdn() {
 	jslGoTo("fon", "fonlistisdn");
 }
+function uiDoSetupDect() {
+	jslGoTo("fon", "fonsetupdect");
+}
+function uiDoEditDect() {
+	jslGoTo("fon", "foneditdect");
+}
+function uiDoSetupIsdn() {
+	jslGoTo("fon", "fonsetupisdn");
+}
+function uiDoEditIsdn() {
+	jslGoTo("fon", "foneditisdn");
+}
 function uiDoHelp() {
 	jslPopHelp("hilfe_fon_isdnoptionen");
 }
diff -burN usr/www/all/html/de/fon/klingelsperre.html usr/www/all/html/de/fon/klingelsperre.html
--- usr/www/all/html/de/fon/klingelsperre.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/klingelsperre.html	2006-12-13 17:03:02.000000000 +0100
@@ -5,14 +5,11 @@
 	</div></div></div></div></div></div>
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 		<ul class="tabs">
-			<li><a href="javascript:uiDoFon1()"><? echo $var:Text36 ?></a></li>
+	 		<li><a href="javascript:uiDoFon1()">Nebenstelle</a></li>
 			<li class="tabs_on"><a href="javascript:uiDoKlingelsperre()"><? echo $var:Text24 ?></a></li>
-<? if eq <? query box:settings/expertmode/activated ?> 1 `
-			<li ><a href="javascript:uiDoMerkmale()"><? echo '$var:Text37' ?></a></li>
-` ?>
+	 		<li ><a href="javascript:uiDoMerkmale()">Merkmale der Nebenstelle</a></li>
 		</ul>
 		<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-			<p class="mb10"><? echo $var:Text38 ?></p>
 			<p class="mb5"><input type="radio" name="Nachtschaltung" id="uiViewUseNs" onclick="OnNachtschaltung(0)">&nbsp;<label for="uiViewUseNs"><? echo $var:Text25 ?></label></p>
 			<p class="mb5"><input type="radio" name="Nachtschaltung" id="uiViewMyLocking" onclick="OnNachtschaltung(1)">&nbsp;<label for="uiViewMyLocking"><? echo $var:Text26 ?></label></p>
 			<div <? if eq <? query box:settings/expertmode/activated ?> 1 `class="ml25"` ?>>
diff -burN usr/www/all/html/de/fon/klingelsperre.inc usr/www/all/html/de/fon/klingelsperre.inc
--- usr/www/all/html/de/fon/klingelsperre.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/klingelsperre.inc	2006-12-13 17:03:02.000000000 +0100
@@ -6,15 +6,8 @@
 <? setvariable var:Text28 'immer gesperrt' ?>
 <? setvariable var:Text29 'mit Ausnahme:' ?>
 <? setvariable var:Text30 'täglich' ?>
-<? setvariable var:Text31 'samstags und sonntags' ?>
-<? setvariable var:Text32 'montags bis freitags' ?>
+<? setvariable var:Text31 'an Samstag und Sonntag' ?>
+<? setvariable var:Text32 'von Montag bis Freitag' ?>
 <? setvariable var:Text33 'von' ?>
 <? setvariable var:Text34 ':' ?>
 <? setvariable var:Text35 'bis' ?>
-<? setvariable var:Text36 'Nebenstelle' ?>
-<? setvariable var:Text37 'Merkmale des Telefoniegerätes' ?>
-<? setvariable var:Text38 'Hier können Sie einstellen, ob und wann das angeschlossene Telefoniegerät nicht mehr klingeln soll (Ruhe vor Anrufen).' ?>
-<? setvariable var:jstr0 `Geben Sie bitte bei den Stunden einen gültigen Wert ein.` ?>
-<? setvariable var:jstr1 `Geben Sie bitte bei den Minuten einen gültigen Wert ein.` ?>
-<? setvariable var:jstr2 `Nebenstelle FON ` ?>
-<? setvariable var:jstr2 `Nebenstelle FON ` ?>
diff -burN usr/www/all/html/de/fon/klingelsperre.js usr/www/all/html/de/fon/klingelsperre.js
--- usr/www/all/html/de/fon/klingelsperre.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/klingelsperre.js	2006-12-13 17:03:02.000000000 +0100
@@ -1,5 +1,4 @@
 <!--		../fon/klingelsperre.js		-->
-<? include ../html/$var:lang/fon/klingelsperre.inc ?>
 <style type="text/css">
 <!--
 #content {width: 560px; margin: auto;}
@@ -13,10 +12,10 @@
 <script type="text/javascript">
 <? include ../html/$var:lang/js/jsl.js ?>
 <? include ../html/$var:lang/js/val.js ?>
-var g_mldStunden	= "<? print $var:jstr0 ?>";
-var g_mldMinuten 	= "<? print $var:jstr1 ?>";
+var g_mldStunden	= "Geben Sie bitte bei den Stunden einen gültigen Wert ein.";
+var g_mldMinuten 	= "Geben Sie bitte bei den Minuten einen gültigen Wert ein.";
 var g_expertMode = "<? query box:settings/expertmode/activated ?>";
-var g_txt_Titel 			= "<? print $var:jstr2 ?>";
+var g_txt_Titel 			= "Nebenstelle Fon ";
 function uiDoOnLoad() {
 	var KlingelPeriod = jslGetValue("uiPostNoRingTime0");
 	var time1h = "00";
@@ -132,6 +131,7 @@
 			var startm = 0;
 			var endh = 0;
 			var endm = 0;
+			
 			var str = jslGetValue("uiPostNachtStart");
 			var n1 = str.indexOf(":");
 			if (n1 != -1) {
@@ -144,6 +144,7 @@
 				endh = Number(str.slice(0, n1));
 				endm = Number(str.slice(n1+1));
 			}
+			
 			jslSetValue("uiPostRingAllowed0", "1");	// Klingeln immer erlaubt, ausser Zeitraum
 			if (Number(starth)==0 && Number(startm)==0 && Number(endh)==0 && Number(endm)==0) {
 				jslSetValue("uiPostNoRingTime0"+n, "");
@@ -157,6 +158,7 @@
 		}
 	} else {
 		jslSetValue("uiPostNoRingNS", "0");
+		
 		var starth = jslGetValue("uiViewStartHH");
 		if (!valIsZahlVorhanden(starth)) {alert(g_mldStunden); return;}
 		if (Number(starth)<0 || Number(starth)>23) {alert(g_mldStunden); return;}
diff -burN usr/www/all/html/de/fon/merkmale.html usr/www/all/html/de/fon/merkmale.html
--- usr/www/all/html/de/fon/merkmale.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/merkmale.html	2007-07-11 22:32:04.000000000 +0200
@@ -5,11 +5,9 @@
 	</div></div></div></div></div></div>
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 	<ul class="tabs">
-		<li><a href="javascript:uiDoFon1()"><? echo $var:Text48 ?></a></li>
-		<li><a href="javascript:uiDoKlingelsperre()"><? echo $var:Text49 ?></a></li>
-<? if eq <? query box:settings/expertmode/activated ?> 1 `
-		<li class="tabs_on"><a href="javascript:uiDoMerkmale()"><? echo '$var:Text50' ?></a></li>
-` ?>
+ 		<li><a href="javascript:uiDoFon1()">Nebenstelle</a></li>
+ 		<li><a href="javascript:uiDoKlingelsperre()">Klingelsperre</a></li>
+ 		<li class="tabs_on"><a href="javascript:uiDoMerkmale()">Merkmale der Nebenstelle</a></li>
 	</ul>
 	<div class="backdialog" <? if lte $var:AbCount 1 `style="display:none"` ?>><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<p class="mb5"><? echo $var:Text2 ?></p>
@@ -24,7 +22,7 @@
 			</tr>
 			<tr>
 				<td class="c1"><input type="radio" name="NS1" onclick="OnChangeTyp('Fax')" id="uiViewFax0"></td>
-				<td class="c2"><label for="uiViewFax0"><? echo $var:Text5 ?></label></td>
+				<td class="c2"><label for="uiViewFax0"><? echo $var:Text5 ?></label><br><? echo $var:Text37 ?></td>
 			</tr>
 		</table>
 	</div></div></div></div></div></div>
@@ -49,14 +47,14 @@
 					</div>
 				</td>
 			</tr>
-			<tr id="uiShowSchutz0">
-				<td class="c1"><input type="checkbox" id="uiViewSchutz0" onclick="OnClickSchutz()"></td>
-				<td class="c2"><label for="uiViewSchutz0"><? echo $var:Text17 ?></label><br><? echo $var:Text18 ?></td>
-			</tr>
 			<tr <? if lte $var:AbCount 1 `style="display:none"` ?>>
 				<td class="c1"><input type="checkbox" id="uiViewBusy0"></td>
 				<td class="c2"><label for="uiViewBusy0"><? echo $var:Text15 ?></label><br><? echo $var:Text16 ?></td>
 			</tr>
+			<tr>
+				<td class="c1"><input type="checkbox" id="uiViewSchutz0"></td>
+				<td class="c2"><label for="uiViewSchutz0"><? echo $var:Text17 ?></label><br><? echo $var:Text18 ?></td>
+			</tr>
 <? if eq '$var:usePSTN' 1 `
 			<tr>
 				<td class="c1"><input type="checkbox" id="uiViewColr0"></td>
diff -burN usr/www/all/html/de/fon/merkmale.inc usr/www/all/html/de/fon/merkmale.inc
--- usr/www/all/html/de/fon/merkmale.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/merkmale.inc	2007-07-11 22:32:04.000000000 +0200
@@ -14,7 +14,7 @@
 <? setvariable var:Text13 'erweiterter Modus' ?>
 <? setvariable var:Text14 'einfacher Modus' ?>
 <? setvariable var:Text15 'Ruf abweisen bei besetzt (Busy on busy).' ?>
-<? setvariable var:Text16 'Einkommende Rufe werden abgelehnt, wenn mit der angerufenen Rufnummer bereits ein Gespräch geführt wird.' ?>
+<? setvariable var:Text16 'Einkommende Rufe werden abgelehnt, wenn mit der angerufenen MSN bereits ein Gespräch geführt wird.' ?>
 <? setvariable var:Text17 'Signalisierung eines zweiten Anrufs während eines Telefonates verhindern (Anklopfschutz).' ?>
 <? setvariable var:Text18 'Ein zweiter Anruf wird während eines Gespräches nicht signalisiert. Der Anrufende bekommt in diesem Fall ein besetzt signalisiert.' ?>
 <? setvariable var:Text22 'Übermittlung der Rufnummer des Telefons zum Anrufer unterdrücken (COLR).' ?>
@@ -30,6 +30,3 @@
 <? setvariable var:Text45 'für' ?>
 <? setvariable var:Text46 'nur bei der ersten neuen Nachricht' ?>
 <? setvariable var:Text47 'bei jeder neuen Nachricht' ?>
-<? setvariable var:Text48 'Nebenstelle' ?>
-<? setvariable var:Text49 'Klingelsperre' ?>
-<? setvariable var:Text50 'Merkmale des Telefoniegerätes' ?>
diff -burN usr/www/all/html/de/fon/merkmale.js usr/www/all/html/de/fon/merkmale.js
--- usr/www/all/html/de/fon/merkmale.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/merkmale.js	2006-12-13 17:03:02.000000000 +0100
@@ -37,7 +37,6 @@
 	OnClickClip();
 	SetChecked("uiPostBusy0", "uiViewBusy0");
 	SetChecked("uiPostWaiting0", "uiViewSchutz0");
-	OnClickSchutz();
 <? if eq '$var:usePSTN' 1 ` 
 	SetChecked("uiPostColr0", "uiViewColr0");
 ` ?> 
@@ -137,7 +136,6 @@
 			jslSetEnabled("uiViewSchutz0", false);
 			break;
 	}
-	OnClickSchutz();
 }
 function OnClickClir (id) {
 	if (jslGetChecked(id)) alert(g_mldClir);
@@ -161,11 +159,6 @@
 	jslSetChecked("uiViewClip1", n==1);
 	jslSetChecked("uiViewClip2", n==2);
 }
-function OnClickSchutz() {
-	var b = jslGetChecked("uiViewSchutz0");
-//	if (!b) jslSetChecked("uiViewBusy0", false);
-//	jslSetEnabled("uiViewBusy0", b);
-}
 function ZweistelligeNummer (n) {
 	if (n>9) return n.toString();
 	return "0"+n.toString();
diff -burN usr/www/all/html/de/fon/msn.html usr/www/all/html/de/fon/msn.html
--- usr/www/all/html/de/fon/msn.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/msn.html	2007-07-11 22:32:04.000000000 +0200
@@ -15,6 +15,8 @@
 <? if eq '<? query box:settings/expertmode/activated ?>' '1' `
 		<li><a href="javascript:uiDoListDect()"><? echo '$var:Text21' ?></a></li>
 ` ?>
+ 		<li><a href="javascript:uiDoSetupDect()"><? echo '$var:Text28' ?></a></li>
+ 		<li><a href="javascript:uiDoEditDect()"><? echo '$var:Text29' ?></a></li>
 	</ul>
 ` `
 <? if eq '$var:pagemaster' 'isdn' `
@@ -24,9 +26,9 @@
 <? if eq '<? query box:settings/expertmode/activated ?>' '1' `
 		<li><a href="javascript:uiDoListIsdn()"><? echo '$var:Text21' ?></a></li>
 ` ?>
-<? if eq '$var:pagemaster' 'isdn' `
 		<li><a href="javascript:uiDoOptionen()"><? echo '$var:Text22' ?></a></li>
-` ?>
+ 		<li><a href="javascript:uiDoSetupIsdn()"><? echo '$var:Text28' ?></a></li>
+ 		<li><a href="javascript:uiDoEditIsdn()"><? echo '$var:Text29' ?></a></li>
 	</ul>
 ` `
 	<ul class="tabs">
diff -burN usr/www/all/html/de/fon/msn.inc usr/www/all/html/de/fon/msn.inc
--- usr/www/all/html/de/fon/msn.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/msn.inc	2007-07-11 22:32:04.000000000 +0200
@@ -1,5 +1,5 @@
 <? include ../html/$var:lang/global.inc ?>
-<? setvariable var:Text1 'Festnetzrufnummern' ?>
+<? setvariable var:Text1 'Festnetz' ?>
 <? setvariable var:Text2 'Geben Sie hier Ihre ISDN-Rufnummern ein:' ?>
 <? setvariable var:Text4 '1. ' ?>
 <? setvariable var:Text5 '2. ' ?>
@@ -18,9 +18,8 @@
 <? setvariable var:Text18 'Geben Sie hier die Rufnummer Ihres Analog-Anschlusses ein:' ?>
 <? setvariable var:Text19 'Rufnummer' ?>
 <? setvariable var:Text20 'Übersicht' ?>
-<? setvariable var:Text21 'Interne Nummern' ?>
-<? setvariable var:Text22 'Leistungsmerkmale' ?>
-<? setvariable var:Text23 'ISDN-Endgeräte' ?>
+<? setvariable var:Text21 'Intern' ?>
+<? setvariable var:Text22 'Optionen' ?>
+<? setvariable var:Text23 'Telefonie-Geräte' ?>
 <? setvariable var:Text24 'Nebenstellen' ?>
 <? setvariable var:Text25 'DECT-Endgeräte' ?>
-<? setvariable var:Text26 'Telefoniegeräte' ?>
diff -burN usr/www/all/html/de/fon/msn.js usr/www/all/html/de/fon/msn.js
--- usr/www/all/html/de/fon/msn.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/msn.js	2007-07-11 22:32:04.000000000 +0200
@@ -38,7 +38,7 @@
 	jslGoTo("fon", "fonlist");
 }
 function uiDoIsdn() {
-	jslGoTo("fon", jslGetValue("uiPostPageMaster"));
+	jslGoTo("fon", "isdn");
 }
 function uiDoOptionen() {
 	jslGoTo("fon", "isdnoptionen");
@@ -52,6 +52,18 @@
 function uiDoDect() {
 	jslGoTo("", "dect");
 }
+function uiDoSetupDect() {
+	jslGoTo("fon", "fonsetupdect");
+}
+function uiDoEditDect() {
+	jslGoTo("fon", "foneditdect");
+}
+function uiDoSetupIsdn() {
+	jslGoTo("fon", "fonsetupisdn");
+}
+function uiDoEditIsdn() {
+	jslGoTo("fon", "foneditisdn");
+}
 function uiDoHelp() {
 <? if eq '$var:pagename' 'dectmsn' `
 	jslPopHelp("hilfe_fon_dect_festnetzrufnummer");
diff -burN usr/www/all/html/de/fon/ppFonbuch.html usr/www/all/html/de/fon/ppFonbuch.html
--- usr/www/all/html/de/fon/ppFonbuch.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/ppFonbuch.html	2007-07-11 22:32:04.000000000 +0200
@@ -22,7 +22,7 @@
 <? setvariable var:txt18 "#881**" ?>
 <? setvariable var:txt19 "Wecker mit den letzten Einstellungen aktivieren" ?>
 <? setvariable var:txt20 "#881*<Uhrzeit>3*<Telefon>*" ?>
-<? setvariable var:txt21 "Wecker für einmaliges Klingeln zu einer bestimmten Zeit (StdMin) und für ein bestimmtes Telefon (Fon1 = 1, Fon2 = 2, Fon3 = 3, ISDN = 4) aktivieren" ?>
+<? setvariable var:txt21 "Wecker für einmaliges Klingeln zu einer bestimmten Zeit (StdMin) und für ein bestimmtes Telefon (Fon1 = 1, Fon2 = 2) aktivieren" ?>
 <? setvariable var:txt22 "Auswahl der Verbindungsart" ?>
 <? setvariable var:txt23 "*111# <Rufnummer>" ?>
 <? setvariable var:txt24 "Wählen üder das Festnetz" ?>
diff -burN usr/www/all/html/de/fon/quality.frm usr/www/all/html/de/fon/quality.frm
--- usr/www/all/html/de/fon/quality.frm	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/quality.frm	1970-01-01 01:00:00.000000000 +0100
@@ -1,2 +0,0 @@
-<input type="hidden" name="emailnotify:settings/show_voipstat" value="<? query emailnotify:settings/show_voipstat ?>" id="uiPostVoipMonitor">
-<input type="hidden" name="voipjournal:settings/clear" value="1" id="uiPostClearJournal" disabled>
diff -burN usr/www/all/html/de/fon/quality.html usr/www/all/html/de/fon/quality.html
--- usr/www/all/html/de/fon/quality.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/quality.html	1970-01-01 01:00:00.000000000 +0100
@@ -1,26 +0,0 @@
-<? include ../html/$var:lang/fon/quality.inc ?>
-<div id="content">
-	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		Internettelefonie
-	</div></div></div></div></div></div>
-	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
-		<ul class="tabs">
-			<li><a href="javascript:uiDoSiplist()">Internetrufnummern</a></li>
-			<li><a href="javascript:uiDoOptionen()">Erweiterte Einstellungen</a></li>
-			<li class="tabs_on"><a href="javascript:uiDoRefresh()">Sprachübertragung</a></li>
-		</ul>
-		<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-			<p >Hier können Sie sich Detailinformationen der Sprachübertragung bei der Internettelefonie anzeigen lassen.</p>
-		</div></div></div></div></div></div>
-		<? include ../html/$var:lang/fon/qualitytable.html ?>
-		<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
-<? if eq <? query emailnotify:settings/show_voipstat ?> 1 `
-			<input type="button" onclick="uiDoClear()" value="Liste löschen" class="Pushbutton" id="buttonClear">
-` ?>
-			<input type="button" onclick="uiDoSave()" value="<? echo $var:txtApply ?>" class="Pushbutton" id="buttonSave">
-			<input type="button" onclick="uiDoCancel()" value="<? echo $var:txtCancel ?>" class="Pushbutton" id="buttonCancel">
-			<input type="button" onclick="uiDoRefresh()" value="<? echo $var:txtRefresh ?>" class=Pushbutton id="buttonRefresh">
-			<input type="button" onclick="uiDoHelp()" value="<? echo $var:txtHelp ?>" class="Pushbutton" id="buttonHilfe">
-		</div></div></div></div></div></div>
-	</div></div></div></div></div></div></div>
-</div>
diff -burN usr/www/all/html/de/fon/quality.inc usr/www/all/html/de/fon/quality.inc
--- usr/www/all/html/de/fon/quality.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/quality.inc	1970-01-01 01:00:00.000000000 +0100
@@ -1 +0,0 @@
-<? include ../html/$var:lang/global.inc ?>
diff -burN usr/www/all/html/de/fon/quality.js usr/www/all/html/de/fon/quality.js
--- usr/www/all/html/de/fon/quality.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/quality.js	1970-01-01 01:00:00.000000000 +0100
@@ -1,120 +0,0 @@
-<!--		../fon/quality.js		-->
-<style type="text/css">
-<!--
-#content {width: 580px; margin: auto;}
-#tLegende {margin:auto; width: 100%}
-#tLegende td {text-align:center}
-#tQoS {font-size: 11px; width: 100%}
-#tQoS td {padding: 2px 2px;}
-#tQoS th {padding: 2px 2px;}
-#tQoS .c1a {text-align: left;}
-#tQoS .c1b {text-align: right;}
-#tQoS .c2 {text-align: center;}
-#tQoS .c3 {text-align: center;}
-#tQoS .c4 {text-align: center;}
-#tQoS .c5 {text-align: center;}
-#tQoS .c6 {text-align: center;}
-#tQoS .c7 {text-align: center;}
-#tQoS .c8 {text-align: center;}
-#tQoS .c9 {text-align: center; vertical-align:middle;}
-#tQoS2 {font-size: 11px; width: 100%}
-#tQoS2 td {padding: 2px 2px;}
-#tQoS2 th {padding: 2px 2px;}
-#tQoS2 .c1a {text-align: left;}
-#tQoS2 .c1b {text-align: right;}
-#tQoS2 .c2 {text-align: center;}
-#tQoS2 .c3 {text-align: center;}
-#tQoS2 .c4 {text-align: center;}
-#tQoS2 .c5 {text-align: center;}
-#tQoS2 .c6 {text-align: center;}
-#tQoS2 .c7 {text-align: center;}
-#tQoS2 .c8 {text-align: center;}
-#tQoS2 .c9 {text-align: center; vertical-align:middle;}
-.ar {text-align: right;}
-.ac {text-align: center;}
-.pCheck25 {text-indent: -25px; padding-left: 25px;}
--->
-</style>
-<script type=text/javascript>
-<? include ../html/$var:lang/js/jsl.js ?>
-var g_qstClear = "Alle Einträge in der Liste werden jetzt gelöscht.";
-function uiDoOnLoad() {
-	jslSetChecked("uiViewVoipMonitor", jslGetValue("uiPostVoipMonitor")=="1");
-	//window.setTimeout("uiDoCancel()", 30000);
-}
-function uiDoSave() {
-	jslSetValue("uiPostVoipMonitor", jslGetChecked("uiViewVoipMonitor") ? "1":"0");
-	jslFormSubmitEx("fon", "quality");
-}
-function uiDoCancel() {
-	jslGoTo("fon", "quality");
-}
-function uiDoRefresh() {
-	jslGoTo("fon", "quality");
-}
-function uiDoSiplist() {
-	jslGoTo("fon", "siplist");
-}
-function uiDoOptionen() {
-	jslGoTo("fon", "sipoptionen");
-}
-function uiDoHelp() {
-	jslPopHelp("hilfe_fon_quality");
-}
-function uiDoClear() {
-	if (!confirm(g_qstClear)) return;
-	jslEnable("uiPostClearJournal");
-	jslFormSubmitEx("fon", "quality");
-}
-function span(str) {
-	return "<nobr><span title=\""+ str + "\">" + str + "</span></nobr>";
-}
-function SonstDisplay (vad, cng, fax) {
-	var str = vad;
-	if (fax == "1") {
-		if (str != "") str+="<br />";
-		str += "Fax";
-	}
-	if (cng != "") {
-		if (str != "") str+="<br />";
-		str += cng;
-	}
-	return str;
-}
-function DelayDisplay (n) {
-	if (n==0) return "&nbsp;"
-	return Number(n)/2 + " ms";
-}
-var g_QoSColor = 0;
-function TrQoS(datum, dauer, rufnr, ipadr, code_tx, code_rx, pakete_tx, pakete_rx, lost_tx, lost_rx, delay, jitter_tx, jitter_rx, vad, cng, fax) {
-	g_QoSColor = (g_QoSColor == 1) ? 2:1;
-	var str = "<tr style=\"background-color:"+(g_QoSColor==1 ? "#FFFFFF":"#F8F8F8")+"\">";
-	str += "<td class=\"c1a\">"+datum+"</td>";
-	str += "<td class=\"c2\">"+rufnr+"</td>";
-	str += "<td class=\"c3\"><img src=\"../html/<? echo $var:lang ?>/images/send.gif\"></td>";
-	str += "<td class=\"c4\">"+code_tx+"</td>";
-	str += "<td class=\"c5\">"+pakete_tx+"</td>";
-	str += "<td class=\"c6\">"+lost_tx+"</td>";
-	str += "<td class=\"c7\">"+DelayDisplay(delay)+"</td>";
-	str += "<td class=\"c8\">"+jitter_tx+"</td>";
-	str += "<td class=\"c9\" rowspan=2>"+SonstDisplay(vad, cng, fax)+"</td>";
-	str += "</tr><tr style=\"background-color:"+(g_QoSColor==1 ? "#FFFFFF":"#F8F8F8")+"\">";
-	str += "<td class=\"c1b\">"+dauer+"</td>";
-	str += "<td class=\"c2\">"+ipadr+"</td>";
-	str += "<td class=\"c3\"><img src=\"../html/<? echo $var:lang ?>/images/receive.gif\"></td>";
-	str += "<td class=\"c4\">"+code_rx+"</td>";
-	str += "<td class=\"c5\">"+pakete_rx+"</td>";
-	str += "<td class=\"c6\">"+lost_rx+"</td>";
-	str += "<td class=\"c7\">"+DelayDisplay(delay)+"</td>";
-	str += "<td class=\"c8\">"+jitter_rx+"</td>";
-	str += "</tr>";
-	g_foundRul = true;
-	return str;
-}
-function TrRufnr(rufnr) {
-	g_QoSColor = 0;
-	var str = "<tr style=\"background-color:#F1F1F1\">";
-	str += "<td colspan=9 style=\"height:30px; vertical-align:middle\">Eigene Rufnummer: <b>"+rufnr+"</b></td>";
-	return str;
-}					
-</script>
diff -burN usr/www/all/html/de/fon/qualitytable.html usr/www/all/html/de/fon/qualitytable.html
--- usr/www/all/html/de/fon/qualitytable.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/qualitytable.html	1970-01-01 01:00:00.000000000 +0100
@@ -1,70 +0,0 @@
-		<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-			<table id="tLegende" class="tborder">
-				<tr>
-					<td style="padding: 2px 10px 2px 100px"><img src="../html/<? echo $var:lang ?>/images/send.gif">&nbsp;Senderichtung</td>
-					<td style="padding: 2px 100px 2px 10px"><img src="../html/<? echo $var:lang ?>/images/receive.gif">&nbsp;Empfangsrichtung</td>
-				</tr>
-			</table>
-			<p class="mb10 mt10">Detailinformationen der Sprachübertragung momentan geführter Internettelefonate.</p>
-			<div class="tborder mb10">
-				<table id="tQoS2">
-					<tr>
-						<th>Datum</th>
-						<th class="ac">Rufnummer</th>
-						<th colspan=6 class="ac">Sprachübertragung</th>
-						<th></th>
-					</tr>
-					<tr>
-						<th>Dauer (hh:mm)</th>
-						<th class="ac">Gegenstelle</th>
-						<th colspan=2>Kodierung</th>
-						<th class="ac">Pakete</th>
-						<th class="ac">Verloren</th>
-						<th class="ac">Verzögerung</th>
-						<th class="ac">Jitter</th>
-						<th class="ac">Sonstiges</th>
-					</tr>
-<!-- <? query voipstat:status/load ?> -->
-<? multiquery voipstat:status/localnames/list(localname) `
-						<script type="text/javascript">document.write(TrRufnr("$2"));</script>
-<? multiquery voipstat:status/$1/calls/entry/list(started,duration,remotename,remoteaddr,tx_codecs,rx_codecs,tx_packets_voice,tx_octets_voice,rx_packets_voice,rx_octets_voice,tx_percent_lost,rx_percent_lost,roundtriptime,tx_jitter,rx_jitter,tx_percent_vad_cng,rx_percent_vad_cng,is_fax) `
-							<!-- Bytes $19 / $1b -->
-							<script type="text/javascript">document.write(TrQoS("$12", "$13", "$14", "$15", "$16", "$17", "$18", "$1a", "$1c", "$1d", "$1e", "$1f ms", "$1g ms", "$1h", "$1i", "$1j"));</script>
-` ?>
-` ?>
-<!-- <? query voipstat:status/unload ?> -->
-				</table>
-			</div>
-			<p class="mt20 pCheck25 mb5"><input type="checkbox" id="uiViewVoipMonitor">&nbsp;<label for="uiViewVoipMonitor">Detailinformationen beendeter Internettelefonate anzeigen und mit Push Service versenden</label></p>
-<? if eq <? query emailnotify:settings/show_voipstat ?> 1 `
-			<div class="tborder">
-				<table id="tQoS">
-					<tr>
-						<th>Datum</th>
-						<th class="ac">Rufnummer</th>
-						<th colspan=6 class="ac">Sprachübertragung</th>
-						<th></th>
-					</tr>
-					<tr>
-						<th>Dauer (hh:mm)</th>
-						<th class="ac">Gegenstelle</th>
-						<th colspan=2>Kodierung</th>
-						<th class="ac">Pakete</th>
-						<th class="ac">Verloren</th>
-						<th class="ac">Verzögerung</th>
-						<th class="ac">Jitter</th>
-						<th class="ac">Sonstiges</th>
-					</tr>
-<!-- <? query voipjournal:status/load ?> -->
-<? multiquery voipjournal:status/localnames/list(localname) `
-						<script type="text/javascript">document.write(TrRufnr("$12"));</script>
-<? multiquery voipjournal:status/$11/calls/entry/list(started,duration,remotename,remoteaddr,tx_codecs,rx_codecs,tx_packets_voice,tx_octets_voice,rx_packets_voice,rx_octets_voice,tx_percent_lost,rx_percent_lost,roundtriptime,tx_jitter,rx_jitter,tx_percent_vad_cng,rx_percent_vad_cng,is_fax) `
-							<!-- Bytes $29 / $2b -->
-							<script type="text/javascript">document.write(TrQoS("$22", "$23", "$24", "$25", "$26", "$27", "$28", "$2a", "$2c", "$2d", "$2e", "$2f ms", "$2g ms", "$2h", "$2i", "$2j"));</script>
-` ?>
-` ?>
-<!-- <? query voipjournal:status/unload ?> -->
-				</table>
-			</div>
-` ?>
-		</div></div></div></div></div></div>
diff -burN usr/www/all/html/de/fon/route.html usr/www/all/html/de/fon/route.html
--- usr/www/all/html/de/fon/route.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/route.html	2006-12-13 17:03:02.000000000 +0100
@@ -4,32 +4,18 @@
 		<? echo $var:Text1 ?>
 	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p class="mb10"><? echo $var:Text12 ?></p>
 		<table id="tRule">
 			<tr>
-				<td><label for="uiViewDescription"><? echo $var:Text5 ?></label></td>
-				<td><select size="1" id="uiViewBereich" class="Eingabefeld" onchange="OnChangeBereich(value)">
-					<option value=""><? echo $var:Text2 ?></option>
-					<option value="mobile"><? echo $var:Text6 ?></option>
-					<option value="ortsnetz"><? echo $var:Text7 ?></option>
-					<option value="national"><? echo $var:Text8 ?></option>
-					<option value="international"><? echo $var:Text9 ?></option>
-					<option value="sonderrufnrn"><? echo $var:Text10 ?></option>
-					<option value="auskunft"><? echo $var:Text11 ?></option>
-				</select></td>
-			</tr>
-			<tr>
 				<td><label for="uiViewDescription"><? echo $var:Text2 ?></label></td>
 				<td><input type="text" size="21" value id="uiViewNumber" maxlength="20" class="Eingabefeld"></td>
 			</tr>
 			<tr>
-				<td style="padding-top: 10px;"><label for="uiViewRoute"><? echo $var:Text3 ?></label></td>
-				<td style="padding-top: 10px;"><select size="1" id="uiViewRoute" class="Eingabefeld">
+				<td><label for="uiViewRoute"><? echo $var:Text3 ?></label></td>
+				<td><select size="1" id="uiViewRoute" class="Eingabefeld">
 					</select>
 				</td>
 			</tr>
 		</table>
-		<? include ../html/$var:lang/home/error.html ?>
 	</div></div></div></div></div></div>
 	<? include ../html/$var:lang/home/rbb_applycancel.html ?>
 </div>
diff -burN usr/www/all/html/de/fon/route.inc usr/www/all/html/de/fon/route.inc
--- usr/www/all/html/de/fon/route.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/route.inc	2006-12-13 17:03:02.000000000 +0100
@@ -1,17 +1,5 @@
 <? include ../html/$var:lang/global.inc ?>
-<? if eq $var:isnew 1 `
 <? setvariable var:Text1 'Neue Wahlregel' ?>
-` `
-<? setvariable var:Text1 'Wahlregel' ?>
-` ?>
-<? setvariable var:Text2 'Rufnummer' ?>
-<? setvariable var:Text3 'verbinden über' ?>
+<? setvariable var:Text2 'Rufnummer/Bereich' ?>
+<? setvariable var:Text3 'Verbindung' ?>
 <? setvariable var:Text4 'Festnetz' ?>
-<? setvariable var:Text5 'Bereich' ?>
-<? setvariable var:Text6 'Mobilfunk' ?>
-<? setvariable var:Text7 'Ortsnetz' ?>
-<? setvariable var:Text8 'Ferngespräch' ?>
-<? setvariable var:Text9 'Ausland' ?>
-<? setvariable var:Text10 'Sonderrufnummern' ?>
-<? setvariable var:Text11 'Auskunft' ?>
-<? setvariable var:Text12 'Anwahlen der Rufnummern/Bereiche' ?>
diff -burN usr/www/all/html/de/fon/route.js usr/www/all/html/de/fon/route.js
--- usr/www/all/html/de/fon/route.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/route.js	2006-12-13 17:03:02.000000000 +0100
@@ -17,25 +17,11 @@
 var g_txtFestnetzvia = "Festnetz via ";
 function uiDoOnLoad() {
 	var nr = jslGetValue( "uiPostNumber");
-	switch (nr) {
-		case "mobile":
-		case "ortsnetz":
-		case "national":
-		case "international":
-		case "sonderrufnrn":
-		case "auskunft":
-			jslSetSelection("uiViewBereich", nr);
-			OnChangeBereich(nr);
-			break;
-		default:
-			jslSetSelection("uiViewBereich", "");
-			OnChangeBereich("");
-			jslSetValue("uiViewNumber", nr);
-			break;
-	}
+	jslCopyValue("uiViewNumber", "uiPostNumber");
 	var route = jslGetValue("uiPostRoute");
 	var provider = jslGetValue("uiPostProvider");
 	var froute = "";
+	
 <? if eq '$var:usePSTN' 1 ` 
 	var i;
 	var empty_route = -1;
@@ -44,7 +30,7 @@
 			jslAddOption("uiViewRoute", "f"+i, g_txtFestnetzvia+jslGetValue("uiPostProvider"+i), false);
 			if (Number(provider) == i) froute = "f"+i;
 		} else {
-			if (empty_route == -1) empty_route = i;
+			if (empty_route==-1) empty_route = i;
 		}
 	}
 	if (empty_route != -1) {
@@ -53,34 +39,22 @@
 		if (jslGetValue("uiPostProvider"+provider) == "") froute = "f"+empty_route;
 	}
 ` ?>
-	jslAddOption("uiViewRoute", "v", "Internet Automatisch", false);
 <? multiquery sip:settings/sip/list(ID,displayname) '
 	if ("$3" != "") jslAddOption("uiViewRoute", "$2", g_txtInternetprefix+jslGetValue("ui$1"), false);
 ' ?>
 	if (isNotruf(nr)) {
-		jslDisable("uiViewBereich");
-		jslDisable("uiViewNumber");
+		jslDisable( "uiViewNumber");
+//	} else {
+//		jslAddOption( "uiViewRoute", "s", g_txtSperren, false);
 	}
 	if (route == "f" && froute != "") route = froute;
 	jslSetSelection("uiViewRoute", route);
 }
 function uiDoValidate() {
-	var nr = jslGetValue("uiPostNumber");
-	switch (nr) {
-		case "mobile":
-		case "ortsnetz":
-		case "national":
-		case "international":
-		case "sonderrufnrn":
-		case "auskunft":
-			break;
-		default:
-			if (!valIsZahlVorhanden(nr)) {
+	if (!valIsZahlVorhanden(jslGetValue("uiPostNumber"))) {
 				alert(g_route_mldOnlyDigit);
 				return false;
 			}
-			break;
-	}
 	return true;
 }
 function isNotruf (nr) {
@@ -114,10 +88,10 @@
 function uiDoSave() {
 	var ret = true;
 	var route = jslGetValue( "uiViewRoute");
-	var bereich = jslGetValue( "uiViewBereich");
 	var nr = jslGetValue( "uiViewNumber");
 	var provider = "0";
-	if (bereich=="" && isNotruf(nr) && isInternetroute(route)) {
+	
+	if (isNotruf(nr) && isInternetroute(route)) {
 		ret = confirm(g_routing_confirmMsgText);
 	}
 	if (route.substr(0, 1) == "f" && route.length == 2) {
@@ -125,11 +99,7 @@
 		route = "f";
 	}
 	if (ret == true) {
-		if (bereich == "") {
 			jslSetValue("uiPostNumber", nr);
-		} else {
-			jslSetValue("uiPostNumber", bereich);
-		}
 		jslSetValue("uiPostRoute", route)
 		jslSetValue("uiPostProvider", provider)
 		if (uiDoValidate() == true) {
@@ -143,7 +113,4 @@
 function uiDoHelp() {
 	jslPopHelp("hilfe_fon_neuewahlregel");
 }
-function OnChangeBereich (value) {
-	jslSetEnabled("uiViewNumber", value=="");
-}
 </script>
diff -burN usr/www/all/html/de/fon/routing.html usr/www/all/html/de/fon/routing.html
--- usr/www/all/html/de/fon/routing.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/routing.html	2006-12-13 17:03:02.000000000 +0100
@@ -2,11 +2,6 @@
 <? setvariable var:lcrext `1` ?>
 <? if eq <? query telcfg:settings/Routing/Version ?> 3 `<? setvariable var:lcrext `0` ?>` ?>
 <? if eq <? query telcfg:settings/Routing/Version ?> 0 `<? setvariable var:lcrext `0` ?>` ?>
-<? setvariable var:showvorwahlen `1` ?>
-<? if neq '$var:usePSTN' 1 '<? setvariable var:showvorwahlen `0` ?>' ?>
-<? if neq $var:OEM freenet `
-<? if neq '<? query box:settings/expertmode/activated ?>' '1' '<? setvariable var:showvorwahlen `0` ?>' ?>
-`?>
 <!-- Version ist "<? query telcfg:settings/Routing/Version ?>" -->
 <!-- lcrext: <? echo `$var:lcrext` ?> -->
 <!-- showLCRdata: <? echo `$var:showLCRdata` ?> -->
@@ -39,13 +34,13 @@
 ` ?> 
 <? if eq $var:lcrext 0 `
 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo `$var:Text1` ?>
+		Telefonie
 	</div></div></div></div></div></div>
-<? if eq $var:showvorwahlen 1 `
+<? if eq '$var:usePSTN' 1 ` 
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 	<ul class="tabs">
 		<li class="tabs_on"><a href="javascript:uiDoCancel()"><? echo `$var:Text1` ?></a></li>
-		<li><a href="javascript:uiDoVorwahlen()"><? echo `$var:Text20` ?></a></li>
+ 		<li><a href="javascript:uiDoVorwahlen()">Anbietervorwahlen</a></li>
 	</ul>
 ` ?>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
diff -burN usr/www/all/html/de/fon/routing.inc usr/www/all/html/de/fon/routing.inc
--- usr/www/all/html/de/fon/routing.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/routing.inc	2006-12-13 17:03:02.000000000 +0100
@@ -18,4 +18,3 @@
 <? setvariable var:Text17 'Zurücksetzen' ?>
 <? setvariable var:Text18 'Die dem Auslieferungszustand entsprechenden Wahlregeln lassen sich über die Schaltfläche "Zurücksetzen" wieder herstellen.' ?>
 <? setvariable var:Text19 'Zurücksetzen' ?>
-<? setvariable var:Text20 'Anbietervorwahlen' ?>
diff -burN usr/www/all/html/de/fon/routing.js usr/www/all/html/de/fon/routing.js
--- usr/www/all/html/de/fon/routing.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/routing.js	2007-07-11 22:32:04.000000000 +0200
@@ -21,14 +21,10 @@
 <? include ../html/$var:lang/js/jsl.js ?>
 var g_mldDelete		= "Wollen Sie diesen Eintrag löschen ?";
 var g_mldReset		= "Wollen Sie die ursprünglichen Wahlregeln wiederherstellen ?";
-var g_txtNichts		= "Es sind keine Wahlregeln eingerichtet.";
 var g_txtFestnetz		= "Festnetz";
 var g_txtFestnetzvia	= "Festnetz via ";
 var g_txtBlock			= "Sperren";
-var g_txtVoIP = "Internet Automatisch"
 var g_txtInternet		= "Internet: ";
-var g_txtBtnEdit = "Bearbeiten";
-var g_txtBtnDelete = "Löschen";
 var g_CanDoIt = true;
 var g_foundRul = false;
 //---- nicht Löschen! Notwendig für korrekte Anzeige --------------------------
@@ -84,24 +81,12 @@
 	switch (wert) {
 		case "f": return FestnetzDisplay(provider);
 		case "s": return g_txtBlock;
-		case "v": return g_txtVoIP;
 <? multiquery sip:settings/sip/list(ID,displayname) '
 		case "$2": return g_txtInternet+"$3";
 ' ?>
 	}
 	return "";
 }
-function NumberDisplay(number) {
-	switch (number) {
-		case "mobile": return "Mobilfunk";
-		case "ortsnetz": return "Ortsnetz";
-		case "national": return "Ferngespräch";
-		case "international": return "Ausland";
-		case "sonderrufnrn": return "Sonderrufnummern";
-		case "auskunft": return "Auskunft";
-	}
-	return number;
-}
 function FestnetzDisplay(provider) {
 	var vorwahl="";
 	switch (provider) {
@@ -121,10 +106,10 @@
 	jslFormSubmitEx("fon", "routing", "routing");
 }
 function EditBtn(id, click) {
-	return BmpBtn(id, click, g_txtBtnEdit, "../html/<? echo $var:lang ?>/images/bearbeiten.gif");
+	return BmpBtn(id, click, "Ändern", "../html/<? echo $var:lang ?>/images/bearbeiten.gif");
 }
 function DeleteBtn(id, click) {
-	return BmpBtn(id, click, g_txtBtnDelete, "../html/<? echo $var:lang ?>/images/loeschen.gif");
+	return BmpBtn(id, click, "Löschen", "../html/<? echo $var:lang ?>/images/loeschen.gif");
 }
 function BmpBtn(id, click, value, bmp) {
 	return "<button type=\"button\" id=\""+id+"\" onClick=\""+click+"\" value=\""+value+"\" title=\""+value+"\" style=\"width: 30px\"><img src=\""+bmp+"\" align=bottom width=16 height=16 hspace=4></button></td>";
@@ -132,7 +117,7 @@
 function TrRoute(id, number, route, provider) {
 	if (route == "s") return "";
 	var str = "<tr>";
-	str += "<td class=\"c1\">"+ NumberDisplay(number)+"</td>";
+	str += "<td class=\"c1\">"+ number+"</td>";
 	str += "<td class=\"c3\">"+ RouteDisplay(route, provider)+"</td>";
 	str += "<td class=\"c2\">"+ EditBtn("uiViewEdit"+id, "uiDoEdit('"+id+"', '"+number+"')") +"</td>";
 	str += "<td class=\"c2\">"+ DeleteBtn("uiViewDelete"+id, "uiDoDelete('"+id+"')") +"</td>";
@@ -142,6 +127,6 @@
 }
 function TrNichts() {
 	if (g_foundRul) return "";
-	return "<tr><td colspan=4 class=\"ac\">"+g_txtNichts+"</td></tr>";
+	return "<tr><td colspan=4 class=\"ac\">Es sind keine Wahlregeln eingerichtet.</td></tr>";
 }
 </script>
diff -burN usr/www/all/html/de/fon/rub1.html usr/www/all/html/de/fon/rub1.html
--- usr/www/all/html/de/fon/rub1.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/rub1.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,34 +1,36 @@
 <? include ../html/$var:lang/fon/rub1.inc ?>
 <div id="content">
 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo $var:Text1 ?>
+		Anrufer
 	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<table id="tRule">
 			<tr>
-				<td><label for="uiViewNummer"><? echo $var:Text2 ?></label></td>
-				<td><input type="text" size="21" value="" id="uiViewNummer" maxlength="20" class="Eingabefeld"></td>
+				<td><label for="uiViewNummer">Rufnummer des Anrufers</label></td>
+				<td><input type="text" size="21" value id="uiViewNummer" maxlength="20" class="Eingabefeld"></td>
 			</tr>
 			<tr>
-				<td><label for="uiViewOption"><? echo $var:Text3 ?></label></td>
+				<td><label for="uiViewOption">Art der Umleitung</label></td>
 				<td><select size="1" id="uiViewOption" onchange="OnOption(value)" class="Eingabefeld">
-						<option value="0"><? echo $var:Text4 ?></option>
-						<option value="1"><? echo $var:Text5 ?></option>
-						<option value="2"><? echo $var:Text6 ?></option>
+					<option value="0">umleiten</option>
+					<option value="1">keine Annahme</option>
+					<option value="2">wichtiger Anrufer</option>
 					</select>
 				</td>
 			</tr>
 			<tr id="uiViewRul1" style="display:none">
-				<td style="padding: 10px 10px 1px 10px"><label for="uiViewRoute"><? echo $var:Text7 ?></label></td>
-				<td style="padding: 10px 10px 1px 10px"><select size="1" id="uiViewRoute" class="Eingabefeld"></select></td>
+				<td style="padding: 10px 10px 1px 10px"><label for="uiViewRoute">umleiten über</label></td>
+				<td style="padding: 10px 10px 1px 10px"><select size="1" id="uiViewRoute" class="Eingabefeld">
+					</select>
+				</td>
 			</tr>
 			<tr id="uiViewRul2" style="display:none">
-				<td><label for="uiViewZiel"><? echo $var:Text8 ?></label></td>
-				<td><input type="text" size="21" value="" id="uiViewZiel" maxlength="20" class="Eingabefeld"></td>
+				<td><label for="uiViewZiel">zur Zielrufnummer</label></td>
+				<td><input type="text" size="21" value id="uiViewZiel" maxlength="20" class="Eingabefeld"></td>
 			</tr>
 		</table>
-		<p class="mt10" id="uiViewNo" style="display:none"><? echo $var:Text9 ?></p>
-		<p class="mt10" id="uiViewVip" style="display:none"><? echo $var:Text10 ?></p>
+		<p class="mt10" id="uiViewNo" style="display:none">Anrufe von diesem Anrufer werden nicht angenommen.</p>
+		<p class="mt10" id="uiViewVip" style="display:none">Anrufe von diesem Anrufer werden trotz Klingelsperre an den Telefonen signalisiert.</p>
 	</div></div></div></div></div></div>
 	<? include ../html/$var:lang/home/rbb_applycancel.html ?>
 </div>
diff -burN usr/www/all/html/de/fon/rub1.inc usr/www/all/html/de/fon/rub1.inc
--- usr/www/all/html/de/fon/rub1.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/rub1.inc	2006-12-13 17:03:02.000000000 +0100
@@ -1,11 +1 @@
 <? include ../html/$var:lang/global.inc ?>
-<? setvariable var:Text1 'Anrufer ' ?>
-<? setvariable var:Text2 'Rufnummer des Anrufers' ?>
-<? setvariable var:Text3 'Art der Umleitung' ?>
-<? setvariable var:Text4 'umleiten' ?>
-<? setvariable var:Text5 'keine Annahme' ?>
-<? setvariable var:Text6 'wichtiger Anrufer' ?>
-<? setvariable var:Text7 'umleiten über' ?>
-<? setvariable var:Text8 'zur Zielrufnummer' ?>
-<? setvariable var:Text9 'Anrufe von diesem Anrufer werden nicht angenommen.' ?>
-<? setvariable var:Text10 'Anrufe von diesem Anrufer werden trotz Klingelsperre an den Telefonen signalisiert.' ?>
diff -burN usr/www/all/html/de/fon/rub1.js usr/www/all/html/de/fon/rub1.js
--- usr/www/all/html/de/fon/rub1.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/rub1.js	2006-12-13 17:03:02.000000000 +0100
@@ -11,8 +11,6 @@
 <? include ../html/$var:lang/js/jsl.js ?>
 var g_preInternet	= "Internet: ";
 var g_preFestnetz	= "Festnetz: ";
-var g_txtAlert_1 = "Die Rufnummer darf nur aus Ziffern und '#' bestehen.";
-var g_txtAlert_2 = "Die Zielrufnummer muss angegeben werden und darf nur aus Ziffern und '#' bestehen.";
 var g_msn0 = "<? query telcfg:settings/MSN/MSN0 ?>";
 var g_msn1 = "<? query telcfg:settings/MSN/MSN1 ?>";
 var g_msn2 = "<? query telcfg:settings/MSN/MSN2 ?>";
@@ -34,11 +32,11 @@
 	OnOption(action);
 }
 function uiDoSave() {
-	if (!IsZiel(jslGetValue("uiViewNummer"))) {alert(g_txtAlert_1); return;}
+	if (!IsZiel(jslGetValue("uiViewNummer"))) {alert("Die Rufnummer darf nur aus Ziffern und '#' bestehen."); return;}
 	jslCopyValue("uiPostRufnr", "uiViewNummer");
 	jslCopyValue("uiPostAction", "uiViewOption")
 	if (jslGetValue("uiViewOption") == "0") {
-		if (!IsZielVorhanden(jslGetValue("uiViewZiel"))) {alert(g_txtAlert_2); return;}
+		if (!IsZielVorhanden(jslGetValue("uiViewZiel"))) {alert("Die Zielrufnummer muss angegeben werden und darf nur aus Ziffern und '#' bestehen."); return;}
 		jslCopyValue("uiPostDestination", "uiViewZiel");
 		jslCopyValue("uiPostOutgoing", "uiViewRoute");
 		jslEnable("uiPostDestination");
@@ -73,6 +71,7 @@
 	addMsX(id, "9", g_msn9);
 	addOption(id, "POTS", g_preFestnetz+g_Pots);
 ` ?>
+	
 	// Sip Zugänge anfügen
 <? multiquery sip:settings/sip/list(ID,displayname) '
 	if ("$3" != "") addOption(id, "SIP"+"$2", g_preInternet+jslGetValue("ui$1"));
diff -burN usr/www/all/html/de/fon/rublist.html usr/www/all/html/de/fon/rublist.html
--- usr/www/all/html/de/fon/rublist.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/rublist.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,15 +1,15 @@
 <? include ../html/$var:lang/fon/rublist.inc ?>
 <div id="content">
 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo $var:Text1 ?>
+		Ausgewählte Anrufer
 	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p class="mb10"><? echo $var:Text2 ?></p>
+		<p class="mb10">Liste der ausgewählten Anrufer</p>
 		<table id="tList" class="tborder" style="margin:auto; width:100%; table-layout: fixed">
 			<tr>
-				<th class="c0"><? echo $var:Text3 ?></th>
-				<th class="c2"><? echo $var:Text4 ?></th>
-				<th class="c3"><? echo $var:Text5 ?></th>
+				<th class="c0">Aktiv</th>
+				<th class="c2">Rufnummer des Anrufers</th>
+				<th class="c3">Option</th>
 				<th class="c4">&nbsp;</th>
 				<th class="c5">&nbsp;</th>
 			</tr>
@@ -19,23 +19,19 @@
 				<td class="c0"><input type=checkbox id="uiViewActiv$1" onclick="OnChangeActiv('uiViewActiv$1','uiPostActiv$1'); return true;"></td>
 				<td class="c2"><nobr><span title="$2">$2</span></nobr></td>
 				<td class="c3"><script type="text/javascript">document.write(ActionDisplay("$3", "$4"));</script></td>
-				<td class="c4">
-					<button type="button" id="uiViewEdit$1" onClick="uiDoEdit('$1')" value="<? echo '$var:Text8' ?>" title="<? echo $var:txtIconBtnEdit ?>" style="width: 30px">
-						<img src="../html/$var:lang/images/bearbeiten.gif" align="bottom" width="16" height="16" hspace="4">
-					</button>
-				</td>
-				<td class="c5">
-					<button type="button" id="uiViewDelete$1" onClick="uiDoDelete('$1')" value="<? echo '$var:Text9' ?>" title="<? echo $var:txtIconBtnDelete ?>" style="width: 30px">
-						<img src="../html/$var:lang/images/loeschen.gif" align="bottom" width="16" height="16" hspace="4">
-					</button>
-				</td>
+				<td class="c4"><button type="button" id="uiViewEdit$1" onClick="uiDoEdit('$1')" value="Ändern" title="Ändern" style="width: 30px">
+					<img src="../html/$var:lang/images/bearbeiten.gif" align=bottom width=16 height=16 hspace=4>
+				</button></td>
+				<td class="c5"><button type="button" id="uiViewDelete$1" onClick="uiDoDelete('$1')" value="Löschen" title="Löschen" style="width: 30px">
+					<img src="../html/$var:lang/images/loeschen.gif" align=bottom width=16 height=16 hspace=4>
+				</button></td>
 			</tr>
 ` ?>
-<? if eq <? querytelcfg:settings/CallerIDActions/count ?> 0 `
-			<tr class="Dialoglist"><td colspan="5" class="ac"><? echo '$var:Text6' ?></td></tr>
+<? if eq <? multiquerycount telcfg:settings/CallerIDActions/list ?> 0 `
+			<tr class="Dialoglist"><td colspan=5 class="ac">Es sind keine Anrufer eingerichtet.</td></tr>
 ` ?>
 		</table>
-		<p class="ar mt10"><input type="button" id="uiViewNewButton" onclick="uiDoNew('<? query telcfg:settings/CallerIDActions/newid ?>')" value="<? echo '$var:Text7' ?>" class="Pushbutton" style="width: 180px;"></p>
+		<p class="ar mt10"><input type="button" id="uiViewNewButton" onclick="uiDoNew('<? query telcfg:settings/CallerIDActions/newid ?>')" value="Neuer Anrufer" class="Pushbutton" style="width: 180px;"></p>
 		<? include ../html/$var:lang/home/error.html ?>
 	</div></div></div></div></div></div>
 	<? include ../html/$var:lang/home/rbb_applycancel.html ?>
diff -burN usr/www/all/html/de/fon/rublist.inc usr/www/all/html/de/fon/rublist.inc
--- usr/www/all/html/de/fon/rublist.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/rublist.inc	2006-12-13 17:03:02.000000000 +0100
@@ -1,10 +1 @@
 <? include ../html/$var:lang/global.inc ?>
-<? setvariable var:Text1 'Ausgewählte Anrufer ' ?>
-<? setvariable var:Text2 'Liste der ausgewählten Anrufer' ?>
-<? setvariable var:Text3 'Aktiv' ?>
-<? setvariable var:Text4 'Rufnummer des Anrufers' ?>
-<? setvariable var:Text5 'Option' ?>
-<? setvariable var:Text6 'Es sind keine Anrufer eingerichtet.' ?>
-<? setvariable var:Text7 'Neuer Anrufer' ?>
-<? setvariable var:Text8 'Ändern' ?>
-<? setvariable var:Text9 'Löschen' ?>
diff -burN usr/www/all/html/de/fon/rublist.js usr/www/all/html/de/fon/rublist.js
--- usr/www/all/html/de/fon/rublist.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/rublist.js	2006-12-13 17:03:02.000000000 +0100
@@ -16,9 +16,6 @@
 <script type="text/javascript">
 <? include ../html/$var:lang/js/jsl.js ?>
 var g_mldDelete = "Wollen Sie diesen Eintrag löschen ?";
-var g_txtDisplay_1 = "umleiten nach ";
-var g_txtDisplay_2 = "keine Annahme";
-var g_txtDisplay_3 = "wichtige Person";
 function uiDoOnLoad() {
 	// "<? query telcfg:settings/RefreshDiversity ?>"
 <? multiquery telcfg:settings/CallerIDActions/list `
@@ -29,9 +26,9 @@
 function ActionDisplay (action, destination) {
 	var rc = "";
 	switch (action) {
-		case "0": rc = g_txtDisplay_1+ destination; 	break;
-		case "1": rc = g_txtDisplay_2; break;
-		case "2": rc = g_txtDisplay_3; break;
+		case "0": rc = "umleiten nach "+ destination; 	break;
+		case "1": rc = "keine Annahme"; break;
+		case "2": rc = "wichtige Person"; break;
 	}
 	return '<nobr><span title="'+rc+'">'+rc+'</span></nobr>';
 }
diff -burN usr/www/all/html/de/fon/rul1.html usr/www/all/html/de/fon/rul1.html
--- usr/www/all/html/de/fon/rul1.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/rul1.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,26 +1,35 @@
 <? include ../html/$var:lang/fon/rul1.inc ?>
 <div id="content">
 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo $var:Text1 ?>
+		Rufumleitung
 	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p class="fett"><? echo $var:Text2 ?></p>
-		<p class="ml25 mb5"><? echo $var:Text3 ?></p>
-		<p class="ml25 mb10"><select size="1" id="uiViewAn" class="Eingabefeld"></select></p>
-		<p class="fett" id="Ueber1"><? echo $var:Text4 ?></p>
-		<p class="ml25 mb5" id="Ueber2"><? echo $var:Text5 ?></p>
-		<p class="ml25 mb10"><select size="1" id="uiViewUeber" class="Eingabefeld"></select></p>
-		<p class="fett"><? echo $var:Text6 ?></p>
-		<p class="ml25 mb5"><? echo $var:Text7 ?></p>
+		<p class="fett">Rufeingang</p>
+		<p class="ml25 mb5">Wählen Sie die Rufnummer aus, für die ein eingehender Ruf umgeleitet werden soll.</p>
+		<p class="ml25 mb10">
+			<select size="1" id="uiViewAn" class="Eingabefeld">
+			</select>
+		</p>
+	
+		<p class="fett" id="Ueber1">Umleiten über</p>
+		<p class="ml25 mb5" id="Ueber2">Wählen Sie die Rufnummer aus, über die der Anruf umgeleitet werden soll.</p>
+		<p class="ml25 mb10">
+			<select size="1" id="uiViewUeber" class="Eingabefeld">
+			</select>
+		</p>
+	
+		<p class="fett">Zielrufnummer</p>
+		<p class="ml25 mb5">Geben Sie die Rufnummer an, an die der Anruf weitergeleitet werden soll.</p>
 		<p class="ml25 mb10"><input type="text" size="21" id="uiViewZiel" maxlength="20" class="Eingabefeld"></p>
-		<p class="fett"><? echo $var:Text8 ?></p>
-		<p class="ml25 mb5"><? echo $var:Text9 ?></p>
+	
+		<p class="fett">Art der Umleitung</p>
+		<p class="ml25 mb5">Wie soll der Anruf umgeleitet werden.</p>
 		<p class="ml25">
 			<select size="1" id="uiViewOption" class="Eingabefeld">
-				<option value="0"><? echo $var:Text10 ?></option>
-				<option value="1"><? echo $var:Text11 ?></option>
-				<option value="2"><? echo $var:Text12 ?></option>
-				<option value="3"><? echo $var:Text13 ?></option>
+				<option value="0">Sofort</option>
+				<option value="1">Verzögert</option>
+				<option value="2">Verzögert lang</option>
+				<option value="3">bei Besetzt</option>
 			</select>
 		</p>
 	</div></div></div></div></div></div>
diff -burN usr/www/all/html/de/fon/rul1.inc usr/www/all/html/de/fon/rul1.inc
--- usr/www/all/html/de/fon/rul1.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/rul1.inc	2006-12-13 17:03:02.000000000 +0100
@@ -1,14 +1 @@
 <? include ../html/$var:lang/global.inc ?>
-<? setvariable var:Text1 'Rufumleitung ' ?>
-<? setvariable var:Text2 'Rufeingang' ?>
-<? setvariable var:Text3 'Wählen Sie die Rufnummer aus, für die ein eingehender Ruf umgeleitet werden soll.' ?>
-<? setvariable var:Text4 'Umleiten über' ?>
-<? setvariable var:Text5 'Wählen Sie die Rufnummer aus, über die der Anruf umgeleitet werden soll.' ?>
-<? setvariable var:Text6 'Zielrufnummer' ?>
-<? setvariable var:Text7 'Geben Sie die Rufnummer an, an die der Anruf weitergeleitet werden soll.' ?>
-<? setvariable var:Text8 'Art der Umleitung' ?>
-<? setvariable var:Text9 'Wie soll der Anruf umgeleitet werden.' ?>
-<? setvariable var:Text10 'Sofort' ?>
-<? setvariable var:Text11 'Verzögert' ?>
-<? setvariable var:Text12 'Verzögert lang' ?>
-<? setvariable var:Text13 'bei Besetzt' ?>
diff -burN usr/www/all/html/de/fon/rul1.js usr/www/all/html/de/fon/rul1.js
--- usr/www/all/html/de/fon/rul1.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/rul1.js	2006-12-13 17:03:02.000000000 +0100
@@ -12,7 +12,6 @@
 <? include ../html/$var:lang/js/jsl.js ?>
 var g_preInternet	= "Internet: ";
 var g_preFestnetz	= "Festnetz: ";
-var g_txtMld_1 = "Die Zielrufnummer muss angegeben werden und darf nur aus Ziffern bestehen.";
 var g_msn0 = "<? query telcfg:settings/MSN/MSN0 ?>";
 var g_msn1 = "<? query telcfg:settings/MSN/MSN1 ?>";
 var g_msn2 = "<? query telcfg:settings/MSN/MSN2 ?>";
@@ -33,7 +32,7 @@
 	jslCopyValue("uiViewZiel", "uiPostZiel");
 }
 function uiDoSave() {
-	if (!IsZielVorhanden(jslGetValue("uiViewZiel"))) {alert(g_txtMld_1); return;}
+	if (!IsZielVorhanden(jslGetValue("uiViewZiel"))) {alert("Die Zielrufnummer muss angegeben werden und darf nur aus Ziffern bestehen."); return;}
 	jslCopyValue("uiPostMSN", "uiViewAn");
 	jslCopyValue("uiPostOutgoing", "uiViewUeber");
 	jslCopyValue("uiPostAction", "uiViewOption")
@@ -51,6 +50,7 @@
 <? repeat [ 0 9 ] `
 	if (g_msn$0 != "") addOption(id, "$0", g_preFestnetz+g_msn$0);` ?>
 	addOption(id, "POTS", g_preFestnetz+g_Pots);
+	
 	// Sip Zugänge anfügen
 <? multiquery sip:settings/sip/list(ID,displayname) '
 	if ("$3" != "") addOption(id, "SIP"+"$2", g_preInternet+jslGetValue("ui$1"));
diff -burN usr/www/all/html/de/fon/rulall1.frm usr/www/all/html/de/fon/rulall1.frm
--- usr/www/all/html/de/fon/rulall1.frm	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/rulall1.frm	2007-07-11 22:32:03.000000000 +0200
@@ -31,6 +31,8 @@
 ` ?>
 <input type="hidden" name="telcfg:settings/MSN/Port0/Diversion" value="<? query telcfg:settings/MSN/Port0/Diversion ?>" id="uiPostNsArt1" disabled>
 <input type="hidden" name="telcfg:settings/MSN/Port0/DiversionNumber" value="<? query telcfg:settings/MSN/Port0/DiversionNumber ?>" id="uiPostNsNr1" disabled>
+<input type="hidden" name="telcfg:settings/MSN/Port1/Diversion" value="<? query telcfg:settings/MSN/Port1/Diversion ?>" id="uiPostNsArt2" disabled>
+<input type="hidden" name="telcfg:settings/MSN/Port1/DiversionNumber" value="<? query telcfg:settings/MSN/Port1/DiversionNumber ?>" id="uiPostNsNr2" disabled>
 <? multiquery telcfg:settings/CallerIDActions/list `
 <input type="hidden" name="telcfg:settings/$1/CallerID" value="<? query telcfg:settings/$1/CallerID ?>" id="uiPostRubRufnr$1" disabled>
 <input type="hidden" name="telcfg:settings/$1/Action" value="<? query telcfg:settings/$1/Action ?>" id="uiPostRubAction$1" disabled>
diff -burN usr/www/all/html/de/fon/rulall1.html usr/www/all/html/de/fon/rulall1.html
--- usr/www/all/html/de/fon/rulall1.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/rulall1.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,76 +1,75 @@
-<? include ../html/$var:lang/fon/rulall1.inc ?>
+<? include ../html/$var:lang/fon/rul1.inc ?>
 <div id="content">
 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo $var:Text1 ?>
+		Rufumleitung
 	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<table id="t1">
 			<tr id="uiAn" style="display:none">
 				<td class="c1"><span id="uiModeAnAuswahl" style="display:none"><input type="radio" name="OnMode" id="uiModeAn" onclick="OnChangeMode(0)"></span></td>
-				<td colspan="2"><label for="uiModeAn"><? echo $var:Text2 ?></label></td>
+				<td colspan=2><label for="uiModeAn">Alle Anrufe an</label></td>
 				<td><select size="1" id="uiViewAn" class="Eingabefeld" onchange="OnChangeAn(value)"></select></td>
 			</tr>
 			<tr id="uiAnFon" style="display:none">
 				<td class="c1"></td>
-				<td colspan="2"><? echo $var:Text2 ?></td>
+				<td colspan=2>Alle Anrufe an</td>
 				<td><script type="text/javascript">document.write(FonDisplay());</script></td>
 			</tr>
 			<tr id="uiBuch" style="display:none">
 				<td class="c1"><span id="uiModeBuchAuswahl" style="display:none"><input type="radio" name="OnMode" id="uiModeBuch" onclick="OnChangeMode(1)"></span></td>
-				<td><label for="uiModeBuch"><? echo $var:Text3 ?></label></td>
-				<td><? echo $var:Text4 ?></td>
+				<td><label for="uiModeBuch">Anrufe von</label></td>
+				<td>Telefonbuch</td>
 				<td><select size="1" id="uiViewFonbuch" class="Eingabefeld" onchange="OnChangeBuch(value)"></select></td>
 			</tr>
 			<tr id="uiRufnr" style="display:none">
 				<td class="c1"></td>
 				<td></td>
-				<td><? echo $var:Text5 ?></td>
+				<td>Rufnummer</td>
 				<td><input type="text" size="25" id="uiViewRufnr" maxlength="20" class="Eingabefeld"></td>
 			</tr>
-			<tr><td colspan="4">&nbsp;</td></tr>
+			<tr><td colspan=4>&nbsp;</td></tr>
 			<tr id="uiUeber" style="display:none">
 				<td class="c1"></td>
-				<td id="uiUeber1" colspan="2"><? echo $var:Text6 ?></td>
+				<td id="uiUeber1" colspan=2>umleiten über</td>
 				<td><select size="1" id="uiViewUeber" class="Eingabefeld"></select></td>
 			</tr>
 			<tr>
 				<td class="c1"></td>
-				<td colspan="2"><? echo $var:Text7 ?></td>
+				<td colspan=2>Zielrufnummer</td>
 				<td><input type="text" size="25" id="uiViewZiel" maxlength="20" class="Eingabefeld"></td>
 			</tr>
 			<tr id="uiArtFon" style="display:none">
 				<td class="c1"></td>
-				<td colspan="2"><? echo $var:Text8 ?></td>
+				<td colspan=2>Art der Umleitung</td>
 				<td>
 					<select size="1" id="uiViewOptionFon" class="Eingabefeld">
-						<option value="1"><? echo $var:Text9 ?></option>
-						<option value="2"><? echo $var:Text10 ?></option>
-						<option value="3"><? echo $var:Text11 ?></option>
-						<option value="4"><? echo $var:Text12 ?></option>
-						<option value="5"><? echo $var:Text13 ?></option>
-						<option value="6"><? echo $var:Text14 ?></option>
-						<option value="7"><? echo $var:Text15 ?></option>
-						<option value="0"><? echo $var:Text16 ?></option>
+						<option value="1">Sofort</option>
+						<option value="2">Verzögert</option>
+						<option value="3">bei Besetzt</option>
+						<option value="4">Verzögert/bei Besetzt</option>
+						<option value="5">Parallelruf</option>
+						<option value="6">bei Klingelsperre</option>
+						<option value="7">Direktruf</option>
+						<option value="0">Aus</option>
 					</select>
 				</td>
 			</tr>
 			<tr id="uiArtMsn" style="display:none">
 				<td class="c1"></td>
-				<td colspan="2"><? echo $var:Text8 ?></td>
+				<td colspan=2>Art der Umleitung</td>
 				<td>
 					<select size="1" id="uiViewOption" class="Eingabefeld">
-						<option value="0"><? echo $var:Text9 ?></option>
-						<option value="1"><? echo $var:Text10 ?></option>
-						<option value="2"><? echo $var:Text17 ?></option>
-						<option value="3"><? echo $var:Text11 ?></option>
-						<option value="4"><? echo $var:Text13 ?></option>
+						<option value="0">Sofort</option>
+						<option value="1">Verzögert</option>
+						<option value="2">Verzögert lang</option>
+						<option value="3">bei Besetzt</option>
 					</select>
 				</td>
 			</tr>
 			<tr id="uiArtBuch" style="display:none">
 				<td class="c1"></td>
-				<td colspan="2"><? echo $var:Text8 ?></td>
-				<td><? echo $var:Text9 ?></td>
+				<td colspan=2>Art der Umleitung</td>
+				<td>Sofort</td>
 			</tr>
 		</table>
 	</div></div></div></div></div></div>
diff -burN usr/www/all/html/de/fon/rulall1.inc usr/www/all/html/de/fon/rulall1.inc
--- usr/www/all/html/de/fon/rulall1.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/rulall1.inc	2006-12-13 17:03:02.000000000 +0100
@@ -1,18 +1 @@
 <? include ../html/$var:lang/global.inc ?>
-<? setvariable var:Text1 'Rufumleitung ' ?>
-<? setvariable var:Text2 'Alle Anrufe an' ?>
-<? setvariable var:Text3 'Anrufe von' ?>
-<? setvariable var:Text4 'Telefonbuch' ?>
-<? setvariable var:Text5 'Rufnummer' ?>
-<? setvariable var:Text6 'umleiten über' ?>
-<? setvariable var:Text7 'Zielrufnummer' ?>
-<? setvariable var:Text8 'Art der Umleitung' ?>
-<? setvariable var:Text9 'Sofort' ?>
-<? setvariable var:Text10 'Verzögert' ?>
-<? setvariable var:Text11 'bei Besetzt' ?>
-<? setvariable var:Text12 'Verzögert/bei Besetzt' ?>
-<? setvariable var:Text13 'Parallelruf' ?>
-<? setvariable var:Text14 'bei Klingelsperre' ?>
-<? setvariable var:Text15 'Direktruf' ?>
-<? setvariable var:Text16 'Aus' ?>
-<? setvariable var:Text17 'Verzögert lang' ?>
diff -burN usr/www/all/html/de/fon/rulall1.js usr/www/all/html/de/fon/rulall1.js
--- usr/www/all/html/de/fon/rulall1.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/rulall1.js	2007-07-11 22:32:03.000000000 +0200
@@ -13,10 +13,6 @@
 <? include ../html/$var:lang/js/jsl.js ?>
 var g_preInternet	= "Internet: ";
 var g_preFestnetz	= "Festnetz: ";
-var g_txtOp_Unbekannt = "Unbekannt";
-var g_txtAlert_1 = "Die Zielrufnummer muss angegeben werden und darf nur aus Ziffern bestehen.";
-var g_txtAlert_2 = "Eine Rufumleitung für diese einkommende Rufnummer ist bereits vorhanden.";
-var g_txtAlert_3 = "Für diese einkommende Rufnummer ist bereits eine Rufsperre eingerichtet. Diese Rufsperre wird automatisch gelöscht. Fortfahren?";
 var g_msn0 = "<? query telcfg:settings/MSN/MSN0 ?>";
 var g_msn1 = "<? query telcfg:settings/MSN/MSN1 ?>";
 var g_msn2 = "<? query telcfg:settings/MSN/MSN2 ?>";
@@ -91,7 +87,7 @@
 			jslEnable("uiPostNsArt"+rul);
 			break;
 		case "MSN": {
-			if (!IsZielVorhanden(jslGetValue("uiViewZiel"))) {alert(g_txtAlert_1); return;}
+			if (!IsZielVorhanden(jslGetValue("uiViewZiel"))) {alert("Die Zielrufnummer muss angegeben werden und darf nur aus Ziffern bestehen."); return;}
 			jslCopyValue("uiPostMSN", "uiViewAn");
 			jslCopyValue("uiPostOutgoing", "uiViewUeber");
 			jslCopyValue("uiPostAction", "uiViewOption")
@@ -104,11 +100,11 @@
 			break;
 		}
 		case "Buch":
-			if (!IsZielVorhanden(jslGetValue("uiViewZiel"))) {alert(g_txtAlert_1); return;}
+			if (!IsZielVorhanden(jslGetValue("uiViewZiel"))) {alert("Die Zielrufnummer muss angegeben werden und darf nur aus Ziffern bestehen."); return;}
 			var x = IstActionVorhanden(jslGetValue("uiViewRufnr"));
 			if (x != "") {
 				if (jslGetValue("uiPostRubAction"+x) == "0") {
-					if (x != jslGetValue("uiPostRulId")) {alert(g_txtAlert_2); return;}
+					if (x != jslGetValue("uiPostRulId")) {alert("Eine Rufumleitung für diese einkommende Rufnummer ist bereits vorhanden."); return;}
 					jslCopyValue("uiPostRubRufnr", "uiViewRufnr");
 					jslCopyValue("uiPostRubOutgoing", "uiViewUeber");
 					jslCopyValue("uiPostRubDestination", "uiViewZiel")
@@ -118,7 +114,7 @@
 					jslEnable("uiPostRubActive");
 					jslEnable("uiPostRubDestination");
 				} else {
-					if (!confirm(g_txtAlert_3)) return;
+					if (!confirm("Für diese einkommende Rufnummer ist bereits eine Rufsperre eingerichtet. Diese Rufsperre wird automatisch gelöscht. Fortfahren?")) return;
 					jslCopyValue("uiPostRubRufnr"+x, "uiViewRufnr");
 					jslCopyValue("uiPostRubOutgoing"+x, "uiViewUeber");
 					jslSetValue("uiPostRubAction"+x, "0");
@@ -161,7 +157,7 @@
 					jslEnable(idNr);
 					jslEnable(idArt);
 				} else {
-					if (!IsZielVorhanden(jslGetValue("uiViewZiel"))) {alert(g_txtAlert_1); return;}
+					if (!IsZielVorhanden(jslGetValue("uiViewZiel"))) {alert("Die Zielrufnummer muss angegeben werden und darf nur aus Ziffern bestehen."); return;}
 					jslCopyValue("uiPostMSN", "uiViewAn");
 					jslCopyValue("uiPostOutgoing", "uiViewUeber");
 					jslCopyValue("uiPostAction", "uiViewOption")
@@ -173,11 +169,11 @@
 					jslEnable("uiPostActive");
 				}
 			} else {
-				if (!IsZielVorhanden(jslGetValue("uiViewZiel"))) {alert(g_txtAlert_1); return;}
+				if (!IsZielVorhanden(jslGetValue("uiViewZiel"))) {alert("Die Zielrufnummer muss angegeben werden und darf nur aus Ziffern bestehen."); return;}
 				var x = IstActionVorhanden(jslGetValue("uiViewRufnr"));
 				if (x != "") {
-					if (jslGetValue("uiPostRubAction"+x) == "0") {alert(g_txtAlert_2); return;}
-					if (!confirm(g_txtAlert_3)) return;
+					if (jslGetValue("uiPostRubAction"+x) == "0") {alert("Eine Rufumleitung Sperre für diese einkommende Rufnummer ist bereits vorhanden."); return;}
+					if (!confirm("Für diese einkommende Rufnummer ist bereits eine Rufsperre eingerichtet. Diese Rufsperre wird automatisch gelöscht. Fortfahren?")) return;
 					jslCopyValue("uiPostRubRufnr"+x, "uiViewRufnr");
 					jslCopyValue("uiPostRubOutgoing"+x, "uiViewUeber");
 					jslSetValue("uiPostRubAction"+x, "0");
@@ -212,6 +208,8 @@
 function fillAuf (Fon) {
 	var id = "uiViewAn";
 	if (Fon) {
+		addOption(id, "FON1", "FON 1");
+		addOption(id, "FON2", "FON 2");
 	}
 	fillId(id, false);
 }
@@ -222,6 +220,7 @@
 	if (g_msn$10 != "") addOption(id, "$10", g_preFestnetz+g_msn$10);` ?>
 	addOption(id, "POTS", g_preFestnetz+g_Pots);
 ` ?> 
+	
 	// Sip Zugänge anfügen
 <? multiquery sip:settings/sip/list(ID,displayname) '
 	if ("$3" != "") addOption(id, "SIP"+"$2", g_preInternet+jslGetValue("ui$1"));
@@ -233,7 +232,7 @@
 <? multiquery telcfg:settings/HotDialEntry/list `
 	addOption(id, jslGetValue("uiNr$1"), GetBuchName(jslGetValue("uiName$1")));
 ` ?>
-	addOption(id, "", g_txtOp_Unbekannt);
+	addOption(id, "", "unbekannt");
 	addOption(id, "leer", "");
 }
 function addOption (id, val, text) {
@@ -292,7 +291,7 @@
 	jslSetEnabled("uiViewRufnr", nr!="");
 }
 function IstActionVorhanden (number) {
-	var n = Number("<? query telcfg:settings/CallerIDActions/count ?>");
+	var n = Number("<? multiquerycount telcfg:settings/CallerIDActions/list ?>");
 	for (var i = 0; i<n; i++) {
 		if (jslGetValue("uiPostRubRufnrCallerIDActions"+i) == number) return "CallerIDActions"+i;
 	}
diff -burN usr/www/all/html/de/fon/rulall.frm usr/www/all/html/de/fon/rulall.frm
--- usr/www/all/html/de/fon/rulall.frm	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/rulall.frm	2007-07-11 22:32:03.000000000 +0200
@@ -1,5 +1,7 @@
 <input type="hidden" name="telcfg:settings/MSN/Port0/Diversion" value="<? query telcfg:settings/MSN/Port0/Diversion ?>" id="uiPostRulArt1" disabled>
 <input type="hidden" name="telcfg:settings/MSN/Port0/DiversionNumber" value="<? query telcfg:settings/MSN/Port0/DiversionNumber ?>" id="uiPostRulNr1" disabled>
+<input type="hidden" name="telcfg:settings/MSN/Port1/Diversion" value="<? query telcfg:settings/MSN/Port1/Diversion ?>" id="uiPostRulArt2" disabled>
+<input type="hidden" name="telcfg:settings/MSN/Port1/DiversionNumber" value="<? query telcfg:settings/MSN/Port1/DiversionNumber ?>" id="uiPostRulNr2" disabled>
 <? multiquery sip:settings/sip/list(displayname) '<input type="hidden" name="sip:settings/$1/displayname" value="$2" id="ui$1" disabled>
 ' ?>
 <? multiquery telcfg:settings/Diversity/list '<input type="hidden" name="telcfg:settings/$1/Active" value="<? query telcfg:settings/$1/Active ?>" id="uiPostActiv$1">
diff -burN usr/www/all/html/de/fon/rulall.html usr/www/all/html/de/fon/rulall.html
--- usr/www/all/html/de/fon/rulall.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/rulall.html	2007-07-11 22:32:03.000000000 +0200
@@ -3,25 +3,28 @@
 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
 		<? echo $var:Text1 ?>
 	</div></div></div></div></div></div>
-<? if eq `<? query box:settings/expertmode/activated ?>` `1` `
+	
+<? if eq '$var:usePSTN' 1 ` 
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 	<ul class="tabs">
-		<li class="tabs_on"><a href="javascript:uiDoCancel()"><? echo '$var:Text1' ?></a></li>
-		<li><a href="javascript:jslGoTo('fon', 'durchwahl')"><? echo '$var:Text50' ?></a></li>
+ 		<li class="tabs_on"><a href="javascript:uiDoCancel()">Rufumleitung</a></li>
+<? if eq `<? query box:settings/expertmode/activated ?>` `1` `<li><a href="javascript:jslGoTo('fon', 'durchwahl')">Durchwahl (Call Through)</a></li>` ?>
 	</ul>
 ` ?>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<p class="mb10"><? echo $var:Text2 ?></p>
 		<table id="tMsnRul" class="tborder">
 			<tr>
-				<th class="c1"><? echo '$var:Text51' ?></th>
-				<th class="c2"><? echo '$var:Text52' ?></th>
-				<th class="c3"><? echo '$var:Text53' ?></th>
-				<th class="c4"><? echo '$var:Text54' ?></th>
-				<th class="c5"><? echo '$var:Text55' ?></th>
+				<th class="c1">Aktiv</th>
+				<th class="c2">Anrufe</th>
+				<th class="c3">Umleiten über</th>
+				<th class="c4">Zielrufnummer</th>
+				<th class="c5">Art der Umleitung</th>
 				<th class="c7">&nbsp;</th>
 				<th class="c8">&nbsp;</th>
 			</tr>
+			<script type="text/javascript">document.write(TrNs("1", "<? query telcfg:settings/MSN/Port0/DiversionNumber ?>", "<? query telcfg:settings/MSN/Port0/Diversion ?>"));</script>
+			<script type="text/javascript">document.write(TrNs("2", "<? query telcfg:settings/MSN/Port1/DiversionNumber ?>", "<? query telcfg:settings/MSN/Port1/Diversion ?>"));</script>
 <? multiquery telcfg:settings/Diversity/list(MSN,Outgoing,Destination,Action) `
 			<script type="text/javascript">document.write(TrRul("$1", "$2", "$3", "$4", "$5"));</script><!-- "$0" / "$1" -->
 ` ?>
@@ -30,7 +33,7 @@
 ` ?>
 			<script type="text/javascript">document.write(TrNichts());</script>
 		</table>
-		<p class="ar mt10"><input type="button" id="uiViewNewButton" onclick="uiDoNewRul('<? query telcfg:settings/Diversity/newid ?>')" value="<? echo '$var:Text56' ?>" class="Pushbutton" style="width: 140px;"></p>
+		<p class="ar mt10"><input type="button" id="uiViewNewButton" onclick="uiDoNewRul('<? query telcfg:settings/Diversity/newid ?>')" value="Neue Rufumleitung" class="Pushbutton" style="width: 140px;"></p>
 		<? include ../html/$var:lang/home/error.html ?>
 	</div></div></div></div></div></div>
 	<? include ../html/$var:lang/home/rbb_applycancel.html ?>
diff -burN usr/www/all/html/de/fon/rulall.inc usr/www/all/html/de/fon/rulall.inc
--- usr/www/all/html/de/fon/rulall.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/rulall.inc	2006-12-13 17:03:02.000000000 +0100
@@ -1,11 +1,49 @@
 <? include ../html/$var:lang/global.inc ?>
 <? setvariable var:Text1 'Rufumleitung' ?>
-<? setvariable var:Text2 'Hier können Sie ankommende Anrufe an eine andere Rufnummer umleiten. Mit Art der Rufumleitung legen sie fest, wann bzw. unter welcher Bedingung dir Rufumleitung durchgeführt werden soll.' ?>
-<? setvariable var:Text50 'Durchwahl (Call Through)' ?>
-<? setvariable var:Text51 'Aktiv' ?>
-<? setvariable var:Text52 'Anrufe' ?>
-<? setvariable var:Text53 'Umleiten über' ?>
-<? setvariable var:Text54 'Zielrufnummer' ?>
-<? setvariable var:Text55 'Umleitung' ?>
-<? setvariable var:Text56 'Neue Rufumleitung' ?>
-	
+<? setvariable var:Text2 'Hier können Sie einkommende Anrufe an eine andere Rufnummer umleiten. Mit der "Art der Umleitung" legen Sie fest, wann die Rufumleitung durchgeführt werden soll.' ?>
+<? setvariable var:Text3 'Liste der Rufumleitungen' ?>
+<? setvariable var:Text4 'Nebenstelle' ?>
+<? setvariable var:Text5 'Umleitung zur Zielrufnummer' ?>
+<? setvariable var:Text6 'Art der Umleitung' ?>
+<? setvariable var:Text7 'FON 1' ?>
+<? setvariable var:Text8 'Aus' ?>
+<? setvariable var:Text9 'Sofort' ?>
+<? setvariable var:Text10 'Verzögert' ?>
+<? setvariable var:Text11 'bei Besetzt' ?>
+<? setvariable var:Text12 'Verzögert/bei Besetzt' ?>
+<? setvariable var:Text13 'Parallelruf' ?>
+<? setvariable var:Text14 'bei Klingelsperre' ?>
+<? setvariable var:Text15 'Direktruf' ?>
+<? setvariable var:Text16 'FON 2' ?>
+<? setvariable var:Text17 'Durchwahl (Call Through)' ?>
+<? setvariable var:Text18 'Mit der Durchwahlfunktion können ankommende Rufe durch die weitere Eingabe einer Zielrufnummer über die $var:BoxName weitervermittelt werden.' ?>
+<? setvariable var:Text20 'Durchwahl (Call Through) aktiv' ?>
+<? setvariable var:Text21 'definierte Durchwahl' ?>
+<? setvariable var:Text22 'Anlagenkopplung' ?>
+<? setvariable var:Text23 'Durchwahl für Anrufe an der Rufnummer' ?>
+<? setvariable var:Text24 'Berechtigung für die Durchwahl (Call Through)' ?>
+<? setvariable var:Text25 'nach der Eingabe einer PIN' ?>
+<? setvariable var:Text26 'PIN' ?>
+<? setvariable var:Text27 'durch die Anschlussnummer des Anrufers (CallerID)' ?>
+<? setvariable var:Text28 'Anschlussnummer' ?>
+<? setvariable var:Text29 'Anrufe weiterverbinden über die Rufnummer' ?>
+<? setvariable var:Text30 'Mit der Anlagenkopplung kann die $var:BoxName mit einer vorhandenen Telefonanlage verbunden werden. Das ermöglicht es, mit den Telefonen an der angekoppelten Telefonanlage über das Internet zu telefonieren.' ?>
+<? setvariable var:Text31 'Anschluss an die angekoppelte Anlage' ?>
+<? setvariable var:Text32 'Verbinden Sie den Festnetzanschluss der $var:BoxName ("ISDN/analog") mit einer Nebenstelle der vorhandenen Telefonanlage.' ?>
+<? setvariable var:Text33 'Art der Nebenstelle der angekoppelten Anlage' ?>
+<? setvariable var:Text34 'Anrufe aus dem Internet' ?>
+<? setvariable var:Text35 'nicht an die angekoppelte Telefonanlage weiterleiten' ?>
+<? setvariable var:Text36 'weiterleiten an die angekoppelte Telefonanlage' ?>
+<? setvariable var:Text37 ' mit der' ?>
+<? setvariable var:Text38 'Rufnummer' ?>
+<? setvariable var:Text39 'Anrufe von der angekoppelten Telefonanlage' ?>
+<? setvariable var:Text40 'Weiterverbinden über die Internetrufnummer' ?>
+<? setvariable var:Text41 'Spontane Amtsholung verwenden' ?>
+<? setvariable var:Text42 'Anrufe ins Festnetz von den Nebenstellen der $var:BoxName' ?>
+<? setvariable var:Text43 'Ziffern für die Amtsholung in der angekoppelten Telefonanlage' ?>
+<? setvariable var:Text44 'Amtsholung' ?>
+<? setvariable var:Text45 'analoge Nebenstelle' ?>
+<? setvariable var:Text46 'ISDN-S0-Nebenstelle' ?>
+<? setvariable var:Text47 'Rufnummer für die Kopplung (MSN)' ?>
+<? setvariable var:Text48 'FON 3' ?>
+<? setvariable var:Text49 'FON 4' ?>
diff -burN usr/www/all/html/de/fon/rulall.js usr/www/all/html/de/fon/rulall.js
--- usr/www/all/html/de/fon/rulall.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/rulall.js	2007-07-11 22:32:03.000000000 +0200
@@ -9,12 +9,22 @@
 #tMsnRul td {padding: 1px 2px; overflow:hidden;}
 #tMsnRul th {padding: 1px 2px; overflow:hidden;}
 #tMsnRul .c1 {text-align: center; width: 30px}
-#tMsnRul .c2 {text-align: left; width: 120px;}
+#tMsnRul .c2 {text-align: left; width: 95px;}
 #tMsnRul .c3 {text-align: left; width: 95px;}
 #tMsnRul .c4 {text-align: left; width: 105px;}
-#tMsnRul .c5 {text-align: left; width: 75px;}
+#tMsnRul .c5 {text-align: left; width: 100px;}
 #tMsnRul .c7 {text-align: right; width: 30px;}
 #tMsnRul .c8 {text-align: right; width: 30px;}
+#tRub {margin: auto; width: 100%; table-layout: fixed; height: 12px; font-size: 11px; white-space:nowrap; }
+#tRub td {padding: 1px 2px; overflow:hidden;}
+#tRub th {padding: 1px 2px; overflow:hidden;}
+#tRub .c1 {text-align: center; width: 30px}
+#tRub .c2 {text-align: left; width: 95px;}
+#tRub .c3 {text-align: left; width: 95px;}
+#tRub .c4 {text-align: left; width: 105px;}
+#tRub .c5 {text-align: left; width: 100px;}
+#tRub .c7 {text-align: right; width: 30px;}
+#tRub .c8 {text-align: right; width: 30px;}
 .mb15 {margin-bottom: 15px;}
 .mt15 {margin-top: 15px;}
 .left25 {padding-left: 25px;}
@@ -39,24 +49,6 @@
 var g_mldDeleteRul = "Wollen Sie diese Rufumleitung löschen ?";
 var g_preInternet	= "Internet: ";
 var g_preFestnetz	= "Festnetz: ";
-var g_txtDisplay_1 = "Aus";
-var g_txtDisplay_2 = "Sofort";
-var g_txtDisplay_3 = "Verzögert";
-var g_txtDisplay_4 = "bei Besetzt";
-var g_txtDisplay_5 = "Verzögert/bei Besetzt";
-var g_txtDisplay_6 = "Parallelruf";
-var g_txtDisplay_7 = "Bei Klingelsperre";
-var g_txtDisplay_8 = "Direktruf";
-var g_txtDisplay_9 = "Verzögert lang";
-var g_txtBtnEdit = "Bearbeiten";
-var g_txtBtnDelete = "Löschen";
-var g_txtShow_1 = "<td class=\"c2\">an FON ";
-var g_txtShow_2 = "an ";
-var g_txtShow_3 = "Unbekannt ";
-var g_txtShow_4 = "von ";
-var g_txtShow_5 = "Wichtiger Anrufer ";
-var g_txtShow_6 = "<td class=\"c2\">von ";
-var g_txtShow_7 = "<tr><td colspan=7 class=\"ac\" style=\"font-size: 13px\">Es sind keine Rufumleitungen eingerichtet.</td></tr>";
 var g_expertMode = "<? query box:settings/expertmode/activated ?>";
 var g_msn0 = "<? query telcfg:settings/MSN/MSN0 ?>";
 var g_msn1 = "<? query telcfg:settings/MSN/MSN1 ?>";
@@ -93,6 +85,7 @@
 	addMsn(id, g_msn8);
 	addMsn(id, g_msn9);
 	addOption(id, "POTS", g_preFestnetz+g_Pots);
+	
 	// Sip Zugänge anfügen
 <? multiquery sip:settings/sip/list(ID,displayname) '
 	if ("$3" != "") addOption(id, "SIP"+"$2", g_preInternet+jslGetValue("ui$1"));
@@ -100,12 +93,15 @@
 //	addOption(id, "Leer", "");
 }
 function uiDoSave() {
+	SetFonActiv("1");
+	SetFonActiv("2");
 	jslFormSubmitEx("fon", "rulall", "rulall");
 }
 function SetFonActiv (n) {
 	var art = jslGetValue("uiPostRulArt"+n);
 	var nr = jslGetValue("uiPostRulNr"+n);
 	if (art=="0" && nr=="") return;
+	
 	if (jslGetChecked("uiViewActivFON"+n)) {
 		if (art =="0") {
 			jslSetValue("uiPostRulArt"+n, "1");
@@ -160,25 +156,24 @@
 function ActionDisplay(n) {
 	var str = n;
 	switch (n) {
-		case "0": str = g_txtDisplay_2; break;
-		case "1": str = g_txtDisplay_3; break;
-		case "2": str = g_txtDisplay_9; break;
-		case "3": str = g_txtDisplay_4; break;
-		case "4": str = g_txtDisplay_6; break;
+		case "0": str = "Sofort"; break;
+		case "1": str = "Verzögert"; break;
+		case "2": str = "Verzögert lang"; break;
+		case "3": str = "bei Besetzt"; break;
 	}
 	return span(str);
 }	
 function NsActionDisplay(n) {
 	var str = n;
 	switch (n) {
-		case "0": str = g_txtDisplay_1; break;
-		case "1": str = g_txtDisplay_2; break;
-		case "2": str = g_txtDisplay_3; break;
-		case "3": str = g_txtDisplay_4; break;
-		case "4": str = g_txtDisplay_5; break;
-		case "5": str = g_txtDisplay_6; break;
-		case "6": str = g_txtDisplay_7; break;
-		case "7": str = g_txtDisplay_8; break;
+		case "0": str = "Aus"; break;
+		case "1": str = "Sofort"; break;
+		case "2": str = "Verzögert"; break;
+		case "3": str = "bei Besetzt"; break;
+		case "4": str = "Verzögert/bei Besetzt"; break;
+		case "5": str = "Parallelruf"; break;
+		case "6": str = "bei Klingelsperre"; break;
+		case "7": str = "Direktruf"; break;
 	}
 	return span(str);
 }
@@ -205,18 +200,18 @@
 	jslFormSubmitEx("fon", "rulall");
 }
 function EditBtn(id, click) {
-	return BmpBtn(id, click, g_txtBtnEdit, "../html/<? echo $var:lang ?>/images/bearbeiten.gif");
+	return BmpBtn(id, click, "Ändern", "../html/<? echo $var:lang ?>/images/bearbeiten.gif");
 }
 function DeleteBtn(id, click) {
-	return BmpBtn(id, click, g_txtBtnDelete, "../html/<? echo $var:lang ?>/images/loeschen.gif");
+	return BmpBtn(id, click, "Löschen", "../html/<? echo $var:lang ?>/images/loeschen.gif");
 }
 function BmpBtn(id, click, value, bmp) {
-	return "<button type=\"button\" id=\""+id+"\" onClick=\""+click+"\" value=\""+value+"\" title=\""+value+"\" style=\"width: 30px\"><img src=\""+bmp+"\" align=bottom width=16px height=16px hspace=4px></button></td>";
+	return "<button type=\"button\" id=\""+id+"\" onClick=\""+click+"\" value=\""+value+"\" title=\""+value+"\" style=\"width: 30px\"><img src=\""+bmp+"\" align=bottom width=16 height=16 hspace=4></button></td>";
 }
 function TrRul(id, MSN, Outgoing, ziel, action) {
 	var str = "<tr>";
 	str += "<td class=\"c1\"><input type=checkbox id=\"uiViewActiv"+id+"\" onclick=\"OnChangeActiv('uiViewActiv"+id+"','uiPostActiv"+id+"'); return true;\"></td>";
-	str += "<td class=\"c2\">"+ IndexDisplay(MSN, g_txtShow_2)+"</td>";
+	str += "<td class=\"c2\">"+ IndexDisplay(MSN, "an ")+"</td>";
 	str += "<td class=\"c3\">"+ IndexDisplay(Outgoing, "")+"</td>";
 	str += "<td class=\"c4\">"+ span(ziel)+"</td>";
 	str += "<td class=\"c5\">"+ ActionDisplay(action)+"</td>";
@@ -232,7 +227,7 @@
 	var c = "";
 	if (mode != "0") c = " checked";
 	str += "<td class=\"c1\"><input type=checkbox id=\"uiViewActivFON"+id+"\""+c+"></td>";
-	str += g_txtShow_1+id+"</td>";
+	str += "<td class=\"c2\">an FON "+id+"</td>";
 	str += "<td class=\"c3\"></td>";
 	str += "<td class=\"c4\">"+ span(ziel) +"</td>";
 	str += "<td class=\"c5\">"+ NsActionDisplay(mode) +"</td>";
@@ -247,16 +242,16 @@
 		// RUfumleitung
 		var name = GetBuchnameFromNr(Nr);
 		if (name == "\x0a") {
-			name = Nr=="" ? g_txtShow_3:Nr;
+			name = Nr=="" ? "Unbekannt":Nr;
 		} else {
 			name = GetBuchName(name);
 		}
 		var str = "<tr>";
 		str += "<td class=\"c1\"><input type=checkbox id=\"uiViewActivRub"+id+"\" onclick=\"OnChangeActiv('uiViewActivRub"+id+"','uiPostActivRub"+id+"'); return true;\"></td>";
-		str += "<td class=\"c2\">"+ span(g_txtShow_4+name) +"</td>";
+		str += "<td class=\"c2\">"+ span("von "+name) +"</td>";
 		str += "<td class=\"c3\">"+ IndexDisplay(Outgoing, "")+"</td>";
 		str += "<td class=\"c4\">"+ span(ziel)+"</td>";
-		str += "<td class=\"c5\">" +g_txtDisplay_2+"</td>";
+		str += "<td class=\"c5\">Sofort</td>";
 		str += "<td class=\"c7\">"+ EditBtn("uiViewEditRub"+id, "uiDoEditRub('"+id+"')") +"</td>";
 		str += "<td class=\"c8\">"+ DeleteBtn("uiViewDeleteRub"+id, "uiDoDeleteRub('"+id+"')") +"</td>";
 		str += "</tr>";
@@ -267,16 +262,16 @@
 		// Alter VIP, nur anzeigen zum löschen
 		var name = GetBuchnameFromNr(Nr);
 		if (name == "\x0a") {
-			name = Nr=="" ? g_txtShow_3:Nr;
+			name = Nr=="" ? "Unbekannt":Nr;
 		} else {
 			name = GetBuchName(name);
 		}
 		var str = "<tr>";
 		str += "<td class=\"c1\"></td>";
-		str += g_txtShow_6+ span(name) +"</td>";
+		str += "<td class=\"c2\">von "+ span(name) +"</td>";
 		str += "<td class=\"c3\"></td>";
 		str += "<td class=\"c4\"></td>";
-		str += "<td class=\"c5\">g_txtShow_5</td>";
+		str += "<td class=\"c5\">Wichtiger Anrufer</td>";
 		str += "<td class=\"c7\"></td>";
 		str += "<td class=\"c8\">"+ DeleteBtn("uiViewDeleteRub"+id, "uiDoDeleteRub('"+id+"')") +"</td>";
 		str += "</tr>";
@@ -287,7 +282,7 @@
 }
 function TrNichts() {
 	if (g_foundRul) return "";
-	return g_txtShow_7;
+	return "<tr><td colspan=7 class=\"ac\" style=\"font-size: 13px\">Es sind keine Rufumleitungen eingerichtet.</td></tr>";
 }
 function GetBuchnameFromNr (nr) {
 <? multiquery telcfg:settings/HotDialEntry/list(Number,Name) `
diff -burN usr/www/all/html/de/fon/rul.frm usr/www/all/html/de/fon/rul.frm
--- usr/www/all/html/de/fon/rul.frm	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/rul.frm	2007-07-11 22:32:03.000000000 +0200
@@ -1,5 +1,7 @@
 <input type="hidden" name="telcfg:settings/MSN/Port0/Diversion" value="<? query telcfg:settings/MSN/Port0/Diversion ?>" id="uiPostRulArt1">
 <input type="hidden" name="telcfg:settings/MSN/Port0/DiversionNumber" value="<? query telcfg:settings/MSN/Port0/DiversionNumber ?>" id="uiPostRulNr1">
+<input type="hidden" name="telcfg:settings/MSN/Port1/Diversion" value="<? query telcfg:settings/MSN/Port1/Diversion ?>" id="uiPostRulArt2">
+<input type="hidden" name="telcfg:settings/MSN/Port1/DiversionNumber" value="<? query telcfg:settings/MSN/Port1/DiversionNumber ?>" id="uiPostRulNr2">
 <input type="hidden" name="telcfg:settings/CallThrough/Active" value="<? query telcfg:settings/CallThrough/Active ?>" id="uiPostCtAktiv">
 <input type="hidden" name="telcfg:settings/CallThrough/MSN" value="<? query telcfg:settings/CallThrough/MSN ?>" id="uiPostCtMsn">
 <input type="hidden" name="telcfg:settings/CallThrough/PIN" value="<? query telcfg:settings/CallThrough/PIN ?>" id="uiPostCtPin">
diff -burN usr/www/all/html/de/fon/rul.html usr/www/all/html/de/fon/rul.html
--- usr/www/all/html/de/fon/rul.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/rul.html	2007-07-11 22:32:03.000000000 +0200
@@ -32,6 +32,22 @@
 					</select>
 				</td>
 			</tr>
+			<tr>
+				<td class="c1"><? echo $var:Text16 ?></td>
+				<td class="c2"><input type="text" size="21" maxlength="20" id="uiViewRulNr2" class="Eingabefeld"></td>
+				<td class="c3">
+					<select size="1" id="uiViewRulArt2" class="Eingabefeld">
+						<option value="0"><? echo $var:Text8 ?></option>
+						<option value="1"><? echo $var:Text9 ?></option>
+						<option value="2"><? echo $var:Text10 ?></option>
+						<option value="3"><? echo $var:Text11 ?></option>
+						<option value="4"><? echo $var:Text12 ?></option>
+						<option value="5"><? echo $var:Text13 ?></option>
+						<option value="6"><? echo $var:Text14 ?></option>
+						<option value="7"><? echo $var:Text15 ?></option>
+					</select>
+				</td>
+			</tr>
 		</table>
 	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
@@ -53,16 +69,16 @@
 				<td class="c3"><script type="text/javascript">document.write(IndexDisplay("$3"));</script></td>
 				<td class="c4"><nobr><span title="$4">$4</span></nobr></td>
 				<td class="c5"><nobr><script type="text/javascript">document.write(ActionDisplay("$5"));</script></nobr></td>
-				<td class="c7"><button type="button" id="uiViewEdit$1" onClick="uiDoEditRul('$1')" value="<? echo '$var:Text50' ?>" title="<? echo '$var:Text50' ?>" style="width: 30px">
+				<td class="c7"><button type="button" id="uiViewEdit$1" onClick="uiDoEditRul('$1')" value="Ändern" title="Ändern" style="width: 30px">
 					<img src="../html/$var:lang/images/bearbeiten.gif" align=bottom width=16 height=16 hspace=4>
 				</button></td>
-				<td class="c8"><button type="button" id="uiViewDelete$1" onClick="uiDoDeleteRul('$1')" value="<? echo '$var:Text51' ?>" title="<? echo '$var:Text51' ?>" style="width: 30px">
+				<td class="c8"><button type="button" id="uiViewDelete$1" onClick="uiDoDeleteRul('$1')" value="Löschen" title="Löschen" style="width: 30px">
 					<img src="../html/$var:lang/images/loeschen.gif" align=bottom width=16 height=16 hspace=4>
 				</button></td>
 			</tr>
 ` ?>
-<? if eq <? query telcfg:settings/Diversity/count ?> 0 `
-			<tr><td colspan=7 class="ac" style="font-size: 13px"><? echo '$var:Text52' ?></td></tr>
+<? if eq <? multiquerycount telcfg:settings/Diversity/list ?> 0 `
+			<tr><td colspan=7 class="ac" style="font-size: 13px">Es sind keine Rufumleitungen eingerichtet.</td></tr>
 ` ?>
 		</table>
 		<p class="ar mt10"><input type="button" id="uiViewNewButton" onclick="uiDoNewRul('<? query telcfg:settings/Diversity/newid ?>')" value="Neue Rufumleitung" class="Pushbutton" style="width: 140px;"></p>
diff -burN usr/www/all/html/de/fon/rul.inc usr/www/all/html/de/fon/rul.inc
--- usr/www/all/html/de/fon/rul.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/rul.inc	2006-12-13 17:03:02.000000000 +0100
@@ -47,6 +47,3 @@
 <? setvariable var:Text47 'Rufnummer für die Kopplung (MSN)' ?>
 <? setvariable var:Text48 'FON 3' ?>
 <? setvariable var:Text49 'FON 4' ?>
-<? setvariable var:Text50 'Ändern' ?>
-<? setvariable var:Text51 'Löschen' ?>
-<? setvariable var:Text52 'Es sind keine Rufumleitungen eingerichtet.' ?>
diff -burN usr/www/all/html/de/fon/rul.js usr/www/all/html/de/fon/rul.js
--- usr/www/all/html/de/fon/rul.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/rul.js	2007-07-11 22:32:03.000000000 +0200
@@ -39,10 +39,6 @@
 var g_mldDeleteRul = "Wollen Sie diese Rufumleitung löschen ?";
 var g_preInternet	= "Internet: ";
 var g_preFestnetz	= "Festnetz: ";
-var g_txtDisplay_1 = "Sofort";
-var g_txtDisplay_2 = "Verzögert kurz";
-var g_txtDisplay_3 = "Verzögert lang";
-var g_txtDisplay_4 = "bei Besetzt";
 var g_expertMode = "<? query box:settings/expertmode/activated ?>";
 var g_msn0 = "<? query telcfg:settings/MSN/MSN0 ?>";
 var g_msn1 = "<? query telcfg:settings/MSN/MSN1 ?>";
@@ -59,6 +55,9 @@
 	jslCopyValue("uiViewRulNr1", "uiPostRulNr1");
 	jslSetSelection("uiViewRulArt1", "0");
 	jslSetSelection("uiViewRulArt1", jslGetValue("uiPostRulArt1"));
+	jslCopyValue("uiViewRulNr2", "uiPostRulNr2");
+	jslSetSelection("uiViewRulArt2", "0");
+	jslSetSelection("uiViewRulArt2", jslGetValue("uiPostRulArt2"));
 	// "<? query telcfg:settings/RefreshDiversity ?>"
 <? multiquery telcfg:settings/Diversity/list '
 	uiSetViewActiv("uiViewActiv$1", "uiPostActiv$1");
@@ -67,19 +66,30 @@
 		jslDisplay("uiExperte", true);
 		var aktiv = jslGetValue("uiPostCtAktiv");
 		jslSetChecked("uiViewAktiv", aktiv != "0");
+	
 		jslCopyValue("uiViewPin", "uiPostCtPin");
 		var CallerID = "";
 		for (i=0; i<8; i++)
 		{
 			var cid = jslGetValue("uiPostCtCaller"+i);
-			if (cid!="") {
+		 if (cid!="")
+		 {
 				if (CallerID!="") CallerID+=";";
 				CallerID+=cid;
 			}
 		}
 		jslSetChecked("uiViewCtId", CallerID.length > 0);
 		jslSetValue("uiViewRufnummer", CallerID);
+		jslDisplay("Art", true);
+		var msn = jslGetValue("uiPostCtMsn");
+		if (msn == "POTS") {
+			OnChangeOnArt(0);
+		} else {
+			if (msn.substr(0, 3) != "SIP") jslSetValue("uiViewArtNummer", msn);
+			OnChangeOnArt(1);
+		}
 		OnClickAktiv();
+		
 		OnChangeMode(aktiv == "2" ? 1:0);
 		var str = jslGetValue("uiPostExtension");
 		jslSetValue("uiViewDispatchNummer", str);
@@ -102,6 +112,7 @@
 	addMsn(id, g_msn8);
 	addMsn(id, g_msn9);
 	addOption(id, "POTS", g_preFestnetz+g_Pots);
+	
 	// Sip Zugänge anfügen
 <? multiquery sip:settings/sip/list(ID,displayname) '
 	if ("$3" != "") addOption(id, "SIP"+"$2", g_preInternet+jslGetValue("ui$1"));
@@ -110,8 +121,12 @@
 }
 function uiDoSave() {
 	if (!valIsZahl(jslGetValue("uiViewRulNr1"))) {alert(g_mldDigit); return;}
+	if (!valIsZahl(jslGetValue("uiViewRulNr2"))) {alert(g_mldDigit); return;}
+		
 	jslCopyValue("uiPostRulNr1", "uiViewRulNr1");
 	jslCopyValue("uiPostRulArt1", "uiViewRulArt1");
+	jslCopyValue("uiPostRulNr2", "uiViewRulNr2");
+	jslCopyValue("uiPostRulArt2", "uiViewRulArt2");
 	if (g_expertMode == "1") {
 		if (jslGetChecked("uiViewAktiv")) {
 			if (jslGetChecked("uiViewDurchwahl")) {
@@ -135,6 +150,12 @@
 					if (DispatchNummer == "") {alert(g_mldNoDispatchnummer); return;}
 					if (!isRufnummer(DispatchNummer)) {alert(g_mldErrDispatchnummer); return;}
 				}
+				if (jslGetChecked("uiViewArtAnalog")) {
+					jslSetValue("uiPostCtMsn", "POTS");
+				} else {
+					if (!valIsZahl(jslGetValue("uiViewArtNummer"))) {alert(g_mldDigit); return;}
+					jslCopyValue("uiPostCtMsn", "uiViewArtNummer");
+				}
 				var amt = jslGetValue("uiViewAmt");
 				if (!valIsZahl(amt)) {alert(g_mldAmtDigit); return;}
 				if (amt.length == 0) alert(g_mldNoAmt);
@@ -148,6 +169,7 @@
 			jslSetValue("uiPostCtAktiv", "0");
 		}
 	}
+	
 	jslSetValue("uiPostMenu", "fon");
 	jslSetValue("uiPostPageName", "rul");
 	jslSetValue("uiPostErrorPageName", "rul");
@@ -216,6 +238,7 @@
 				g_InitMode0 = true;
 				fillId("uiViewCalls");
 				jslSetSelection("uiViewCalls", jslGetValue("uiPostCtMsn"));
+		
 				fillId("uiViewWeiterleiten");
 				jslSetSelection("uiViewWeiterleiten", jslGetValue("uiPostWeiterleiten"));
 			}
@@ -271,10 +294,10 @@
 }
 function ActionDisplay(n) {
 	switch (n) {
-		case "0": return g_txtDisplay_1;
-		case "1": return g_txtDisplay_2;
-		case "2": return g_txtDisplay_3;
-		case "3": return g_txtDisplay_4;
+		case "0": return "Sofort";
+		case "1": return "Verzögert kurz";
+		case "2": return "Verzögert lang";
+		case "3": return "bei Besetzt";
 	}
 	return n;
 }
diff -burN usr/www/all/html/de/fon/sip1.frm usr/www/all/html/de/fon/sip1.frm
--- usr/www/all/html/de/fon/sip1.frm	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/sip1.frm	2007-07-11 22:32:03.000000000 +0200
@@ -10,10 +10,6 @@
 <input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/stunserver" value="" id="uiPostStun">
 <input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/authname_needed" value="0" id="uiPostSipUri">
 <input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/outboundproxy" value="" id="uiPostProxy">
-<input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/dditype" value="0" id="uiPostDditype">
-<? if eq $var:Annex A `
-<input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/Trunk" value="" id="uiPostTrunk" disabled>
-` ?>
 <input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/sipping_enabled" value="<? query sip:settings/sip0/sipping_enabled ?>" id="uiSipPing">
 <input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/sipping_interval" value="<? query sip:settings/sip0/sipping_interval ?>" id="uiSipPingTimer">
 <input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/tx_packetsize_in_ms" value="<? if eq $var:OEM avme `20` `30` ?>" id="uiPostPacketsize" disabled>
@@ -26,10 +22,6 @@
 <input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/stunserver" value="<? query sip:settings/<? echo $var:sipnr ?>/stunserver ?>" id="uiPostStun">
 <input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/authname_needed" value="<? query sip:settings/<? echo $var:sipnr ?>/authname_needed ?>" id="uiPostSipUri">
 <input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/outboundproxy" value="<? query sip:settings/<? echo $var:sipnr ?>/outboundproxy ?>" id="uiPostProxy">
-<input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/dditype" value="<? query sip:settings/<? echo $var:sipnr ?>/dditype ?>" id="uiPostDditype">
-<? if eq $var:Annex A `
-<input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/Trunk" value="<? query sip:settings/<? echo $var:sipnr ?>/Trunk ?>" id="uiPostTrunk" disabled>
-` ?>
 <input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/sipping_enabled" value="<? query sip:settings/<? echo $var:sipnr ?>/sipping_enabled ?>" id="uiSipPing">
 <input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/sipping_interval" value="<? query sip:settings/<? echo $var:sipnr ?>/sipping_interval ?>" id="uiSipPingTimer">
 <input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/tx_packetsize_in_ms" value="<? query sip:settings/<? echo $var:sipnr ?>/tx_packetsize_in_ms ?>" id="uiPostPacketsize" disabled>
@@ -37,25 +29,36 @@
 <? if eq $var:isnew 1 `
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/AKN" value="1" id="uiPostAKN">
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/RegistryType" value="other" id="uiPostType">
+<input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/OKZ" value="" id="uiPostOKZ">
+<? if eq $var:OEM arcor `
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/UseOKZ" value="1" id="uiPostUseOKZ">
+` `
+<input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/UseOKZ" value="0" id="uiPostUseOKZ">
+`?>
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/MSN" value="" id="uiPostMsn">
+<input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/LKZ" value="" id="uiPostLKZ">
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/UseLKZ" value="0" id="uiPostUseLKZ">
+<input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/OKZPrefix" value="0" id="uiPostOKZPrefix">
+<input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/LKZPrefix" value="" id="uiPostLKZPrefix">
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/KeepOKZPrefix" value="1" id="uiPostKeepOKZPrefix">
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/KeepLKZPrefix" value="1" id="uiPostKeepLKZPrefix">
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/Suffix" value="" id="uiPostSuffix">
-<input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/AlternatePrefix" value="" id="uiPostAlternatePrefix">
 ` `
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/AKN" value="<? query telcfg:settings/$var:telnr/AKN ?>" id="uiPostAKN">
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/RegistryType" value="<? query telcfg:settings/<? echo $var:telnr ?>/RegistryType ?>" id="uiPostType">
+<input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/OKZ" value="<? query telcfg:settings/<? echo $var:telnr ?>/OKZ ?>" id="uiPostOKZ">
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/UseOKZ" value="<? query telcfg:settings/<? echo $var:telnr ?>/UseOKZ ?>" id="uiPostUseOKZ">
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/MSN" value="<? query telcfg:settings/<? echo $var:telnr ?>/MSN ?>" id="uiPostMsn">
+<input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/LKZ" value="<? query telcfg:settings/$var:telnr/LKZ ?>" id="uiPostLKZ">
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/UseLKZ" value="<? query telcfg:settings/$var:telnr/UseLKZ ?>" id="uiPostUseLKZ">
+<input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/OKZPrefix" value="<? query telcfg:settings/$var:telnr/OKZPrefix ?>" id="uiPostOKZPrefix">
+<input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/LKZPrefix" value="<? query telcfg:settings/$var:telnr/LKZPrefix ?>" id="uiPostLKZPrefix">
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/KeepOKZPrefix" value="<? query telcfg:settings/$var:telnr/KeepOKZPrefix ?>" id="uiPostKeepOKZPrefix">
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/KeepLKZPrefix" value="<? query telcfg:settings/$var:telnr/KeepLKZPrefix ?>" id="uiPostKeepLKZPrefix">
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/Suffix" value="<? query telcfg:settings/$var:telnr/Suffix ?>" id="uiPostSuffix">
-<input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/AlternatePrefix" value="<? query telcfg:settings/$var:telnr/AlternatePrefix ?>" id="uiPostAlternatePrefix">
 ` ?>
-<input type="hidden" name="telcfg:settings/Location/OKZ" value="<? query telcfg:settings/Location/OKZ ?>" id="uiPostOKZ" disabled>
+<input type="hidden" name="telcfg:settings/MSN/Port0/MSN0" value="<? query telcfg:settings/MSN/Port0/MSN0 ?>" id="uiPostNr00" disabled>
+<input type="hidden" name="telcfg:settings/MSN/Port1/MSN0" value="<? query telcfg:settings/MSN/Port1/MSN0 ?>" id="uiPostNr10" disabled>
 <input type="hidden" name="telcfg:settings/MSN/NTDefault" value="<? query telcfg:settings/MSN/NTDefault ?>" id="uiPostNTDefault" disabled>
 <input type="hidden" name="connection0:pppoe:settings/username" value="<? query connection0:pppoe:settings/username ?>" id="uiPostPppUsername" disabled>
 <? multiquery telcfg:settings/SIP/list '
diff -burN usr/www/all/html/de/fon/sip1.html usr/www/all/html/de/fon/sip1.html
--- usr/www/all/html/de/fon/sip1.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/sip1.html	2007-07-11 22:32:04.000000000 +0200
@@ -28,9 +28,20 @@
 						<option value="Freenet">$var:Text8</option>
 						<option value="GMX">$var:Text5</option>
 						<option value="Inode">$var:Text55</option>
-<? if eq $var:Annex A `
-						<option value="InodeIsdn">$var:Text101</option>
+						<option value="SuP">$var:Text6</option>
+						<option value="Sipgate">$var:Text10</option>
+						<option value="Strato">$var:Text44</option>
+						<option value="TOnline">$var:Text12</option>
+						<option value="Webde">$var:Text11</option>
 ` ?>
+<? if eq $var:OEM tcom 	`
+						<option value="1u1">$var:Text4</option>
+						<option value="AOL">$var:Text9</option>
+						<option value="Arcor">$var:Text7</option>
+						<option value="Dus">$var:Text13</option>
+						<option value="Freenet">$var:Text8</option>
+						<option value="GMX">$var:Text5</option>
+						<option value="Inode">$var:Text55</option>
 						<option value="SuP">$var:Text6</option>
 						<option value="Sipgate">$var:Text10</option>
 						<option value="Strato">$var:Text44</option>
@@ -45,9 +56,6 @@
 						<option value="Freenet">$var:Text8</option>
 						<option value="GMX">$var:Text5</option>
 						<option value="Inode">$var:Text55</option>
-<? if eq $var:Annex A `
-						<option value="InodeIsdn">$var:Text101</option>
-` ?>
 						<option value="SuP">$var:Text6</option>
 						<option value="Sipgate">$var:Text10</option>
 						<option value="Strato">$var:Text44</option>
@@ -58,15 +66,10 @@
 						<option value="1u1">$var:Text4</option>
 						<option value="AOL">$var:Text9</option>
 						<option value="Arcor">$var:Text7</option>
-						<option value="DBD">$var:Text98</option>
-						<option value="DBD-DSL">$var:Text99</option>
 						<option value="Dus">$var:Text13</option>
 						<option value="Freenet">$var:Text8</option>
 						<option value="GMX">$var:Text5</option>
 						<option value="Inode">$var:Text55</option>
-<? if eq $var:Annex A `
-						<option value="InodeIsdn">$var:Text101</option>
-` ?>
 						<option value="SuP">$var:Text6</option>
 						<option value="Sipgate">$var:Text10</option>
 						<option value="Strato">$var:Text44</option>
@@ -99,31 +102,17 @@
 			<table>
 				<tr>
 					<td class="c1"></td>
-					<td colspan=3 style="font-size:12px"><? echo $var:Text56 ?></td>
+					<td colspan=3 style="font-size:12px">Ortsvorwahl</td>
 				</tr>
 				<tr>
-					<td><? echo $var:Text57 ?></td>
+					<td>Rufnummer</td>
 					<td><input type="text" size="6" maxlength="12" class="Eingabefeld" id="uiViewArcorOKZ"></td>
-					<td><? echo $var:Text58 ?></td>
+					<td>-</td>
 					<td><input type="text" size="12" maxlength="128" class="Eingabefeld" id="uiViewArcorUsername"></td>
 				</tr>
 				<tr>
 					<td class="c1"></td>
-					<td colspan=3 style="font-size:12px; padding: 0px 1px 5px 1px"><? echo $var:Text59 ?></td>
-				</tr>
-			</table>
-		</div>
-		<div id="DbdRufnummer" class="left20 mb10" style="display:none">
-			<table>
-				<tr>
-					<td class="c1"></td>
-					<td colspan=3 style="font-size:12px"><? echo $var:Text56 ?></td>
-				</tr>
-				<tr>
-					<td><? echo $var:Text57 ?></td>
-					<td><input type="text" size="6" maxlength="12" class="Eingabefeld" id="uiViewDbdOKZ"></td>
-					<td><? echo $var:Text58 ?></td>
-					<td><input type="text" size="12" maxlength="128" class="Eingabefeld" id="uiViewDbdRufnummer"></td>
+					<td colspan=3 style="font-size:12px; padding: 0px 1px 5px 1px">z.B. 069</td>
 				</tr>
 			</table>
 		</div>
@@ -153,8 +142,8 @@
 					<td><input type="password" size="14" maxlength="128" class="Eingabefeld" id="uiViewPassword2" onfocus="uiSelect(id);"></td>
 				</tr>
 				<tr id="Registrar" style="display:none">
-					<td class="c1" style="padding-top:10px"><label for="uiViewRegistrar"><? echo $var:Text24 ?></label></td>
-					<td style="padding-top:10px"><input type="text" size="45" maxlength="48" class="Eingabefeld" id="uiViewRegistrar"></td>
+					<td class="c1"><label for="uiViewRegistrar"><? echo $var:Text24 ?></label></td>
+					<td><input type="text" size="45" maxlength="48" class="Eingabefeld" id="uiViewRegistrar"></td>
 				</tr>
 				<tr id="Proxy" style="display:none">
 					<td class="c1"><label for="uiViewProxy"><? echo $var:Text45 ?></label></td>
@@ -172,67 +161,59 @@
 			</table>
 		</div>
 		<div id="ArcorUseOKZ" class="left20" style="display:none">
-			<p><input type="checkbox" id="uiViewArcorUseOKZ">&nbsp;<label for="uiViewArcorUseOKZ"><? echo $var:Text26 ?></label></p>
+			<p><input type="checkbox" id="uiViewArcorUseOKZ">&nbsp;<label for="uiViewArcorUseOKZ">Ortsvorwahl für ausgehende Gespräche einfügen</label></p>
 		</div>
 		<div id="UseOKZ" style="display:none">
-			<p id="OKZProvider"style="display:none"><input type="checkbox" id="uiViewUseOKZProvider">&nbsp;<label for="uiViewUseOKZProvider"><? echo $var:Text26 ?></label></p>
-			<div id="uiOKZ" style="display:none">
-				<p class="mt10 mb5"><? echo $var:Text94 ?></p>
-				<div class="left25">
-					<table>
-						<tr>
-							<td class="c1"><label for="uiViewOKZ"><? echo $var:Text56 ?></label></td>
-							<td><input type="text" size="5" maxlength="32" class="Eingabefeld" id="uiViewOKZ"></td>
-						</tr>
-					</table>
-				</div>
-			</div>
+			<p><input type="checkbox" id="uiViewUseOKZ" onclick="OnChangeOKZ()">&nbsp;<label for="uiViewUseOKZ"><? echo $var:Text26 ?></label></p>
+			<p class="left20"><label for="uiViewOKZ"><? echo $var:Text27 ?></label>&nbsp;<input type="text" size="6" maxlength="32" class="Eingabefeld" id="uiViewOKZ"></p>
 		</div>
+<? if eq $var:showLKZ 1 '
 		<div id="ExpUseOKZ" style="display:none">
-			<div id="uiExpOKZ" style="display:none">
-				<p class="mt10"><? echo $var:Text94 ?></p>
-				<div class="left25"> 
+			<p class="mb10">$var:Text28</p>
+			<p><input type="checkbox" id="uiViewExpUseOKZ">&nbsp;<label for="uiViewExpUseOKZ">$var:Text33</label></p>
+			<div class="left25 mb10">
 					<table>
 						<tr>
-							<td class="c1"><label for="uiViewExpOKZ"><? echo $var:Text56 ?></label></td>
-							<td><input type="text" size="5" maxlength="32" class="Eingabefeld" id="uiViewExpOKZ"></td>
+						<td class="c0"><label for="uiViewExpOKZ">$var:Text34</label></td>
+						<td><input type="text" size="6" maxlength="32" class="Eingabefeld" id="uiViewExpOKZ"></td>
+					</tr>
+					<tr>
+						<td class="c0"><label for="uiViewExpOKZPrefix">$var:Text35</label></td>
+						<td><input type="text" size="6" maxlength="32" class="Eingabefeld" id="uiViewExpOKZPrefix"></td>
+					</tr>
+					<tr>
+						<td colspan=2><input type="checkbox" id="uiViewExpKeepOKZPrefix">&nbsp;<label for="uiViewExpKeepOKZPrefix">$var:Text36</label></td>
 						</tr>
 					</table>
 				</div>
-			</div>
-			<p class="mt10 mb5"><? echo $var:Text92 ?></p>
-			<div class="left25">
+			<p><input type="checkbox" id="uiViewExpUseLKZ">&nbsp;<label for="uiViewExpUseLKZ">$var:Text37</label></p>
+			<div class="left25 mb10">
 				<table>
 					<tr>
-						<td class="c1"><? echo $var:Text93 ?></td>
-						<td class="c3"><input type="checkbox" id="uiViewExpKeepLKZPrefix"></td>
-						<td class="c3"><input type="checkbox" id="uiViewExpUseLKZ" onclick="OnExpLkz()"></td>
-						<td class="c3"><input type="checkbox" id="uiViewExpKeepOKZPrefix"></td>
-						<td class="c3"><input type="checkbox" id="uiViewExpUseOKZ" onclick="OnExpOkz()"></td>
+						<td class="c0"><label for="uiViewExpLKZ">$var:Text38</label></td>
+						<td><input type="text" size="6" maxlength="32" class="Eingabefeld" id="uiViewExpLKZ"></td>
+					</tr>
+					<tr>
+						<td class="c0"><label for="uiViewExpLKZPrefix">$var:Text39</label></td>
+						<td><input type="text" size="6" maxlength="32" class="Eingabefeld" id="uiViewExpLKZPrefix"></td>
 					</tr>
 					<tr>
-						<td class="c1">&nbsp;</td>
-						<td class="c3"><? query telcfg:settings/Location/LKZPrefix ?></td>
-						<td class="c3"><? query telcfg:settings/Location/LKZ ?></td>
-						<td class="c3"><? query telcfg:settings/Location/OKZPrefix ?></td>
-						<td class="c3"><? query telcfg:settings/Location/OKZ ?></td>
+						<td colspan=2><input type="checkbox" id="uiViewExpKeepLKZPrefix">&nbsp;<label for="uiViewExpKeepLKZPrefix">$var:Text40</label></td>
 					</tr>
 				</table>
-				<p class="pCheck25 mb10" id="uiShowAlternatePrefix_USA" style="display:none">
-					<input type="checkbox" name="AlternatePrefix" id="uiViewAlternatePrefix_USA">&nbsp;<label for="uiViewAlternatePrefix_USA"><? echo $var:Text95 ?></label><br /><? echo $var:Text96 ?>
-				</p>
 			</div>
 <? if neq $var:OEM avme '
-			<div class="left25"> 
+			<div>
 				<table>
 					<tr>
-						<td class="c1"><label for="uiViewExpSuffix">$var:Text46</label></td>
+						<td class="c00"><label for="uiViewExpSuffix">$var:Text46</label></td>
 						<td><input type="text" size="10" maxlength="32" class="Eingabefeld" id="uiViewExpSuffix"></td>
 					</tr>
 				</table>
 			</div>
 ' ?>
 		</div>
+' ?>
 		<? include ../html/$var:lang/home/error.html ?>
 	</div></div></div></div></div></div>
 <? if eq $var:showtcom 1 '
diff -burN usr/www/all/html/de/fon/sip1.inc usr/www/all/html/de/fon/sip1.inc
--- usr/www/all/html/de/fon/sip1.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/sip1.inc	2006-12-13 17:03:02.000000000 +0100
@@ -24,11 +24,16 @@
 <? setvariable var:Text23 'Kennwortbestätigung' ?>
 <? setvariable var:Text24 'Registrar' ?>
 <? setvariable var:Text25 'STUN-Server' ?>
-<? setvariable var:Text26 'Ortsvorwahl für ausgehende Gespräche einfügen' ?>
+<? setvariable var:Text26 'Ortsvorwahl ergänzen' ?>
+<? setvariable var:Text27 'Geben Sie hier Ihre Ortsvorwahl ein' ?>
 <? setvariable var:Text28 'Stellen Sie Ortskennzahl und Landeskennzahl gemäß Ihren Anforderungen ein oder richten Sie sich nach den Vorgaben Ihres Telefonieanbieters.' ?>
 <? setvariable var:Text33 'Ortskennzahl verwenden' ?>
+<? setvariable var:Text34 'Geben Sie hier Ihre Ortskennzahl ein' ?>
+<? setvariable var:Text35 'Geben Sie hier Ihren Ortskennzahl-Prefix ein' ?>
 <? setvariable var:Text36 'Ortskennzahl-Prefix beibehalten' ?>
 <? setvariable var:Text37 'Landeskennzahl verwenden' ?>
+<? setvariable var:Text38 'Geben Sie hier Ihre Landeskennzahl ein' ?>
+<? setvariable var:Text39 'Geben Sie hier Ihren Landeskennzahl-Prefix ein' ?>
 <? setvariable var:Text40 'Landeskennzahl-Prefix beibehalten' ?>
 <? setvariable var:Text41 'Der Anbieter unterstützt die Online-Liste' ?>
 <? setvariable var:Text42 'Internetrufnummer für die Anmeldung verwenden' ?>
@@ -45,48 +50,4 @@
 <? setvariable var:Text53 'Noch nicht zur Internettelefonie angemeldet?' ?>
 <? setvariable var:Text54 'Jetzt kostenlos anmelden' ?>
 <? setvariable var:Text55 'Inode' ?>
-<? setvariable var:Text56 'Ortsvorwahl' ?>
-<? setvariable var:Text57 'Rufnummer' ?>
-<? setvariable var:Text58 '-' ?>
-<? setvariable var:Text59 'z.B. 069' ?>
-<? setvariable var:Text60 'DTMF-Übertragung' ?>
-<? setvariable var:Text61 'Automatisch (SUBSCRIBE, INFO, RTP oder Inband)' ?>
-<? setvariable var:Text62 'INFO, RTP oder Inband' ?>
-<? setvariable var:Text63 'RTP oder Inband' ?>
-<? setvariable var:Text64 'Inband' ?>
-<? setvariable var:Text65 'Durchwahl' ?>
-<? setvariable var:Text66 'Deaktiviert' ?>
-<? setvariable var:Text67 'Rufnummer im Displaynamen übertragen' ?>
-<? setvariable var:Text68 'Rufnummer im Usernamen übertragen' ?>
-<? setvariable var:Text69 'Rufnummer im Display- und Usernamen übertragen' ?>
-<? setvariable var:Text70 'Rufnummernunterdrückung' ?>
-<? setvariable var:Text71 'CLIR über Displaynamen' ?>
-<? setvariable var:Text72 'CLIR über Display- und Usernamen' ?>
-<? setvariable var:Text73 'CLIR für AOL' ?>
-<? setvariable var:Text74 'CLIR über RFC 3323 (Header)' ?>
-<? setvariable var:Text75 'CLIR über RFC 3325 (Id)' ?>
-<? setvariable var:Text76 'Der Anbieter unterstützt MWI (RFC 3842)' ?>
-<? setvariable var:Text77 'Der Anbieter unterstützt die Online-Liste (RFC 3856)' ?>
-<? setvariable var:Text78 'Der Anbieter unterstützt "rport" (RFC 3581)' ?>
-<? setvariable var:Text79 'Der Anbieter unterstützt Session Timer (RFC 4028)' ?>
-<? setvariable var:Text80 'Der Anbieter ist NAT-aware' ?>
-<? setvariable var:Text81 'Der Anbieter unterstützt nur ein gleichzeitiges Telefonat' ?>
-<? setvariable var:Text82 'Der Anbieter unterstützt kein REGISTER-fetch' ?>
-<? setvariable var:Text83 'Die Nutzung von REFER ohne Authentisierung verhindern' ?>
-<? setvariable var:Text84 'Den Anbieter nicht automatisch registrieren' ?>
-<? setvariable var:Text85 'Vorgabe für das REGISTER-Interval in Sekunden' ?>
-<? setvariable var:Text86 'Paketgröße in Millisekunden in Senderichtung' ?>
-<? setvariable var:Text87 '' ?>
-<? setvariable var:Text88 'Rufnummer in "P-Preferred-Identity" übertragen' ?>
-<? setvariable var:Text89 'CLIR über RFC 3323 (Id)' ?>
-<? setvariable var:Text90 'Anrufeinschränkung aktivieren (SPIT)' ?>
-<? setvariable var:Text91 'Codec-Angaben im SDP-Header vollständig angeben' ?>
-<? setvariable var:Text92 'Rufnummernformat anpassen' ?>
-<? setvariable var:Text93 'Diese Vorwahlziffern werden der gewählten Rufnummer vorangestellt' ?>
-<? setvariable var:Text94 'Tragen Sie Ihre Ortsvorwahl ein' ?>
-<? setvariable var:Text95 'VoIP-Anbieter mit amerikanischem Rufnummernplan' ?>
-<? setvariable var:Text96 '(internationale Vorwahl 011 statt 00)' ?>
-<? setvariable var:Text97 'Der Anbieter unterstützt das internationale Rufnummernformat' ?>
-<? setvariable var:Text98 'DBD' ?>
-<? setvariable var:Text99 'DBD (DSL)' ?>
-<? setvariable var:Text101 'Inode (ISDN)' ?>
+						
diff -burN usr/www/all/html/de/fon/sip1.js usr/www/all/html/de/fon/sip1.js
--- usr/www/all/html/de/fon/sip1.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/sip1.js	2007-07-11 22:32:04.000000000 +0200
@@ -2,6 +2,7 @@
 <? if eq $var:OEM avm '<? setvariable var:showtcom 1 ?>' ?>
  <? if eq $var:OEM aol '<? setvariable var:showtcom 1 ?>' ?>
 <? if eq $var:OEM tcom '<? setvariable var:showtcom 1 ?>' ?>
+<? setvariable var:showLKZ 1 ?>
 <!--		../fon/sip.js		-->
 <style type="text/css">
 <!--
@@ -11,11 +13,9 @@
 .c0 {padding: 1px 15px 1px 0px; width: 300px;}
 .c00 {padding: 1px 15px 1px 0px; width: 325px;}
 .c1 {width: 180px;}
-.c3 {padding-right: 4px; text-align:center; vertical-align:bottom;}
 #tLinks td {padding: 2px 0px;}
 #tLinks .c1 {width: 330px;}
 #tLinks .c2 {width: 190px; text-align: right;}
-.pCheck25 {text-indent: -25px; padding-left: 25px;}
 -->
 </style>
 <script type="text/javascript">
@@ -76,16 +76,6 @@
 var g_txtInodeVoIPName		= "Rufnummer";
 var g_txtInodeKennwort		= "Kennwort";
 var g_txtInodeConfirmation	= "Kennwortbestätigung";
-<? if eq $var:Annex A `
-var g_txtInodeIsdnRufnr			= "Internetrufnummer";
-var g_txtInodeIsdnVoIPName		= "Kopfnummer";
-var g_txtInodeIsdnKennwort		= "Kennwort";
-var g_txtInodeIsdnConfirmation	= "Kennwortbestätigung";
-` ?>
-var g_txtDbdRufnr				= "Rufnummer";
-var g_txtDbdVoIPName		= "SIP-Kennung";
-var g_txtDbdKennwort			= "SIP-Passwort";
-var g_txtDbdConfirmation		= "Passwort-Bestätigung";
 var g_txtSonstRufnr			= "Internetrufnummer";
 var g_txtSonstVoIPName		= "Benutzername";
 var g_txtSonstKennwort		= "Kennwort";
@@ -98,9 +88,7 @@
 var g_isDsl = "<? echo $var:isDsl ?>";
 var g_isAta = "<? echo $var:isAta ?>";
 var g_AtaMode = "<? query box:settings/ata_mode ?>";
-var g_ShowOKZ = false;
 function uiDoOnLoad() {
-	if (jslGetValue("uiPostOKZ") == "") g_ShowOKZ = true;
 	jslGetCheckValue("uiViewUseSip", "uiPostUseSip");
 	jslCopyValue("uiViewRufnr","uiPostRufnr");
 	jslCopyValue("uiViewUsername","uiPostUsername");
@@ -110,29 +98,29 @@
 	jslCopyValue("uiViewProxy","uiPostProxy");
 	jslCopyValue("uiViewStun","uiPostStun");
 	jslSetChecked("uiViewSipUri", jslGetValue("uiPostSipUri") == "1");
+	
+<? if eq $var:showLKZ 1 '
 	if (g_expertMode == "1") {
-		jslDisplay("uiExpOKZ", g_ShowOKZ);
 		jslGetCheckValue("uiViewExpUseOKZ", "uiPostUseOKZ");
+		jslCopyValue("uiViewExpOKZ", "uiPostOKZ");
 		jslGetCheckValue("uiViewExpKeepOKZPrefix", "uiPostKeepOKZPrefix");
+		jslCopyValue("uiViewExpOKZPrefix", "uiPostOKZPrefix");
 		jslGetCheckValue("uiViewExpUseLKZ", "uiPostUseLKZ");
+		jslCopyValue("uiViewExpLKZ", "uiPostLKZ");
 		jslGetCheckValue("uiViewExpKeepLKZPrefix", "uiPostKeepLKZPrefix");
-		g_okzprestate = jslGetChecked("uiViewExpKeepOKZPrefix");
-		g_lkzprestate = jslGetChecked("uiViewExpKeepLKZPrefix");
+		jslCopyValue("uiViewExpLKZPrefix", "uiPostLKZPrefix");
 <? if neq $var:OEM avme '
 		jslCopyValue("uiViewExpSuffix", "uiPostSuffix");
 ' ?>
-		jslSetChecked("uiViewAlternatePrefix_USA", jslGetValue("uiPostAlternatePrefix") == "011");
-	} else {
-		jslDisplay("uiOKZ", g_ShowOKZ);
 	}
+' ?>
 	jslCopyValue("uiView1u1Username","uiPostRufnr");
 	jslSetValue("uiViewArcorUsername", ArcorUsername());
-	jslGetCheckValue("uiViewUseOKZProvider", "uiPostUseOKZ");
+	jslGetCheckValue("uiViewUseOKZ", "uiPostUseOKZ");
 	jslGetCheckValue("uiViewArcorUseOKZ", "uiPostUseOKZ");
-	jslSetValue("uiViewArcorOKZ", ArcorOKZ());
-	jslSetValue("uiView1u1OKZ", UnitedInternetOKZ());
-	jslSetValue("uiViewDbdRufnummer", DbdUsername());
-	jslSetValue("uiViewDbdOKZ", DbdOKZ());
+	jslSetValue("uiViewOKZ", GetOKZDisplay("uiPostOKZ"));
+	jslSetValue("uiViewArcorOKZ", GetOKZDisplay("uiPostOKZ"));
+	jslCopyValue("uiView1u1OKZ", "uiPostOKZ");
 	OnChangeSip();
 	if (g_Variante == "arcor") {
 		if ((jslGetValue("uiPostRegistrar") != "") && (jslGetValue("uiPostRegistrar") != "arcor.de")) {
@@ -205,67 +193,21 @@
 			jslSetSelection("uiViewProvider", "Dus");
 			OnChangeProvider("Dus");
 		} else if (registrar == "voip.inode.at") {
-<? if eq $var:Annex A `
-			if (jslGetValue("uiPostDditype") == "0") {
 				jslSetSelection("uiViewProvider", "Inode");
 				OnChangeProvider("Inode");
 			} else {
-				jslSetSelection("uiViewProvider", "InodeIsdn");
-				OnChangeProvider("InodeIsdn");
-			}
-` `
-			jslSetSelection("uiViewProvider", "Inode");
-			OnChangeProvider("Inode");
-` ?>			
-		} else if (registrar.indexOf("dbd-") >= 0) {
-			if (registrar.indexOf("dsl") >= 0) {
-				jslSetSelection("uiViewProvider", "DBD-DSL");
-				OnDbd();
-			} else {
-				jslSetSelection("uiViewProvider", "DBD");
-				OnDbd();
-			}
-		} else {
 			jslSetSelection("uiViewProvider", "Sonst");
 			OnChangeProvider("Sonst");
 		}
 ' ?>
 	}
-	if (g_expertMode == "1") {
-		OnExpLkz();
-		OnExpOkz();
-	}
 }
 function ArcorUsername () {
-	return jslGetValue("uiPostMsn");
-}
-function ArcorOKZ() {
-	var rufnr = jslGetValue("uiPostMsn");
-	var username = jslGetValue("uiPostUsername");
-	if (username.length <= rufnr.length) return "";
-	if (username.substr(username.length-rufnr.length) != rufnr) return "";
-	return username.substr(0, username.length-rufnr.length);
-}
-function UnitedInternetUsername() {
-	return jslGetValue("uiPostRufnr");
-}
-function UnitedInternetOKZ() {
+	// Die eventuell vorhandene OKZ muss entfernt werden
 	var rufnr = jslGetValue("uiPostRufnr");
-	var username = jslGetValue("uiPostUsername");
-	if (username.substr(0,2) != "49") return "";
-	if (username.length <= rufnr.length+2) return "";
-	if (username.substr(username.length-rufnr.length) != rufnr) return "";
-	return username.substr(2, username.length-rufnr.length-2);
-}
-function DbdUsername () {
-	return jslGetValue("uiPostMsn");
-}
-function DbdOKZ() {
-	var rufnr = jslGetValue("uiPostMsn");
-	var username = jslGetValue("uiPostRufnr");
-	if (username.length <= rufnr.length) return "";
-	if (username.substr(username.length-rufnr.length) != rufnr) return "";
-	return username.substr(0, username.length-rufnr.length);
+	var okz = GetOKZDisplay("uiPostOKZ");
+	if (rufnr.indexOf(okz) != 0) return rufnr;
+	return rufnr.substr(okz.length);
 }
 function uiDoValidate() {
 	var provider = jslGetValue("uiViewProvider");
@@ -328,30 +270,19 @@
 	if (ShowStun()) jslCopyValue("uiPostStun", "uiViewStun");
 	SetRegType("other");
 	if (g_expertMode == "1") {
-		if (g_ShowOKZ) {
-			if (!valIsZahl(jslGetValue("uiViewExpOKZ"))) {alert(g_mldOkzDigit); return false;}
-			jslSetValue("uiPostOKZ", GetOKZohneNull("uiViewExpOKZ"));
-			jslEnable("uiPostOKZ");
-		}
 		jslSetCheckValue("uiPostUseOKZ", "uiViewExpUseOKZ");
-		if (jslGetChecked("uiViewExpUseOKZ"))
+		if (!valIsZahl(jslGetValue("uiViewExpOKZ"))) {alert(g_mldOkzDigit); return false;}
+		jslCopyValue("uiPostOKZ", "uiViewExpOKZ");
 			jslSetCheckValue("uiPostKeepOKZPrefix", "uiViewExpKeepOKZPrefix");
-		else
-			jslSetValue("uiPostKeepOKZPrefix", "1");
+		jslCopyValue("uiPostOKZPrefix", "uiViewExpOKZPrefix");
 		jslSetCheckValue("uiPostUseLKZ", "uiViewExpUseLKZ");
-		if (jslGetChecked("uiViewExpUseLKZ"))
+		if (!valIsZahl(jslGetValue("uiViewExpLKZ"))) {alert(g_mldLkzDigit); return false;}
+		jslCopyValue("uiPostLKZ", "uiViewExpLKZ");
 			jslSetCheckValue("uiPostKeepLKZPrefix", "uiViewExpKeepLKZPrefix");
-		else
-			jslSetValue("uiPostKeepLKZPrefix", "1");
+		jslCopyValue("uiPostLKZPrefix", "uiViewExpLKZPrefix");
 <? if neq $var:OEM avme '
 		jslCopyValue("uiPostSuffix", "uiViewExpSuffix");
 ' ?>
-	} else {
-		if (g_ShowOKZ) {
-			if (!valIsZahl(jslGetValue("uiViewOKZ"))) {alert(g_mldOkzDigit); return false;}
-			jslSetValue("uiPostOKZ", GetOKZohneNull("uiViewOKZ"));
-			jslEnable("uiPostOKZ");
-		}
 	}
 	return true;
 }
@@ -362,7 +293,6 @@
 	jslSetValue("uiPostProxy","");
 	jslSetValue("uiPostSipUri", "0");
 	jslSetValue("uiPostStun","");
-	jslSetValue("uiPostDdiType", "0");
 	var type= jslGetValue("uiViewProvider");
 	if (type == "1u1") {
 		if (!SaveUnitedInternet("1und1", "1und1.de", "1und1.de")) return false;
@@ -389,18 +319,23 @@
 		jslSetValue("uiPostRufnr", name);
 		jslCopyValue("uiPostMsn","uiViewArcorUsername");
 		jslSetCheckValue("uiPostUseOKZ", "uiViewArcorUseOKZ");
-		if (g_ShowOKZ) {
 			jslSetValue("uiPostOKZ", GetOKZohneNull("uiViewArcorOKZ"));
-			jslEnable("uiPostOKZ");
-		}
-	} else if (type == "DBD" || type== "DBD-DSL") {
-		if (!SaveDbd()) return false;
 	} else {
-		if (type != "Inode" && type != "InodeIsdn") {
+		if (type != "Inode") {
 			var rufnr = jslGetValue("uiViewRufnr");
 			if (rufnr.length == 0) {alert1(g_mldNoRufnrIsdn, g_LabelRufnr); return false;}
 			if (!valIsZahl(rufnr)) {alert1(g_mldRufnrDigit, g_LabelRufnr); return false;}
 		}
+<? if eq $var:showLKZ 1 `
+		if (g_expertMode == "1") {
+			if (!valIsZahl(jslGetValue("uiViewExpOKZ"))) {alert(g_mldOkzDigit); return false;}
+			if (!valIsZahl(jslGetValue("uiViewExpLKZ"))) {alert(g_mldLkzDigit); return false;}
+		} else {
+			if (jslGetChecked("uiViewUseOKZ") && !valOKZ(jslGetValue("uiViewOKZ"))) return false;
+		}
+` `
+		if (jslGetChecked("uiViewUseOKZ") && !valOKZ(jslGetValue("uiViewOKZ"))) return false;
+` ?>
 		if (type == "Sipgate") {
 			if (!valIsSipname(jslGetValue("uiViewUsername"))) {alert(g_mldNameChar); return false;}
 			jslSetValue("uiPostRegistrar", "sipgate.de");
@@ -432,11 +367,7 @@
 		} else if (type == "Webde") {
 			if (!SaveWebde()) return false;
 		} else if (type == "Inode") {
-			if (!SaveInode(false)) return false;
-<? if eq $var:Annex A `
-		} else if (type == "InodeIsdn") {
-			if (!SaveInode(true)) return false;
-` ?>
+			if (!SaveInode()) return false;
 		} else if (type == "Dus") {
 			if (!SaveDus()) return false;
 		} else {
@@ -451,31 +382,25 @@
 		if (type == "Sipgate" || type=="AOL") {
 			jslSetValue("uiPostUseOKZ", "0");
 		} else {
+<? if eq $var:showLKZ 1 `
 			if (g_expertMode == "1") {
-				if (g_ShowOKZ) {
-					if (!valIsZahl(jslGetValue("uiViewExpOKZ"))) {alert(g_mldOkzDigit); return false;}
-					jslSetValue("uiPostOKZ", GetOKZohneNull("uiViewExpOKZ"));
-					jslEnable("uiPostOKZ");
-				}
 				jslSetCheckValue("uiPostUseOKZ", "uiViewExpUseOKZ");
-				if (jslGetChecked("uiViewExpUseOKZ"))
+				jslCopyValue("uiPostOKZ", "uiViewExpOKZ");
 					jslSetCheckValue("uiPostKeepOKZPrefix", "uiViewExpKeepOKZPrefix");
-				else
-					jslSetValue("uiPostKeepOKZPrefix", "1");
+				jslCopyValue("uiPostOKZPrefix", "uiViewExpOKZPrefix");
 				jslSetCheckValue("uiPostUseLKZ", "uiViewExpUseLKZ");
-				if (jslGetChecked("uiViewExpUseLKZ"))
+				jslCopyValue("uiPostLKZ", "uiViewExpLKZ");
 					jslSetCheckValue("uiPostKeepLKZPrefix", "uiViewExpKeepLKZPrefix");
-				else
-					jslSetValue("uiPostKeepLKZPrefix", "1");
+				jslCopyValue("uiPostLKZPrefix", "uiViewExpLKZPrefix");
 				jslCopyValue("uiPostSuffix", "uiViewExpSuffix");
 			} else {
-				if (g_ShowOKZ) {
-					if (!valIsZahl(jslGetValue("uiViewOKZ"))) {alert(g_mldOkzDigit); return false;}
+				jslSetCheckValue("uiPostUseOKZ", "uiViewUseOKZ");
 					jslSetValue("uiPostOKZ", GetOKZohneNull("uiViewOKZ"));
-					jslEnable("uiPostOKZ");
-				}
-				jslSetCheckValue("uiPostUseOKZ", "uiViewUseOKZProvider");
 			}
+` `
+			jslSetCheckValue("uiPostUseOKZ", "uiViewUseOKZ");
+			jslSetValue("uiPostOKZ", GetOKZohneNull("uiViewOKZ"));
+` ?>
 		}
 		if (type != "Dus") jslCopyValue("uiPostUsername","uiViewUsername");
 		jslCopyValue("uiPostPassword","uiViewPassword");
@@ -501,20 +426,17 @@
 	jslCopyValue("uiPostPassword","uiViewPassword");
 	jslSetValue("uiPostRegistrar", registrar);
 	jslSetValue("uiPostStun", stun);
-	jslCopyValue("uiPostRufnr", "uiView1u1Username");
-	jslCopyValue("uiPostMsn", "uiView1u1Username");
-	jslSetValue("uiPostUseOKZ", "1");
-	if (g_ShowOKZ) {
+	jslCopyValue("uiPostRufnr","uiView1u1Username");
+	jslCopyValue("uiPostMsn","uiView1u1Username");
+	jslSetValue("uiPostUseOKZ","1");
 		jslSetValue("uiPostOKZ", GetOKZohneNull("uiView1u1OKZ"));
-		jslEnable("uiPostOKZ");
-	}
 	return true;
 }
 ` ?>
 <? if neq $var:OEM avme `
 function SaveStrato () {
 	if (!valIsSipname(jslGetValue("uiViewUsername"))) {alert(g_mldNameChar); return false;}
-	jslSetValue("uiPostRegistrar", "strato-iphone.de");
+	jslSetValue("uiPostRegistrar","strato-iphone.de");
 	jslSetValue("uiPostStun", "iphone-stun.strato-iphone.de");
 	jslEnable("uiPostStun");
 	SetRegType("other");
@@ -522,26 +444,12 @@
 }
 ` ?>
 <? if neq $var:OEM avme `
-function SaveInode (isdn) {
-	if (isdn) {
-		var rufnr = jslGetValue("uiViewUsername");
-		if (rufnr.length == 0) {alert1(g_mldNoRufnrIsdn, g_LabelUsername); return false;}
-		if (!valIsZahl(rufnr)) {alert1(g_mldRufnrDigit, g_LabelUsername); return false;}
-	} else {
+function SaveInode () {
 		if (!valIsSipname(jslGetValue("uiViewUsername"))) {alert(g_mldNameChar); return false;}
-	}
 	jslSetValue("uiPostRegistrar","voip.inode.at");
 	jslSetValue("uiPostProxy","voip.inode.at");
 	SetRegType("other");
 	jslCopyValue("uiViewRufnr","uiViewUsername");
-	if (isdn) {
-		jslSetValue("uiPostDdiType", "2");
-		jslCopyValue("uiPostTrunk", "uiViewUsername");
-		jslEnable("uiPostTrunk");
-	} else {
-		jslSetValue("uiPostDdiType", "0");
-	}
-	
 	// Erweiterte Einstellungen fest setzen, ohne Rücksichtauf andere Zugänge
 	// Keine Festnetzersatzverbindung
 	for (var i=0; i<10; i++) {
@@ -553,6 +461,7 @@
 	jslSetValue("uiPostLowCodecs", "0");
 	jslEnable("uiPostDynCodec");
 	jslEnable("uiPostLowCodecs");
+	
 	return true;
 }
 ` ?>
@@ -576,44 +485,19 @@
 	return true;
 }
 ` ?>
-<? if neq $var:OEM avme `
-function SaveDbd() {
-	if (!valOKZ(jslGetValue("uiViewDbdOKZ"))) return false;
-	var rufnr = jslGetValue("uiViewDbdRufnummer");
-	if (rufnr.length == 0) {alert1(g_mldNoRufnr, g_LabelRufnr); return false;}
-	if (!valIsZahl(rufnr)) {alert(g_mldUsernameDigit); return false;}
-	jslCopyValue("uiPostUsername", "uiViewUsername");
-	jslCopyValue("uiPostPassword", "uiViewPassword");
-	jslCopyValue("uiPostRegistrar", "uiViewRegistrar");
-	SetRegType("other");
-	jslSetValue("uiPostRufnr", GetOKZDisplay("uiViewDbdOKZ")+rufnr);
-	jslCopyValue("uiPostMsn","uiViewDbdRufnummer");
-	jslSetValue("uiPostUseOKZ", "1");
-	if (g_ShowOKZ) {
-		jslSetValue("uiPostOKZ", GetOKZohneNull("uiViewDbdOKZ"));
-		jslEnable("uiPostOKZ");
-	}
-	return true;
-}		
-` ?>
 function SetRegType (t) {
 	jslSetValue("uiPostType", t);
 <? if neq $var:OEM avme '
 	if (g_expertMode != "1") {
+		jslSetValue("uiPostLKZ", "");
 		jslSetValue("uiPostUseLKZ", "0");
+		jslSetValue("uiPostOKZPrefix", "0");
+		jslSetValue("uiPostLKZPrefix", "");
 		jslSetValue("uiPostKeepOKZPrefix", "1");
 		jslSetValue("uiPostKeepLKZPrefix", "1");
 		jslSetValue("uiPostSuffix", "");
 	}
 ' ?>
-	if (g_expertMode == "1") {
-		if ( t == "other") {
-			jslSetValue( "uiPostAlternatePrefix", "");
-			if ( (jslGetValue("uiViewProvider") == "Sonst") && (jslGetChecked( "uiViewAlternatePrefix_USA") == true)) {
-				jslSetValue( "uiPostAlternatePrefix", "011");
-			}
-		}
-	}
 	switch (t) {
 		case "aol":
 		case "avm":
@@ -644,9 +528,6 @@
 	else if (id == "SuP") On1u1();
 	else if (id == "Freenet") OnFreenet();
 	else if (id == "Inode") OnInode();
-<? if eq $var:Annex A `
-	else if (id == "InodeIsdn") OnInodeIsdn();
-` ?>	
 	else if (id == "AOL") OnAOL();
 	else if (id == "Arcor") OnArcor();
 	else if (id == "Sipgate") OnSipgate();
@@ -656,8 +537,6 @@
 ' ?>
 	else if (id == "Webde") OnWebde();
 	else if (id == "Dus") OnDus();
-	else if (id == "DBD") {OnDbd(); jslSetValue("uiViewRegistrar", "sip.dbd-breitband.de");}
-	else if (id == "DBD-DSL") {OnDbd(); jslSetValue("uiViewRegistrar", "sip-dsl.dbd-breitband.de");}
 	else OnSonst();
 }
 function On1u1() {
@@ -665,7 +544,6 @@
 	g_LabelKennwort = g_txt1u1Kennwort;
 	jslDisplay("1u1Username", true);
 	jslDisplay("ArcorUsername", false);
-	jslDisplay("DbdRufnummer", false);
 	jslDisplay("Username", false);
 	jslDisplay("Rufnummer", false);
 	jslDisplay("Label", false);
@@ -676,8 +554,8 @@
 	jslDisplay("Proxy", false);
 	jslDisplay("Stun", false);
 	jslDisplay("SipUri", false);
-	DisplayOKZ("off");
-	jslDisplay("uiShowAlternatePrefix_USA", false);
+	DisplayOKZ(false);
+	jslDisplay("ArcorUseOKZ", false);
 <? if eq $var:showtcom 1 '
 	jslDisplay("uiTComLinks", false);
 ' ?>
@@ -688,7 +566,6 @@
 	g_LabelKennwort = g_txtAOLKennwort;
 	jslDisplay("1u1Username", false);
 	jslDisplay("ArcorUsername", false);
-	jslDisplay("DbdRufnummer", false);
 	jslDisplay("Username", true);
 	jslDisplay("Rufnummer", true);
 	jslDisplay("Label", true);
@@ -701,8 +578,8 @@
 	jslDisplay("Proxy", false);
 	jslDisplay("Stun", false);
 	jslDisplay("SipUri", false);
-	DisplayOKZ("off");
-	jslDisplay("uiShowAlternatePrefix_USA", false);
+	DisplayOKZ(false);
+	jslDisplay("ArcorUseOKZ", false);
 <? if eq $var:showtcom 1 '
 	jslDisplay("uiTComLinks", false);
 ' ?>
@@ -712,7 +589,6 @@
 	g_LabelKennwort = g_txtArcorKennwort;
 	jslDisplay("1u1Username", false);
 	jslDisplay("ArcorUsername", true);
-	jslDisplay("DbdRufnummer", false);
 	jslDisplay("Username", false);
 	jslDisplay("Rufnummer", false);
 	jslDisplay("Label", false);
@@ -723,8 +599,8 @@
 	jslDisplay("Proxy", false);
 	jslDisplay("Stun", ShowStun());
 	jslDisplay("SipUri", false);
-	DisplayOKZ("arcor");
-	jslDisplay("uiShowAlternatePrefix_USA", false);
+	DisplayOKZ(false);
+	jslDisplay("ArcorUseOKZ", true);
 <? if eq $var:showtcom 1 '
 	jslDisplay("uiTComLinks", false);
 ' ?>
@@ -748,7 +624,6 @@
 	g_LabelKennwort = g_txtFreenetKennwort;
 	jslDisplay("1u1Username", false);
 	jslDisplay("ArcorUsername", false);
-	jslDisplay("DbdRufnummer", false);
 	jslDisplay("Username", true);
 	jslDisplay("Rufnummer", true);
 	jslDisplay("Label", true);
@@ -761,8 +636,8 @@
 	jslDisplay("Proxy", false);
 	jslDisplay("Stun", false);
 	jslDisplay("SipUri", false);
-	DisplayOKZ("on");
-	jslDisplay("uiShowAlternatePrefix_USA", false);
+	DisplayOKZ(true);
+	jslDisplay("ArcorUseOKZ", false);
 <? if eq $var:showtcom 1 '
 	jslDisplay("uiTComLinks", false);
 ' ?>
@@ -773,7 +648,6 @@
 	g_LabelKennwort = g_txtSipgateKennwort;
 	jslDisplay("1u1Username", false);
 	jslDisplay("ArcorUsername", false);
-	jslDisplay("DbdRufnummer", false);
 	jslDisplay("Username", true);
 	jslDisplay("Rufnummer", true);
 	jslDisplay("Label", true);
@@ -786,8 +660,8 @@
 	jslDisplay("Proxy", false);
 	jslDisplay("Stun", ShowStun());
 	jslDisplay("SipUri", false);
-	DisplayOKZ("off");
-	jslDisplay("uiShowAlternatePrefix_USA", false);
+	DisplayOKZ(false);
+	jslDisplay("ArcorUseOKZ", false);
 <? if eq $var:showtcom 1 '
 	jslDisplay("uiTComLinks", false);
 ' ?>
@@ -798,7 +672,6 @@
 	g_LabelKennwort = g_txtStratoKennwort;
 	jslDisplay("1u1Username", false);
 	jslDisplay("ArcorUsername", false);
-	jslDisplay("DbdRufnummer", false);
 	jslDisplay("Username", true);
 	jslDisplay("Rufnummer", true);
 	jslDisplay("Label", true);
@@ -811,8 +684,8 @@
 	jslDisplay("Proxy", false);
 	jslDisplay("Stun", false);
 	jslDisplay("SipUri", false);
-	DisplayOKZ("on");
-	jslDisplay("uiShowAlternatePrefix_USA", false);
+	DisplayOKZ(true);
+	jslDisplay("ArcorUseOKZ", false);
 <? if eq $var:showtcom 1 '
 	jslDisplay("uiTComLinks", false);
 ' ?>
@@ -825,7 +698,6 @@
 	jslSetValue("uiViewRegistrar","tel.t-online.de");
 	jslDisplay("1u1Username", false);
 	jslDisplay("ArcorUsername", false);
-	jslDisplay("DbdRufnummer", false);
 	jslDisplay("Username", true);
 	jslDisplay("Rufnummer", true);
 	jslDisplay("Label", true);
@@ -839,8 +711,8 @@
 	jslDisplay("Proxy", false);
 	jslDisplay("Stun", ShowStun());
 	jslDisplay("SipUri", false);
-	DisplayOKZ("on");
-	jslDisplay("uiShowAlternatePrefix_USA", false);
+	DisplayOKZ(true);
+	jslDisplay("ArcorUseOKZ", false);
 	jslDisplay("uiTComLinks", true);
 }
 ' ?>
@@ -851,7 +723,6 @@
 	jslSetValue("uiViewRegistrar","sip.web.de");
 	jslDisplay("1u1Username", false);
 	jslDisplay("ArcorUsername", false);
-	jslDisplay("DbdRufnummer", false);
 	jslDisplay("Username", true);
 	jslDisplay("Rufnummer", true);
 	jslDisplay("Label", true);
@@ -864,8 +735,8 @@
 	jslDisplay("Proxy", false);
 	jslDisplay("Stun", ShowStun());
 	jslDisplay("SipUri", false);
-	DisplayOKZ("on");
-	jslDisplay("uiShowAlternatePrefix_USA", false);
+	DisplayOKZ(true);
+	jslDisplay("ArcorUseOKZ", false);
 <? if eq $var:showtcom 1 '
 	jslDisplay("uiTComLinks", false);
 ' ?>
@@ -876,7 +747,6 @@
 	g_LabelKennwort = g_txtDusKennwort;
 	jslDisplay("1u1Username", false);
 	jslDisplay("ArcorUsername", false);
-	jslDisplay("DbdRufnummer", false);
 	jslDisplay("Username", true);
 	jslDisplay("Rufnummer", true);
 	jslDisplay("Label", true);
@@ -890,33 +760,8 @@
 	jslDisplay("Proxy", false);
 	jslDisplay("Stun", false);
 	jslDisplay("SipUri", false);
-	DisplayOKZ("on");
-	jslDisplay("uiShowAlternatePrefix_USA", false);
-<? if eq $var:showtcom 1 '
-	jslDisplay("uiTComLinks", false);
-' ?>
-}
-function OnDbd() {
-	g_LabelRufnr = g_txtDbdRufnr;
-	g_LabelUsername = g_txtDbdVoIPName;
-	g_LabelKennwort = g_txtDbdKennwort;
-	jslDisplay("1u1Username", false);
-	jslDisplay("ArcorUsername", false);
-	jslDisplay("DbdRufnummer", true);
-	jslDisplay("Username", true);
-	jslDisplay("Rufnummer", false);
-	jslDisplay("Label", false);
-	SetSpanText("LabelRufnr", g_txtDbdRufnr);
-	SetSpanText("LabelUsername", g_txtDbdVoIPName);
-	SetSpanText("LabelKennwort", g_txtDbdKennwort);
-	SetSpanText("LabelKennwort2", g_txtDbdConfirmation);
-	jslDisplay("uiUserprefix", false);
-	jslDisplay("Registrar", true);
-	jslDisplay("Proxy", false);
-	jslDisplay("Stun", false);
-	jslDisplay("SipUri", false);
-	DisplayOKZ("off");
-	jslDisplay("uiShowAlternatePrefix_USA", false);
+	DisplayOKZ(true);
+	jslDisplay("ArcorUseOKZ", false);
 <? if eq $var:showtcom 1 '
 	jslDisplay("uiTComLinks", false);
 ' ?>
@@ -927,7 +772,6 @@
 	g_LabelKennwort = g_txtInodeKennwort;
 	jslDisplay("1u1Username", false);
 	jslDisplay("ArcorUsername", false);
-	jslDisplay("DbdRufnummer", false);
 	jslDisplay("Username", true);
 	jslDisplay("Rufnummer", false);
 	jslDisplay("Label", false);
@@ -940,46 +784,18 @@
 	jslDisplay("Proxy", false);
 	jslDisplay("Stun", false);
 	jslDisplay("SipUri",false);
-	DisplayOKZ("on");
-	jslDisplay("uiShowAlternatePrefix_USA", false);
-<? if eq $var:showtcom 1 '
-	jslDisplay("uiTComLinks", false);
-' ?>
-}
-<? if eq $var:Annex A `
-function OnInodeIsdn() {
-	g_LabelRufnr = g_txtInodeIsdnRufnr;
-	g_LabelUsername = g_txtInodeIsdnVoIPName;
-	g_LabelKennwort = g_txtInodeIsdnKennwort;
-	jslDisplay("1u1Username", false);
-	jslDisplay("ArcorUsername", false);
-	jslDisplay("DbdRufnummer", false);
-	jslDisplay("Username", true);
-	jslDisplay("Rufnummer", false);
-	jslDisplay("Label", false);
-	SetSpanText("LabelRufnr", g_txtInodeIsdnRufnr);
-	SetSpanText("LabelUsername", g_txtInodeIsdnVoIPName);
-	SetSpanText("LabelKennwort", g_txtInodeIsdnKennwort);
-	SetSpanText("LabelKennwort2", g_txtInodeIsdnConfirmation);
-	jslDisplay("uiUserprefix", false);
-	jslDisplay("Registrar", false);
-	jslDisplay("Proxy", false);
-	jslDisplay("Stun", false);
-	jslDisplay("SipUri",false);
-	DisplayOKZ("on");
-	jslDisplay("uiShowAlternatePrefix_USA", false);
+	DisplayOKZ(true);
+	jslDisplay("ArcorUseOKZ", false);
 <? if eq $var:showtcom 1 '
 	jslDisplay("uiTComLinks", false);
 ' ?>
 }
-` ?>
 function OnSonst() {
 	g_LabelRufnr = g_txtSonstRufnr;
 	g_LabelUsername = g_txtSonstVoIPName;
 	g_LabelKennwort = g_txtSonstKennwort;
 	jslDisplay("1u1Username", false);
 	jslDisplay("ArcorUsername", false);
-	jslDisplay("DbdRufnummer", false);
 	jslDisplay("Username", true);
 	jslDisplay("Rufnummer", true);
 	jslDisplay("Label", true);
@@ -992,25 +808,27 @@
 	jslDisplay("Proxy", g_expertMode == "1");
 	jslDisplay("Stun", ShowStun());
 	jslDisplay("SipUri", g_expertMode == "1");
-	DisplayOKZ("other");
-	jslDisplay("uiShowAlternatePrefix_USA", g_expertMode == "1");
+	DisplayOKZ(true);
+	jslDisplay("ArcorUseOKZ", false);
 <? if eq $var:showtcom 1 '
 	jslDisplay("uiTComLinks", false);
 ' ?>
 }
-// mode: off, on, arcor, other
-function DisplayOKZ (mode) {
-	jslDisplay("ArcorUseOKZ", mode == "arcor");
-<? if eq $var:OEM avme `	
-	jslDisplay("UseOKZ", false);
+function DisplayOKZ(b) {
+<? if eq $var:showLKZ 1 `
+	if (g_expertMode == "1") {
+		jslDisplay("ExpUseOKZ", b);
+	} else {
+		<? if eq $var:OEM avme 'jslDisplay("UseOKZ", false);' 'jslDisplay("UseOKZ", b);' ?>
+	}
 ` `
-	jslDisplay("UseOKZ", (mode == "other" || mode == "on") && g_expertMode == "0");
+	jslDisplay("UseOKZ", b);
 ` ?>	
-	jslDisplay("OKZProvider", (mode == "other" || mode == "on") && g_expertMode == "0");
-	jslDisplay("ExpUseOKZ", (mode == "other" || mode == "on") && g_expertMode == "1");
 }
 // nummer = SIP0 oder SIP1
 function SetNst (nummer) {
+	if (jslGetValue("uiPostNr00") == "") {jslSetValue("uiPostNr00", nummer); jslEnable("uiPostNr00");}
+	if (jslGetValue("uiPostNr10") == "") {jslSetValue("uiPostNr10", nummer); jslEnable("uiPostNr10");}
 	if (jslGetValue("uiPostNTDefault") == "") {jslSetValue("uiPostNTDefault", nummer); jslEnable("uiPostNTDefault");}
 }
 // führende Null bei Ortsvorwahl abschneiden
@@ -1018,11 +836,8 @@
 	var h = document.getElementById(id);
 	if (h == null) return "";
 	var nr = jslDoEliminateBlanks(h.value);
-	return OhneNull(nr);
-}
-function OhneNull (str) {
-	if (str.substr(0,1) != "0") return str;
-	return str.substr(1, str.length-1);
+	if (nr.substr(0,1) != "0") return nr;
+	return nr.substr(1, nr.length-1);
 }
 // Ortsvorwahl mit führender Null anzeigen
 function GetOKZDisplay (id) {
@@ -1043,60 +858,54 @@
 	jslSetEnabled("uiViewArcorOKZ", b);
 	jslSetEnabled("uiViewArcorUsername", b);
 	jslSetEnabled("uiViewArcorUseOKZ", b);
-	jslSetEnabled("uiViewDbdOKZ", b);
-	jslSetEnabled("uiViewDbdRufnummer", b);
 	jslSetEnabled("uiViewRufnr", b);
 	jslSetEnabled("uiViewUsername", b);
 	jslSetEnabled("uiViewPassword", b);
 	jslSetEnabled("uiViewPassword2", b);
 	jslSetEnabled("uiViewRegistrar", b);
-	jslSetEnabled("uiViewUseOKZProvider", b);
+	jslSetEnabled("uiViewUseOKZ", b);
 	jslSetEnabled("uiViewProxy", b);
 	jslSetEnabled("uiViewStun", b);
 	jslSetEnabled("uiViewSipUri", b);
-	jslSetEnabled("uiViewOKZ", b);
-	jslSetEnabled("uiViewExpOKZ", b);
-	jslSetEnabled("uiViewExpUseOKZ", b);
-	jslSetEnabled("uiViewExpKeepOKZPrefix", b);
-	jslSetEnabled("uiViewExpUseLKZ", b);
-	jslSetEnabled("uiViewExpKeepLKZPrefix", b);
+	if (b) {
+<? if neq $var:showLKZ 1 '
+		OnChangeOKZ();
+' ' 
+		jslEnable("uiViewExpUseOKZ");
+		jslEnable("uiViewExpOKZ");
+		jslEnable("uiViewExpOKZPrefix");
+		jslEnable("uiViewExpKeepOKZPrefix");
+		jslEnable("uiViewExpUseLKZ");
+		jslEnable("uiViewExpLKZ");
+		jslEnable("uiViewExpLKZPrefix");
+		jslEnable("uiViewExpKeepLKZPrefix");
 <? if neq $var:OEM avme '
-	jslSetEnabled("uiViewExpSuffix", b);
+		jslEnable("uiViewExpSuffix");
 ' ?>
+' ?>
+	} else {
+		jslDisable("uiViewOKZ");
+<? if eq $var:showLKZ 1 '
+		jslDisable("uiViewExpUseOKZ");
+		jslDisable("uiViewExpOKZ");
+		jslDisable("uiViewExpOKZPrefix");
+		jslDisable("uiViewExpKeepOKZPrefix");
+		jslDisable("uiViewExpUseLKZ");
+		jslDisable("uiViewExpLKZ");
+		jslDisable("uiViewExpLKZPrefix");
+		jslDisable("uiViewExpKeepLKZPrefix");
+<? if neq $var:OEM avme '
+		jslDisable("uiViewExpSuffix");
+' ?>
+' ?>
+	}
+}
+function OnChangeOKZ() {
+	jslSetEnabled("uiViewOKZ", jslGetChecked("uiViewUseOKZ"));
 }
 function ShowStun () {
 	return (g_isDsl == "0") || (g_isAta == "1" && g_AtaMode == "1");
 }
-var g_lkzprestate;
-function OnExpLkz()
-{
-	if (jslGetChecked('uiViewExpUseLKZ'))
-	{
-		jslEnable('uiViewExpKeepLKZPrefix');
-		jslSetChecked('uiViewExpKeepLKZPrefix',g_lkzprestate);
-	}
-	else
-	{
-		g_lkzprestate = jslGetChecked('uiViewExpKeepLKZPrefix');
-		jslSetChecked('uiViewExpKeepLKZPrefix',false);
-		jslDisable('uiViewExpKeepLKZPrefix');
-	}
-}
-var g_okzprestate;
-function OnExpOkz()
-{
-	if (jslGetChecked('uiViewExpUseOKZ'))
-	{
-		jslEnable('uiViewExpKeepOKZPrefix');
-		jslSetChecked('uiViewExpKeepOKZPrefix',g_okzprestate);
-	}
-	else
-	{
-		g_okzprestate = jslGetChecked('uiViewExpKeepOKZPrefix');
-		jslSetChecked('uiViewExpKeepOKZPrefix',false);
-		jslDisable('uiViewExpKeepOKZPrefix');
-	}
-}
 <? if eq $var:showtcom 1 '
 function OnEMailAdresse() {
 	var pp = window.open("http://www.t-online.de/service/redir/ata_emailadresse.htm", "_blank");
diff -burN usr/www/all/html/de/fon/siplist.html usr/www/all/html/de/fon/siplist.html
--- usr/www/all/html/de/fon/siplist.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/siplist.html	2006-12-13 17:03:02.000000000 +0100
@@ -5,11 +5,8 @@
 	</div></div></div></div></div></div>
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 		<ul class="tabs">
-			<li class="tabs_on"><a href="javascript:uiDoCancel()"><? echo $var:Text23 ?></a></li>
-			<li><a href="javascript:uiDoOptionen()"><? echo $var:Text19 ?></a></li>
-<? if eq <? query box:settings/expertmode/activated ?> 1 `
-			<li><a href="javascript:uiDoQuality()"><? echo `$var:Text27` ?></a></li>
-` ?>
+ 		<li class="tabs_on"><a href="javascript:uiDoCancel()">Internetrufnummern</a></li>
+ 		<li><a href="javascript:uiDoOptionen()">Erweiterte Einstellungen</a></li>
 		</ul>
 		<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 			<p class="mb10"><? echo $var:Text2 ?><b><? echo $var:Text14 ?></b><? echo $var:Text15 ?></p>
@@ -31,16 +28,12 @@
 					<td class="c2">$2</td>
 					<td class="c3"><script type="text/javascript">document.write(ProviderDisplay("$3"));</script></td>
 					<td class="c6"><script type="text/javascript">document.write(AuswahlDisplay("$4"));</script></td>
-					<td class="Iconbutton">
-						<button type="button" id="uiViewEdit$1" onClick="uiDoEdit('$1')" value="$var:txtIconBtnEdit" title="$var:txtIconBtnEdit" style="width: 30px">
-							<img src="../html/$var:lang/images/bearbeiten.gif" align="bottom" width="16" height="16" hspace="4">
-						</button>
-					</td>
-					<td class="Iconbutton">
-						<button type="button" id="uiViewDelete$1" onClick="uiDoDelete('$1')" value="$var:txtIconBtnDelete" title="$var:txtIconBtnDelete" style="width: 30px">
-							<img src="../html/$var:lang/images/loeschen.gif" align="bottom" width="16" height="16" hspace="4">
-						</button>
-					</td>
+				<td class="Iconbutton"><button type="button" id="uiViewEdit$1" onClick="uiDoEdit('$1')" value="$var:Text11" title="$var:Text11" style="width: 30px">
+					<img src="../html/$var:lang/images/bearbeiten.gif" align=bottom width=16 height=16 hspace=4>
+				</button></td>
+				<td class="Iconbutton"><button type="button" id="uiViewDelete$1" onClick="uiDoDelete('$1')" value="$var:Text12" title="$var:Text12" style="width: 30px">
+					<img src="../html/$var:lang/images/loeschen.gif" align=bottom width=16 height=16 hspace=4>
+				</button></td>
 				</tr>
 ` ?>
 				<tr id="uiViewNoRow" style="display:none"><td colspan="6" class="ac"><? echo $var:Text18 ?></td></tr>
diff -burN usr/www/all/html/de/fon/siplist.js usr/www/all/html/de/fon/siplist.js
--- usr/www/all/html/de/fon/siplist.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/siplist.js	2006-12-13 17:03:02.000000000 +0100
@@ -5,7 +5,7 @@
 <!--		../fon/siplist.js		-->
 <style type="text/css">
 <!--
-#content {width: 580px; margin: auto;}
+#content {width: 560px; margin: auto;}
 #tSips {width: 100%;}
 #tSips td {padding: 2px 3px;}
 #tSips th {padding: 2px 3px;}
@@ -40,7 +40,7 @@
 		empty_found = true;
 	}
 ' ?>
-	var n = Number("<? query sip:settings/sip/count ?>");
+	var n = Number("<? multiquerycount sip:settings/sip/list ?>");
 	if ((n >= 10) && (!empty_found)) jslDisable("uiViewNewButton");
 	if (!some_found) jslDisplay("uiViewNoRow", true);
 	jslZebrastreifen("tSips");
@@ -55,7 +55,6 @@
 		case "sipgate.de": 	return "Sipgate";
 		case "sip.web.de": 	return "WEB.DE";
 		case "1und1.de": 		return "1&amp;1 Internet";
-		case "sip.1und1.de": 	return "1&amp;1 Internet";
 		case "gmx.de": 		return "GMX";
 		case "schlund.de": 	return "Schlund + Partner";
 		case "reg.aolphone.aol.de":	return "AOL";
@@ -67,9 +66,6 @@
 		case "tel.t-online.de":	return "T-Online";
 ' ?>
 	}
-	if (registrar.indexOf("dbd-") >= 0) {
-		return registrar.indexOf("dsl") >= 0 ? "DBD (DSL)" : "DBD";
-	}
 	return registrar;
 }
 function AuswahlDisplay (nr) {
diff -burN usr/www/all/html/de/fon/sipoptionen.frm usr/www/all/html/de/fon/sipoptionen.frm
--- usr/www/all/html/de/fon/sipoptionen.frm	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/sipoptionen.frm	2006-12-13 17:03:02.000000000 +0100
@@ -5,7 +5,6 @@
 <input type="hidden" name="sipextra:settings/sip/sip_prio" value="<? query sipextra:settings/sip/sip_prio ?>" id="uiPostSipPrio">
 <input type="hidden" name="sipextra:settings/sip/rtp_prio" value="<? query sipextra:settings/sip/rtp_prio ?>" id="uiPostRtpPrio">
 <input type="hidden" name="sipextra:settings/sip/blacklist" value="<? query sipextra:settings/sip/blacklist ?>" id="uiPostBlacklist">
-<input type="hidden" name="sipextra:settings/sip/sip_srcport" value="<? query sipextra:settings/sip/sip_srcport ?>" id="uiPostSourcePort">
 <? multiquery telcfg:settings/SIP/list '
 <input type="hidden" name="telcfg:settings/$1/Fallback" value="<? query telcfg:settings/$1/Fallback ?>" id="uiPostFallback$0" disabled>
 ' ?>
@@ -26,7 +25,3 @@
 <input type="hidden" name="connection_voip:settings/dns_first" value="<? query connection_voip:settings/dns_first ?>" id="uiPostDns0" disabled />
 <input type="hidden" name="connection_voip:settings/dns_second" value="<? query connection_voip:settings/dns_second ?>" id="uiPostDns1" disabled />
 <input type="hidden" name="sar:settings/autodetect" value="<? query sar:settings/autodetect ?>" id="uiPostSarAuto" disabled />
-<input type="hidden" name="telcfg:settings/Location/OKZ" value="<? query telcfg:settings/Location/OKZ ?>" id="uiPostOKZ">
-<input type="hidden" name="telcfg:settings/Location/LKZ" value="<? query telcfg:settings/Location/LKZ ?>" id="uiPostLKZ">
-<input type="hidden" name="telcfg:settings/Location/OKZPrefix" value="<? query telcfg:settings/Location/OKZPrefix ?>" id="uiPostOKZPrefix">
-<input type="hidden" name="telcfg:settings/Location/LKZPrefix" value="<? query telcfg:settings/Location/LKZPrefix ?>" id="uiPostLKZPrefix">
diff -burN usr/www/all/html/de/fon/sipoptionen.html usr/www/all/html/de/fon/sipoptionen.html
--- usr/www/all/html/de/fon/sipoptionen.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/sipoptionen.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,15 +1,12 @@
 <? include ../html/$var:lang/fon/sipoptionen.inc ?>
 <div id="content">
  	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo $var:Text60 ?>
+		Internettelefonie
 	</div></div></div></div></div></div>
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
  	<ul class="tabs">
- 		<li><a href="javascript:uiDoSiplist()"><? echo $var:Text59 ?></a></li>
- 		<li class="tabs_on"><a href="javascript:uiDoCancel()"><? echo $var:Text1 ?></a></li>
-<? if eq <? query box:settings/expertmode/activated ?> 1 `
- 		<li><a href="javascript:uiDoQuality()"><? echo `$var:Text61` ?></a></li>
-` ?>
+ 		<li><a href="javascript:uiDoSiplist()">Internetrufnummern</a></li>
+ 		<li class="tabs_on"><a href="javascript:uiDoCancel()">Erweiterte Einstellungen</a></li>
  	</ul>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<? echo $var:Text43 ?>
@@ -32,27 +29,6 @@
 			<option value="30"><? echo $var:Text58 ?></option>
 		</select></p>
 	</div></div></div></div></div></div>
-	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p class="mb10"><? echo $var:Text64 ?></p>
-		<div class="ml25">
-			<select size="1" id="uiViewLand" class="Eingabefeld mb10" onchange="OnLand(value)">
-				<option value="49"><? echo $var:Text67 ?></option>
-				<option value="43"><? echo $var:Text68 ?></option>
-				<option value="41"><? echo $var:Text69 ?></option>
-				<option value=""><? echo $var:Text70 ?></option>
-			</select>
-			<table>
-				<tr>
-					<td><label for="uiViewLKZ"><? echo $var:Text65 ?></label></td>
-					<td><input type="text" size="3" maxlength="32" class="Eingabefeld" id="uiViewLKZPrefix">&nbsp;<input type="text" size="4" maxlength="32" class="Eingabefeld" id="uiViewLKZ"></td>
-				</tr>
-				<tr>
-					<td><label for="uiViewOKZ"><? echo $var:Text66 ?></label></td>
-					<td><input type="text" size="3" maxlength="32" class="Eingabefeld" id="uiViewOKZPrefix">&nbsp;<input type="text" size="4" maxlength="32" class="Eingabefeld" id="uiViewOKZ"></td>
-				</tr>
-			</table>
-		</div>
-	</div></div></div></div></div></div>
 	<div id="uiExpert" style="display:none">
 		<div class="backdialog" id="uiEnum" style="display:none"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 			<p class="pCheck25"><input type="checkbox" id="uiViewEnum">&nbsp;<label for="uiViewEnum"><? echo $var:Text4 ?></label></p>
@@ -68,7 +44,7 @@
 			<p class="pCheck25"><input type="radio" name="Kompress" onclick="OnKompress(0)" id="uiViewNoCodec">&nbsp;<label for="uiViewNoCodec"><? echo $var:Text47 ?></label><br><? echo $var:Text50 ?></p>
 			<p class="pCheck25"><input type="radio" name="Kompress" onclick="OnKompress(2)" id="uiViewDynLowCodec">&nbsp;<label for="uiViewDynLowCodec"><? echo $var:Text48 ?></label><br><? echo $var:Text51 ?></p>
 		</div></div></div></div></div></div>
-		<div class="backdialog" id="uiTos" style="display:none"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 			<p class="mb10"><? echo $var:Text12 ?></p>
 			<p class="mb10"><? echo $var:Text13 ?></p>
 			<table class="ml25">
@@ -111,11 +87,11 @@
 			<table class="ml50 mb10">
 				<tr>
 					<td><label for="uiViewVPI"><? echo $var:Text25 ?></label></td>
-					<td><input type="text" size="5" maxlength="3" class="Eingabefeld" id="uiViewVPI"></td>
+					<td><input type="text" size="3" maxlength="4" class="Eingabefeld" id="uiViewVPI"></td>
 				</tr>
 				<tr>
 					<td><label for="uiViewVCI"><? echo $var:Text26 ?></label></td>
-					<td><input type="text" size="5" maxlength="5" class="Eingabefeld" id="uiViewVCI"></td>
+					<td><input type="text" size="3" maxlength="4" class="Eingabefeld" id="uiViewVCI"></td>
 				</tr>
 			</table>
 			<table class="ml50" id="uiViewPppEncaps">
diff -burN usr/www/all/html/de/fon/sipoptionen.inc usr/www/all/html/de/fon/sipoptionen.inc
--- usr/www/all/html/de/fon/sipoptionen.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/sipoptionen.inc	2006-12-13 17:03:02.000000000 +0100
@@ -53,18 +53,3 @@
 <? setvariable var:Text56 '2 Min.' ?>
 <? setvariable var:Text57 '1 Min.' ?>
 <? setvariable var:Text58 '30 Sek.' ?>
-<? setvariable var:Text59 'Internetrufnummern' ?>
-<? setvariable var:Text60 'Internettelefonie' ?>
-<? setvariable var:Text61 'Sprachübertragung' ?>
-<? setvariable var:Text62 'Geben Sie die Ortsvorwahl Ihres Standortes an.' ?>
-<? setvariable var:Text63 'Ortsvorwahl' ?>
-<? setvariable var:Text64 'Standortangaben' ?>
-<? setvariable var:Text65 'Landesvorwahl' ?>
-<? setvariable var:Text66 'Ortsvorwahl' ?>
-<? setvariable var:Text67 'Deutschland' ?>
-<? setvariable var:Text68 'Österrreich' ?>
-<? setvariable var:Text69 'Schweiz' ?>
-<? setvariable var:Text70 'Anderes Land' ?>
-<? setvariable var:Text71 "Konfigurieren eines alternativen 'Quell-Port' für Internettelefonie" ?>
-<? setvariable var:Text72 "Arbeiten mehr als eine FRITZ!Box gleichzeitig hinter einem bestimmten Router, ist es notwendig einen alternativen 'Quell-Port' für Internettelefonie an jeder dieser FRITZ!Boxen zu konfigurieren." ?>
-<? setvariable var:Text73 "Tragen Sie einen alternativen 'Quell-Port' für Internettelefonie ein: " ?>
diff -burN usr/www/all/html/de/fon/sipoptionen.js usr/www/all/html/de/fon/sipoptionen.js
--- usr/www/all/html/de/fon/sipoptionen.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/sipoptionen.js	2006-12-13 17:03:02.000000000 +0100
@@ -1,7 +1,7 @@
 <!--		../fon/sipoptionen.js		-->
 <style type="text/css">
 <!--
-#content {width: 580px; margin: auto;}
+#content {width: 560px; margin: auto;}
 .pText25 {margin-left: 25px;}
 .pCheck25 {text-indent: -25px; margin-left: 25px; margin-bottom: 5px;}
 .pRadio50 {text-indent: -25px; margin-left: 50px;}
@@ -19,23 +19,20 @@
 var g_expertMode = "<? query box:settings/expertmode/activated ?>";
 var g_usePstn = "<? echo $var:usePSTN ?>";
 var g_mldVad		= "Durch die Aktivierung der Sprechpausen-Erkennung kann auf der Gegenseite die Sprachqualität beeinträchtigt werden.";
-var g_mldSipPrio	= "Geben Sie im Feld SIP-Wert eine Zahl zwischen 0 und 63 ein.";
-var g_mldRtpPrio	= "Geben Sie im Feld RTP-Wert eine Zahl zwischen 0 und 63 ein.";
+var g_mldSipPrio	= "Geben Sie im Feld SIP-Wert eine Zahl zwischen 0 und 255 ein.";
+var g_mldRtpPrio	= "Geben Sie im Feld RTP-Wert eine Zahl zwischen 0 und 255 ein.";
 var g_mldUserLeer			= "Der Benutzername darf nicht leer sein.";
 var g_mldKennwortDiff		= "Das Passwort/Kennwort stimmt nicht mit der Bestätigung überein.";
 var g_VPIMustNumber		= "VPI: Ungültige Eingabe, es sind nur Ziffern erlaubt.";
 var g_VCIMustNumber		= "VCI: Ungültige Eingabe, es sind nur Ziffern erlaubt.";
 var g_VPIOutOfRange		= "VPI: Ungültige Eingabe, es sind Eingaben zwischen 0 und 255 erlaubt.";
-var g_VCIOutOfRange		= "VCI: Ungültige Eingabe, es sind Eingaben zwischen 32 und 65535 erlaubt.";
+var g_VCIOutOfRange		= "VCI: Ungültige Eingabe, es sind Eingaben zwischen 0 und 255 erlaubt.";
 var g_mldIpaddrFormatPre	= "Fehler im Feld ";
 var g_mldIpaddrFormatPost	= ": die Eingabe ist keine gültige IP-Adresse.";
 var g_mldNetmaskPost		= ": die eingegebene Subnetzmaske ist ungültig.";
 var g_mldIpaddrTheNet		= ": dieser Wert stellt das Subnetz an sich dar und kann nicht verwendet werden.";
 var g_mldIpaddrBroadcast		= ": dieser Wert stellt die Broadcast-Adresse in Ihrem Subnetz dar und kann nicht verwendet werden.";
 var g_mldIpaddrDiffNet		= ": diese Adresse befindet sich in einem anderen Subnetz, als das durch die IP-Adresse und Netzmaske definierte.";
-var g_mldOkzDigit = "Die Ortsvorwahl darf nur aus Ziffern bestehen.";
-var g_mldOkz0 = "Geben Sie bei der Ortsvorwahl einen gültigen Wert ein.";
-var g_mldLkzDigit = "Die Landesvorwahl darf nur aus Ziffern bestehen.";
 var g_txtIpAdr		= "IP-Adresse";
 var g_txtNetmask	= "Subnetzmaske";
 var g_txtGateway	= "Standard-Gateway";
@@ -66,23 +63,11 @@
 		jslSetSelection("uiViewSippingTimer", jslGetValue("uiPostSipPingTimersip0"));
 		OnSipping();
 	}
-	var lkz = jslGetValue("uiPostLKZ");
-	switch (lkz) {
-		case "49":
-		case "43":
-		case "41": jslSetSelection("uiViewLand", lkz); break;
-		default: jslSetSelection("uiViewLand", ""); break;
-	}
-	jslCopyValue("uiViewLKZPrefix", "uiPostLKZPrefix");
-	jslCopyValue("uiViewLKZ", "uiPostLKZ");
-	jslCopyValue("uiViewOKZPrefix", "uiPostOKZPrefix");
-	jslCopyValue("uiViewOKZ", "uiPostOKZ");
 	if (g_expertMode == "1") {
 		jslDisplay("uiExpert", true);
 		jslSetChecked("uiViewVad", jslGetValue("uiPostVad") == "1");
 		jslCopyValue("uiViewSipPrio", "uiPostSipPrio");
 		jslCopyValue("uiViewRtpPrio", "uiPostRtpPrio");
-		if (g_Oem != "freenet" || g_usePstn != "0") jslDisplay("uiTos", true);
 		var kompress = 0;
 		if (jslGetValue("uiPostDynCodec") == "1") {
 			kompress = jslGetValue("uiPostLowCodecs")=="1" ? 2 : 1;
@@ -119,6 +104,7 @@
 			jslCopyValue("uiViewGateway", "uiPostGateway");
 			jslCopyValue("uiViewDns0", "uiPostDns0");
 			jslCopyValue("uiViewDns1", "uiPostDns1");
+			
 			OnClickUseVcc();
 			ShowParams(ppp);
 			uiDoUseDhcp();
@@ -131,12 +117,6 @@
 	}
 }
 function uiDoSave() {
-	if (!valIsZahl(jslGetValue("uiViewLKZ")) || !valIsZahl(jslGetValue("uiViewLKZPrefix"))) {alert(g_mldLkzDigit); return;}
-	if (!valIsZahl(jslGetValue("uiViewOKZ")) || !valIsZahl(jslGetValue("uiViewOKZPrefix"))) {alert(g_mldOkzDigit); return;}
-	jslCopyValue("uiPostOKZ", "uiViewOKZ");
-	jslCopyValue("uiPostOKZPrefix", "uiViewOKZPrefix");
-	jslCopyValue("uiPostLKZ", "uiViewLKZ");
-	jslCopyValue("uiPostLKZPrefix", "uiViewLKZPrefix");
 	if (g_usePstn == "1") {
 		var b = jslGetChecked("uiViewFallback") ? "1":"0";
 		for (var i=0; i<10; i++) {
@@ -156,13 +136,15 @@
 	if (g_expertMode == "1") {
 		var n = jslGetValue("uiViewSipPrio");
 		if (!valIsZahlVorhanden(n)) {alert(g_mldSipPrio); return;}
-		if (Number(n)<0 || Number(n)>63) {alert(g_mldSipPrio); return;}
+		if (Number(n)<0 || Number(n)>255) {alert(g_mldSipPrio); return;}
 		n = jslGetValue("uiViewRtpPrio");
 		if (!valIsZahlVorhanden(n)) {alert(g_mldRtpPrio); return;}
-		if (Number(n)<0 || Number(n)>63) {alert(g_mldRtpPrio); return;}
+		if (Number(n)<0 || Number(n)>255) {alert(g_mldRtpPrio); return;}
+		
 		jslSetValue("uiPostVad", jslGetChecked("uiViewVad") ? "1" : "0");
 		jslCopyValue("uiPostSipPrio", "uiViewSipPrio");
 		jslCopyValue("uiPostRtpPrio", "uiViewRtpPrio");
+	
 		jslSetValue("uiPostDynCodec", jslGetChecked("uiViewNoCodec") ? "0" : "1");
 		jslSetValue("uiPostLowCodecs", jslGetChecked("uiViewDynLowCodec") ? "1" : "0");
 		jslEnable("uiPostDynCodec");
@@ -207,6 +189,7 @@
 						jslSetValue("uiPostEncaps", "dslencap_ether");
 						jslEnable("uiPostDhcp");
 						jslEnable("uiPostEncaps");
+		
 					} else if (jslGetChecked("uiViewIpEncaps2")) {
 						if (!ValidateIpForm("uiView")) return;
 						jslSetValue("uiPostEncaps", "dslencap_ipnlpid");
@@ -217,6 +200,7 @@
 						jslEnable("uiPostGateway");
 						jslEnable("uiPostDns0");
 						jslEnable("uiPostDns1");
+	
 					} else if (jslGetChecked("uiViewIpEncaps3")) {
 						if (!ValidateIpForm("uiView")) return false;
 						jslSetValue("uiPostEncaps", "dslencap_ipsnap");
@@ -227,6 +211,7 @@
 						jslEnable("uiPostGateway");
 						jslEnable("uiPostDns0");
 						jslEnable("uiPostDns1");
+	
 					} else if (jslGetChecked("uiViewIpEncaps4")) {
 						if (!ValidateIpForm("uiView")) return false;
 						jslSetValue("uiPostEncaps", "dslencap_ipraw");
@@ -254,7 +239,7 @@
 	if (!valIsZahlVorhanden(vpi)) {alert(g_VPIMustNumber); return false;}
 	if ((vpi < 0) || (vpi > 255)) {alert(g_VPIOutOfRange); return false;}
 	if (!valIsZahlVorhanden(vci)) {alert(g_VCIMustNumber); return false;}
-	if ((vci < 32) || (vci > 65535)) {alert(g_VCIOutOfRange); return false;}
+	if ((vci < 0) || (vci > 255)) {alert(g_VCIOutOfRange); return false;}
 	jslSetValue("uiPostVpi", vpi);
 	jslSetValue("uiPostVci", vci);
 	return true;
@@ -392,12 +377,15 @@
 }
 function pppDoValidateIpaddrFormat(addr) {
 	var pattern = /^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/;
+	
 	if (addr.match(pattern) == null) return false;
+	
 	pattern.exec(addr);
 	if (RegExp.$1>255) return false;
 	if (RegExp.$2>255) return false;
 	if (RegExp.$3>255) return false;
 	if (RegExp.$4>255) return false;
+	
 	return true;
 }
 function DecToBin(num) {
@@ -411,15 +399,18 @@
 function IpToBitstring(mask) {
 	var pattern = /^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/;
 	var str = '';
+	
 	pattern.exec(mask);
 	str+=DecToBin(RegExp.$1);
 	str+=DecToBin(RegExp.$2);
 	str+=DecToBin(RegExp.$3);
 	str+=DecToBin(RegExp.$4);
+	
 	return str;
 }
 function pppDoValidateNetmask(mask) {
 	var str = IpToBitstring(mask);
+	
 	if (str.match(/^1+0+0$/) == null) return false;
 	return true;
 }
@@ -441,38 +432,4 @@
 function isAtamode () {
 	return (g_isDsl == "0") || (g_isAta == "1" && g_AtaMode == "1");
 }
-function uiDoQuality() {
-	jslGoTo("fon", "quality");
-}
-// Ortsvorwahl mit führender Null anzeigen
-function GetOKZDisplay (id) {
-	var h = document.getElementById(id);
-	if (h == null) return "";
-	var nr = h.value;
-	if (nr.length == 0) return nr;
-	if (nr.substr(0,1) == "0") return nr;
-	return "0"+nr;
-}
-// führende Null bei Ortsvorwahl abschneiden
-function GetOKZohneNull (id) {
-	var h = document.getElementById(id);
-	if (h == null) return "";
-	var nr = jslDoEliminateBlanks(h.value);
-	if (nr.substr(0,1) != "0") return nr;
-	return nr.substr(1, nr.length-1);
-}
-function valOKZ (okz) {
-	var nr = jslDoEliminateBlanks(okz);
-	if (nr.length == 0) {alert(g_mldOkz0); return false;}
-	if (!valIsZahlVorhanden(nr)) {alert(g_mldOkzDigit); return false;}
-	if (nr == "0") {alert(g_mldOkz0); return false;}
-	return true;
-}
-function OnLand (n) {
-	switch (n) {
-		case "49": jslSetValue("uiViewLKZPrefix", "00"); jslSetValue("uiViewLKZ", "49"); jslSetValue("uiViewOKZPrefix", "0"); break;
-		case "43": jslSetValue("uiViewLKZPrefix", "00"); jslSetValue("uiViewLKZ", "43"); jslSetValue("uiViewOKZPrefix", "0"); break;
-		case "41": jslSetValue("uiViewLKZPrefix", "00"); jslSetValue("uiViewLKZ", "41"); jslSetValue("uiViewOKZPrefix", "0"); break;
-	}
-}
 </script>
diff -burN usr/www/all/html/de/fon/sperre1.html usr/www/all/html/de/fon/sperre1.html
--- usr/www/all/html/de/fon/sperre1.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/sperre1.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,39 +1,27 @@
 <? include ../html/$var:lang/fon/sperre1.inc ?>
 <div id="content">
 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo $var:Text1 ?>
+		Rufsperre
 	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<table id="t1">
 			<tr id="uiArtAll" style="display:none">
-				<td style="vertical-align:top"><? echo $var:Text2 ?></td>
-				<td>
-					<p><input type=radio name="Art" onclick="OnArt(0)" id="uiViewAusgehend">&nbsp<label for="uiViewAusgehend"><? echo $var:Text3 ?></label></p>
-					<p><input type=radio name="Art" onclick="OnArt(1)" id="uiViewEinkommend">&nbsp<label for="uiViewEinkommend"><? echo $var:Text4 ?></label></p>
-				</td>
+				<td><label for="uiMode">Rufart</label></td>
+				<td><select size="1" id="uiViewArt" class="Eingabefeld">
+					<option value="out">ausgehende Rufe</option>
+					<option value="in">einkommende Rufe</option>
+				</select></td>
 			</tr>
 			<tr id="uiArtOut" style="display:none">
-				<td><? echo $var:Text2 ?></td>
-				<td><? echo $var:Text3 ?></td>
+				<td>Rufart</td>
+				<td>ausgehende Rufe</td>
 			</tr>
 			<tr id="uiArtIn" style="display:none">
-				<td><? echo $var:Text2 ?></td>
-				<td><? echo $var:Text4 ?></td>
-			</tr>
-			<tr id="uiBereich" style="display:none">
-				<td><? echo $var:Text6 ?></td>
-				<td><select size="1" id="uiViewBereich" class="Eingabefeld" onchange="OnChangeBereich(value)">
-					<option value=""><? echo $var:Text5 ?></option>
-					<option value="mobile"><? echo $var:Text7 ?></option>
-					<option value="ortsnetz"><? echo $var:Text8 ?></option>
-					<option value="national"><? echo $var:Text9 ?></option>
-					<option value="international"><? echo $var:Text10 ?></option>
-					<option value="sonderrufnrn"><? echo $var:Text11 ?></option>
-					<option value="auskunft"><? echo $var:Text12 ?></option>
-				</select></td>
+				<td>Rufart</td>
+				<td>einkommende Rufe</td>
 			</tr>
 			<tr>
-				<td><? echo $var:Text5 ?></td>
+				<td>Rufnummer / Bereich</td>
 				<td><input type="text" size="25" id="uiViewNummer" maxlength="20" class="Eingabefeld"></td>
 			</tr>
 		</table>
diff -burN usr/www/all/html/de/fon/sperre1.js usr/www/all/html/de/fon/sperre1.js
--- usr/www/all/html/de/fon/sperre1.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/sperre1.js	2006-12-13 17:03:02.000000000 +0100
@@ -1,5 +1,4 @@
 <!--		../fon/sperre1.js		-->
-<? include ../html/$var:lang/fon/sperre1.inc ?>
 <? setvariable var:lcrext `1` ?>
 <? if eq <? query telcfg:settings/Routing/Version ?> 3 `<? setvariable var:lcrext `0` ?>` ?>
 <? if eq <? query telcfg:settings/Routing/Version ?> 0 `<? setvariable var:lcrext `0` ?>` ?>
@@ -14,15 +13,7 @@
 </style>
 <script type="text/javascript">
 <? include ../html/$var:lang/js/jsl.js ?>
-<? include ../html/$var:lang/js/val.js ?>
-var g_mldLCR = "<? print $var:jstr0 ?>";
-var g_txtAlert_1 = "<? print $var:jstr1 ?>";
-var g_txtAlert_2 = "<? print $var:jstr2 ?>";
-var g_txtAlert_3 = "<? print $var:jstr3 ?>";
-var g_txtAlert_4 = "<? print $var:jstr4 ?>";
-var g_mldNoNummer = "<? print $var:jstr5 ?>";
-var g_mldNonDigits = "<? print $var:jstr6 ?>";
-var g_mldNoNotrufsperre = "<? print $var:jstr7 ?>";
+var g_mldLCR = "Bei Verwendung einer Wahltabelle können keine Sperren für ausgehenden Rufe eingerichtet werden.";
 function uiDoOnLoad() {
 	var mode = jslGetValue("uiPostMode");
 	jslDisplay("uiArtAll", mode!="In" && mode!="Out");
@@ -30,16 +21,12 @@
 	jslDisplay("uiArtOut", mode=="Out");
 	switch (mode) {
 		case "In":
-			OnArt(1);
 			jslCopyValue("uiViewNummer", "uiPostInRufnr");
 			break;
 		case "Out":
-			OnArt(0);
 			jslCopyValue("uiViewNummer", "uiPostOutRufnr");
 			break;
 		default:
-			jslSetChecked("uiViewAusgehend", true);
-			OnArt(0);
 			jslSetValue("uiViewNummer", "");
 			break;
 	}
@@ -48,18 +35,16 @@
 	var mode = jslGetValue("uiPostMode");
 	switch (mode) {
 		case "In": {
-			var nummer = jslGetValue("uiViewNummer");
-			if (!isZahlRaute(nummer)) {alert(g_mldNonDigits); return;}
-			var x = IstActionVorhanden(nummer);
+			var x = IstActionVorhanden(jslGetValue("uiViewNummer"));
 			if (x != "") {
 				if (jslGetValue("uiPostInAction"+x) == "1") {
-					if (x != jslGetValue("uiPostRulId")) {alert(g_txtAlert_1); return;}
+					if (x != jslGetValue("uiPostRulId")) {alert("Eine Sperre für diese einkommende Rufnummer ist bereits vorhanden."); return;}
 					jslCopyValue("uiPostInRufnr", "uiViewNummer");
 					jslEnable("uiPostInRufnr");
 					jslEnable("uiPostInAction");
 					jslEnable("uiPostInActive");
 				} else {
-					if (!confirm(g_txtAlert_2)) return;
+					if (!confirm("Für diese einkommende Rufnummer ist bereits eine Rufumleitung eingerichtet. Diese Rufumleitung wird automatisch gelöscht. Fortfahren?")) return;
 					jslCopyValue("uiPostInRufnr"+x, "uiViewNummer");
 					jslSetValue("uiPostInAction"+x, "1");
 					jslSetValue("uiPostInActive"+x, "1");
@@ -79,24 +64,17 @@
 			break;
 		}
 		case "Out": {
-			var nummer = jslGetValue("uiViewBereich");
-			if (nummer=="") {
-				nummer = jslGetValue("uiViewNummer");
-				if (nummer=="") {alert(g_mldNoNummer); return;}
-				if (!valIsZahl(nummer)) {alert(g_mldNonDigits); return;}
-				if (IstNotruf(nummer)) {alert(g_mldNoNotrufsperre); return;}
-			}
-			var x = IstRouteVorhanden(nummer);
+			var x = IstRouteVorhanden(jslGetValue("uiViewNummer"));
 			if (x != "") {
 				if (jslGetValue("uiPostOutRoute"+x) == "s") {
-					if (x != jslGetValue("uiPostRulId")) {alert(g_txtAlert_3); return;}
-					jslSetValue("uiPostOutRufnr", nummer);
+					if (x != jslGetValue("uiPostRulId")) {alert("Eine Sperre für diese ausgehende Rufnummer ist bereits vorhanden."); return;}
+					jslCopyValue("uiPostOutRufnr", "uiViewNummer");
 					jslEnable("uiPostOutRufnr");
 					jslEnable("uiPostOutRoute");
 					jslEnable("uiPostOutProvider");
 				} else {
-					if (!confirm(g_txtAlert_4)) return;
-					jslSetValue("uiPostOutRufnr"+x, nummer);
+					if (!confirm("Für diese ausgehende Rufnummer ist bereits eine Wahlregel eingerichtet. Diese Wahlregel wird automatisch gelöscht. Fortfahren?")) return;
+					jslCopyValue("uiPostOutRufnr"+x, "uiViewNummer");
 					jslSetValue("uiPostOutRoute"+x, "s");
 					jslSetValue("uiPostOutProvider"+x, "0");
 					jslEnable("uiPostOutRufnr"+x);
@@ -107,7 +85,7 @@
 					jslSetEnabled("uiPostDelete", true);
 				}
 			} else {
-				jslSetValue("uiPostOutRufnr", nummer);
+				jslCopyValue("uiPostOutRufnr", "uiViewNummer");
 				jslEnable("uiPostOutRufnr");
 				jslEnable("uiPostOutRoute");
 				jslEnable("uiPostOutProvider");
@@ -115,38 +93,29 @@
 			break;
 		}
 		default:
-			if (jslGetChecked("uiViewAusgehend")) {
+			if (jslGetValue("uiViewArt") == "out") {
 				if ("<? echo $var:lcrext ?>" == "1") {alert(g_mldLCR); return;}
-				var nummer = jslGetValue("uiViewBereich");
-				if (nummer=="") {
-					nummer = jslGetValue("uiViewNummer");
-					if (nummer=="") {alert(g_mldNoNummer); return;}
-					if (!valIsZahl(nummer)) {alert(g_mldNonDigits); return;}
-					if (IstNotruf(nummer)) {alert(g_mldNoNotrufsperre); return;}
-				}
-				var x = IstRouteVorhanden(nummer);
+				var x = IstRouteVorhanden(jslGetValue("uiViewNummer"));
 				if (x != "") {
-					if (jslGetValue("uiPostOutRoute"+x) == "s") {alert(g_txtAlert_3); return;}
-					if (!confirm(g_txtAlert_4)) return;
-					jslSetValue("uiPostOutRufnr"+x, nummer);
+					if (jslGetValue("uiPostOutRoute"+x) == "s") {alert("Eine Sperre für diese ausgehende Rufnummer ist bereits vorhanden."); return;}
+					if (!confirm("Für diese ausgehende Rufnummer ist bereits eine Wahlregel eingerichtet. Diese Wahlregel wird automatisch gelöscht. Fortfahren?")) return;
+					jslCopyValue("uiPostOutRufnr"+x, "uiViewNummer");
 					jslSetValue("uiPostOutRoute"+x, "s");
 					jslSetValue("uiPostOutProvider"+x, "0");
 					jslEnable("uiPostOutRufnr"+x);
 					jslEnable("uiPostOutRoute"+x);
 					jslEnable("uiPostOutProvider"+x);
 				} else {
-					jslSetValue("uiPostOutRufnr", nummer);
+					jslCopyValue("uiPostOutRufnr", "uiViewNummer");
 					jslEnable("uiPostOutRufnr");
 					jslEnable("uiPostOutRoute");
 					jslEnable("uiPostOutProvider");
 				}
 			} else {
-				var nummer = jslGetValue("uiViewNummer");
-				if (!isZahlRaute(nummer)) {alert(g_mldNonDigits); return;}
-				var x = IstActionVorhanden(nummer);
+				var x = IstActionVorhanden(jslGetValue("uiViewNummer"));
 				if (x != "") {
-					if (jslGetValue("uiPostInAction"+x) == "1") {alert(g_txtAlert_1); return;}
-					if (!confirm(g_txtAlert_2)) return;
+					if (jslGetValue("uiPostInAction"+x) == "1") {alert("Eine Sperre für diese einkommende Rufnummer ist bereits vorhanden."); return;}
+					if (!confirm("Für diese einkommende Rufnummer ist bereits eine Rufumleitung eingerichtet. Diese Rufumleitung wird automatisch gelöscht. Fortfahren?")) return;
 					jslCopyValue("uiPostInRufnr"+x, "uiViewNummer");
 					jslSetValue("uiPostInAction"+x, "1");
 					jslSetValue("uiPostInActive"+x, "1");
@@ -165,54 +134,23 @@
 	jslSubmitFormEx("fon", "sperre", "sperre1");
 }
 function uiDoHelp() {
-	jslPopHelp("hilfe_fon_sperre_neu");
+	jslPopHelp("hilfe_fon_sperre");
 }
 function uiDoCancel() {
 	jslGoTo("fon", "sperre");
 }
 function IstRouteVorhanden (number) {
-	var n = Number("<? query telcfg:settings/Routing/Group/count ?>");
+	var n = Number("<? multiquerycount telcfg:settings/Routing/Group/list ?>");
 	for (var i = 0; i<n; i++) {
 		if (jslGetValue("uiPostOutRufnrGroup"+i) == number) return "Group"+i;
 	}
 	return "";
 }
 function IstActionVorhanden (number) {
-	var n = Number("<? query telcfg:settings/CallerIDActions/count ?>");
+	var n = Number("<? multiquerycount telcfg:settings/CallerIDActions/list ?>");
 	for (var i = 0; i<n; i++) {
 		if (jslGetValue("uiPostInRufnrCallerIDActions"+i) == number) return "CallerIDActions"+i;
 	}
 	return "";
 }
-function IstNotruf (nr) {
-	switch (nr) {
-<? if eq $var:lang en '
-		case "999":
-		case "112": return true;
-' '
-		case "19222":
-		case "110":
-		case "112": return true;
-' ?>
-	}
-	return false;
-}
-function OnArt(n) {
-	jslDisplay("uiBereich", n==0);
-	switch (n) {
-		case 0:
-			jslSetEnabled("uiViewNummer", jslGetValue("uiViewBereich")=="");
-			break;
-		case 1:
-			jslSetEnabled("uiViewNummer", true);
-			break;
-	}
-}
-function OnChangeBereich (value) {
-	jslSetEnabled("uiViewNummer", value=="");
-}
-function isZahlRaute (nummer) {
-	if (nummer.match("[^0-9\#]") != null) return false;
-	return true;
-}
 </script>
diff -burN usr/www/all/html/de/fon/sperre.html usr/www/all/html/de/fon/sperre.html
--- usr/www/all/html/de/fon/sperre.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/sperre.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,14 +1,14 @@
 <? include ../html/$var:lang/fon/sperre.inc ?>
 <div id="content">
 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo $var:Text1 ?>
+		Rufsperre
 	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p class="mb10"><? echo $var:Text2 ?></p>
+		<p class="mb10">Hier können Sie Rufnummern angeben, die für ausgehende oder einkommende Anrufe gesperrt werden sollen.</p>
 		<table id="tList" class="tborder">
 			<tr>
-				<th><? echo $var:Text3 ?></th>
-				<th><? echo $var:Text4 ?></th>
+				<th>Rufart</th>
+				<th>Rufnummer / Bereich</th>
 				<th></th>
 				<th></th>
 			</tr>
@@ -20,10 +20,10 @@
 ` ?>
 			<script type="text/javascript">document.write(TrNichts());</script>
 		</table>
-		<p class="mt10 ar"><input type="button" onclick="uiDoNew()" value="<? echo $var:Text5 ?>" class="Pushbutton" style="width:120px"></p>
+		<p class="mt10 ar"><input type="button" onclick="uiDoNew()" value="Neue Rufsperre" class="Pushbutton" style="width:120px"></p>
 		<? include ../html/$var:lang/home/error.html ?>
 	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
-		<input type="button" onclick="uiDoHelp()" value="<? echo $var:Text6 ?>" class="Pushbutton" id="buttonHilfe">
+		<input type="button" onclick="uiDoHelp()" value="Hilfe" class="Pushbutton" id="buttonHilfe">
 	</div></div></div></div></div></div>
 </div>
diff -burN usr/www/all/html/de/fon/sperre.js usr/www/all/html/de/fon/sperre.js
--- usr/www/all/html/de/fon/sperre.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/sperre.js	2006-12-13 17:03:02.000000000 +0100
@@ -12,11 +12,6 @@
 <script type="text/javascript">
 <? include ../html/$var:lang/js/jsl.js ?>
 var g_mldDelete = "Wollen Sie diesen Eintrag löschen ?";
-var g_txtBtnEdit = "Bearbeiten";
-var g_txtBtnDelete = "Löschen";
-var g_txtSpan_1 = "Ausgehende Rufe";
-var g_txtSpan_2 = "Einkommende Rufe";
-var g_txtSpan_3 = "<tr><td colspan=4 class=\"ac\" style=\"font-size: 13px\">Es sind keine Rufsperren eingerichtet.</td></tr>";
 var g_foundSperre = false;
 //---- nicht Löschen! Notwendig für korrekte Anzeige --------------------------
 <? multiquery telcfg:settings/Routing/Group/list(Number) ' ' ?>
@@ -58,10 +53,10 @@
 	return "<nobr><span title=\""+ str + "\">" + str + "</span></nobr>";
 }
 function EditBtn(id, click) {
-	return BmpBtn(id, click, g_txtBtnEdit, "../html/<? echo $var:lang ?>/images/bearbeiten.gif");
+	return BmpBtn(id, click, "Ändern", "../html/<? echo $var:lang ?>/images/bearbeiten.gif");
 }
 function DeleteBtn(id, click) {
-	return BmpBtn(id, click, g_txtBtnDelete, "../html/<? echo $var:lang ?>/images/loeschen.gif");
+	return BmpBtn(id, click, "Löschen", "../html/<? echo $var:lang ?>/images/loeschen.gif");
 }
 function BmpBtn(id, click, value, bmp) {
 	return "<button type=\"button\" id=\""+id+"\" onClick=\""+click+"\" value=\""+value+"\" title=\""+value+"\" style=\"width: 30px\"><img src=\""+bmp+"\" align=bottom width=16 height=16 hspace=4></button></td>";
@@ -69,8 +64,8 @@
 function TrOut(id, nummer, mode) {
 	if (mode != "s") return "";
 	var str = "<tr>";
-	str += "<td class=\"c2\">"+ span(g_txtSpan_1)+"</td>";
-	str += "<td class=\"c3\">"+ span(NumberDisplay(nummer))+"</td>";
+	str += "<td class=\"c2\">"+ span("Ausgehende Rufe")+"</td>";
+	str += "<td class=\"c3\">"+ span(nummer)+"</td>";
 	str += "<td class=\"Iconbutton\">"+ EditBtn("uiViewEditOut"+id, "uiDoEditOut('"+id+"')") +"</td>";
 	str += "<td class=\"Iconbutton\">"+ DeleteBtn("uiViewDeleteOut"+id, "uiDoDeleteOut('"+id+"')") +"</td>";
 	str += "</tr>";
@@ -80,7 +75,7 @@
 function TrIn(id, nummer, mode) {
 	if (mode != "1") return "";
 	var str = "<tr>";
-	str += "<td class=\"c2\">"+ span(g_txtSpan_2)+"</td>";
+	str += "<td class=\"c2\">"+ span("Einkommende Rufe")+"</td>";
 	str += "<td class=\"c3\">"+ span(nummer)+"</td>";
 	str += "<td class=\"Iconbutton\">"+ EditBtn("uiViewEditIn"+id, "uiDoEditIn('"+id+"')") +"</td>";
 	str += "<td class=\"Iconbutton\">"+ DeleteBtn("uiViewDeleteIn"+id, "uiDoDeleteIn('"+id+"')") +"</td>";
@@ -90,17 +85,6 @@
 }
 function TrNichts() {
 	if (g_foundSperre) return "";
-	return g_txtSpan_3;
-}
-function NumberDisplay(number) {
-	switch (number) {
-		case "mobile": return "Mobilfunk";
-		case "ortsnetz": return "Ortsnetz";
-		case "national": return "Ferngespräch";
-		case "international": return "Ausland";
-		case "sonderrufnrn": return "Sonderrufnummern";
-		case "auskunft": return "Auskunft";
-	}
-	return number;
+	return "<tr><td colspan=4 class=\"ac\" style=\"font-size: 13px\">Es sind keine Rufsperren eingerichtet.</td></tr>";
 }
 </script>
diff -burN usr/www/all/html/de/fon/tam.frm usr/www/all/html/de/fon/tam.frm
--- usr/www/all/html/de/fon/tam.frm	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/fon/tam.frm	2007-04-01 20:41:16.000000000 +0200
@@ -0,0 +1,5 @@
+<input type="hidden" name="tam:settings/TAM0/Active" value="<? query tam:settings/TAM0/Active ?>" id="uiPostActive" />
+<input type="hidden" name="tam:settings/TAM0/Mode" value="<? query tam:settings/TAM0/Mode ?>" id="uiPostMode" />
+<input type="hidden" name="tam:settings/TAM0/RingCount" value="<? query tam:settings/TAM0/RingCount ?>" id="uiPostRing" />
+<input type="hidden" name="tam:settings/TAM0/RecordLength" value="<? query tam:settings/TAM0/RecordLength ?>" id="uiPostLen" />
+<input type="hidden" name="tam:settings/TAM0/PIN" value="<? query tam:settings/TAM0/PIN ?>" id="uiPostPin" />
diff -burN usr/www/all/html/de/fon/tam.html usr/www/all/html/de/fon/tam.html
--- usr/www/all/html/de/fon/tam.html	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/fon/tam.html	2007-04-01 20:43:48.000000000 +0200
@@ -0,0 +1,53 @@
+<? include ../html/$var:lang/fon/tam.inc ?>
+<div id="content">
+ 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
+		<? echo $var:Text1 ?>
+	</div></div></div></div></div></div>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<p class="mt10 mb10 fett" >Einstellmöglichkeiten für den Anrufbeantworter</p>
+		<p class="mb5"><input type="checkbox" id="uiViewActive" onclick="OnActiv()">&nbsp;<label for="uiViewActive"><? echo $var:Text2 ?></label></p>
+		<table class="ml25">
+			<tr>
+				<td><label for="uiViewMode"><? echo $var:Text3 ?></label></td>
+				<td><select id="uiViewMode" size="1" class="Eingabefeld" onchange="OnChangeMode(value)">
+					<option value="0"><? echo $var:Text4 ?></option>
+					<option value="1"><? echo $var:Text5 ?></option>
+				</select></td>
+			</tr>
+			<tr>
+				<td><label for="uiViewRing"><? echo $var:Text6 ?></label></td>
+				<td><select size="1" id="uiViewRing" class="Eingabefeld">
+					<option value="0"><? echo $var:Text7 ?></option>
+					<option value="1">1</option>
+					<option value="2">2</option>
+					<option value="3">3</option>
+					<option value="4">4</option>
+					<option value="5">5</option>
+					<option value="6">6</option>
+					<option value="255">automatisch</option>
+				</select></td>
+			</tr>
+			<tr>
+				<td><label for="uiViewLen"><? echo $var:Text8 ?></label></td>
+				<td><select size="1" id="uiViewLen" class="Eingabefeld">
+					<option value="0">Keine Zeitbegrenzung</option>
+					<option value="60">60 Sekunden</option>
+					<option value="120">120 Sekunden</option>
+					<option value="180">180 Sekunden</option>
+				</select></td>
+			</tr>
+		</table>
+		<p class="mt10 mb5"><? echo $var:Text10 ?></p>
+		<table class="ml25">
+			<tr>
+				<td><label for="uiViewPin"><? echo $var:Text11 ?></label></td>
+				<td><input type="password" size="12" maxlength="4" id="uiViewPin" onfocus="uiSelect(id);" /></td>
+			</tr>
+			<tr>
+				<td><label for="uiViewPin2"><? echo $var:Text12 ?></label></td>
+				<td><input type="password" size="12" maxlength="4" id="uiViewPin2" onfocus="uiSelect(id);" /></td>
+			</tr>
+		</table>
+	</div></div></div></div></div></div>
+	<? include ../html/$var:lang/home/rbb_applycancel.html ?>
+</div>
diff -burN usr/www/all/html/de/fon/tam.inc usr/www/all/html/de/fon/tam.inc
--- usr/www/all/html/de/fon/tam.inc	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/fon/tam.inc	2007-03-19 20:02:12.000000000 +0100
@@ -0,0 +1,13 @@
+<? include ../html/$var:lang/global.inc ?>
+<? setvariable var:Text1 'Anrufbeantworter' ?>
+<? setvariable var:Text2 'Anrufbeantworter aktivieren' ?>
+<? setvariable var:Text3 'Betriebsart' ?>
+<? setvariable var:Text4 'nur Ansage' ?>
+<? setvariable var:Text5 'Mitteilungen aufnehmen' ?>
+<? setvariable var:Text6 'Klingelzeichen' ?>
+<? setvariable var:Text7 'sofort annehmen' ?>
+<? setvariable var:Text8 'Aufnahmelänge' ?>
+<? setvariable var:Text9 'Sekunden' ?>
+<? setvariable var:Text10 'Wenn Sie den Anrufbeantworter von einem anderen Telefonanschluss aus abfragen möchten, benötigen Sie eine PIN. Die PIN muß aus genau vier Ziffern bestehen.' ?>
+<? setvariable var:Text11 'PIN' ?>
+<? setvariable var:Text12 'PIN Bestätigung' ?>
diff -burN usr/www/all/html/de/fon/tam.js usr/www/all/html/de/fon/tam.js
--- usr/www/all/html/de/fon/tam.js	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/fon/tam.js	2007-04-01 20:56:02.000000000 +0200
@@ -0,0 +1,62 @@
+<!--		../fon/tam.js		-->
+<style type="text/css">
+<!--
+#content {width: 480px; margin: auto;}
+td {padding: 3px 5px;}
+.ml25 {margin-left: 25px;}
+-->
+</style>
+<script type="text/javascript">
+<? include ../html/$var:lang/js/val.js ?>
+<? include ../html/$var:lang/js/jsl.js ?>
+var g_mldPin 	= "Geben Sie bitte bei der PIN nur Ziffern ein.";
+var g_mldPinLength = "Die PIN muß aus genau vier Ziffern bestehen.";
+var g_mldPinDiff = "Die PIN stimmt nicht mit der Bestätigung überein.";
+function uiDoOnLoad() {
+	jslSetChecked("uiViewActive", jslGetValue("uiPostActive") == "1");
+	jslSetSelection("uiViewMode", jslGetValue("uiPostMode"));
+	jslSetSelection("uiViewRing", jslGetValue("uiPostRing"));
+	jslSetSelection("uiViewLen", jslGetValue("uiPostLen"));
+	jslCopyValue("uiViewPin", "uiPostPin");
+	jslCopyValue("uiViewPin2", "uiPostPin");
+	OnActiv();
+}
+function uiDoSave() {
+	if (jslGetChecked("uiViewActive")) {
+		jslSetValue("uiPostActive", "1");
+		jslCopyValue("uiPostMode","uiViewMode");
+		jslCopyValue("uiPostRing","uiViewRing");
+		
+		var p = jslGetValue("uiViewPin");
+		if (!valIsZahlVorhanden(p)) {alert(g_mldPin); return;}
+		if (p.length != 4) {alert(g_mldPinLength); return;}
+		
+		var p2 = jslGetValue("uiViewPin2");
+		if (p2!=p) {alert(g_mldPinDiff); return;}
+		
+		jslCopyValue("uiPostLen", "uiViewLen");
+		jslCopyValue("uiPostPin", "uiViewPin");
+	} else {
+		jslSetValue("uiPostActive", "0");
+	}
+	
+	jslFormSubmitEx("fon", "tam");
+}
+function uiDoCancel() {
+	jslGoTo("fon", "tam");
+}
+function uiDoHelp() {
+	jslPopHelp("hilfe_fon_anrufbeantworter");
+}
+function OnActiv() {
+	var b = jslGetChecked("uiViewActive");
+	jslSetEnabled("uiViewMode", b);
+	jslSetEnabled("uiViewRing", b);
+	jslSetEnabled("uiViewLen", b && (jslGetValue("uiViewMode")=="1"));
+	jslSetEnabled("uiViewPin", b);
+	jslSetEnabled("uiViewPin2", b);
+}
+function OnChangeMode (value) {
+	jslSetEnabled("uiViewLen", value=="1");
+}
+</script>
diff -burN usr/www/all/html/de/fon/tamlist.frm usr/www/all/html/de/fon/tamlist.frm
--- usr/www/all/html/de/fon/tamlist.frm	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/tamlist.frm	1970-01-01 01:00:00.000000000 +0100
@@ -1,23 +0,0 @@
-<? if eq '$var:TamNr' '' `<? setvariable var:TamNr '0' ?>` ?>
-<input type="hidden" name="var:TamNr" value="<? echo $var:TamNr ?>" id="uiPostTamNr">
-<input type="hidden" name="tam:settings/TAM<? echo $var:TamNr ?>/Active" value="<? query tam:settings/TAM<? echo $var:TamNr ?>/Active ?>" id="uiPostActive" />
-<input type="hidden" name="tam:settings/TAM<? echo $var:TamNr ?>/Mode" value="<? query tam:settings/TAM<? echo $var:TamNr ?>/Mode ?>" id="uiPostMode" />
-<input type="hidden" name="tam:settings/TAM<? echo $var:TamNr ?>/RingCount" value="<? query tam:settings/TAM<? echo $var:TamNr ?>/RingCount ?>" id="uiPostRing" />
-<input type="hidden" name="tam:settings/TAM<? echo $var:TamNr ?>/RecordLength" value="<? query tam:settings/TAM<? echo $var:TamNr ?>/RecordLength ?>" id="uiPostLen" />
-<input type="hidden" name="tam:settings/TAM<? echo $var:TamNr ?>/PIN" value="<? query tam:settings/TAM<? echo $var:TamNr ?>/PIN ?>" id="uiPostPin" />
-<? repeat [ 0 4 ] `
-<input type="hidden" name="tam:settings/TAM$0/MSNBitmap" value="<? query tam:settings/TAM$0/MSNBitmap ?>" id="uiPostMSNBitmap$0" disabled />
-` ?>
-<? repeat [ 0 4 ] `
-<input type="hidden" name="tam:settings/TAM$0/Display" value="<? query tam:settings/TAM$0/Display ?>" id="uiPostDisplay$0" />
-` ?>
-<? repeat [ 0 9 ] `
-<input type="hidden" name="tam:settings/MSN$0" value="<? query tam:settings/MSN$0 ?>" id="uiPostMSN$0" />
-` ?>
-<? multiquery sip:settings/sip/list(displayname) '
-<input type="hidden" name="sip:settings/$1/displayname" value="$2" id="ui$1" disabled>
-' ?>
-<? repeat [ 0 9 ] `
-<input type="hidden" name="telcfg:settings/MSN/MSN$0" value="<? query telcfg:settings/MSN/MSN$0 ?>" id="uiMsn$0" disabled>
-` ?>
-<input type="hidden" name="telcfg:settings/MSN/POTS" value="<? query telcfg:settings/MSN/POTS ?>" id="uiPots" disabled>
diff -burN usr/www/all/html/de/fon/tamlist.html usr/www/all/html/de/fon/tamlist.html
--- usr/www/all/html/de/fon/tamlist.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/tamlist.html	1970-01-01 01:00:00.000000000 +0100
@@ -1,120 +0,0 @@
-<? include ../html/$var:lang/fon/tamlist.inc ?>
-<div id="content">
- 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo $var:Text1 ?>
-	</div></div></div></div></div></div>
-	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
-		<p class="pretab"><? echo $var:Text13 ?></p>
-		<ul class="tabs" >
-			<li id="uiView0"><a href="javascript:DoTabs(0)">600</a></li>
-			<li id="uiView1" style="display:none"><a href="javascript:DoTabs(1)">601</a></li>
-			<li id="uiView2" style="display:none"><a href="javascript:DoTabs(2)">602</a></li>
-			<li id="uiView3" style="display:none"><a href="javascript:DoTabs(3)">603</a></li>
-			<li id="uiView4" style="display:none"><a href="javascript:DoTabs(4)">604</a></li>
-		</ul>
-		<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-			<p class="mb10 fett" >Auswahl der Rufnummern für den Anrufbeantworter</p>
-			<table class="ml25">
-				<tr>
-					<td style="vertical-align:top;">
-						<table> 
-							<tr id="uitrMSN_0">
-								<td class="ar">1.</td>
-								<td><p class="combo"><select size="1" id="uiViewMSN_0" style="width:200px" onchange="OnNextMSN(id)"></select></p></td>											 
-							</tr>
-							<tr id="uitrMSN_1" style="display:none">
-								<td class="ar">2.</td>
-								<td><p class="combo"><select size="1" id="uiViewMSN_1" style="width:200px" onchange="OnNextMSN(id)"></select></p></td>											 
-							</tr>
-							<tr id="uitrMSN_2" style="display:none">
-								<td class="ar">3.</td>
-								<td><p class="combo"><select size="1" id="uiViewMSN_2" style="width:200px" onchange="OnNextMSN(id)"></select></p></td>											 
-							</tr>
-							<tr id="uitrMSN_3" style="display:none">
-								<td class="ar">4.</td>
-								<td><p class="combo"><select size="1" id="uiViewMSN_3" style="width:200px" onchange="OnNextMSN(id)"></select></p></td>											 
-							</tr>
-							<tr id="uitrMSN_4" style="display:none">
-								<td class="ar">5.</td>
-								<td><p class="combo"><select size="1" id="uiViewMSN_4" style="width:200px" onchange="OnNextMSN(id)"></select></p></td>											 
-							</tr>
-						</table> 
-					</td>
-					<td style="vertical-align:top;">
-						<table> 
-							<tr id="uitrMSN_5" style="display:none">
-								<td class="ar">6.</td>
-								<td><p class="combo"><select size="1" id="uiViewMSN_5" style="width:200px" onchange="OnNextMSN(id)"></select></p></td>											 
-							</tr>
-							<tr id="uitrMSN_6" style="display:none">
-								<td class="ar">7.</td>
-								<td><p class="combo"><select size="1" id="uiViewMSN_6" style="width:200px" onchange="OnNextMSN(id)"></select></p></td>											 
-							</tr>
-							<tr id="uitrMSN_7" style="display:none">
-								<td class="ar">8.</td>
-								<td><p class="combo"><select size="1" id="uiViewMSN_7" style="width:200px" onchange="OnNextMSN(id)"></select></p></td>											 
-							</tr>
-							<tr id="uitrMSN_8" style="display:none">
-								<td class="ar">9.</td>
-								<td><p class="combo"><select size="1" id="uiViewMSN_8" style="width:200px" onchange="OnNextMSN(id)"></select></p></td>											 
-							</tr>
-							<tr id="uitrMSN_9" style="display:none">
-								<td class="ar">10.</td>
-								<td><p class="combo"><select size="1" id="uiViewMSN_9" style="width:200px" onchange="OnNextMSN(id)"></select></p></td>											 
-							</tr>
-						</table> 
-					</td>
-				</tr>
-			</table>
-			<p class="mt10 mb10 fett" >Einstellmöglichkeiten für den Anrufbeantworter</p>
-			<p class="mb5"><input type="checkbox" id="uiViewActive" onclick="OnActiv()">&nbsp;<label for="uiViewActive"><? echo $var:Text2 ?></label></p>
-			<table class="ml25">
-				<tr>
-					<td><label for="uiViewMode"><? echo $var:Text3 ?></label></td>
-					<td><select id="uiViewMode" size="1" class="Eingabefeld" onchange="OnChangeMode(value)">
-						<option value="0"><? echo $var:Text4 ?></option>
-						<option value="1"><? echo $var:Text5 ?></option>
-					</select></td>
-				</tr>
-				<tr>
-					<td><label for="uiViewRing"><? echo $var:Text6 ?></label></td>
-					<td><select size="1" id="uiViewRing" class="Eingabefeld">
-						<option value="0"><? echo $var:Text7 ?></option>
-						<option value="1">nach 5 Sekunden</option>
-						<option value="2">nach 10 Sekunden</option>
-						<option value="3">nach 15 Sekunden</option>
-						<option value="4">nach 20 Sekunden</option>
-						<option value="5">nach 25 Sekunden</option>
-						<option value="6">nach 30 Sekunden</option>
-					</select></td>
-				</tr>
-				<tr>
-					<td><label for="uiViewLen"><? echo $var:Text8 ?></label></td>
-					<td><select size="1" id="uiViewLen" class="Eingabefeld">
-						<option value="0">Keine Zeitbegrenzung</option>
-						<option value="60">60 Sekunden</option>
-						<option value="120">120 Sekunden</option>
-						<option value="180">180 Sekunden</option>
-					</select></td>
-				</tr>
-			</table>
-			<p class="mt10 mb5"><? echo $var:Text10 ?></p>
-			<table class="ml25">
-				<tr>
-					<td><label for="uiViewPin"><? echo $var:Text11 ?></label></td>
-					<td><input type="password" size="12" maxlength="4" id="uiViewPin" onfocus="uiSelect(id);" /></td>
-				</tr>
-				<tr>
-					<td><label for="uiViewPin2"><? echo $var:Text12 ?></label></td>
-					<td><input type="password" size="12" maxlength="4" id="uiViewPin2" onfocus="uiSelect(id);" /></td>
-				</tr>
-			</table>
-			<? include ../html/$var:lang/home/error.html ?>
-			<p style="text-align:right">
-				<input type="button" onclick="uiTamAppend()" id="uiViewTamAppend" value="Anrufbeantworter hinzufügen" disabled /> 
-				<input type="button" onclick="uiTamDelete()" id="uiViewTamDelete" value="Anrufbeantworter löschen" disabled /> 
-			</p>
-		</div></div></div></div></div></div>
-		<? include ../html/$var:lang/home/rbb_applycancel.html ?>
-	</div></div></div></div></div></div></div>
-</div>
diff -burN usr/www/all/html/de/fon/tamlist.inc usr/www/all/html/de/fon/tamlist.inc
--- usr/www/all/html/de/fon/tamlist.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/tamlist.inc	1970-01-01 01:00:00.000000000 +0100
@@ -1,14 +0,0 @@
-<? include ../html/$var:lang/global.inc ?>
-<? setvariable var:Text1 'Anrufbeantworter' ?>
-<? setvariable var:Text2 'Anrufbeantworter aktivieren' ?>
-<? setvariable var:Text3 'Betriebsart' ?>
-<? setvariable var:Text4 'nur Ansage' ?>
-<? setvariable var:Text5 'Mitteilungen aufnehmen' ?>
-<? setvariable var:Text6 'Klingelzeichen' ?>
-<? setvariable var:Text7 'sofort annehmen' ?>
-<? setvariable var:Text8 'Aufnahmelänge' ?>
-<? setvariable var:Text9 'Sekunden' ?>
-<? setvariable var:Text10 'Wenn Sie den Anrufbeantworter von einem anderen Telefonanschluss aus abfragen möchten, benötigen Sie eine PIN. Die PIN muß aus genau vier Ziffern bestehen.' ?>
-<? setvariable var:Text11 'PIN' ?>
-<? setvariable var:Text12 'PIN Bestätigung' ?>
-<? setvariable var:Text13 'Über die Registerkarten können Sie zwischen den unterschiedlichen Anrufbeantwortern auswählen. Die Nummern entsprechen dabei den internen Rufnummern, über die die Anrufbeantworter erreichbar sind.' ?>
diff -burN usr/www/all/html/de/fon/tamlist.js usr/www/all/html/de/fon/tamlist.js
--- usr/www/all/html/de/fon/tamlist.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/tamlist.js	1970-01-01 01:00:00.000000000 +0100
@@ -1,259 +0,0 @@
-<!--		../fon/tamlist.js		-->
-<style type="text/css">
-<!--
-#content {width: 580px; margin: auto;}
-td {padding: 2px 5px;}
-.ml25 {margin-left: 25px;}
-.ar {text-align: right;}
-p.pretab {padding-bottom:10px;}
--->
-</style>
-<!--[if lte IE 6]>
-<style type="text/css">
-p.pretab {position:relative;} /* Fix IE6 Peekaboo */
-</style>
-<![endif]-->
-<script type="text/javascript">
-<? include ../html/$var:lang/js/val.js ?>
-<? include ../html/$var:lang/js/jsl.js ?>
-var g_txt_Festnetz	= "Festnetz: ";
-var g_txt_Internet		= "Internet: ";
-var g_mldPin 	= "Geben Sie bitte bei der PIN nur Ziffern ein.";
-var g_mldPinLength = "Die PIN muß aus genau vier Ziffern bestehen.";
-var g_mldPinDiff = "Die PIN stimmt nicht mit der Bestätigung überein.";
-<? multiquery sip:settings/sip/list '
-var g_$1;
-' ?>
-var g_msn0;
-var g_msn1;
-var g_msn2;
-var g_msn3;
-var g_msn4;
-var g_msn5;
-var g_msn6;
-var g_msn7;
-var g_msn8;
-var g_msn9;
-var g_pots;
-var g_MsnGesperrt = new Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
-var g_MSNs;
-function uiDoOnLoad() {
-	var nr = jslGetValue("uiPostTamNr");
-	if (nr == "") nr="0";
-	jslSetClass("uiView"+nr, "tabs_on");
-	for (var i=1; i<5; i++) jslDisplay("uiView"+i, jslGetValue("uiPostDisplay"+i) != "0");
-	
-<? multiquery sip:settings/sip/list '
-	g_$1 = jslGetValue("ui$1");
-' ?>
-	g_msn0 = jslGetValue("uiMsn0");
-	g_msn1 = jslGetValue("uiMsn1");
-	g_msn2 = jslGetValue("uiMsn2");
-	g_msn3 = jslGetValue("uiMsn3");
-	g_msn4 = jslGetValue("uiMsn4");
-	g_msn5 = jslGetValue("uiMsn5");
-	g_msn6 = jslGetValue("uiMsn6");
-	g_msn7 = jslGetValue("uiMsn7");
-	g_msn8 = jslGetValue("uiMsn8");
-	g_msn9 = jslGetValue("uiMsn9");
-	g_pots = jslGetValue("uiPots");
-	
-	InitGesperrt("0");
-	InitGesperrt("1");
-	InitGesperrt("2");
-	InitGesperrt("3");
-	InitGesperrt("4");
-	for (var i=0; i<10; i++) {
-		fillId("uiViewMSN_"+i, "");
-	}
-	
-	// MSN füllen
-	var bits = jslGetValue("uiPostMSNBitmap"+nr);
-	var m=0; // nächste Combobox
-	for (var i=0; i<10; i++) {
-		if ((bits & (1<<i)) != 0) {
-			SwitchOnCombobox(m);
-			jslSetSelection("uiViewMSN_"+m, jslGetValue("uiPostMSN"+i));
-			m++;
-		}
-	}	
-	g_MSNs = m;
-	if (g_MSNs > 0) 
-	{ // Eine zusätzlich leere Combobox wird angezeigt
-		SwitchOnCombobox(m);			
-		jslSetSelection("uiViewMSN_"+m, "");
-	}
-	jslSetChecked("uiViewActive", jslGetValue("uiPostActive") == "1");
-	jslSetSelection("uiViewMode", jslGetValue("uiPostMode"));
-	jslSetSelection("uiViewRing", jslGetValue("uiPostRing"));
-	jslSetSelection("uiViewLen", jslGetValue("uiPostLen"));
-	jslCopyValue("uiViewPin", "uiPostPin");
-	jslCopyValue("uiViewPin2", "uiPostPin");
-	OnActiv();
-	jslSetEnabled("uiViewTamAppend", FindeFreieTam() != -1);
-	jslSetEnabled("uiViewTamDelete", nr != "0");
-}
-function uiDoSave() {
-	var tamnr = jslGetValue("uiPostTamNr");
-	if (tamnr == "") tamnr="0";
-	if (jslGetChecked("uiViewActive")) {
-		jslSetValue("uiPostActive", "1");
-		jslCopyValue("uiPostMode","uiViewMode");
-		jslCopyValue("uiPostRing","uiViewRing");
-		
-		var p = jslGetValue("uiViewPin");
-		if (!valIsZahlVorhanden(p)) {alert(g_mldPin); return;}
-		if (p.length != 4) {alert(g_mldPinLength); return;}
-		
-		var p2 = jslGetValue("uiViewPin2");
-		if (p2!=p) {alert(g_mldPinDiff); return;}
-		
-		jslCopyValue("uiPostLen", "uiViewLen");
-		jslCopyValue("uiPostPin", "uiViewPin");
-	} else {
-		jslSetValue("uiPostActive", "0");
-	}
-	
-	// Alle freien MSN löschen
-	for (var i=0; i<10; i++) {
-		if (g_MsnGesperrt[i] == 0) jslSetValue("uiPostMSN"+i, "");
-	}
-	var bits = 0;
-	// eingetragene Nummern in die MSN füllen und Bitmap setzen
-	for (var i=0; i<10; i++) {
-		var msn= jslGetValue("uiViewMSN_"+i);
-		if (msn != "Leer") {
-			var n = FindFreePos(msn);
-			if (n>=0) {
-				jslSetValue("uiPostMSN"+n, msn);
-				bits |= 1<<n;
-			}
-		}
-	}
-	jslSetValue("uiPostMSNBitmap"+tamnr, bits);
-	jslEnable("uiPostMSNBitmap"+tamnr);
-	
-	jslFormSubmitEx("fon", "tamlist");
-}
-function uiDoCancel() {
-	jslGoTo("fon", "tamlist");
-}
-function uiDoHelp() {
-	jslPopHelp("hilfe_fon_anrufbeantworter");
-}
-function OnActiv() {
-	var b = jslGetChecked("uiViewActive");
-	jslSetEnabled("uiViewMode", b);
-	jslSetEnabled("uiViewRing", b);
-	jslSetEnabled("uiViewLen", b && (jslGetValue("uiViewMode")=="1"));
-	jslSetEnabled("uiViewPin", b);
-	jslSetEnabled("uiViewPin2", b);
-}
-function SwitchOnCombobox(m) {
-	jslDisplay("uitrMSN_" + m, true);
-}
-function InitGesperrt (nr) {
-	if (nr == jslGetValue("uiPostTamNr")) return;	//Aktuelle Nummern nicht sperren
-	var bits=Number(jslGetValue("uiPostMSNBitmap"+nr));
-	if (isNaN(bits)) return;
-	for (var i=0; i<10; i++) {
-		if ((bits & (1<<i)) != 0) {
-			g_MsnGesperrt[i] = 1;
-		}
-	}
-}
-function isFrei(msn) {
-	var i=FindMsn(msn);
-	if (i < 0) return true;
-	return g_MsnGesperrt[i] == 0;
-}
-function FindMsn(msn) {
-	for (var i=0; i<10; i++) {
-		if (msn == jslGetValue("uiPostMSN"+i)) return i;
-	}
-	return -1;
-}
-function FindFreePos (msn) {
-	var freepos = -1;
-	for (var i=0; i<10; i++) {
-		var str = jslGetValue("uiPostMSN"+i);
-		if (str == msn) return -2; // MSN schon eingetragen
-		if (str == "" && freepos == -1) freepos = i;
-	}
-	return freepos;
-}
-function fillId(id, nr) {
-<? if eq '$var:usePSTN' 1 `
-	// Auswahl mit den vorgegebenen MSN füllen und Eintrag msn selektieren
-	addMsn(id, g_msn0);
-	addMsn(id, g_msn1);
-	addMsn(id, g_msn2);
-	addMsn(id, g_msn3);
-	addMsn(id, g_msn4);
-	addMsn(id, g_msn5);
-	addMsn(id, g_msn6);
-	addMsn(id, g_msn7);
-	addMsn(id, g_msn8);
-	addMsn(id, g_msn9);
-	addMsn(id, g_pots);
-` ?> 
-	// Sip Zugänge anfügen
-<? multiquery sip:settings/sip/list(ID,displayname) '
-	if ("$3" != "" && isFrei("$3")) addOption(id, "$3", g_txt_Internet+g_$1);
-' ?>
-	addOption(id, "Leer", "");
-	jslSetSelection(id, nr=="" ? "Leer":nr);
-}
-function addMsn (id, msn) {
-	if (msn != "" && isFrei(msn)) addOption(id, msn, g_txt_Festnetz+msn);
-}
-function addOption (id, val, text) {
-	var element;
-	element = document.getElementById(id);
-	if (element == null) return;
-	var eintrag = new Option(text, val, false, false);
-	element.options[element.length]=eintrag;
-}
-function DoTabs(n) {
-	jslSetValue("uiPostTamNr", n);
-	jslGoTo("", "");
-}
-function jslSetClass(id, wert) {
-	var h1 = document.getElementById(id);
-	if (h1 != null) h1.className=wert;
-}
-function OnNextMSN (id) {
-	var nr = id.split("_");
-	var index = Number(nr[1]);
-	if (index<9 && jslGetValue(id) != "Leer") {
-		SwitchOnCombobox(index+1);
-	}
-}
-function OnChangeMode (value) {
-	jslSetEnabled("uiViewLen", value=="1");
-}
-function FindeFreieTam () {
-	for (var i=1; i<5; i++) {
-		if (jslGetValue("uiPostDisplay"+i) == "0") return i;
-	}
-	return -1;
-}
-function uiTamAppend() {
-	var i = FindeFreieTam();
-	if (i == -1) return;
-	jslSetValue("uiPostDisplay"+i, "1");
-	jslSetValue("uiPostTamNr", i);
-	jslFormSubmitEx("", "");
-}
-function uiTamDelete() {
-	var nr = jslGetValue("uiPostTamNr");
-	if (nr == "0") return;
-	if (!confirm("Möchten Sie den Anrufbeantworter löschen?")) return;
-	jslSetValue("uiPostActive", "0");
-	jslSetValue("uiPostDisplay"+nr, "0");
-	jslSetValue("uiPostMSNBitmap"+nr, "0");
-	jslEnable("uiPostMSNBitmap"+nr);
-	jslSetValue("uiPostTamNr", "0");
-	jslFormSubmitEx("", "");
-}
-</script>
diff -burN usr/www/all/html/de/fon/vorwahl.html usr/www/all/html/de/fon/vorwahl.html
--- usr/www/all/html/de/fon/vorwahl.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/vorwahl.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,25 +1,20 @@
 <? include ../html/$var:lang/fon/vorwahl.inc ?>
 <div id="content">
 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo $var:Text8 ?>
+		Telefonie
 	</div></div></div></div></div></div>
-	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog">
-		<div class="ie_b10">
+	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 			<ul class="tabs">
-				<li><a href="javascript:uiDoRouting()"><? echo $var:Text8 ?></a></li>
-				<li class="tabs_on"><a href="javascript:uiDoCancel()"><? echo $var:Text9 ?></a></li>
+ 		<li><a href="javascript:uiDoRouting()">Wahlregeln</a></li>
+ 		<li class="tabs_on"><a href="javascript:uiDoCancel()">Anbietervorwahlen</a></li>
 			</ul>
 			<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-				<p><? echo $var:Text10 ?></p>
+		<p>Hier können Sie Anbietervorwahlen angeben, die anschließend in den Wahlregeln Rufnummernbereichen zugewiesen werden können.</p>
 			</div></div></div></div></div></div>
 			<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 				<p class="mb5"><b><? echo $var:Text2 ?></b></p>
 				<p class="mb10"><? echo $var:Text3 ?></p>
-				<p class="ac"><input type="text" id="uiViewVorwahl0" size="21" maxlength="20" class="Eingabefeld">
-<? if eq $var:OEM arcor `
-					$var:Text6
-` ?>
-				</p>
+		<p class="ac"><input type="text" id="uiViewVorwahl0" size="21" maxlength="20" class="Eingabefeld"><? if eq $var:OEM arcor `$var:Text6` ?></p>
 			</div></div></div></div></div></div>
 			<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 				<p class="mb5"><b><? echo $var:Text4 ?></b></p>
@@ -31,6 +26,5 @@
 				</table>
 			</div></div></div></div></div></div>
 			<? include ../html/$var:lang/home/rbb_applycancel.html ?>
-		</div>
-	</div></div></div></div></div></div>
+	</div></div></div></div></div></div></div>
 </div>
diff -burN usr/www/all/html/de/fon/vorwahl.inc usr/www/all/html/de/fon/vorwahl.inc
--- usr/www/all/html/de/fon/vorwahl.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/vorwahl.inc	2006-12-13 17:03:02.000000000 +0100
@@ -5,7 +5,3 @@
 <? setvariable var:Text4 'Weitere Anbietervorwahlen' ?>
 <? setvariable var:Text5 'Die weiteren Anbietervorwahlen können in den Wahlregeln für festgelegte Rufnummernbereiche verwendet werden.' ?>
 <? setvariable var:Text6 ' Arcor: 0 10 70' ?>
-<? setvariable var:Text7 'Telefonie' ?>
-<? setvariable var:Text8 'Wahlregeln' ?>
-<? setvariable var:Text9 'Anbietervorwahlen' ?>
-<? setvariable var:Text10 'Hier können Sie Anbietervorwahlen angeben, die anschließend in den Wahlregeln Rufnummernbereichen zugewiesen werden können.' ?>
diff -burN usr/www/all/html/de/fon/wecker.frm usr/www/all/html/de/fon/wecker.frm
--- usr/www/all/html/de/fon/wecker.frm	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/wecker.frm	2006-12-13 17:03:02.000000000 +0100
@@ -1,9 +1,7 @@
-<? if eq '$var:weckernr' '' `<? setvariable var:weckernr '0' ?>` ?>
-<input type="hidden" name="var:weckernr" value="<? echo $var:weckernr ?>" id="uiPostWeckernr">
-<input type="hidden" name="telcfg:settings/AlarmClock<? echo $var:weckernr ?>/Active" value="<? query telcfg:settings/AlarmClock<? echo $var:weckernr ?>/Active ?>" id="uiPostActive">
-<input type="hidden" name="telcfg:settings/AlarmClock<? echo $var:weckernr ?>/Time" value="<? query telcfg:settings/AlarmClock<? echo $var:weckernr ?>/Time ?>" id="uiPostZeit" disabled>
-<input type="hidden" name="telcfg:settings/AlarmClock<? echo $var:weckernr ?>/Number" value="<? query telcfg:settings/AlarmClock<? echo $var:weckernr ?>/Number ?>" id="uiPostNummer" disabled>
-<input type="hidden" name="telcfg:settings/AlarmClock<? echo $var:weckernr ?>/Weekdays" value="<? query telcfg:settings/AlarmClock<? echo $var:weckernr ?>/Weekdays ?>" id="uiPostAlarmOption" disabled>
+<input type="hidden" name="telcfg:settings/AlarmClock0/Active" value="<? query telcfg:settings/AlarmClock0/Active ?>" id="uiPostActive">
+<input type="hidden" name="telcfg:settings/AlarmClock0/Time" value="<? query telcfg:settings/AlarmClock0/Time ?>" id="uiPostZeit" disabled>
+<input type="hidden" name="telcfg:settings/AlarmClock0/Number" value="<? query telcfg:settings/AlarmClock0/Number ?>" id="uiPostNummer" disabled>
+<input type="hidden" name="telcfg:settings/AlarmClock0/Weekdays" value="<? query telcfg:settings/AlarmClock0/Weekdays ?>" id="uiPostAlarmOption" disabled>
 <? repeat [ 0 2 ] `
 <input type="hidden" name="telcfg:settings/MSN/Port$0/Name" value="<? query telcfg:settings/MSN/Port$0/Name ?>" id="uiPostFon$0" disabled>
 ` ?>
diff -burN usr/www/all/html/de/fon/wecker.html usr/www/all/html/de/fon/wecker.html
--- usr/www/all/html/de/fon/wecker.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/wecker.html	2006-12-13 17:03:02.000000000 +0100
@@ -3,17 +3,7 @@
  	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
 		<? echo $var:Text1 ?>
 	</div></div></div></div></div></div>
-	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
-	 	<ul class="tabs" id="uiView0">
-	 		<li class="tabs_on"><a href="javascript:DoTabs(0)"><? echo $var:Text12 ?></a></li>
-	 		<li><a href="javascript:DoTabs(1)"><? echo $var:Text13 ?></a></li>
-	 	</ul>
-	 	<ul class="tabs" id="uiView1" style="display:none">
-	 		<li><a href="javascript:DoTabs(0)"><? echo $var:Text12 ?></a></li>
-	 		<li class="tabs_on"><a href="javascript:DoTabs(1)"><? echo $var:Text13 ?></a></li>
-	 	</ul>
 		<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-			<p class="mb10"><? echo $var:Text21 ?></p>
 			<p class="mb5"><input type="checkbox" id="uiViewActive" onclick="OnActiv()">&nbsp;<label for="uiViewActive"><? echo $var:Text2 ?></label></p>
 			<table class="ml25">
 				<tr>
@@ -27,24 +17,10 @@
 			</table>
 			<p class="mt10 mb5"><? echo $var:Text7 ?></p>
 			<p class="ml25"><input type="radio" onclick="uiSetOption(0)" name="AlarmOption" id="uiViewAlarmOption1">&nbsp;<label for="uiViewAlarmOption1"><? echo $var:Text8 ?></label></p>
-			<p class="ml25"><input type="radio" onclick="uiSetOption(1)" name="AlarmOption" id="uiViewAlarmOption2">&nbsp;<label for="uiViewAlarmOption2"><? echo $var:Text9 ?></label></p>
-			<p class="ml25"><input type="radio" onclick="uiSetOption(2)" name="AlarmOption" id="uiViewAlarmOption3">&nbsp;<label for="uiViewAlarmOption3"><? echo $var:Text10 ?></label></p>
-			<table style="margin-left:50px;">
-				<tr>
-					<td style="vertical-align:top;">
-						<p><input type="checkbox" id="uiViewMontag">&nbsp;<label for="uiViewMontag"><? echo $var:Text14 ?></label></p>
-						<p><input type="checkbox" id="uiViewDienstag">&nbsp;<label for="uiViewDienstag"><? echo $var:Text15 ?></label></p>
-						<p><input type="checkbox" id="uiViewMittwoch">&nbsp;<label for="uiViewMittwoch"><? echo $var:Text16 ?></label></p>
-						<p><input type="checkbox" id="uiViewDonnerstag">&nbsp;<label for="uiViewDonnerstag"><? echo $var:Text17 ?></label></p>
-					</td>
-					<td style="vertical-align:top;">
-						<p><input type="checkbox" id="uiViewFreitag">&nbsp;<label for="uiViewFreitag"><? echo $var:Text18 ?></label></p>
-						<p><input type="checkbox" id="uiViewSamstag">&nbsp;<label for="uiViewSamstag"><? echo $var:Text19 ?></label></p>
-						<p><input type="checkbox" id="uiViewSonntag">&nbsp;<label for="uiViewSonntag"><? echo $var:Text20 ?></label></p>
-					</td>
-				</tr>
-			</table>
+		<p class="ml25"><input type="radio" onclick="uiSetOption(127)" name="AlarmOption" id="uiViewAlarmOption2">&nbsp;<label for="uiViewAlarmOption2"><? echo $var:Text9 ?></label></p>
+		<p class="ml25"><input type="radio" onclick="uiSetOption(31)" name="AlarmOption" id="uiViewAlarmOption3">&nbsp;<label for="uiViewAlarmOption3"><? echo $var:Text10 ?></label></p>
+		<p class="ml25"><input type="radio" onclick="uiSetOption(96)" name="AlarmOption" id="uiViewAlarmOption4">&nbsp;<label for="uiViewAlarmOption4"><? echo $var:Text11 ?></label></p>
+		<p class="mt10"><? echo $var:Text6 ?></p>
 		</div></div></div></div></div></div>
 		<? include ../html/$var:lang/home/rbb_applycancel.html ?>
-	</div></div></div></div></div></div></div>
 </div>
diff -burN usr/www/all/html/de/fon/wecker.inc usr/www/all/html/de/fon/wecker.inc
--- usr/www/all/html/de/fon/wecker.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/wecker.inc	2006-12-13 17:03:02.000000000 +0100
@@ -4,24 +4,9 @@
 <? setvariable var:Text3 'Uhrzeit' ?>
 <? setvariable var:Text4 ' : ' ?>
 <? setvariable var:Text5 'Telefon' ?>
+<? setvariable var:Text6 'Nach dem Aktivieren des Weckers wird das ausgewählte Telefon zu der angegebenen Uhrzeit klingeln.' ?>
 <? setvariable var:Text7 'Wählen Sie hier aus, wie der Wecker aktiviert werden soll' ?>
 <? setvariable var:Text8 'nur einmal' ?>
 <? setvariable var:Text9 'an jedem Tag' ?>
-<? setvariable var:Text10 'an den folgenden Tagen' ?>
-<? setvariable var:Text12 'Wecker 1' ?>
-<? setvariable var:Text13 'Wecker 2' ?>
-<? setvariable var:Text14 'Montag' ?>
-<? setvariable var:Text15 'Dienstag' ?>
-<? setvariable var:Text16 'Mittwoch' ?>
-<? setvariable var:Text17 'Donnerstag' ?>
-<? setvariable var:Text18 'Freitag' ?>
-<? setvariable var:Text19 'Samstag' ?>
-<? setvariable var:Text20 'Sonntag' ?>
-<? setvariable var:Text21 'Hier können Sie ein Telefon auswählen, dass zu der angegebenen Weckzeit klingelt.' ?>
-<? setvariable var:jstr0 'Geben Sie bitte bei den Stunden einen gültigen Wert ein.' ?>
-<? setvariable var:jstr1 'Geben Sie bitte bei den Minuten einen gültigen Wert ein.' ?>
-<? setvariable var:jstr2 'Nebenstelle FON 1' ?>
-<? setvariable var:jstr3 'Nebenstelle FON 2' ?>
-<? setvariable var:jstr4 'Nebenstelle FON 3' ?>
-<? setvariable var:jstr5 'DECT-Telefone' ?>
-<? setvariable var:jstr6 'alle Telefone' ?>
+<? setvariable var:Text10 'Montag bis Freitag' ?>
+<? setvariable var:Text11 'Samstag und Sonntag' ?>
diff -burN usr/www/all/html/de/fon/wecker.js usr/www/all/html/de/fon/wecker.js
--- usr/www/all/html/de/fon/wecker.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/fon/wecker.js	2007-07-11 22:32:04.000000000 +0200
@@ -1,5 +1,4 @@
 <!--		../fon/wecker.js		-->
-<? include ../html/$var:lang/fon/wecker.inc ?>
 <style type="text/css">
 <!--
 #content {width: 540px; margin: auto;}
@@ -10,18 +9,14 @@
 <script type="text/javascript">
 <? include ../html/$var:lang/js/val.js ?>
 <? include ../html/$var:lang/js/jsl.js ?>
-var g_mldStunden	= "<? print $var:jstr0 ?>";
-var g_mldMinuten 	= "<? print $var:jstr1 ?>";
-var g_Fon1 = "<? print $var:jstr2 ?>";
-var g_Fon2 = "<? print $var:jstr3 ?>";
-var g_Fon3 = "<? print $var:jstr4 ?>";
-var g_txtIsdn = "<? print $var:jstr5 ?>";
-var g_alleTelefone = "<? print $var:jstr6 ?>";
+var g_mldStunden	= "Geben Sie bitte bei den Stunden einen gültigen Wert ein.";
+var g_mldMinuten 	= "Geben Sie bitte bei den Minuten einen gültigen Wert ein.";
+var g_Fon1 = "Nebenstelle FON 1";
+var g_Fon2 = "Nebenstelle FON 2";
+var g_txtIsdn = "ISDN/DECT-Telefone";
+var g_alleTelefone = "alle Telefone";
 var g_AlarmOptionValue = 0;
 function uiDoOnLoad() {
-	var nr = jslGetValue("uiPostWeckernr");
-	jslDisplay("uiView0", nr != "1");
-	jslDisplay("uiView1", nr == "1");
 	jslSetChecked("uiViewActive", jslGetValue("uiPostActive") == "1");
 	var zeit = jslGetValue("uiPostZeit");
 	if (zeit.length == 4) {
@@ -29,21 +24,7 @@
 		jslSetValue("uiViewMin", zeit.substr(2,2));
 	}
 	FillId("uiViewNr", jslGetValue("uiPostNummer"));
-	var option = Number(jslGetValue( "uiPostAlarmOption")) & 127;
-	switch (option) {
-		case 0: uiSetOption(0); break;
-		case 127: uiSetOption(1); break;
-		default: 
-			uiSetOption(2);
-			jslSetChecked("uiViewMontag", option & 1);
-			jslSetChecked("uiViewDienstag", option & 2);
-			jslSetChecked("uiViewMittwoch", option & 4);
-			jslSetChecked("uiViewDonnerstag", option & 8);
-			jslSetChecked("uiViewFreitag", option & 16);
-			jslSetChecked("uiViewSamstag", option & 32);
-			jslSetChecked("uiViewSonntag", option & 64);
-			break;	
-	}
+	uiSetOption( jslGetValue( "uiPostAlarmOption"));
 	OnActiv();
 }
 function uiDoSave() {
@@ -57,21 +38,7 @@
 		if (Number(m)<0 || Number(m)>59) {alert(g_mldMinuten); return;}
 		jslSetValue("uiPostZeit", ZweistelligeNummer(Number(h))+ZweistelligeNummer(Number(m)));
 		jslCopyValue("uiPostNummer", "uiViewNr");
-		var option = 0;
-		if (jslGetChecked("uiViewAlarmOption1")) {
-			option = 0;
-		} else if (jslGetChecked("uiViewAlarmOption2")) {
-			option = 127;
-		} else {
-			if (jslGetChecked("uiViewMontag")) option += 1;
-			if (jslGetChecked("uiViewDienstag")) option += 2;
-			if (jslGetChecked("uiViewMittwoch")) option += 4;
-			if (jslGetChecked("uiViewDonnerstag")) option += 8;
-			if (jslGetChecked("uiViewFreitag")) option += 16;
-			if (jslGetChecked("uiViewSamstag")) option += 32;
-			if (jslGetChecked("uiViewSonntag")) option += 64;
-		}
-		jslSetValue( "uiPostAlarmOption", option);
+		jslSetValue( "uiPostAlarmOption", g_AlarmOptionValue);
 		jslEnable("uiPostZeit");
 		jslEnable("uiPostNummer");
 		jslEnable( "uiPostAlarmOption");
@@ -88,28 +55,28 @@
 }
 function OnActiv() {
 	var b = jslGetChecked("uiViewActive");
-	var c = jslGetChecked("uiViewAlarmOption3");
 	jslSetEnabled("uiViewHour", b);
 	jslSetEnabled("uiViewMin", b);
 	jslSetEnabled("uiViewNr", b);
 	jslSetEnabled("uiViewAlarmOption1", b);
 	jslSetEnabled("uiViewAlarmOption2", b);
 	jslSetEnabled("uiViewAlarmOption3", b);
-	jslSetEnabled("uiViewMontag", b && c);
-	jslSetEnabled("uiViewDienstag", b && c);
-	jslSetEnabled("uiViewMittwoch", b && c);
-	jslSetEnabled("uiViewDonnerstag", b && c);
-	jslSetEnabled("uiViewFreitag", b && c);
-	jslSetEnabled("uiViewSamstag", b && c);
-	jslSetEnabled("uiViewSonntag", b && c);
+	jslSetEnabled("uiViewAlarmOption4", b);
 }
 function FillId (id, wert) {
+	var name = jslGetValue("uiPostFon0");
+	if (name.length == 0) name = g_Fon1;
+	jslAddOption(id, "1", name, false);
+	name = jslGetValue("uiPostFon1");
+	if (name.length == 0) name = g_Fon2;
+	jslAddOption(id, "2", name, false);
 	jslAddOption(id, "50", g_txtIsdn, false);
 	for (var i=1; i<9; i++) {
 		name = jslGetValue("uiPostIsdnNumber"+i);
 		if (name.length > 0) jslAddOption(id, "5"+i, jslGetValue("uiPostIsdn"+i), false);
 	}
-	jslSetSelection(id, "50");
+	jslAddOption(id, "9", g_alleTelefone, false);
+	jslSetSelection(id, "9");
 	jslSetSelection(id, wert);
 }
 function ZweistelligeNummer (n) {
@@ -117,19 +84,12 @@
 	return "0"+n.toString();
 }
 function uiSetOption(n) {
-	jslSetChecked("uiViewAlarmOption1", n==0);
-	jslSetChecked("uiViewAlarmOption2", n==1);
-	jslSetChecked("uiViewAlarmOption3", n==2);
-	jslSetEnabled("uiViewMontag", n==2);
-	jslSetEnabled("uiViewDienstag", n==2);
-	jslSetEnabled("uiViewMittwoch", n==2);
-	jslSetEnabled("uiViewDonnerstag", n==2);
-	jslSetEnabled("uiViewFreitag", n==2);
-	jslSetEnabled("uiViewSamstag", n==2);
-	jslSetEnabled("uiViewSonntag", n==2);
-}
-function DoTabs(n) {
-	jslSetValue("uiPostWeckernr", n);
-	jslGoTo("", "wecker");
+	n = n & 127;
+	if ((n!=0) && (n!=127) && (n!=31) && (n!=96)) n = 0;
+	jslSetChecked("uiViewAlarmOption1", (n==0));
+	jslSetChecked("uiViewAlarmOption2", (n==127));
+	jslSetChecked("uiViewAlarmOption3", (n==31));
+	jslSetChecked("uiViewAlarmOption4", (n==96));
+	g_AlarmOptionValue = n;
 }
 </script>
diff -burN usr/www/all/html/de/FRITZ!Box_Anrufliste.csv usr/www/all/html/de/FRITZ!Box_Anrufliste.csv
--- usr/www/all/html/de/FRITZ!Box_Anrufliste.csv	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/FRITZ!Box_Anrufliste.csv	2006-12-13 17:03:02.000000000 +0100
@@ -1,4 +1,3 @@
-sep=;
 Typ;Datum;Name;Rufnummer;Nebenstelle;Eigene Rufnummer;Dauer
-<? multiquerytext telcfg:settings/Journal/list(Type,Date,Number,Port,Duration,Route,RouteType,Name) `$2;$3;$9;$4;<? if eq $5 0 `<? querytext telcfg:settings/MSN/Port0/Name ?>` `<? if eq $5 1 `<? querytext telcfg:settings/MSN/Port1/Name ?>` `<? if eq $5 2 `<? querytext telcfg:settings/MSN/Port2/Name ?>` `<? if eq $5 3 `Durchwahl` `<? if eq $5 4 `FON S0` `<? if eq $5 5 `Fon/Fax PC` `<? if eq $5 6 `Anrufbeantworter` `<? if eq $5 36 `DATA S0` `<? if eq $5 37 `DATA PC` ?>` ?>` ?>` ?>` ?>` ?>` ?>` ?>` ?>;<? if eq $8 1 `Internet: <? multiquery sip:settings/sip/list(displayname,ID) `<? if eq $7 $23 `$22` ?>` ?>` `<? if eq `$7` `` `Festnetz` `$7` ?>` ?>;$6
+<? multiquerytext telcfg:settings/Journal/list(Type,Date,Number,Port,Duration,Route,RouteType,Name) `$2;$3;$9;$4;<? if eq $5 0 `<? querytext telcfg:settings/MSN/Port0/Name ?>` `<? if eq $5 1 `<? querytext telcfg:settings/MSN/Port1/Name ?>` `<? if eq $5 2 `<? querytext telcfg:settings/MSN/Port2/Name ?>` `<? if eq $5 3 `Durchwahl` `<? if eq $5 4 `FON S0` `<? if eq $5 36 `DATA S0` ?>` ?>` ?>` ?>` ?>` ?>;<? if eq $8 1 `Internet: <? multiquery sip:settings/sip/list(displayname,ID) `<? if eq $7 $23 `$22` ?>` ?>` `<? if eq `$7` `` `Festnetz` `$7` ?>` ?>;$6
 ` ?>
diff -burN usr/www/all/html/de/help/hilfe_dyndns.html usr/www/all/html/de/help/hilfe_dyndns.html
--- usr/www/all/html/de/help/hilfe_dyndns.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/help/hilfe_dyndns.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,6 +1,8 @@
 <div class="Hilfe">
  	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">Dynamic DNS</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<p><b>Hinweis:</b> Diese Seite ist nur verfügbar, wenn die Option &quot;Experteneinstellungen anzeigen&quot; aktiviert wurde. Diese Option finden Sie 
+		unter dem Menüpunkt &quot;System/Ansicht&quot;.</p>
 		<p>Dynamic DNS ist ein Internetdienst, der es ermöglicht, dass die <? echo $var:BoxName ?> immer unter einem feststehenden Namen aus dem Internet erreichbar 
 		ist, obwohl sich die öffentliche IP-Adresse der <? echo $var:BoxName ?> mit jeder Interneteinwahl ändert. </p>
 		<p>Um diesen Dienst nutzen zu können, müssen Sie sich bei einem Dynamic DNS-Anbieter registrieren. Dabei vereinbaren Sie den feststehenden 
@@ -80,7 +82,7 @@
 		müssen, müssen in der Update-URL der <? echo $var:BoxName ?> folgendermaßen gekennzeichnet werden:</p>
 		<table>
 			<tr>
-				<td valign="TOP">&lt;b64&gt;hier stehen die zu codierenden Angaben&lt;/b64&gt;</td>
+				<td valign="TOP">&lt;base64&gt;hier stehen die zu codierenden Angaben&lt;/base64&gt;</td>
 			</tr>
 		</table>
 		<p><b>Beispiele</b></p>
diff -burN usr/www/all/html/de/help/hilfe_fon_anrufliste.html usr/www/all/html/de/help/hilfe_fon_anrufliste.html
--- usr/www/all/html/de/help/hilfe_fon_anrufliste.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/help/hilfe_fon_anrufliste.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,7 +1,7 @@
 <div class="Hilfe">
  	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">Anrufliste</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p>In der Anrufliste werden alle erfolgreich ausgehenden und alle einkommenden Anrufe erfasst.</p>
+		<p>In der Anrufliste werden alle erfolgreich ausgehenden und alle eingehenden Anrufe erfasst.</p>
 		<p><b>Anrufliste</b></p>
 		<p>Die Spalten in der Anrufliste haben folgende Bedeutung:</p>
 		<table>
@@ -14,14 +14,20 @@
 				<td valign="TOP">Hier wird der genaue Zeitpunkt (Datum und Uhrzeit) angegeben, zu dem der Anruf ein- beziehungsweise ausging.</td>
 			</tr>
 			<tr>
-				<td width="180px" valign="TOP">Name/Rufnummer</td>
-				<td valign="TOP">Hier wird bei ausgehenden Rufen die Zielrufnummer angezeigt. Einkommende Rufen werden mit Rufnummer angezeigt, wenn die Anrufer die 
-				Rufnummerübermittlung aktiviert haben. Anrufer, die in Ihrem Telefonbuch erfasst sind, werden hier namentlich angezeigt. Ist die Rufummer 
-				blau gefärbt, können Sie diese Rufnummer anwählen, indem Sie auf den Listeneintrag klicken.</td>
+				<td width="180px" valign="TOP">Rufnummer/Name</td>
+				<td valign="TOP">Hier wird bei ausgehenden Rufen die Zielrufnummer angezeigt. Einkommende Rufe werden mit Rufnummer angezeigt, wenn die Anrufer 
+				die Rufnummerübermittlung aktivert haben. Anrufer, die in Ihrem Telefonbuch erfasst sind, werden hier namentlich angezeigt. 
+				Ist die Rufummer blau gefärbt, können Sie den Teilnehmer mit einem Klick auf den Listeneintrag anwählen.</td>
+			</tr>
+			<tr>
+				<td width="180px" valign="TOP">Nebenstelle</td>
+				<td valign="TOP">Hier wird bei ausgehenden Rufen die Nebenstelle angezeigt, von der der Anruf ausging. Bei eingehenden Rufen wird hier angezeigt, 
+				welche Nebenstelle angerufen wurde.</td>
 			</tr>
 			<tr>
 				<td width="180px" valign="TOP">Eigene Rufnummer</td>
-				<td valign="TOP">Hier wird bei ausgehenden und einkommenden Anrufen die Verbindungsart angezeigt sowie die eigene Rufnummer, über die der Anruf erfolgt ist.</td>
+				<td valign="TOP">Hier wird bei ausgehenden und eingehenden Anrufen die Verbindungsart angezeigt sowie die eigene Rufnummer, über die der Anruf 
+				erfolgt ist.</td>
 			</tr>
 			<tr>
 				<td width="180px" valign="TOP">Dauer</td>
@@ -31,19 +37,19 @@
 		<p><b>Schaltflächen</b></p>
 		<table>
 			<tr style="vertical-align:top;">
-				<td style="width=180px;">Sichern</td>
+				<td width=180px>Sichern</td>
 				<td>Sichert die Anrufliste in eine Datei. <br />
 				Der Download-Dialog Ihres Browsers wird geöffnet und Sie können die Anrufliste als Textdatei im CSV-Format speichern. Die Textdatei 
-				können Sie dann mit einer geeigneten Anwendung, beispielweise einem Tabellenkalkulationsprogramm, öffnen und für statistische Zwecke 
-				auswerten. Wenn Sie im Download-Dialog keine Bezeichnung für die Datei vergeben, dann wird Sie mit der Bezeichnung &quot;FRITZ!Box_Anrufliste.csv&quot; 
+				können Sie dann mit einer geeigneten Anwendung, beispielweise einem Tabellenkalkulationsprogramm, öffnen und für statistische 
+				Zwecke auswerten. Wenn Sie im Download-Dialog keine Bezeichnung für die Datei vergeben, dann wird Sie mit der Bezeichnung &quot;FRITZ!Box_Anrufliste.csv&quot; 
 				gespeichert.</td>
 			</tr>
 			<tr style="vertical-align:top;">
-				<td style="width=180px;">Liste löschen</td>
+				<td width=180px>Liste löschen</td>
 				<td>Löscht die Anrufliste</td>
 			</tr>
 			<tr style="vertical-align:top;">
-				<td style="width=180px;">Aktualisieren</td>
+				<td width=180px>Aktualisieren</td>
 				<td>Aktualisiert die Anzeige der Anrufliste</td>
 			</tr>
 		</table>
diff -burN usr/www/all/html/de/help/hilfe_fon_editdect.html usr/www/all/html/de/help/hilfe_fon_editdect.html
--- usr/www/all/html/de/help/hilfe_fon_editdect.html	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/help/hilfe_fon_editdect.html	2007-04-06 00:19:50.000000000 +0200
@@ -0,0 +1,19 @@
+<div class="Hilfe">
+ 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">Mobilteile</div></div></div></div></div></div>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<p>Bis zu sechs DECT-Telefone, können mit der FRITZ!Box verbunden werden. </p>
+		<p>In der Tabelle werden Ihnen die DECT-Telefone angezeigt, die bereits mit der FRITZ!Box verbunden sind. Über 
+		die Schaltflächen am rechten Tabellenrand können Sie registrierte DECT-Telefone abmelden.</p>
+		<p>Nur bei DECT-Telefonen mit dem Zusatzmerkmal &quot;Swissvoice/GAP&quot; können die erweiterten Einstellungen, u.a. für den Anrufbeantworter und die 
+		Rufnummernzuordnung, vom Mobilteil aus vorgenommen werden.</p>
+		<h4>Schaltfläche &quot;Mobilteil anmelden&quot;</h4>
+		<p>Um ein neues DECT-Telefon an der FRITZ!Box anzumelden, klicken Sie auf die Schaltfläche &quot;Mobilteil anmelden&quot;. Am DECT-Telefon müssen Sie
+		zur Registrierung die System-PIN (in der Werkseinstellung &quot;0000&quot;) eingeben.</p>
+		<h4>Schaltfläche &quot;Mobilteile pagen&quot;</h4>
+		<p>Über diese Schaltfläche können Sie alle mit der FRITZ!Box verbundene DECT-Telefonen durch einen internen Anruf lokalisieren.</p>
+		<h4>Schaltfläche &quot;Datum und Uhrzeit setzen&quot;</h4>
+		<p>Über diese Schaltfläche können Sie auf den angemeldeten DECT-Telefonen das aktuelle Datum und die Uhrzeit der FRITZ!Box setzen (z.B. nach einem 
+		Akkuwechsel am Mobilteil).</p>
+	</div></div></div></div></div></div>
+	<? include ../html/$var:lang/help/rback.html ?>
+</div>
diff -burN usr/www/all/html/de/help/hilfe_fon_festnetz.html usr/www/all/html/de/help/hilfe_fon_festnetz.html
--- usr/www/all/html/de/help/hilfe_fon_festnetz.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/help/hilfe_fon_festnetz.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,9 +1,10 @@
 <div class="Hilfe">
  	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">Festnetzrufnummern</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p>Auf dieser Seite tragen Sie die Rufnummern Ihres Festnetzanschlusses in die FRITZ!Box ein.</p>
+		<p>Auf dieser Registerkarte tragen Sie die Rufnummern Ihres Festnetzanschlusses in die FRITZ!Box ein.</p>
 		<ol>
-			<li>Tragen Sie Ihre ISDN-Rufnummern in die dafür vorgesehenen Felder ein.</li>
+			<li>Wählen Sie die Art Ihres Festnetzanschlusses aus.</li>
+			<li>Tragen Sie Ihre ISDN-Rufnummern oder die Rufnummer Ihres analogen Anschlusses in die dafür vorgesehenen Felder ein.</li>
 			<li>Klicken Sie auf die Schaltfläche &quot;Übernehmen&quot;, damit die Rufnummern in der FRITZ!Box eingetragen werden.</li>
 		</ol>
 	</div></div></div></div></div></div>
diff -burN usr/www/all/html/de/help/hilfe_fon_fon1dect.html usr/www/all/html/de/help/hilfe_fon_fon1dect.html
--- usr/www/all/html/de/help/hilfe_fon_fon1dect.html	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/help/hilfe_fon_fon1dect.html	2007-04-06 00:19:50.000000000 +0200
@@ -0,0 +1,19 @@
+<div class="Hilfe">
+ 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">Mobilteile</div></div></div></div></div></div>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<p>Bis zu sechs DECT-Telefone, können mit der FRITZ!Box verbunden werden. </p>
+		<p>In der Tabelle werden Ihnen die DECT-Telefone angezeigt, die bereits mit der FRITZ!Box verbunden sind. Über 
+		die Schaltflächen am rechten Tabellenrand können Sie registrierte DECT-Telefone abmelden.</p>
+		<p>Nur bei DECT-Telefonen mit dem Zusatzmerkmal &quot;Swissvoice/GAP&quot; können die erweiterten Einstellungen, u.a. für den Anrufbeantworter und die 
+		Rufnummernzuordnung, vom Mobilteil aus vorgenommen werden.</p>
+		<h4>Schaltfläche &quot;Mobilteil anmelden&quot;</h4>
+		<p>Um ein neues DECT-Telefon an der FRITZ!Box anzumelden, klicken Sie auf die Schaltfläche &quot;Mobilteil anmelden&quot;. Am DECT-Telefon müssen Sie
+		zur Registrierung die System-PIN (in der Werkseinstellung &quot;0000&quot;) eingeben.</p>
+		<h4>Schaltfläche &quot;Mobilteile pagen&quot;</h4>
+		<p>Über diese Schaltfläche können Sie alle mit der FRITZ!Box verbundene DECT-Telefonen durch einen internen Anruf lokalisieren.</p>
+		<h4>Schaltfläche &quot;Datum und Uhrzeit setzen&quot;</h4>
+		<p>Über diese Schaltfläche können Sie auf den angemeldeten DECT-Telefonen das aktuelle Datum und die Uhrzeit der FRITZ!Box setzen (z.B. nach einem 
+		Akkuwechsel am Mobilteil).</p>
+	</div></div></div></div></div></div>
+	<? include ../html/$var:lang/help/rback.html ?>
+</div>
diff -burN usr/www/all/html/de/help/hilfe_fon_merkmale.html usr/www/all/html/de/help/hilfe_fon_merkmale.html
--- usr/www/all/html/de/help/hilfe_fon_merkmale.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/help/hilfe_fon_merkmale.html	2006-12-13 17:03:02.000000000 +0100
@@ -3,13 +3,9 @@
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<p>Auf dieser Seite können Sie für die ausgewählte Nebenstelle Komfort- und Leistungsmerkmale aktivieren, die dann an der Nebenstelle zur Verfügung 
 		stehen.</p>
-		<ol>
-			<li>Markieren Sie zunächst welches Endgerät (Telefon, Anrufbeantworter, Faxgerät) an der Nebenstelle angeschlossen ist,um die Nebenstelle 
-			für das angeschlossene Endgerät zu optimieren. So ist zum Beispiel sichergestellt, dass auch Faxübertragungen über eine Internettelefonie-Verbindung 
-			korrekt übertragen werden.</li>
-			<li>Aktivieren Sie dann die Komfort- und Leistungsmerkmale, die Sie an der Nebenstelle nutzen wollen.</li>
-			<li>Klicken Sie abschließend auf die Schaltfläche &quot;Übernehmen&quot;, um die Einstellungen in der FRITZ!Box zu speichern.</li>
-		</ol>
+		<p>Markieren Sie zunächst welches Endgerät (Telefon, Anrufbeantworter, Faxgerät) an der Nebenstelle angeschlossen ist. Aktivieren Sie anschließend 
+		die Komfort- und Leistungsmerkmale, die Sie an der Nebenstelle nutzen wollen. <br />
+		Klicken Sie abschließend auf die Schaltfläche &quot;Übernehmen&quot;, um die Einstellungen in der FRITZ!Box zu speichern.</p>
 		<h2>Aktivieren Sie die gewünschten Komfort- und Leistungsmerkmale</h2>
 		<ul>
 			<li>Spontane Amtsholung aktivieren
@@ -35,7 +31,7 @@
 			</li>
 			<li>Ruf abweisen bei besetzt (Busy on busy)
 			<p>Wenn die Funktion &quot;Rufe abweisen bei Besetzt&quot; aktiviert ist und an der Nebenstelle ein Gespräch geführt wird, dann werden weitere Anrufe 
-			für diese Nebenstelle nicht entgegengenommen. Die Anrufer erhalten das Besetztzeichen. Dies ist auch dann der Fall, wenn die Rufnummer, 
+			für diese Nebenstelle nicht entgegengenommen. Die Anrufer erhalten das Besetztzeichen. Dies ist auch dann der Fall, wenn die Mehrfachrufnummer, 
 			die der Anrufer gewählt hat, auch an der anderen Nebenstelle gültig ist. Der Anruf wird an der anderen Nebenstelle nicht signalisiert.
 			<br />
 			<b>Hinweis:</b> Bitte beachten Sie, dass für diese automatische Funktion der Anklopfschutz (siehe nächste Einstellung) eingeschaltet sein 
diff -burN usr/www/all/html/de/help/hilfe_fon_neue_rufumleitung.html usr/www/all/html/de/help/hilfe_fon_neue_rufumleitung.html
--- usr/www/all/html/de/help/hilfe_fon_neue_rufumleitung.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/help/hilfe_fon_neue_rufumleitung.html	2006-12-13 17:03:02.000000000 +0100
@@ -21,7 +21,7 @@
 			<li>Zielrufnummer <br>
 			Geben Sie im Feld &quot;Zielrufnummer&quot; die Rufnummer ein, an die der Anruf weitergeleitet soll. </li>
 			<li>Art der Umleitung <br>
-			Wählen Sie in der Liste &quot;Art der Umleitung&quot; aus, wie der Anruf umgeleitet werden soll. </li>
+			Wählen Sie in der Liste &quot;Art der Umleitung&quot; aus wie der Anruf umgeleitet werden soll. </li>
 			<li>Klicken Sie abschließend auf &quot;Übernehmen&quot;, damit die Einstellungen in der FRITZ!Box gespeichert werden.</li>
 		</ol>
 	</div></div></div></div></div></div>
diff -burN usr/www/all/html/de/help/hilfe_fon_setupdect.html usr/www/all/html/de/help/hilfe_fon_setupdect.html
--- usr/www/all/html/de/help/hilfe_fon_setupdect.html	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/help/hilfe_fon_setupdect.html	2007-04-05 23:56:26.000000000 +0200
@@ -0,0 +1,21 @@
+<div class="Hilfe">
+ 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">Rufnummernzuordnung</div></div></div></div></div></div>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<p>DECT-Telefonen, die mit der FRITZ!Box verbunden sind, können Sie bis zu fünf Rufnummern (MSN A bis E) zuweisen. </p>
+		<p>Rufnummern, die einem Mobilteil zugeordnet werden können, sind </p>
+		<ul>
+			<li>Internetrufnummern, die im Menü &quot;Internettelefonie&quot; eingerichtet wurden.</li>
+			<li>Festnetzrufnummer(n) eines vorhandenen Analog- oder ISDN-Telefonanschlusses.</li>
+			<li>Unter &quot;Interne Nummern&quot; eingerichtete interne Rufnummern der DECT-Telefone.</li>
+		</ul>
+		<p></p>
+		<h4>Schaltfläche &quot;Neue Zuordnung&quot</h4>
+		<p>Um eine Rufnummer einem DECT-Telefon zuzuweisen, klicken Sie auf die Schaltfläche &quot;Neue Zuordnung&quot;.</p>
+		<p>In der Tabelle werden Ihnen die Rufnummern (MSN A bis E) angezeigt, die schon einem DECT-Telefon zugeordnet sind. Die Tabelleneinträge können Sie über 
+		die Schaltflächen am rechten Tabellenrand verändern oder löschen.</p>
+		<h4>Option &quot;Auf alle Rufnummern reagieren&quot;</h4>
+		<p>Über diese Option weisen Sie die DECT-Telefone an, auf eingehende Anrufe an allen Rufnummern zu reagiern. Durch das Setzen dieser Option 
+		werden bereits eingerichtete Rufnummernzuordnungen gelöscht.</p>
+	</div></div></div></div></div></div>
+	<? include ../html/$var:lang/help/rback.html ?>
+</div>
diff -burN usr/www/all/html/de/help/hilfe_fon_sperre.html usr/www/all/html/de/help/hilfe_fon_sperre.html
--- usr/www/all/html/de/help/hilfe_fon_sperre.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/help/hilfe_fon_sperre.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,11 +1,15 @@
 <div class="Hilfe">
  	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">Rufsperre</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p>Auf dieser Seite können Sie Rufnummern für ausgehende oder einkommende Rufe sperren. Damit können Sie ungewollte Verbindungen zu Sonderrufnummern 
-		wie z. B. &quot;0900&quot; verhindern oder einkommende Rufe unerwünschter Anrufer blockieren.</p>
-		<p>In einer Tabelle werden hier die gesperrten Rufnummern angezeigt.<br />
-		Über die Schaltflächen am rechten Tabellenrand, können Sie eingerichtete Rufsperren löschen oder zum Bearbeiten öffnen.</p>
-		<p>Um eine neue Rufsperre einzurichten, klicken Sie auf die Schaltfläche &quot;Neue Rufsperre&quot;. </p>
+		<p>Auf dieser Seite werden Rufsperren in der &quot;Liste der Rufsperren&quot; angezeigt. Sie können Rufsperren für einkommende und ausgehende Rufe einrichten. 
+		Damit verhindern Sie ungewollte Verbindungen zu Sonderrufnummern wie z. B. &quot;0900&quot; oder blockieren einkommende Rufe unerwünschter Anrufer.</p>
+		<p>Über die Schaltflächen am rechten Tabellenrand, können Sie eingerichtete Rufsperren löschen oder zum Bearbeiten öffnen.</p>
+		<p>Um eine neue Rufsperre einzurichten, klicken Sie auf die Schaltfläche &quot;Neue Rufsperre&quot;. <br>
+		Wählen Sie aus dem Ausklappmenü, ob die Rufsperre für ausgehende oder einkommende Rufe eingerichtet werden soll. <br>
+		Tragen Sie im Feld &quot;Rufnummer / Bereich&quot; eine vollständige Rufnummer oder einen Rufnummernbereich wie z. B. &quot;0900&quot; ein. Wenn Sie im Feld &quot;Rufnummer 
+		/ Bereich&quot; keinen Eintrag machen, dann können Sie in Verbindung mit der Rufart &quot;einkommende Rufe&quot; alle einkommenden Rufe ohne Rufnummernübermittlung 
+		abweisen. </p>
+		<p>Klicken Sie abschließend auf die Schaltfläche &quot;Übernehmen&quot;, um die Änderungen der Einstellungen zu übernehmen.</p>
 	</div></div></div></div></div></div>
 	<? include ../html/$var:lang/help/rback.html ?>
 </div>
diff -burN usr/www/all/html/de/help/hilfe_neueportfreigabe.html usr/www/all/html/de/help/hilfe_neueportfreigabe.html
--- usr/www/all/html/de/help/hilfe_neueportfreigabe.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/help/hilfe_neueportfreigabe.html	2006-12-13 17:03:02.000000000 +0100
@@ -7,8 +7,8 @@
 			<li>Überprüfen Sie im Feld &quot;an IP-Adresse&quot; die IP-Adresse.</li>
 			<li>Klicken Sie abschließend auf &quot;Übernehmen&quot;.</li>
 		</ol>
-		<p>Wenn Sie eine Anwendung, die nicht in der Liste vorhanden ist, oder einen ganzen Portbereich freigeben möchten, dann gehen Sie folgendermaßen 
-		vor:</p>
+		<p>Wenn Sie eine Anwendung freigeben möchten, die nicht in der Liste vorhanden ist oder Sie möchten einen ganzen Portbereich freigeben, 
+		dann gehen Sie folgendermaßen vor:</p>
 		<ol>
 			<li>Wählen Sie den in der Liste &quot;Portfreigabe aktiv für&quot; den Eintrag &quot;Andere Anwendungen&quot;aus.</li>
 			<li>Geben Sie im Feld &quot;Bezeichnung&quot; einen beschreibenden Namen für die Anwendung ein, die Sie als Serveranwendung zur Verfügung 
diff -burN usr/www/all/html/de/help/hilfe_status.html usr/www/all/html/de/help/hilfe_status.html
--- usr/www/all/html/de/help/hilfe_status.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/help/hilfe_status.html	2006-12-13 17:03:02.000000000 +0100
@@ -17,78 +17,61 @@
 				<td valign="TOP">Zeigt an, ob USB-Geräte am Anschluss für USB-Zubehör angeschlossen sind.</td>
 			</tr>
 			<tr>
-				<td valign="TOP">LAN</td>
-				<td valign="TOP">Zeigt an, ob Computer am Netzwerkanschluss &quot;LAN&quot; der FRITZ!Box angeschlossen sind.</td>
+				<td valign="TOP">LAN 1</td>
+				<td valign="TOP">Zeigt an, ob Computer am Netzwerkanschluss &quot;LAN 1&quot; der FRITZ!Box angeschlossen sind.</td>
+			</tr>
+			<tr>
+				<td valign="TOP">LAN 2</td>
+				<td valign="TOP">Zeigt an, ob Computer am Netzwerkanschluss &quot;LAN 2&quot; der FRITZ!Box angeschlossen sind.</td>
+			</tr>
+			<tr>
+				<td valign="TOP">LAN 3</td>
+				<td valign="TOP">Zeigt an, ob Computer am Netzwerkanschluss &quot;LAN 3&quot; der FRITZ!Box angeschlossen sind.</td>
+			</tr>
+			<tr>
+				<td valign="TOP">LAN 4</td>
+				<td valign="TOP">Zeigt an, ob Computer am Netzwerkanschluss &quot;LAN 4&quot; der FRITZ!Box angeschlossen sind.</td>
 			</tr>
 			<tr>
 				<td valign="TOP">WLAN</td>
 				<td valign="TOP">Zeigt an, ob die WLAN-Funktion der FRITZ!Box aktiviert ist.</td>
 			</tr>
 		</table>
-		<p><br/>Der Bereich &quot;Internet und Telefonie&quot; wird mit den folgenden Informationen angezeigt:</p>
-<? setvariable var:showIpDirekt 0 ?>
-<? setvariable var:showDslModem 0 ?>
-<? setvariable var:showDslRouter 0 ?>
-<? if eq '<? query sar:settings/encapsulation ?>' 'dslencap_ether' `<? setvariable var:showIpDirekt 1 ?>` ?>
-<? if eq '<? query sar:settings/encapsulation ?>' 'dslencap_ipnlpid' `<? setvariable var:showIpDirekt 1 ?>` ?>
-<? if eq '<? query sar:settings/encapsulation ?>' 'dslencap_ipsnap' `<? setvariable var:showIpDirekt 1 ?>` ?>
-<? if eq '<? query sar:settings/encapsulation ?>' 'dslencap_ipraw' `<? setvariable var:showIpDirekt 1 ?>` ?>
-<? if eq $var:showIpDirekt 0 `
-<? if eq '<? query connection0:settings/type ?>' 'bridge' `<? setvariable var:showDslModem 1 ?>` `<? setvariable var:showDslRouter 1 ?>` ?>
+		<p>Wenn die FRITZ!Box allen angeschlossenen Computern eine Internetverbindung bereit stellt (Router), dann wird der Bereich &quot;Internetverbindung&quot; 
+		mit den folgenden Informationen angezeigt:</p>
+<? setvariable var:showstun 0 ?>
+<? if eq $var:isDsl 0 `<? setvariable var:showstun 1 ?>` ?>
+<? if eq $var:isAta 1 `
+<? if eq <? query box:settings/ata_mode ?> 1 `<? setvariable var:showstun 1 ?>` ?>
 ` ?>
-		<!-- encapsulation = <? query sar:settings/encapsulation ?>, connection = <? query connection0:settings/type ?> -->
+		<!-- isDsl = <? echo $var:isDsl ?>, isAta = <? echo $var:isDsl ?>, AtaMode = <? query box:settings/ata_mode ?> -->
 		<table width="100%">
-<? if eq $var:showDslRouter 1 `
-			<!-- START anzeigen, wenn die Box als DSL-Router betrieben wird oder an einem externen DSL-Modem angeschlossen ist-->
+<? if eq $var:showstun 0 `
 			<tr>
-				<td valign="TOP" width="150px">Internet</td>
-				<td valign="TOP">Zeigt an, ob eine Internetverbindung aufgebaut ist.<br />
-				Bei einer aufgebauten Internetverbindung werden zusätzlich die Dauer der Verbindung und die vom Internetanbieter zugewiesene IP-Adresse 
-				angezeigt.</td>
+				<td valign="TOP">Status</td>
+				<td valign="TOP">Zeigt an, ob eine Internetverbindung aufgebaut ist oder nicht.</td>
 			</tr>
-			<!-- ENDE anzeigen, wenn Box als DSL-Router betrieben wird oder an einem externen DSL-Modem angeschlossen ist -->
-` ?>
-<? if eq $var:showIpDirekt 1 `
-			<!-- START anzeigen, wenn die Box eine direkte IP-Verbindung zu einem Internetanbieter benutzt -->
 			<tr>
-				<td valign="TOP" width="150px">Internet</td>
-				<td valign="TOP">Die FRITZ!Box benutzt eine direkte IP-Verbindung zu einem Internetanbieter.</td>
+				<td valign="TOP" width="150px">IP-Adresse</td>
+				<td valign="TOP">Zeigt die vom Internetanbieter zugewiesene IP-Adresse an.</td>
 			</tr>
-			<!-- ENDE anzeigen, wenn die Box eine direkte IP-Verbindung zu einem Internetanbieter benutzt -->
-` ?>
-<? if eq $var:showDslModem 1 `
-			<!-- START anzeigen, wenn die FRITZ!Box als DSL-Modem betrieben wird -->
 			<tr>
-				<td valign="TOP" width="150px">Internet</td>
-				<td valign="TOP">Die FRITZ!Box verfügt nicht über Zugangsdaten zu einem Internetanbieter. Das heißt, in der FRITZ!Box sind keine Zugangsdaten 
-				für einen Internetanbieter eingetragen und somit arbeitet die FRITZ!Box wie ein DSL-Modem.</td>
+				<td valign="TOP">Grund des Verbindungsabbaus</td>
+				<td valign="TOP">Wenn keine Internetverbindung besteht, wird hier angezeigt, warum die Verbindung abgebaut wurde.</td>
 			</tr>
-			<!-- ENDE anzeigen, wenn die FRITZ!Box als DSL-Modem betrieben wird -->
 ` ?>
-			<!-- START anzeigen, wenn es sich um eine Box mit Fon handelt-->
+<? if eq $var:showstun 1 `
 			<tr>
-				<td valign="TOP">Telefonie</td>
-				<td valign="TOP">Die Anzeige &quot;Telefonie&quot; ist nur dann zu sehen, wenn Sie keine Anmeldedaten für einen Internettelefonieanbieter in der 
-				FRITZ!Box eingetragen haben.</td>
-			</tr>
-			<tr>
-				<td valign="TOP">Internetrufnummer</td>
-				<td valign="TOP">Mit der Anzeige &quot;Internetrufnummer&quot; wird jede Internetrufnummer, die Sie in der FRITZ!Box eingetragen haben, hier angezeigt. 
-				Die Leuchtdiode zeigt an, ob eine Internetverbindung für die Internettelefonie verfügbar ist.
-<? if eq $var:showDslModem 1 `
-				<!-- START anzeigen, wenn die FRITZ!Box als DSL-Modem betrieben wird --><br />
-				<b>Hinweis: </b>Die FRITZ!Box ist momentan als DSL-Modem eingerichtet. Somit ist für die FRITZ!Box selbst keine Internetverbindung verfügbar. 
-				Sie können eine Internetrufnummer nur dann zum Telefonieren über das Internet nutzen, wenn für die FRITZ!Box eine Internetverbindung 
-				verfügbar ist.<br />
-				Wenn Sie die Zugangsdaten eines Internetanbieters in die FRITZ!Box eintragen und die FRITZ!Box dadurch als DSL-Router einrichten, dann 
-				ist die Internetverbindung auch für die FRITZ!Box verfügbar.
-				<!-- ENDE anzeigen, wenn die FRITZ!Box als DSL-Modem betrieben wird -->
-` ?>
-				</td>
+				<td valign="TOP" width="150px">IP-Adresse</td>
+				<td valign="TOP">Zeigt die IP-Adresse an, mit der die FRITZ!Box innerhalb des lokalen Netzwerks, in das sie integriert ist, erreichbar ist.</td>
 			</tr>
-			<!-- ENDE anzeigen, wenn es sich um eine Box mit Fon handelt-->
+` ?>
 		</table>
-		<p>Über die Schaltfläche &quot;Aktualisieren&quot; können die angezeigten Informationen jederzeit aktualisiert werden. </p>
+		<p>Im Bereich &quot;Internettelefonie&quot; wird Ihnen angezeigt, ob einer der Internettelefoniezugänge aktiviert ist. <br>
+		Wenn der Internettelefonie-Anbieter das Leistungsmerkmal unterstützt, dann leuchtet die INFO-LED bei vollständig über das Internet 
+		geführten Telefonaten.</p>
+		<p>Wenn das Fenster ge&ouml;ffnet ist, k&ouml;nnen die angezeigten Informationen mit Hilfe der Schaltfl&auml;che &quot;Aktualisieren&quot;
+		jederzeit aktualisiert werden.</p>
 	</div></div></div></div></div></div>
 	<? include ../html/$var:lang/help/rback.html ?>
 </div>
diff -burN usr/www/all/html/de/help/hilfe_system_nachtschaltung.html usr/www/all/html/de/help/hilfe_system_nachtschaltung.html
--- usr/www/all/html/de/help/hilfe_system_nachtschaltung.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/help/hilfe_system_nachtschaltung.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,33 +1,25 @@
 <div class="Hilfe">
 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">FRITZ!Box Nachtschaltung</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p>Mit der Funktion der Nachtschaltung können Sie die FRITZ!Box so einrichten, dass sie zu den festgelegten Zeiten einen Ruhezustand einnimmt.</p>
+		<p>Mit der Funktion der Nachtschaltung können Sie die FRITZ!Box so einrichten, dass sie zu vorgegebenen Zeiten einen Ruhezustand einnimmt.</p>
 		<h2>Nachtschaltung aktivieren</h2>
 		<p>Aktivieren Sie diese Einstellung, wenn Sie die Nachtschaltung nutzen wollen.</p>
 		<p>Tragen Sie im Feld &quot;von&quot; den Zeitpunkt ein, zu dem die Nachtschaltung eingeschaltet werden soll. Wenn Sie hier beispielsweise &quot;20:00&quot; 
 		eintragen, dann wird die Nachtschaltung jeden Tag um 20:00 Uhr eingeschaltet.<br />
 		Nach dem Einrichten der Nachtschaltung wird die Nachtschaltung das erste Mal aktiv, wenn dieser Zeitpunkt das erste Mal eintritt.</p>
-		<p>Tragen Sie im Feld &quot;bis&quot; den Zeitpunkt ein, zu dem die Nachtschaltung wieder ausgeschaltet werden soll. Wenn Sie hier beispielsweise 
-		&quot;09:00&quot; eintragen, dann wird die Nachtschaltung jeden Tag um 09:00 Uhr wieder ausgeschaltet.</p>
+		<p>Tragen Sie im Feld &quot;bis&quot; den Zeitpunkt ein, zu dem die Nachtschaltung wieder ausgeschaltet werden soll. Wenn Sie hier beispielsweise &quot;09:00&quot; 
+		eintragen, dann wird die Nachtschaltung jeden Tag um 09:00 Uhr wieder ausgeschaltet.</p>
 		<!-- START nur für Boxen mit WLAN -->
-		<h2>Funknetz (WLAN) abschalten</h2>
-		<p>Wählen Sie diese Einstellung aus, wenn während der Nachtschaltung das Funknetz abgeschaltet werden soll. <br>
+		<h2>Funknetz/WLAN abschalten</h2>
+		<p>Wählen Sie diese Einstellung aus, wenn das Funknetz während der Nachtschaltung abgeschaltet werden soll. Das Funknetz wird erst dann abgeschaltet, 
+		wenn keine Funkverbindungen mehr zwischen den WLAN-Netzwerkgeräten und der FRITZ!Box aktiv sind.<br />
 		Bei abgeschaltetem Funknetz reduziert sich der Stromverbrauch der FRITZ!Box.</p>
-		<h3>Das Funknetz wird erst dann abgeschaltet, wenn kein WLAN-Netzwerkgerät mehr aktiv ist.</h3>
-		<p>Aktivieren Sie diese Option, wenn das Funknetz erst abgeschaltet werden soll, wenn keine Funkverbindungen mehr zwischen den WLAN-Netzwerkgeräten
-		und der FRITZ!Box aktiv sind.<br />
-		<b>HINWEIS:</b> Bei eingeschaltetem WDS (WLAN-Repeater-Funktion) steht diese Einstellung nicht zur Verfügung. Wenn Sie bei aktiviertem 
-		WDS die Nachtschaltung nutzen, um das Funknetz abzuschalten, dann wird das Funknetz zum angegebenen Zeitpunkt abgeschaltet.</p>
 		<!-- ENDE nur für Boxen mit WLAN -->
-		<!-- START nur für FRITZ!Fon -->
-		<h3>WLAN während der Nachtschaltung aktivieren</h3>
-		<p>Wenn Sie während der Nachtschaltung WLAN einschalten wollen, dann drücken Sie an der Basisstation fünf Sekunden lang die Suchtaste. 
-		Sobald WLAN eingeschaltet ist, wechselt die LED-Farbe von orange nach grün. <br>
-		Um WLAN wieder auszuschalten, drücken Sie an der Basisstation erneut für fünf Sekunden die Suchtaste. Sobald WLAN ausgeschaltet ist, 
-		wechselt die LED-Farbe wieder von grün nach orange.</p>
-		<!-- ENDE nur für FRITZ!Fon -->
+		<!-- START nur für Boxen mit WLAN und Telefonie -->
+		<p>Wenn Sie während der Nachtschaltung WLAN einschalten wollen, dann geben Sie an einem Telefon, das an der FRITZ!Box angeschlossen ist, den 
+		Tastencode #96*1* ein. Um WLAN über den Tastencode wieder abzuschalten, geben Sie #96*0* ein.</p>
+		<!-- ENDE nur für Boxen mit WLAN und Telefonie -->
 		<!-- START nur für Boxen mit WLAN-Taster -->
-		<h3>WLAN-Taster</h3>
 		<p>Mit dem WLAN-Taster an der Rückseite der FRITZ!Box können Sie während der Nachtschaltung WLAN ein- und wieder ausschalten.</p>
 		<!-- ENDE nur für Boxen mit WLAN-Taster -->
 		<!-- START nur für Boxen mit Telefonie --></p>
@@ -43,7 +35,20 @@
 		<p>Sie können für jeden Telefonanschluss an der FRITZ!Box auch jeweils eine individuelle Klingelsperre einrichten. Auf diese Weise können 
 		Sie für bestimmte Telefonie-Endgeräte andere Sperrzeiten festlegen oder sie ganz von der Klingelsperre ausnehmen (z.B. Anrufbeantworter).</p>
 		<p>Die individuellen Klingelsperren werden im Menü &quot;Telefonie&quot; eingerichtet.</p>
-		<!-- ENDE nur für Boxen mit Telefonie -->
+		<p>Individuelle Klingelsperre für analoge Telefone</p>
+		<ol>
+			<li>Wählen Sie im Menüpunkt &quot;Telefonie / Nebenstellen&quot; die analoge Nebenstelle aus, für die Sie eine individuelle Klingelsperre 
+			einrichten wollen.</li>
+			<li>Klicken Sie auf die Bearbeiten-Schaltfläche.</li>
+			<li>Klicken Sie im Fenster &quot;Nebenstellen&quot; auf die Schaltfläche &quot;Merkmale der Nebenstelle&quot;.</li>
+			<li>Richten Sie im Fenster &quot;Weitere Leistungsmerkmale&quot; die individuelle Klingelsperre für die Nebenstelle ein.</li>
+		</ol>
+		<p>Individuelle Klingelsperre für ISDN-Telefone</p>
+		<ol>
+			<li>Klicken Sie im Menüpunkt &quot;Telefonie / ISDN-Endgeräte&quot; auf die Schaltfläche &quot;weitere Leistungsmerkmale&quot;.</li>
+			<li>Richten Sie im Fenster &quot;Weitere Leistungsmerkmale für ISDN-Telefone&quot; die individuelle Klingelsperre für die ISDN-Telefone ein.</li>
+		</ol>
+		<!-- ENDE nur für Boxen mit WLAN und Telefonie -->
 		<p>Klicken Sie auf die Schaltfläche &quot;Übernehmen&quot;, um die geänderten Einstellungen in der FRITZ!Box zu speichern.</p>
 	</div></div></div></div></div></div>
 	<? include ../html/$var:lang/help/rback.html ?>
diff -burN usr/www/all/html/de/help/hilfe_system_update_automatic.html usr/www/all/html/de/help/hilfe_system_update_automatic.html
--- usr/www/all/html/de/help/hilfe_system_update_automatic.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/help/hilfe_system_update_automatic.html	1970-01-01 01:00:00.000000000 +0100
@@ -1,17 +0,0 @@
-<div class="Hilfe">
-	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">Automatisches Update</div></div></div></div></div></div>
-	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p>Hier können Sie die Software Ihrer FRITZ!Box (Firmware) aktualisieren. </p>
-		<ol>
-			<li>Klicken Sie auf die Schaltfläche &quot;Neue Firmware suchen&quot;. Die FRITZ!Box prüft, ob auf dem AVM-Update-Server eine neue Firmware-Version 
-			zur Verfügung steht.</li>
-			<li>Wenn eine neue Firmware-Version gefunden wird, wird die Schaltfläche &quot;Firmware-Update jetzt starten&quot; angezeigt. Klicken Sie, um das 
-			Update zu starten.</li>
-			<li>Die neue Firmware wird jetzt auf die FRITZ!Box übertragen. Wenn die Info-LED nicht mehr blinkt, ist die Aktualisierung der Firmware 
-			abgeschlossen. </li>
-		</ol>
-		<p><b>Achtung:</b> Trennen Sie während der Durchführung des Updates nie die Verbindung zwischen Computer und FRITZ!Box und ziehen Sie nie die 
-		Netzstecker! Eine Unterbrechung des Update-Vorganges könnte die FRITZ!Box beschädigen, so dass sie unbrauchbar wird! </p>
-	</div></div></div></div></div></div>
-	<? include ../html/$var:lang/help/rback.html ?>
-</div>
diff -burN usr/www/all/html/de/help/hilfe_system_update.html usr/www/all/html/de/help/hilfe_system_update.html
--- usr/www/all/html/de/help/hilfe_system_update.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/help/hilfe_system_update.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,18 +1,13 @@
 <div class="Hilfe">
-	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">Firmware-Datei</div></div></div></div></div></div>
+	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">Firmware-Update</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p>Neben dem automatischen Update gibt es noch eine weitere Möglichkeit, die Firmware mit einer neueren Version zu aktualisieren.</p>
-		<p>Laden Sie aus dem Internet die neue Firmware auf Ihren Computer. Die momentan installierte Firmware-Version wird in diesem Fenster angezeigt. 
-		Führen Sie ein Update nur dann durch, wenn es eine neuere Firmware-Version gibt.</p>
-		<ol>
-			<li>Klicken Sie auf die Schaltfläche &quot;Durchsuchen&quot;.</li>
-			<li>Wählen Sie im Dateiauswahlfenster die Datei mit der neuen Firmware aus, die Sie zuvor auf den Computer geladen haben.</li>
-			<li>Klicken Sie auf die Schaltfläche &quot;Update starten&quot;.</li>
-			<li>Die neue Firmware wird jetzt auf die FRITZ!Box übertragen. Wenn die Info-LED nicht mehr blinkt, ist die Aktualisierung der Firmware 
-			abgeschlossen.</li>
-		</ol>
-		<p><b>Achtung:</b> Trennen Sie während der Durchführung des Updates nie die Verbindung zwischen Computer und FRITZ!Box und ziehen Sie nie die 
-		Netzstecker! Eine Unterbrechung des Update-Vorganges könnte die FRITZ!Box beschädigen, so dass sie unbrauchbar wird! </p>
+		<p>Hier können Sie die Software Ihrer Anlage (Firmware) aktualisieren. Laden Sie dazu die neue Firmware auf Ihren Computer und führen 
+		Sie dann das Update durch. <br>
+		Die aktuell benutze Version der Firmware wird in diesem Fenster angezeigt. Ein Update wird nur mit einer neueren Version der Firmware 
+		empfohlen. </p>
+		<p><b>Achtung:</b> Trennen Sie während der Durchführung des Updates nie die Verbindung zwischen Computer und <? echo $var:BoxName ?> und ziehen Sie 
+		nie die Netzstecker! Eine Unterbrechung des Update-Vorganges könnte die Firmware beschädigen, so dass die Anlage unbrauchbar wird!
+		</p>
 	</div></div></div></div></div></div>
 	<? include ../html/$var:lang/help/rback.html ?>
 </div>
diff -burN usr/www/all/html/de/help/hilfe_usb_fernanschluss.html usr/www/all/html/de/help/hilfe_usb_fernanschluss.html
--- usr/www/all/html/de/help/hilfe_usb_fernanschluss.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/help/hilfe_usb_fernanschluss.html	1970-01-01 01:00:00.000000000 +0100
@@ -1,11 +0,0 @@
-<div class="Hilfe">
-	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">USB-Fernanschluss</div></div></div></div></div></div>
-	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p>Ein USB-Gerät mit aktiviertem USB-Fernanschluss kann an verschiedenen Computern, die mit FRITZ!Box verbunden sind, genutzt werden.
-		Jedoch kann jeweils nur ein Computer auf das Gerät zugreifen. Die Aktivierung diese Option wird empfohlen, wenn Sie z.B. den 
-		Tintenfüllstand Ihres Druckers überwachen wollen (bidirektionale Kommunikation) oder spezielle Dateiformate (z.B. NTFS) auf einer 
-		USB-Festplatte nutzen wollen. Verwenden Sie den USB-Fernanschluss <b>nicht</b>, wenn mehrere Computer gleichzeitig auf ein USB-Gerät, 
-		das an FRITZ!Box angeschlossen ist zugreifen sollen (Netzwerkdruckerfunktion).</p>
-	</div></div></div></div></div></div>
-	<? include ../html/$var:lang/help/rback.html ?>
-</div>
diff -burN usr/www/all/html/de/help/hilfe_wlan_allgemein.html usr/www/all/html/de/help/hilfe_wlan_allgemein.html
--- usr/www/all/html/de/help/hilfe_wlan_allgemein.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/help/hilfe_wlan_allgemein.html	2006-12-13 17:03:02.000000000 +0100
@@ -60,10 +60,6 @@
 		<h3>WLAN-Stationen dürfen untereinander kommunizieren</h3>
 		<p>Mit dieser Einstellung können Sie die Kommunikation der WLAN-Klienten untereinander zulassen oder verbieten.</p>
 		<!-- ENDE Einstellungen für den Expertenmodus. -->
-		<h3>WMM aktivieren</h3>
-		<p>WMM (Wireless Multimedia) unterst&uuml;tzt die &Uuml;bertragung von Multimedia-Daten und optimiert die Bandbreitenaufteilung zwischen gleichzeitig laufenden Programmen.
-		<br>WMM ist standardm&auml;&szlig;ig aktiv. Wenn Ihr WLAN-Adapter kein WMM unterst&uuml;tzt und Sie Probleme bei der Anmeldung des Adapters an der FRITZ!Box haben, deaktivieren Sie die WMM-Funktionalit&auml;t.
-		</p>
 ' ?>
 		<!-- BEGINN Nur für USB Host Controller -->
 		<h3>AVM Stick & Surf aktivieren</h3>
diff -burN usr/www/all/html/de/help/hilfe_wlan_monitor.html usr/www/all/html/de/help/hilfe_wlan_monitor.html
--- usr/www/all/html/de/help/hilfe_wlan_monitor.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/help/hilfe_wlan_monitor.html	2006-12-13 17:03:02.000000000 +0100
@@ -48,12 +48,30 @@
 				werden die dort ankommenden Funksignale gemessen.</td>
 			</tr>
 			<tr>
-				<td valign="TOP" width="120">Verbindungseigenschaften</td>
-				<td valign="TOP">Diese Spalte enth&auml;lt drei Informationen. In der ersten Zeile wird angezeigt, welches WLAN-Verschl&uuml;sselungsverfahren genutzt wird und ob das WLAN-Netzwerkger&auml;t Wireless Multimedia (WMM) unterst&uuml;tzt.
-				<br/>Wenn das WLAN-Netzwerkger&auml;t den erweiterten Stromsparmodus U-APSD nutzt, steht in der zweiten Zeile der Eintrag &quot;Power Save&quot;. Ansonsten bleibt die Zeile leer. </td>
+				<td valign="TOP" width="120px">Zustand:</td>
+				<td valign="TOP">Der Zustand, in dem sich das Netzwerkgerät befindet. <table>
+					<tr>
+						<td valign="TOP" width="90px">Leerlauf:</td>
+						<td valign="TOP">Das Netzwerkgerät ist zum aktuellen Zeitpunkt nicht über WLAN mit der FRITZ!Box verbunden.</td>
+					</tr>
+					<tr>
+						<td valign="TOP" width="90px">Anmelden:</td>
+						<td valign="TOP">Das Netzwerkgerät versucht gerade sich bei der FRITZ!Box anzumelden.</td>
+					</tr>
+					<tr>
+						<td valign="TOP" width="90px">Einbuchen:</td>
+						<td valign="TOP">Das Netzwerkgerät und die FRITZ!Box legen die Verbindungsparameter fest. Die Parameter müssen 
+						von beiden Seiten unterstützt werden, sonst kann keine Verbindung zustande kommen.</td>
+					</tr>
+					<tr>
+						<td valign="TOP" width="90px">Verbunden:</td>
+						<td valign="TOP">Das Netzwerkgerät ist über WLAN mit der FRITZ!Box verbunden.</td>
+					</tr>
+				</table>
+				</td>
 			</tr>
 			<tr>
-				<td valign="TOP" width="120px">Schaltfläche &quot;L&ouml;schen&quot;</td>
+				<td valign="TOP" width="120px">Schaltfläche:</td>
 				<td valign="TOP">Die Schaltfläche zum Löschen des Eintrags. <br>
 				<b>Hinweis:</b> Die Schaltfläche zum Löschen des Eintrags ist nur dann vorhanden, wenn die Einstellung &quot;Keine neuen WLAN-Netzwerkgeräte 
 				zulassen&quot; aktiviert ist.</td>
@@ -92,6 +110,9 @@
 		welche WLAN-Netzwerkgeräte Zugang zur FRITZ!Box haben sollen.</p>
 		<p><b>Achtung:</b> Diese Einstellung alleine bietet keinen ausreichenden Schutz vor unerwüschten WLAN-Verbindungen. Nutzen Sie für Ihre WLAN-Verbindungen 
 		in jedem Fall auch die WEP- oder die WPA-Verschlüsselung. Die Einstellungen für die Verschlüsselung nehmen Sie im Menü &quot;WLAN / Sicherheit&quot; vor.</p>
+		<h2>WLAN-Details</h2>
+		<p>Über diese Schaltfläche gelangen Sie auf eine Seite, die detaillierte Informationen zu den WLAN-Verbindungen anzeigt.</p>
+		<p>Klicken Sie auf die Schaltfläche &quot;Übernehmen&quot;, um die Änderungen der Einstellungen zu übernehmen.</p>
 ` ?>
 	</div></div></div></div></div></div>
 	<? include ../html/$var:lang/help/rback.html ?>
diff -burN usr/www/all/html/de/help/hilfe_wlan_repeater.html usr/www/all/html/de/help/hilfe_wlan_repeater.html
--- usr/www/all/html/de/help/hilfe_wlan_repeater.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/help/hilfe_wlan_repeater.html	2006-12-13 17:03:02.000000000 +0100
@@ -5,7 +5,7 @@
 		können Sie mit WDS die Reichweite in Ihrem kabellosen Netzwerk vergrößern. Die FRITZ!Box kann als Basisstation oder als Repeater eingerichtet 
 		werden. Als Basisstation unterstützt sie andere Repeater, als Repeater wird sie von einem anderen WLAN Access Point unterstützt.</p>
 		<p><b>Hinweis: </b>Beachten Sie, dass Sie mit WDS die Reichweite für WLAN nur dann vergrößern können, wenn Sie einen oder mehrere andere WLAN 
-		Access Points einsetzen, die ebenfalls WDS unterstützen.</p>
+		Access Points einsetzten, die ebenfalls WDS unterstützen.</p>
 		<p><b>Unterstützung für WLAN-Repeater (WDS) aktivieren</b><br />
 		Setzen Sie den Haken in dem Kontrollkästchen, um in dieser FRITZ!Box die Unterstützung für WDS zu aktivieren.</p>
 		<p><b>Basisstation</b><br />
diff -burN usr/www/all/html/de/help/hilfe_wlan_repeater_sicherheit.html usr/www/all/html/de/help/hilfe_wlan_repeater_sicherheit.html
--- usr/www/all/html/de/help/hilfe_wlan_repeater_sicherheit.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/help/hilfe_wlan_repeater_sicherheit.html	2006-12-13 17:03:02.000000000 +0100
@@ -8,11 +8,11 @@
 		ist die Verbindung zwischen Basisstation und Repeater ungeschützt.</p>
 		<p></p>
 		<ul>
-			<li>WEP-Verschlüsselung: Für die WEP-Verschlüsselung wird der WEP-Schlüssel 1, der im Menü &quot;WLAN / Sicherheit&quot; eingetragen ist, verwendet. Falls 
-			Sie dort keinen WEP-Schlüssel eingetragen haben, dann geben Sie den WEP-Schlüssel jetzt in dem Feld &quot;WEP-Schlüssel 1&quot; ein.</li>
+			<li>WEP-Verschlüsselung: Für die WEP-Verschlüsselung wird der WEP-Schlüssel 1, der im Menü &quot;WLAN / Sicherheit&quot; eingetragen ist, verwendet. 
+			Falls Sie noch keinen WEP-Schlüssel eingtragen haben, dann geben Sie den WEP-Schlüssel jetzt im Menü &quot;WLAN / Sicherheit&quot; ein.</li>
 			<li>WPA2-Verschlüsselung: Die WPA2-Verschlüsselung können Sie nur dann nutzen, wenn es sich sowohl bei der Basisstation als auch beim Repeater 
-			um eine FRITZ!Box handelt.<br />
-			Folgende Zeichen können Sie für das WPA2-Kennwort verwenden:</li>
+			um eine FRITZ!Boxen handelt.<br />
+			Folgende Zeichen können Sie für das WPA2-Kennwort verwenden:<p></p>
 			<ul>
 				<li>die Buchstaben von a bis z (Kleinschreibung) und A bis Z (Großschreibung); Die Verwendung von ß und der Umlaute ä, ö, ü und Ä, Ö, 
 				Ü ist nicht erlaubt.</li>
diff -burN usr/www/all/html/de/help/hilfe_wlan_sicherheit.html usr/www/all/html/de/help/hilfe_wlan_sicherheit.html
--- usr/www/all/html/de/help/hilfe_wlan_sicherheit.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/help/hilfe_wlan_sicherheit.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,7 +1,7 @@
 <div class="Hilfe">
  	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">WLAN Sicherheit</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p>Auf dieser Seite geben Sie an, wie die Funkverbindung zwischen FRITZ!Box und WLAN-Adapter gesichert wird. Folgende Möglichkeiten stehen zur Auswahl: </p>
+		<p>Auf dieser Seite geben Sie an, wie die Funkverbindung gesichert wird. Folgende Möglichkeiten stehen zur Auswahl: </p>
 		<ul>
 			<li>unverschlüsselte Übertragung aktivieren</li>
 			<p>Mit dieser Einstellung sind Funkverbindungen ungeschützt. Unberechtigte Personen können Ihren Internetzugang mitbenutzen, von 
@@ -10,16 +10,19 @@
 			<li>WEP-Verschlüsselung aktivieren</li>
 			<p>Bei dieser Auswahl werden Ihre Funkverbindungen durch einen Schlüssel, den Sie selbst angeben, gesichert. Mit dem Schlüssel werden 
 			die zu übertragenden Daten verschlüsselt. </p>
-			<p>Wenn Sie die WEP-Verschlüsselung nutzen wollen, dann müssen die von Ihnen verwendeten WLAN-Adapter in den WLAN-Klienten 
-			ebenfalls die WEP-Verschlüsselung unterstützen.</p>
+			<p>Wenn Sie die WEP-Verschlüsselung nutzen wollen, dann müssen die von Ihnen verwendeten WLAN-Adapter in den WLAN-Klienten ebenfalls 
+			diese Art der Verschlüsselung unterstützen. </p>
 			<li>WPA-Verschlüsselung aktivieren</li>
-			<p>Wenn Sie die WLAN-Verbindung mit WPA-Verschl&uuml;sselung aufbauen, m&uuml;ssen sich die WLAN-Adapter mit einem Kennwort bei der FRITZ!Box anmelden. Die &uuml;bertragenen Daten werden mit einem automatisch generierten Schl&uuml;ssel gesichert.</p>
-			<p>W&auml;hlen Sie im Bereich &quot;WPA-Verschl&uuml;sselung&quot; aus, welchen WPA-Modus der WLAN-Adapter unterst&uuml;tzt:
-			<br>&quot;WPA (TKIP)&quot; oder &quot;WPA2 (CCMP)&quot;</p>
-			<p>Wenn Sie WLAN-Verbindungen zu wechselnden WLAN-Adaptern aufbauen wollen, von denen manche WPA- und andere WPA2-Verschl&uuml;sselung unterst&uuml;tzen, w&auml;hlen Sie &quot;WPA + WPA2&quot;. Die FRITZ!Box verwendet dann automatisch den Verschl&uuml;sselungsstandard, den der jeweilige WLAN-Adapter unterst&uuml;tzt.</p>
+			<p>Bei dieser Auswahl müssen sich WLAN-Klienten, die eine Funkverbindung zur <? echo $var:BoxName ?> aufbauen wollen, mit einem 
+			Kennwort anmelden. Die zu übertragenden Daten werden mit einem automatisch generierten Schlüssel gesichert. </p>
+<? if neq $var:OEM aol `
+			<p>Sie können bei dieser Auswahl im nächsten Schritt zwischen WPA-Verschlüsselung (TKIP) und WPA2-Verschlüsselung (AES) wählen.</p>
+` ?>
+			<p>Wenn Sie die WPA-Verschlüsselung nutzen wollen, dann müssen die von Ihnen verwendeten WLAN-Adapter in den WLAN-Klienten ebenfalls 
+			diese Art der Verschlüsselung unterstützen. </p>
 		</ul>
 		<h3>Hinweis:</h3>
-		<p>Es wird dringend empfohlen, einen WLAN-Adapter einzusetzen, der WPA oder WPA2 unterst&uuml;tzt (zum Beispiel den AVM FRITZ!WLAN USB Stick). WEP ist veraltet und mit WEP verschl&uuml;sselte Daten k&ouml;nnen binnen weniger Minuten entschl&uuml;sselt werden.</p>
+		<p>Falls Ihr WLAN-Klient die WPA-Verschlüsselung unterstützt, sollten Sie in jedem Fall diese Art der Verschlüsselung verwenden.</p>
 	</div></div></div></div></div></div>
 	<? include ../html/$var:lang/help/rback.html ?>
 </div>
diff -burN usr/www/all/html/de/help/hilfe_wlan_wpa.html usr/www/all/html/de/help/hilfe_wlan_wpa.html
--- usr/www/all/html/de/help/hilfe_wlan_wpa.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/help/hilfe_wlan_wpa.html	2006-12-13 17:03:02.000000000 +0100
@@ -64,6 +64,14 @@
 			</li>
 		</ul>
 		<p>Den WLAN-Netzwerkschlüssel müssen Sie auch in den WLAN-Einstellungen des WLAN-Adapters eintragen.</p>
+		<!-- ENDE Einstellungen für den Standardmodus. -->
+<? if eq <? query box:settings/expertmode/activated ?> 1 '
+		<h2>Group Key Intervall</h2>
+		<p>Geben Sie hier eine Zeitspanne in Sekunden an. Der voreingestellte Wert beträgt 3600 Sekunden. Die angegebene Zeitspanne ist die 
+		Gültigkeitsdauer für den automatisch generierten Schlüssel, mit dem die zu übertragenden Daten verschlüsselt werden. Immer wenn die 
+		Gültigkeitsdauer für einen Schlüssel abgelaufen ist, wird automatisch ein neuer Schlüssel generiert. </p>
+		<!-- ENDE Einstellungen für den Expertenmodus. -->
+' ?>	
 		<p>Klicken Sie auf die Schaltfläche &quot;Übernehmen&quot;, um die Änderungen der Einstellungen zu übernehmen.</p>
 		<p>Nachdem Sie auf die Schaltfläche &quot;Übernehmen&quot; geklickt haben, wird das Fenster &quot;WLAN-Sicherheitseinstellungen&quot; geöffnet. Hier sind 
 		alle Angaben, die Sie für die WLAN-Einstellungen im WLAN-Adapter benötigen, zusammengefasst. Sie können die Einstellungen ausdrucken.</p>
diff -burN usr/www/all/html/de/help/home.html usr/www/all/html/de/help/home.html
--- usr/www/all/html/de/help/home.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/help/home.html	2007-07-11 22:32:04.000000000 +0200
@@ -11,9 +11,6 @@
 			<tr>
 				<td valign="top"><b>&#8226;</b>&nbsp;<? echo $var:Text6 ?></td>
 				<td>
-					<a href="javascript:jslGoTo('help','hilfe_kindersicherung_uebersicht')"><? echo $var:Text64 ?></a><br>
-					<a href="javascript:jslGoTo('help','hilfe_kindersicherung_neuer_name')"><? echo $var:Text65 ?></a><br>
-					<a href="javascript:jslGoTo('help','hilfe_kindersicherung_einstellungen')"><? echo $var:Text66 ?></a><br>
 					<a href="javascript:jslGoTo('help','hilfe_inetstat')"><? echo $var:Text7 ?></a><br>
 					<a href="javascript:jslGoTo('help','hilfe_tarifuebersicht')"><? echo $var:Text57 ?></a><br>
 <? if eq $var:isAta 1 `
@@ -36,14 +33,19 @@
 					<a href="javascript:jslGoTo('help','hilfe_fon_anrufliste')"><? echo $var:Text17 ?></a><br>
 					<a href="javascript:jslGoTo('help','hilfe_fon_internetliste')"><? echo $var:Text18 ?></a><br>
 					<a href="javascript:jslGoTo('help','hilfe_fon_voiperweitert')"><? echo $var:Text45 ?></a><br>
-					<a href="javascript:jslGoTo('help','hilfe_fon_quality')"><? echo $var:Text68 ?></a><br>
-					<a href="javascript:jslGoTo('help','hilfe_fon_dect')"><? echo $var:Text69 ?></a><br>
-					<a href="javascript:jslGoTo('help','hilfe_fon_dect_fon1isdn')"><? echo $var:Text48 ?></a><br>
-					<a href="javascript:jslGoTo('help','hilfe_fon_dect_festnetzrufnummer')"><? echo $var:Text21 ?></a><br>
+					<a href="javascript:jslGoTo('help','hilfe_fon_nebenstellen')"><? echo $var:Text19 ?></a><br>
+					<a href="javascript:jslGoTo('help','hilfe_fon_nebenstelle')"><? echo $var:Text60 ?></a><br>
+					<a href="javascript:jslGoTo('help','hilfe_fon_merkmale')"><? echo $var:Text20 ?></a><br>
+					<a href="javascript:jslGoTo('help','hilfe_fon_klingelsperre')"><? echo $var:Text61 ?></a><br>
+					<a href="javascript:jslGoTo('help','hilfe_fon_isdn')"><? echo $var:Text47 ?></a><br>
+					<a href="javascript:jslGoTo('help','hilfe_fon_fon1isdn')"><? echo $var:Text48 ?></a><br>
+					<a href="javascript:jslGoTo('help','hilfe_fon_festnetz')"><? echo $var:Text21 ?></a><br>
 					<a href="javascript:jslGoTo('help','hilfe_fon_wahlregeln')"><? echo $var:Text22 ?></a><br>
 					<a href="javascript:jslGoTo('help','hilfe_fon_telefonbuch')"><? echo $var:Text23 ?></a><br>
 					<a href="javascript:jslGoTo('help','hilfe_fon_waehlhilfe')"><? echo $var:Text59 ?></a><br>
 					<a href="javascript:jslGoTo('help','hilfe_fon_anrufbeantworter')"><? echo $var:Text70 ?></a><br>
+					<a href="javascript:jslGoTo('help','hilfe_fon_rufumleitung')"><? echo $var:Text24 ?></a><br>
+					<a href="javascript:jslGoTo('help','hilfe_fon_durchwahl')"><? echo $var:Text62 ?></a><br>
 					<a href="javascript:jslGoTo('help','hilfe_fon_wecker')"><? echo $var:Text49 ?></a>
 <? if eq $var:OEM avme `
 					<br>
@@ -75,10 +77,7 @@
 				<td valign="top"><b>&#8226;</b>&nbsp;<? echo $var:Text31 ?></td>
 				<td>
 					<a href="javascript:jslGoTo('help','hilfe_syslog')"><? echo $var:Text32 ?></a><br>
-					<a href="javascript:jslGoTo('help','hilfe_system_energiemonitor')"><? echo $var:Text72 ?></a><br>
-					<a href="javascript:jslGoTo('help','hilfe_system_energieeinstellungen')"><? echo $var:Text73 ?></a><br>
 					<a href="javascript:jslGoTo('help','hilfe_system_pushservice')"><? echo $var:Text50 ?></a><br>
-					<a href="javascript:jslGoTo('help','hilfe_system_infoanzeige')"><? echo $var:Text54 ?></a><br>
 <? setvariable var:shownacht 0 ?>
 <? setvariable var:shownacht 1 ?>
 <? setvariable var:shownacht 1 ?>
@@ -90,7 +89,6 @@
 					<a href="javascript:jslGoTo('help','hilfe_system_export')">$var:Text44</a><br>
 					<a href="javascript:jslGoTo('help','hilfe_system_import')">$var:Text56</a><br>
 ` ?>
-					<a href="javascript:jslGoTo('help','hilfe_system_update_automatic')"><? echo $var:Text67 ?></a><br>
 					<a href="javascript:jslGoTo('help','hilfe_system_update')"><? echo $var:Text36 ?></a><br>
 					<a href="javascript:jslGoTo('help','hilfe_system_wiederherstellen')"><? echo $var:Text37 ?></a><br>
 					<a href="javascript:jslGoTo('help','hilfe_system_neustart')"><? echo $var:Text55 ?></a><br>
diff -burN usr/www/all/html/de/help/home.inc usr/www/all/html/de/help/home.inc
--- usr/www/all/html/de/help/home.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/help/home.inc	2007-07-11 22:32:04.000000000 +0200
@@ -32,7 +32,7 @@
 <? setvariable var:Text33 'Netzwerkgeräte' ?>
 <? setvariable var:Text34 'Netzwerkeinstellungen' ?>
 <? setvariable var:Text35 'Kennwort' ?>
-<? setvariable var:Text36 'Firmware-Datei' ?>
+<? setvariable var:Text36 'Firmware-Update' ?>
 <? setvariable var:Text37 'Zurücksetzen' ?>
 <? setvariable var:Text38 'Ansicht' ?>
 <? setvariable var:Text39 'USB-Zubehör' ?>
@@ -50,7 +50,6 @@
 <? setvariable var:Text51 'Nachtschaltung' ?>
 <? setvariable var:Text52 'Repeater' ?>
 <? setvariable var:Text53 'Ausgewählte Anrufer' ?>
-<? setvariable var:Text54 'INFO-Anzeige' ?>
 <? setvariable var:Text55 'FRITZ!Box neu starten' ?>
 <? setvariable var:Text56 'Einstellungen wiederherstellen' ?>
 <? setvariable var:Text57 'Tarifübersicht' ?>
@@ -67,6 +66,3 @@
 <? setvariable var:Text68 'Sprachübertragung' ?>
 <? setvariable var:Text69 'DECT-Endgeräte' ?>
 <? setvariable var:Text70 'Anrufbeantworter' ?>
-<? setvariable var:Text71 'USB-Fernanschluss' ?>
-<? setvariable var:Text72 'Energiemonitor' ?>
-<? setvariable var:Text73 'Energie-Einstellungen' ?>
diff -burN usr/www/all/html/de/help/popup.html usr/www/all/html/de/help/popup.html
--- usr/www/all/html/de/help/popup.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/help/popup.html	2007-07-11 22:32:04.000000000 +0200
@@ -61,7 +61,6 @@
 function OnPortal() {
 	var url = jslGetValue("uiPostPortal");
 	if (url.length != 0) {
-		url += "&help="+jslGetValue("uiPostPageName");
 		var pp = window.open(url, "_blank");
 	}
 }
diff -burN usr/www/all/html/de/home/error.html usr/www/all/html/de/home/error.html
--- usr/www/all/html/de/home/error.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/home/error.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,3 +1 @@
-<? if eq 1 <? error found ?> `
-	<p class="errorMessage">FEHLER:&nbsp;<? error message ?></p>
-` ?>
+<? if eq 1 <? error found ?> `<p class="errorMessage">FEHLER:&nbsp;<? error message ?></p>` ?>
diff -burN usr/www/all/html/de/home/home.html usr/www/all/html/de/home/home.html
--- usr/www/all/html/de/home/home.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/home/home.html	2007-07-11 22:32:04.000000000 +0200
@@ -43,7 +43,19 @@
 					<table id="tLan">
 						<tr>
 							<td style="width:13px"><script type="text/javascript">document.write(StateLed("<? query eth0:status/carrier ?>"));</script></td>
-							<td style="width:207px"><? echo $var:txt006 ?></td>
+							<td style="width:207px"><? echo $var:txt038 ?></td>
+						</tr>
+						<tr>
+							<td><script type="text/javascript">document.write(StateLed("<? query eth1:status/carrier ?>"));</script></td>
+							<td><? echo $var:txt039 ?></td>
+						</tr>
+						<tr>
+							<td><script type="text/javascript">document.write(StateLed("<? query eth2:status/carrier ?>"));</script></td>
+							<td><? echo $var:txt040 ?></td>
+						</tr>
+						<tr>
+							<td><script type="text/javascript">document.write(StateLed("<? query eth3:status/carrier ?>"));</script></td>
+							<td><? echo $var:txt041 ?></td>
 						</tr>
 					</table>
 				</td>
@@ -88,5 +100,5 @@
 <? if eq `<? query box:status/hint_telefon_message_waiting ?>` `1` `<p class="info">$var:txt046</p>` ?>
 		<p id="uiViewEventlink" class="mt10" style="display:none"><a href="javascript:jslGoTo('', 'syslog');"><? echo $var:txt052 ?></a></p>
 	</div></div></div></div></div></div>
-	<? include ../html/$var:lang/home/rbb_refresh.html ?>
+	<? include ../html/$var:lang/home/rbb_refresh1.html ?>
 </div>
diff -burN usr/www/all/html/de/home/home.inc usr/www/all/html/de/home/home.inc
--- usr/www/all/html/de/home/home.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/home/home.inc	2006-12-13 17:03:02.000000000 +0100
@@ -34,5 +34,3 @@
 <? setvariable var:txt055 "Internet und Telefonie" ?>
 <? setvariable var:txt056 "Internet" ?>
 <? setvariable var:txt057 "Internetrufnummer" ?>
-<? setvariable var:txt059 "Ihre FRITZ!Box arbeitet mit einer Labor-Version." ?>
-<? setvariable var:txt060 "Informationen und Feedback." ?>
diff -burN usr/www/all/html/de/home/home.js usr/www/all/html/de/home/home.js
--- usr/www/all/html/de/home/home.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/home/home.js	2007-07-11 22:32:04.000000000 +0200
@@ -5,13 +5,11 @@
 #t1					{margin: auto; width: 100%;}
 #t1 td				{padding: 0; vertical-align: top;}
 #tAnsch, #tLan	{width: 100%;}
-#tAnsch td, #tLan td, #tPpp td, #tVpn td
+#tAnsch td, #tLan td, #tPpp td
 			 		{padding: 2px 4px; vertical-align: top;}
 .info 				{margin-top: 5px; color: #CC0000; }
 #nsLink:link, #nsLink:visited, #nsLink:active, #nsLink:hover
 					{ color: #cc0000; text-decoration: underline; }
-#labLink:link, #labLink:visited, #labLink:active, #labLink:hover
-					{ color: #cc0000; text-decoration: underline; }
 .ac					{ text-align: center; }
 .fett				{ font-weight: bold; }
 -->
@@ -35,17 +33,13 @@
 var g_ataRouter = "Zugang über Router";
 var g_ataModem = "Zugang über Modem";
 var g_wlanDeaktiviert = "Deaktiviert";
-var g_wlanUnverschluesselt = "Unverschlüsselt";
-var g_wlanVerschluesselt = "Verschlüsselt";
+var g_wlanUnverschluesselt = "unverschlüsselt";
+var g_wlanVerschluesselt = "verschlüsselt";
 var g_pppIpAdr = "IP-Adresse ";
 var g_pppBridge = "FRITZ!Box benutzt eine direkte IP-Verbindung zu einem Internetanbieter.";
 var g_pppIpClient = "Eine bestehende Internetverbindung im Netzwerk wird mitbenutzt.";
 var g_pppNoData = "FRITZ!Box verfügt nicht über Zugangsdaten zu einem Internetanbieter.";
 var g_pppSeit = "verbunden seit ";
-var g_vpnNotActive = "nicht aufgebaut";
-var g_vpnWaiting = "wird aufgebaut";
-var g_vpnInProgress = "wird aufgebaut";
-var g_vpnReady = "hergestellt";
 var g_showEventlink = 0;
 var g_fonNoData = "FRITZ!Box verfügt nicht über Anmeldedaten zu einem Internettelefonieanbieter";
 function uiDoOnLoad() {
@@ -109,7 +105,7 @@
 	return "<img src=\"../html/<? echo $var:lang ?>/images/led_gray.gif\">";
 }
 function AtamodeDisplay (type){
-	if (type != "pppoe") return g_ataRouter;
+	if (type == "pppoe") return g_ataRouter;
 	return g_ataModem;
 }
 function uiDoCancel() {
@@ -143,12 +142,15 @@
 	}
 	return rc;
 }
-var nUsb = Number("<? query ctlusb:settings/device/count ?>");
 function uiUsbDisplay () {
-	return (nUsb )>0 ? g_txtVerbunden:g_txtGetrennt;
+	var n1 = <? multiquerycount ctlusb:settings/storage-part/list ?>;
+	var n2 = "<? query ctlusb:settings/printer-avail ?>" == "1" ? 1:0;
+	return (n1+n2)>0 ? g_txtVerbunden:g_txtGetrennt;
 }
 function UsbHostLed () {
-	return (nUsb )>0 ? "<img src=\"../html/<? echo $var:lang ?>/images/led_green.gif\">":"<img src=\"../html/<? echo $var:lang ?>/images/led_gray.gif\">";
+	var n1 = <? multiquerycount ctlusb:settings/storage-part/list ?>;
+	var n2 = "<? query ctlusb:settings/printer-avail ?>" == "1" ? 1:0;
+	return (n1+n2)>0 ? "<img src=\"../html/<? echo $var:lang ?>/images/led_green.gif\">":"<img src=\"../html/<? echo $var:lang ?>/images/led_gray.gif\">";
 }
 function WlanStateLed (state){
 	return StateLed("<? query wlan:settings/ap_enabled ?>");
@@ -177,17 +179,15 @@
 	var caps = "<? query sar:settings/encapsulation ?>";
 	var status = "<? query connection0:status/connect ?>";
 	var connection = "<? query connection0:settings/type ?>";
-	if (isIpClient()) return "";
-	
 	if (atamode != "1") {
-		if (caps == "dslencap_ether" || caps == "dslencap_ipnlpid" || caps == "dslencap_ipsnap" || caps == "dslencap_ipraw") return "";
+		if (caps == "dslencap_ether" || caps == "dslencap_ipnlpid" || caps == "dslencap_ipsnap" || caps == "dslencap_ipraw") return StateLed("0");
 		switch (status) {
 			case "5": return StateLed("1");
 			case "3": return StateLed("0");
 			default: return StateLed("0");
 		}
 	} else {
-		if (connection == "pppoe" && (caps == "dslencap_pppoe" || caps == "dslencap_ether")) {
+		if (connection == "pppoe" && caps == "dslencap_pppoe") {
 			switch (status) {
 				case "5": return StateLed("1");
 				case "3": return StateLed("0");
@@ -211,17 +211,17 @@
 		case "dslencap_pppoa_llc":
 			if (connection == "bridge") {
 				if (!isIpClient()) {
-					str = g_pppBridge+mldIpAdr;
+					str = g_pppBridge;
 				} else {
-					str = g_pppIpClient+mldIpAdr;
+					str = g_pppIpClient;
 				}
 			}
 			break;
 		default:
 			if (!isIpClient()) {
-				str = g_pppBridge+mldIpAdr;
+				str = g_pppBridge;
 			} else {
-				str = g_pppIpClient+mldIpAdr;
+				str = g_pppIpClient;
 			}
 			break;
 	}
@@ -284,25 +284,4 @@
 	}
 	return StateLed("0");
 }
-function VpnLed (status) {
-	return StateLed(status=="ready" ? 1:0);
-}
-function VpnDisplay(status){
-	var vpnDisplay = "";
-	switch (status) {
-		case "not active": return g_vpnNotActive;
-		case "waiting": return g_vpnWaiting;
-		case "in progress": return g_vpnInProgress;
-		case "ready": return g_vpnReady;
-	}
-	return "";
-}
-function TrVpn(status, name) {
-	var str = "<tr>";
-	str += "<td style==\"width:13px\">"+ VpnLed(status) +"</td>";
-	str += "<td style==\"width:300px\">"+ name +"</td>";
-	str += "<td>"+ VpnDisplay(status) +"</td>";
-	str += "</tr>";
-	return str;
-}
 </script>
diff -burN usr/www/all/html/de/home/rbb_refresh1.html usr/www/all/html/de/home/rbb_refresh1.html
--- usr/www/all/html/de/home/rbb_refresh1.html	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/home/rbb_refresh1.html	2007-03-22 14:30:14.000000000 +0100
@@ -0,0 +1,5 @@
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
+		<input type="button" onclick="uiDoInfo()" value="Info" class=Pushbutton>
+		<input type="button" onclick="uiDoRefresh()" value="<? echo $var:txtRefresh ?>" class=Pushbutton>
+		<input type="button" onclick="uiDoHelp()" value="<? echo $var:txtHelp ?>" class="Pushbutton" id="buttonHilfe">
+	</div></div></div></div></div></div>
diff -burN usr/www/all/html/de/internet/authform.html usr/www/all/html/de/internet/authform.html
--- usr/www/all/html/de/internet/authform.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/internet/authform.html	2007-07-11 22:32:04.000000000 +0200
@@ -18,8 +18,6 @@
 		<option value="1u1">$var:afTxt02</option>
 		<option value="AOL">$var:afTxt06</option>
 		<option value="Arcor">$var:afTxt05</option>
-		<option value="DBD">$var:afTxt41</option>
-		<option value="DBD-DSL">$var:afTxt42</option>
 		<option value="Debitel">$var:afTxt07</option>
 		<option value="Freenet">$var:afTxt08</option>
 		<option value="GMX">$var:afTxt03</option>
@@ -37,7 +36,7 @@
 	<table id="tPpp">
 		<tr id="UserName">
 			<td class="Label"><label for="uiViewUsername"><span id="LabelName"><? echo $var:afTxt15 ?></span></label></td>
-			<td style="width: 320px;">
+			<td style="width: 300px;">
 				<table id="tUser">
 					<tr>
 						<td id="UserPrefix" style="padding-right: 3px; display:none"><span id="spanPrefix"><? echo $var:afTxt16 ?></span></td>
@@ -49,7 +48,7 @@
 		</tr>
 		<tr id="WebdeUserName" style="display:none">
 			<td class="Label"><label for="uiViewWebPrefix"><? echo $var:afTxt18 ?></label></td>
-			<td style="width: 320px;">
+			<td style="width: 300px;">
 				<table id="tWebdeUser">
 					<tr>
 						<td style="padding-right: 3px;"><? echo $var:afTxt19 ?></td>
@@ -92,25 +91,6 @@
 			<td class="Label" id="LabelRealm"><label for="uiViewRealm"><? echo $var:afTxt28 ?></label></td>
 			<td><input type="text" value size="9" maxlength="15" class id="uiViewRealm"></td>
 		</tr>
-		<tr id="DbdDslName" style="display:none">
-			<td class="Label" style="padding-top: 10px"><label for="uiViewVoipUsername"><? echo $var:afTxt43 ?></label></td>
-			<td style="width: 320px;">
-				<table id="tDbd" >
-					<tr>
-						<td style="padding-top: 10px"><input type="text" value size="24" maxlength="128" class id="uiViewVoipUsername"></td>
-						<td id="UserPostfix" style="padding-left: 3px; padding-top: 10px"><? echo $var:afTxt44 ?></td>
-					</tr>
-				</table>
-			</td>
-		</tr>
-		<tr id="DbdDslPass1" style="display:none">
-			<td class="Label"><label for="uiViewVoipPassword"><? echo $var:afTxt45 ?></label></td>
-			<td style="width: 300px;"><input type="password" value size="14" maxlength="128" class id="uiViewVoipPassword" onfocus="uiSelect(id);"></td>
-		</tr>
-		<tr id="DbdDslPass2" style="display:none">
-			<td class="Label"><label for="uiViewVoipPassword2"><? echo $var:afTxt46 ?></label></td>
-			<td><input type="password" value size="14" maxlength="128" class="Eingabeldfeld" id="uiViewVoipPassword2" onfocus="uiSelect(id);"></td>
-		</tr>
 	</table>
 </div>
 <div id="IdleTimer" style="display:none">
diff -burN usr/www/all/html/de/internet/authform.js usr/www/all/html/de/internet/authform.js
--- usr/www/all/html/de/internet/authform.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/internet/authform.js	2006-12-13 17:03:02.000000000 +0100
@@ -13,7 +13,6 @@
 var g_mldEWEKennwort		= "Das Kennwort darf nur aus Buchstaben und Ziffern bestehen.";
 var g_mldUserLeer			= "Der Benutzername darf nicht leer sein.";
 var g_mldKennwortDiff		= "Das Passwort/Kennwort stimmt nicht mit der Bestätigung überein.";
-var g_mldVoipKennwortDiff		= "Das Telefonie-Zugangspasswort stimmt nicht mit der Bestätigung überein.";
 var g_mldPinDiff			= "Die PIN stimmt nicht mit der Bestätigung überein.";
 var g_mldEnterPin			= "Das Passwort wurde geändert. Bitte die PIN mit eingeben.";
 var g_mldEnterKennwort		= "Die PIN wurde geändert. Bitte das Passwort mit eingeben.";
@@ -63,16 +62,12 @@
 var g_txtDebitelName			= "Benutzername";
 var g_txtDebitelKennwort		= "Passwort";
 var g_txtDebitelConfirmation	= "Passwortbestätigung";
-var g_txtDBDName				= "Internetzugangs-Kennung";
-var g_txtDBDKennwort		= "Internetzugangs-Passwort";
-var g_txtDBDConfirmation		= "Passwort-Bestätigung";
 var g_txtSonstName			= "Benutzername ";
 var g_txtSonstKennwort		= "Kennwort";
 var g_txtSonstConfirmation	= "Kennwortbestätigung";
 var g_Variante 	= "<? echo $var:OEM ?>";
 var g_expertMode = "<? query box:settings/expertmode/activated ?>";
 var g_WebdeOn	= true;
-var g_usePstn = "<? echo $var:usePSTN ?>";
 function afDoOnLoad() {
 	jslCopyValue("uiViewIdleTime", "uiPostPppIdleTimeout");
 	jslDisplay("uiShowProvider", "<? echo $var:OEM ?>" != "avme");
@@ -159,8 +154,6 @@
 	var username = jslGetValue("uiViewUsername");
 	var kennwort1 = jslGetValue("uiViewPassword");
 	var provider = jslGetValue("uiViewProvider");
-	jslSetValue("uiPostEncaps", "dslencap_pppoe");
-	jslEnable("uiPostEncaps");
 	if (provider == "AOL") {
 		if (username.length < 3) {alert(g_mldAolNameToShort); return false;}
 		if (username.length > 16) {alert(g_mldAolNameToLong); return false;}
@@ -174,30 +167,6 @@
 		username = username+"@de.aol.com";
 	} else if (provider == "Arcor") {
 		//username = username;
-	} else if (provider == "DBD") {
-		username = username+"@dbd-breitband.de";
-		if (kennwort1 != jslGetValue("uiViewPassword2")) {alert(g_mldKennwortDiff); return false;}
-		jslSetValue("uiPostEncapsSepVcc", "dslencap_ether");
-		jslSetValue("uiPostUseSepVcc", "1");
-		jslEnable("uiPostEncapsSepVcc");
-		jslEnable("uiPostUseSepVcc");
-	} else if (provider == "DBD-DSL") {
-		username = username+"@dbd-breitband.de";
-		if (kennwort1 != jslGetValue("uiViewPassword2")) {alert(g_mldKennwortDiff); return false;}
-		if (jslGetValue("uiViewVoipPassword") != jslGetValue("uiViewVoipPassword2")) {alert(g_mldVoipKennwortDiff); return false;}
-		jslSetValue("uiPostVoipUsername", jslGetValue("uiViewVoipUsername")+"@voice.dbd-breitband.de");
-		jslSetValue("uiPostVoipPassword", jslGetValue("uiViewVoipPassword"));
-		jslSetValue("uiPostUseSepVcc", "1");
-		jslSetValue("uiPostEncapsSepVcc", "dslencap_pppoe");
-		jslSetValue("uiPostVpiSepVcc", "1");
-		jslSetValue("uiPostVciSepVcc", "35");
-		jslEnable("uiPostVoipUsername");
-		jslEnable("uiPostVoipPassword");
-		jslEnable("uiPostUseSepVcc");
-		jslEnable("uiPostEncapsSepVcc");
-		jslEnable("uiPostVpiSepVcc");
-		jslEnable("uiPostVciSepVcc");
-		
 	} else if (provider == "Debitel") {
 		username = "debitel/"+username+"%debitel.net";
 	} else if (provider == "TOnline") {
@@ -253,26 +222,6 @@
 ` ?>
 			}
 		}
-		if (g_usePstn == "0") {
-			jslSetValue("uiPostSipPrio", "5");
-			jslSetValue("uiPostRtpPrio", "5");
-			jslEnable("uiPostSipPrio");
-			jslEnable("uiPostRtpPrio");
-		
-			jslSetValue("uiPostUseSepVcc", "1");
-			jslSetValue("uiPostVoipUsername", realm+"voice%"+username);
-			jslSetValue("uiPostVoipPassword", pin1+kennwort1);
-			jslSetValue("uiPostVpiSepVcc", "1");
-			jslSetValue("uiPostVciSepVcc", "35");
-			jslSetValue("uiPostEncapsSepVcc", "dslencap_pppoe");
-			
-			jslEnable("uiPostUseSepVcc");
-			jslEnable("uiPostVoipUsername");
-			jslEnable("uiPostVoipPassword");
-			jslEnable("uiPostVpiSepVcc");
-			jslEnable("uiPostVciSepVcc");
-			jslEnable("uiPostEncapsSepVcc");
-		}
 		jslSetValue("uiPostPppPassword", pin1+kennwort1);
 		username = realm+username;
 	} else if (provider == "Strato") {
@@ -314,7 +263,6 @@
 	jslSetValue("uiPostPppUsername",username);
 	if (provider != "Freenet")
 		jslSetValue("uiPostPppPassword", kennwort1);
-		
 	return true;
 }
 function Load1und1User () {
@@ -384,21 +332,6 @@
 		jslSetValue("uiViewUsername", username.slice(8));
 		jslSetSelection("uiViewProvider", "TisVol");
 		OnTisVol();
-	} else if (username.indexOf("@dbd-breitband.de")>=0) {
-		jslSetValue("uiViewUsername", username.substr(0, username.indexOf("@dbd-breitband.de")));
-		var str = jslGetValue("uiPostVoipUsername");
-		var n = str.indexOf("@voice.dbd-breitband.de");
-		if (n>=0) str = str.substr(0, n);
-		jslSetValue("uiViewVoipUsername", str);
-		jslCopyValue("uiViewVoipPassword", "uiPostVoipPassword");
-		jslCopyValue("uiViewVoipPassword2", "uiPostVoipPassword");
-		if (jslGetValue("uiPostEncapsSepVcc") == "dslencap_ether") {
-			jslSetSelection("uiViewProvider", "DBD");
-			OnDbd();
-		} else {
-			jslSetSelection("uiViewProvider", "DBD-DSL");
-			OnDbdDsl();
-		}
 	} else if (username.indexOf("debitel/")==0 && username.indexOf("%debitel.net")>=8) {
 		jslSetValue("uiViewUsername", username.substr(8, username.indexOf("%debitel.net")-8));
 		jslSetSelection("uiViewProvider", "Debitel");
@@ -527,8 +460,6 @@
 	if (id == "TOnline") OnTOnline();
 	else if (id == "AOL") OnAol();
 	else if (id == "Arcor") OnArcor();
-	else if (id == "DBD") OnDbd();
-	else if (id == "DBD-DSL") OnDbdDsl();
 	else if (id == "Debitel") OnDebitel();
 	else if (id == "Freenet") OnFreenet();
 	else if (id == "GMX") On1u1("GMX/");
@@ -558,7 +489,6 @@
 	jslDisplay("Pin", false);
 	jslDisplay("Pin2", false);
 	jslDisplay("Realm", false);
-	ShowVoipZugang(false);
 	ShowIdleTimer(true);
 	jslDisplay("WebdeIdleTimer", false);
 }
@@ -577,7 +507,6 @@
 	jslDisplay("Pin", false);
 	jslDisplay("Pin2", false);
 	jslDisplay("Realm", false);
-	ShowVoipZugang(false);
 	ShowIdleTimer(true);
 	jslDisplay("WebdeIdleTimer", false);
 }
@@ -595,45 +524,6 @@
 	jslDisplay("Pin", false);
 	jslDisplay("Pin2", false);
 	jslDisplay("Realm", false);
-	ShowVoipZugang(false);
-	ShowIdleTimer(true);
-	jslDisplay("WebdeIdleTimer", false);
-}
-function OnDbd() {
-	jslDisplay("UserName", true);
-	jslDisplay("WebdeUserName", false);
-	jslDisplay("TAnschlusskennung", false);
-	jslDisplay("TOnlineNummer", false);
-	jslDisplay("TMitbenutzer", false);
-	jslDisplay("UserPrefix", false);
-	SetSpanText("spanPostfix", "@dbd-breitband.de");
-	jslDisplay("UserPostfix", true);
-	SetSpanText("LabelName", g_txtDBDName);
-	SetSpanText("LabelKennwort", g_txtDBDKennwort);
-	SetSpanText("LabelKennwort2", g_txtDBDConfirmation);
-	jslDisplay("Pin", false);
-	jslDisplay("Pin2", false);
-	jslDisplay("Realm", false);
-	ShowVoipZugang(false);
-	ShowIdleTimer(true);
-	jslDisplay("WebdeIdleTimer", false);
-}
-function OnDbdDsl() {
-	jslDisplay("UserName", true);
-	jslDisplay("WebdeUserName", false);
-	jslDisplay("TAnschlusskennung", false);
-	jslDisplay("TOnlineNummer", false);
-	jslDisplay("TMitbenutzer", false);
-	jslDisplay("UserPrefix", false);
-	SetSpanText("spanPostfix", "@dbd-breitband.de");
-	jslDisplay("UserPostfix", true);
-	SetSpanText("LabelName", g_txtDBDName);
-	SetSpanText("LabelKennwort", g_txtDBDKennwort);
-	SetSpanText("LabelKennwort2", g_txtDBDConfirmation);
-	jslDisplay("Pin", false);
-	jslDisplay("Pin2", false);
-	jslDisplay("Realm", false);
-	ShowVoipZugang(true);
 	ShowIdleTimer(true);
 	jslDisplay("WebdeIdleTimer", false);
 }
@@ -653,7 +543,6 @@
 	jslDisplay("Pin", false);
 	jslDisplay("Pin2", false);
 	jslDisplay("Realm", false);
-	ShowVoipZugang(false);
 	ShowIdleTimer(true);
 	jslDisplay("WebdeIdleTimer", false);
 }
@@ -672,7 +561,6 @@
 	jslDisplay("Pin", true);
 	jslDisplay("Pin2", true);
 	jslDisplay("Realm", true);
-	ShowVoipZugang(false);
 	ShowIdleTimer(true);
 	jslDisplay("WebdeIdleTimer", false);
 }
@@ -691,7 +579,6 @@
 	jslDisplay("Pin", false);
 	jslDisplay("Pin2", false);
 	jslDisplay("Realm", true);
-	ShowVoipZugang(false);
 	ShowIdleTimer(true);
 	jslDisplay("WebdeIdleTimer", false);
 }
@@ -709,7 +596,6 @@
 	jslDisplay("Pin", false);
 	jslDisplay("Pin2", false);
 	jslDisplay("Realm", false);
-	ShowVoipZugang(false);
 	ShowIdleTimer(false);
 	jslDisplay("WebdeIdleTimer", false);
 }
@@ -728,7 +614,6 @@
 	jslDisplay("Pin", false);
 	jslDisplay("Pin2", false);
 	jslDisplay("Realm", false);
-	ShowVoipZugang(false);
 	ShowIdleTimer(true);
 	jslDisplay("WebdeIdleTimer", false);
 }
@@ -747,7 +632,6 @@
 	jslDisplay("Pin", false);
 	jslDisplay("Pin2", false);
 	jslDisplay("Realm", false);
-	ShowVoipZugang(false);
 	ShowIdleTimer(true);
 	jslDisplay("WebdeIdleTimer", false);
 }
@@ -764,7 +648,6 @@
 	jslDisplay("Pin", false);
 	jslDisplay("Pin2", false);
 	jslDisplay("Realm", false);
-	ShowVoipZugang(false);
 	ShowIdleTimer(true);
 	jslDisplay("WebdeIdleTimer", false);
 }
@@ -781,7 +664,6 @@
 	jslDisplay("Pin", false);
 	jslDisplay("Pin2", false);
 	jslDisplay("Realm", false);
-	ShowVoipZugang(false);
 	if (g_WebdeOn) {
 		ShowIdleTimer(false);
 		jslDisplay("WebdeIdleTimer", true);
@@ -804,15 +686,9 @@
 	jslDisplay("Pin", false);
 	jslDisplay("Pin2", false);
 	jslDisplay("Realm", false);
-	ShowVoipZugang(false);
 	ShowIdleTimer(true);
 	jslDisplay("WebdeIdleTimer", false);
 }
-function ShowVoipZugang (b) {
-	jslDisplay("DbdDslName", b);
-	jslDisplay("DbdDslPass1", b);
-	jslDisplay("DbdDslPass2", b);
-}
 var g_InitIdleTimer = false;
 function ShowIdleTimer (b) {
 	if (b) {
diff -burN usr/www/all/html/de/internet/bits.html usr/www/all/html/de/internet/bits.html
--- usr/www/all/html/de/internet/bits.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/internet/bits.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,12 +1,6 @@
 <? include ../html/$var:lang/internet/bits.inc ?>
 <? setvariable var:dblF "0" ?>
 <? setvariable var:speW "2" ?>
-<? setvariable var:bitsColour "blue.gif" ?>
-<? if eq '<? query sar:status/exp_pm_mode_L2 ?>' '1' `
-<? if eq '<? query sar:status/exp_pm_mode_L2_act ?>' '1' `
-	<? setvariable var:bitsColour "lightblue.gif" ?>
-` ?>
-` ?>
 <? if eq `<? query sar:status/dsl_train_state ?>` `6` `<? setvariable var:dblF "1" ?> <? setvariable var:speW "1" ?>` ?>
 <? if eq `<? query sar:status/dsl_train_state ?>` `7` `<? setvariable var:dblF "2" ?> <? setvariable var:speW "1" ?>` ?>
 <? setvariable var:lastUsCarrier '<? query sar:status/lastUsCarrier ?>' ?>
@@ -35,19 +29,11 @@
 					var marginValues = new Array(<? if eq 0 $var:dblF `8` `16` ?>);
 					<? multiquery sar:status/ds_snrArray "marginValues$1" ?>
 					var height;
-					var stoerer=0xFFFFFFFF-127+1;
 					for (i=0; i<<? if eq 0 $var:dblF `256` `512` ?>; i++) {
-						height = marginValues[i>>5][i&31];
-						if ( height == stoerer )
-						{
-							record += "<td width=<? echo `$var:speW` ?> valign=bottom class='snrCells'><img src='../html/<? echo $var:lang ?>/images/white.gif' width=<? echo `$var:speW` ?> height=85 " + " ></td> ";
-							continue;
-						} else {
-							height = 90 * height / 127;
+						height = Math.round(7*marginValues[i>>5][i&31] / 5);
 							if (height > 90) height = 90;
 							record += "<td width=<? echo `$var:speW` ?> valign=bottom class='snrCells'><img src='../html/<? echo $var:lang ?>/images/yellow.gif' width=<? echo `$var:speW` ?> height= " + height + " ></td> ";
 						}
-					}
 					document.write(record);
 				</script><td width="18">&nbsp; </td>
 			</tr>
@@ -89,24 +75,26 @@
 					var height;
 					var pilot = <? query sar:status/pilot ?>;
 					if(pilot < 0) pilot = 96;
+					
+					
 					if (<? if eq 2 $var:dblF `1` `0`?>){
+					
 						var US_band_config = new Array(<? query sar:status/USBandConfig ?>);
 						var US_band_num = US_band_config.length/2;
 						var is_US = 0;
 						var actual_band = 0;
-						for (i=0; i<512; i++)
-						{
+				 
+				 
+				 for (i=0; i<512; i++){
 							is_US=0;
-							for (actual_band=0; actual_band< US_band_num; actual_band++)
-							{
-								if ((i>= US_band_config[actual_band*2]) && (i<= US_band_config[(actual_band*2)+1]))
-								{
+				 for (actual_band=0; actual_band< US_band_num; actual_band++){ 
+				 if ((i>= US_band_config[actual_band*2]) && (i<= US_band_config[(actual_band*2)+1])){
 									is_US=1;
 									break;
 								}
 							}
-							if (is_US == 1)
-							{
+				 
+				 if (is_US == 1){
 								height = 6*bitsValues[i>>5][i&31];
 								if (height > 90) height = 90;
 								record += "<td width=<? echo `$var:speW` ?> valign=bottom class='bitCells'><img src='../html/<? echo $var:lang ?>/images/green.gif' width=<? echo `$var:speW` ?> height=" + height + " ></td> ";
@@ -134,7 +122,7 @@
 							else {
 								height = 6*bitsValues[i>>5][i&31];
 								if (height > 90) height = 90;
-								record += "<td width=<? echo `$var:speW` ?> valign=bottom class='bitCells'><img src='../html/<? echo $var:lang ?>/images/<? echo $var:bitsColour?>' width=<? echo `$var:speW` ?> height=" + height + " ></td> ";
+								record += "<td width=<? echo `$var:speW` ?> valign=bottom class='bitCells'><img src='../html/<? echo $var:lang ?>/images/blue.gif' width=<? echo `$var:speW` ?> height=" + height + " ></td> ";
 							}
 						}
 						
@@ -147,15 +135,20 @@
 				<td colspan="<? if eq 0 $var:dblF `257` `513` ?>">
 				<script>
 					var record = ' ';
+					
 					if (<? if eq 2 $var:dblF `1` `0` ?>){
+						
 						record='<img src="../html/<? echo $var:lang ?>/images/bitSnr_carriers_vdsl.gif"></td>';
 					}
+					
 					if (<? if eq 1 $var:dblF `1` `0` ?>){
 						record='<img src="../html/<? echo $var:lang ?>/images/bitSnr_carriers_adsl2p.gif"></td>';
 					}
+					
 					if (<? if eq 0 $var:dblF `1` `0` ?>){
 						record='<img src="../html/<? echo $var:lang ?>/images/bitSnr_carriers.gif"></td>';
 					}
+				
 					document.write(record);
 				</script>
 				
diff -burN usr/www/all/html/de/internet/inetstat.html usr/www/all/html/de/internet/inetstat.html
--- usr/www/all/html/de/internet/inetstat.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/internet/inetstat.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,13 +1,13 @@
 <? include ../html/$var:lang/internet/inetstat.inc ?>
 <? setvariable var:showBalken 0 ?>
-<? if eq $var:settimeknown 1 `
+<? if eq <? query inetstat:status/timeknown ?> 1 `
 <? if eq <? query connection0:settings/Budget/Enabled ?> 1 `
 <? setvariable var:showBalken 1 ?>
 ` ?>
 ` ?>
 <div id="content">
  	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo $var:Text40 ?>
+		Online-Zähler
 	</div></div></div></div></div></div>
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 	<div id="uiBudget" style="display:none">
@@ -31,18 +31,18 @@
 <? if eq $var:showBalken 1 `
 				 <table id="tBalken">
 					<tr>
-						<td colspan="2">$var:Text28</td>
+						<td colspan="2">$var:Text26</td>
 					</tr>
 					<tr>
-						<td class="bar"><img src="/html/<? echo $var:lang ?>/images/gruen.gif" height="8" width="20" name="valuebar" id="uiViewImageValue" style="padding-left:3px;"></td>
-						<td><label id="uiViewLabelValue">$var:Text29</label></td>
+						<td class="bar"><img src="/html/<? echo $var:lang ?>/images/blau.gif" height="8" width="30" id="uiViewImageTime" style="padding-left:3px;"></td>
+						<td><label id="uiViewLabelTime">$var:Text27</label></td>
 					</tr>
 					<tr>
-						<td colspan="2">$var:Text26</td>
+						<td colspan="2">$var:Text28</td>
 					</tr>
 					<tr>
-						<td class="bar"><img src="/html/<? echo $var:lang ?>/images/blau.gif" height="8" width="30" id="uiViewImageTime" style="padding-left:3px;"></td>
-						<td><label id="uiViewLabelTime">$var:Text27</label></td>
+						<td class="bar"><img src="/html/<? echo $var:lang ?>/images/gruen.gif" height="8" width="20" name="valuebar" id="uiViewImageValue" style="padding-left:3px;"></td>
+						<td><label id="uiViewLabelValue">$var:Text29</label></td>
 					</tr>
 				</table>
 				<p style="display:none;" id="uiViewWarning">
@@ -63,60 +63,80 @@
 		</ul>
 		<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 			<p class="mb5"><? echo $var:Text2 ?></p>
-<? if neq $var:settimeknown 1 `
+<? if neq <? query inetstat:status/timeknown ?> 1 `
 			 <p>$var:Text3</p>
 ` ?>
 <? setvariable var:nSpan 2 ?>
-<? if eq $var:settimeknown 1 `
+<? if eq $var:OEM avm `
+	<? setvariable var:nSpan 3 ?>
+` ?>
+<? if eq <? query inetstat:status/timeknown ?> 1 `
 			<table id="tStat" class="tborder">
 				<tr>
 					<th></th>
-					<th style="width: 65px; text-align: left;">$var:Text6</th>
-					<th></th>
-					<th style="width: 130px; text-align: center; padding-left: 5px;">$var:Text7</th>
-					<th class="c23">$var:Text8</th>
+					<th style="text-align: right;">$var:Text6</th>
+					<th colspan="$var:nSpan" style="text-align: center;">$var:Text7</th>
+					<th style="text-align: right;">$var:Text8</th>
 				</tr>
 				<tr>
 					<th class="c1">$var:Text9</th>
-					<td class="c211">$var:Text10</td>
-					<td class="c212">$var:Text11</td>
-					<td class="c22">$var:Text12</td>
-					<td class="c23">$var:Text14</td>
+					<td class="c2">$var:Text10</td>
+					<td class="c2">$var:Text11</td>
+					<td class="c2">$var:Text12</td>
+<? if eq $var:OEM avm `
+					<td class="c2">$var:Text13</td>
+` ?>
+					<td class="c2">$var:Text14</td>
 				</tr>
 				<tr>
 					<th class="c1">$var:Text15</th>
-					<td class="c211"><span id="spanTodayTime">$var:Text16</span></td>
-					<td class="c212"><span id="spanTodaySum">$var:Text17</span></td>
-					<td class="c22"><span id="spanTodayOut">$var:Text17</span>$var:Text18<span id="spanTodayIn">$var:Text17</span></td>
-					<td class="c23"><? query inetstat:status/Today/OutgoingCalls ?></td>
+					<td class="c2"><span id="spanTodayTime">$var:Text16</span></td>
+					<td class="c2"><span id="spanTodaySum">$var:Text17</span></td>
+					<td class="c2"><span id="spanTodayOut">$var:Text17</span>$var:Text18<span id="spanTodayIn">$var:Text17</span></td>
+<? if eq $var:OEM avm `
+					<td class="c2"><span id="spanTodayVoIP">$var:Text17</span></td>
+` ?>
+					<td class="c2"><? query inetstat:status/Today/OutgoingCalls ?></td>
 				</tr>
 				<tr>
 					<th class="c1">$var:Text19</th>
-					<td class="c211"><span id="spanYesterdayTime">$var:Text16</span></td>
-					<td class="c212"><span id="spanYesterdaySum">$var:Text17</span></td>
-					<td class="c22"><span id="spanYesterdayOut">$var:Text17</span>$var:Text18<span id="spanYesterdayIn">$var:Text17</span></td>
-					<td class="c23"><? query inetstat:status/Yesterday/OutgoingCalls ?></td>
+					<td class="c2"><span id="spanYesterdayTime">$var:Text16</span></td>
+					<td class="c2"><span id="spanYesterdaySum">$var:Text17</span></td>
+					<td class="c2"><span id="spanYesterdayOut">$var:Text17</span>$var:Text18<span id="spanYesterdayIn">$var:Text17</span></td>
+<? if eq $var:OEM avm `
+					<td class="c2"><span id="spanYesterdayVoIP">$var:Text17</span></td>
+` ?>
+					<td class="c2"><? query inetstat:status/Yesterday/OutgoingCalls ?></td>
 				</tr>
 				<tr>
 					<th class="c1">$var:Text20</th>
-					<td class="c211"><span id="spanThisWeekTime">$var:Text16</span></td>
-					<td class="c212"><span id="spanThisWeekSum">$var:Text17</span></td>
-					<td class="c22"><span id="spanThisWeekOut">$var:Text17</span>$var:Text18<span id="spanThisWeekIn">$var:Text17</span></td>
-					<td class="c23"><? query inetstat:status/ThisWeek/OutgoingCalls ?></td>
+					<td class="c2"><span id="spanThisWeekTime">$var:Text16</span></td>
+					<td class="c2"><span id="spanThisWeekSum">$var:Text17</span></td>
+					<td class="c2"><span id="spanThisWeekOut">$var:Text17</span>$var:Text18<span id="spanThisWeekIn">$var:Text17</span></td>
+<? if eq $var:OEM avm `
+					<td class="c2"><span id="spanThisWeekVoIP">$var:Text17</span></td>
+` ?>
+					<td class="c2"><? query inetstat:status/ThisWeek/OutgoingCalls ?></td>
 				</tr>
 				<tr>
 					<th class="c1">$var:Text21</th>
-					<td class="c211"><span id="spanThisMonthTime">$var:Text16</span></td>
-					<td class="c212"><span id="spanThisMonthSum">$var:Text17</span></td>
-					<td class="c22"><span id="spanThisMonthOut">$var:Text17</span>$var:Text18<span id="spanThisMonthIn">$var:Text17</span></td>
-					<td class="c23"><? query inetstat:status/ThisMonth/OutgoingCalls ?></td>
+					<td class="c2"><span id="spanThisMonthTime">$var:Text16</span></td>
+					<td class="c2"><span id="spanThisMonthSum">$var:Text17</span></td>
+					<td class="c2"><span id="spanThisMonthOut">$var:Text17</span>$var:Text18<span id="spanThisMonthIn">$var:Text17</span></td>
+<? if eq $var:OEM avm `
+					<td class="c2"><span id="spanThisMonthVoIP">$var:Text17</span></td>
+` ?>
+					<td class="c2"><? query inetstat:status/ThisMonth/OutgoingCalls ?></td>
 				</tr>
 				<tr>
 					<th class="c1">$var:Text22</th>
-					<td class="c211"><span id="spanLastMonthTime">$var:Text16</span></td>
-					<td class="c212"><span id="spanLastMonthSum">$var:Text17</span></td>
-					<td class="c22"><span id="spanLastMonthOut">$var:Text17</span>$var:Text18<span id="spanLastMonthIn">$var:Text17</span></td>
-					<td class="c23"><? query inetstat:status/LastMonth/OutgoingCalls ?></td>
+					<td class="c2"><span id="spanLastMonthTime">$var:Text16</span></td>
+					<td class="c2"><span id="spanLastMonthSum">$var:Text17</span></td>
+					<td class="c2"><span id="spanLastMonthOut">$var:Text17</span>$var:Text18<span id="spanLastMonthIn">$var:Text17</span></td>
+<? if eq $var:OEM avm `
+					<td class="c2"><span id="spanLastMonthVoIP">$var:Text17</span></td>
+` ?>
+					<td class="c2"><? query inetstat:status/LastMonth/OutgoingCalls ?></td>
 				</tr>
 			</table>
 ` ?>
diff -burN usr/www/all/html/de/internet/inetstat.inc usr/www/all/html/de/internet/inetstat.inc
--- usr/www/all/html/de/internet/inetstat.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/internet/inetstat.inc	2006-12-13 17:03:02.000000000 +0100
@@ -34,5 +34,4 @@
 <? setvariable var:Text35 '$var:BoxName verfügt über keine gültige Uhrzeit. Die Tarifübersicht ist daher nicht verfügbar. $var:BoxName muss mindestens einmal mit dem Internet verbunden werden, damit eine gültige Uhrzeit vorliegt.' ?>
 <? setvariable var:Text36 'Hier können Sie eintragen, welches Tarifangebot Sie für Ihren Internetzugang nutzen.' ?>
 <? setvariable var:Text37 'Online-Zähler zurücksetzen' ?>
-<? setvariable var:Text38 'Tarif eintragen' ?>
-<? setvariable var:Text40 'Online-Zähler' ?>
+<? setvariable var:Text38 'Tarif festlegen' ?>
diff -burN usr/www/all/html/de/internet/inetstat.js usr/www/all/html/de/internet/inetstat.js
--- usr/www/all/html/de/internet/inetstat.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/internet/inetstat.js	2006-12-13 17:03:02.000000000 +0100
@@ -2,13 +2,10 @@
 <style type="text/css">
 <!--
 #content {width: 560px; margin: auto;}
-#tStat {margin: 1px; width: 100%; font-size: 12px;}
-#tStat td, #tStat th {padding: 0px 1px;}
-#tStat .c1 {width: 180px; text-align: left;}
-#tStat .c211 {width: 65px; text-align: right; padding-right: 10px;}
-#tStat .c212 {width: 70px; text-align: right; padding-right: 5px;}
-#tStat .c22 {width: 130px; text-align: right; padding-left: 2px;}
-#tStat .c23 {width: 90px; text-align: right; padding-right: 15px;}
+#tStat {margin: auto; width: 100%; font-size: 12px;}
+#tStat td, #tStat th {padding: 1px 5px;}
+#tStat .c1 {text-align: left;}
+#tStat .c2 {text-align: right;}
 #tBalken {margin: auto;}
 #tBalken td {padding: 4px;}
 .bar {
@@ -44,7 +41,7 @@
 function uiDoOnLoad() {
 	var timeknown = "<? query inetstat:status/timeknown ?>";
 	var budget = "<? query connection0:settings/Budget/Enabled ?>";
-<? setvariable var:settimeknown <? query inetstat:status/timeknown ?> ?>
+	
 	if (timeknown != "1") {
 		jslDisplay("BudgetNoTime", true);
 	} else {
@@ -54,7 +51,7 @@
 			jslDisplay("BudgetTarif", true);
 		}
 	}
-<? if eq $var:settimeknown 1 `
+<? if eq <? query inetstat:status/timeknown ?> 1 `
 	GetBoxDate();
 	var time = <? query inetstat:status/Today/PhyConnTimeOutgoing ?>;
 	var inh = <? query inetstat:status/Today/BytesReceivedHigh ?>;
@@ -185,14 +182,10 @@
 		var istTage = heuteTag - startTag + 1;
 	else
 		var istTage = heuteTag + ( DaysInMonth(startMonat,startJahr) - startTag ) + 1;
-<? if eq $var:settimeknown 1 `
+<? if eq <? query inetstat:status/timeknown ?> 1 `
 	// Balken für den Abrechnungszeitraum setzen
 	document.getElementById("uiViewImageTime").width = Math.ceil(Math.min(maxw,(istTage/maxTage)*maxw));
-<? if eq $var:lang 'en' `
-	SetSpanText("uiViewLabelTime", g_txt_isTage+istTage);
-` `
 	SetSpanText("uiViewLabelTime", istTage+g_txt_isTage);
-` ?>
 	// Zeitbalken
 	var max = Math.ceil(<? query connection0:settings/Budget/ConnectionTime ?>/60);
 	var maxh = Math.ceil(max/60);
@@ -264,11 +257,7 @@
 		if (cur<max) tipp = tipp.replace(/%2/,kritTag+"."+kritMonat+"."+kritJahr);
 		// Texte setzen
 		jslSetSpanText("uiViewTipp",tipp);
-<? if eq $var:lang 'en' `
-		jslSetSpanText("uiViewEndDate",endTag+"/"+endMonat+"/"+endJahr);
-` `
 		jslSetSpanText("uiViewEndDate",endTag+"."+endMonat+"."+endJahr);
-` ?>
 	}
 ` ?>
 ` ?>
@@ -284,9 +273,12 @@
 	SetSpanText("span"+name+"In",MakeVolStr(inh,inl));
 	SetSpanText("span"+name+"Out",MakeVolStr(outh,outl));
 	SetSpanText("span"+name+"Sum",MakeVolSumStr(inh,outh,inl,outl));
+<? if eq $var:OEM avm '
+	SetSpanText("span"+name+"VoIP",MakeVolSumStr(vinh,vouth,vinl,voutl));
+' ?>
 }
 function uiDoRefresh() {
-	jslGoTo("","inetstat");
+	jslGoTo(jslGetValue("uiPostMenu"),"inetstat");
 }
 function uiDoHelp() {
 	if (jslGetValue("uiPostTab") == "1") {
@@ -356,11 +348,11 @@
 function uiDoReset() {
 	if (confirm(g_mldReset) == true) {
 		jslSetValue("uiPostStatReset","1");
-		jslFormSubmitEx("", "inetstat", "inetstat");
+		jslFormSubmitEx(jslGetValue("uiPostMenu"), "inetstat", "inetstat");
 	}
 }
 function uiDoBudget() {
-	jslFormSubmitEx("", "budget", "inetstat");
+	jslFormSubmitEx(jslGetValue("uiPostMenu"), "budget", "inetstat");
 }
 function DaysInMonth(month,year) {
 	var ret = 31;
@@ -386,7 +378,4 @@
 	jslDisplay("uiCounter", n==1);
 	jslSetValue("uiPostTab", n);
 }
-function uiDoNutzung() {
-	jslGoTo("", "userlist");
-}
 </script>
diff -burN usr/www/all/html/de/internet/internet_expert.html usr/www/all/html/de/internet/internet_expert.html
--- usr/www/all/html/de/internet/internet_expert.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/internet/internet_expert.html	2006-12-13 17:03:02.000000000 +0100
@@ -77,11 +77,11 @@
 				<table id="tDslModem">
 					<tr>
 						<td><label for="uiViewDslModemVPI"><? echo $var:Text68 ?></label></td>
-						<td><input type="text" size="5" maxlength="3" class="Eingabefeld" id="uiViewDslModemVPI"></td>
+						<td><input type="text" size="4" maxlength="3" class="Eingabefeld" id="uiViewDslModemVPI"></td>
 					</tr>
 					<tr>
 						<td><label for="uiViewDslModemVCI"><? echo $var:Text69 ?></label></td>
-						<td><input type="text" size="5" maxlength="5" class="Eingabefeld" id="uiViewDslModemVCI"></td>
+						<td><input type="text" size="4" maxlength="3" class="Eingabefeld" id="uiViewDslModemVCI"></td>
 					</tr>
 				</table>
 			</div>
@@ -93,11 +93,11 @@
 			<table id="tDslIp">
 				<tr>
 					<td><label for="uiViewDslIpVPI"><? echo $var:Text68 ?></label></td>
-					<td><input type="text" size="5" maxlength="3" class="Eingabefeld" id="uiViewDslIpVPI"></td>
+					<td><input type="text" size="4" maxlength="3" class="Eingabefeld" id="uiViewDslIpVPI"></td>
 				</tr>
 				<tr>
 					<td><label for="uiViewDslIpVCI"><? echo $var:Text69 ?></label></td>
-					<td><input type="text" size="5" maxlength="5" class="Eingabefeld" id="uiViewDslIpVCI"></td>
+					<td><input type="text" size="4" maxlength="3" class="Eingabefeld" id="uiViewDslIpVCI"></td>
 				</tr>
 			</table>
 		</div>
@@ -204,12 +204,12 @@
 			<table id="tTraffic" class="ml25">
 				<tr>
 					<td><label for="uiViewDslSpeedUpstream"><? echo $var:Text92 ?></label></td>
-					<td><input type="text" size="6" maxlength="5" id="uiViewDslSpeedUpstream"></td>
+					<td><input type="text" size="10" maxlength="10" id="uiViewDslSpeedUpstream"></td>
 					<td><? echo $var:Text106 ?></td>
 				</tr>
 				<tr>
 					<td><label for="uiViewDslSpeedDownstream"><? echo $var:Text93 ?></label></td>
-					<td><input type="text" size="6" maxlength="5" id="uiViewDslSpeedDownstream"></td>
+					<td><input type="text" size="10" maxlength="10" id="uiViewDslSpeedDownstream"></td>
 					<td><? echo $var:Text106 ?></td>
 				</tr>
 			</table>
@@ -220,12 +220,12 @@
 		<table id="tStream" class="ml25">
 			<tr>
 				<td><label for="uiViewUpstream"><? echo $var:Text92 ?></label></td>
-				<td><input type="text" size="6" maxlength="5" class="Eingabefeld" id="uiViewUpstream"></td>
+				<td><input type="text" size="10" maxlength="10" class="Eingabefeld" id="uiViewUpstream"></td>
 				<td><? echo $var:Text106 ?></td>
 			</tr>
 			<tr>
 				<td><label for="uiViewDownstream"><? echo $var:Text93 ?></label></td>
-				<td><input type="text" size="6" maxlength="5" class="Eingabefeld" id="uiViewDownstream"></td>
+				<td><input type="text" size="10" maxlength="10" class="Eingabefeld" id="uiViewDownstream"></td>
 				<td><? echo $var:Text106 ?></td>
 			</tr>
 		</table>
@@ -239,11 +239,11 @@
 			<table id="tDslPpp">
 				<tr>
 					<td><label for="uiViewDslPppVPI"><? echo $var:Text68 ?></label></td>
-					<td><input type="text" size="5" maxlength="3" class="Eingabefeld" id="uiViewDslPppVPI"></td>
+					<td><input type="text" size="4" maxlength="3" class="Eingabefeld" id="uiViewDslPppVPI"></td>
 				</tr>
 				<tr>
 					<td><label for="uiViewDslPppVCI"><? echo $var:Text69 ?></label></td>
-					<td><input type="text" size="5" maxlength="5" class="Eingabefeld" id="uiViewDslPppVCI"></td>
+					<td><input type="text" size="4" maxlength="3" class="Eingabefeld" id="uiViewDslPppVCI"></td>
 				</tr>
 				<tr>
 					<td><? echo $var:Text71 ?></td>
diff -burN usr/www/all/html/de/internet/internet_expert.inc usr/www/all/html/de/internet/internet_expert.inc
--- usr/www/all/html/de/internet/internet_expert.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/internet/internet_expert.inc	2006-12-13 17:03:02.000000000 +0100
@@ -1,9 +1,9 @@
 <? include ../html/$var:lang/global.inc ?>
 <? setvariable var:Text1 'Anschluss' ?>
-<? setvariable var:Text2 'Wählen Sie, ob Ihre Internetverbindung über DSL oder LAN hergestellt wird.' ?>
+<? setvariable var:Text2 'Wählen Sie, ob ihre Internetverbindung über DSL oder LAN hergestellt wird.' ?>
 <? setvariable var:Text3 'Internetzugang über DSL' ?>
-<? setvariable var:Text4 'Wählen Sie diese Zugangsart, wenn FRITZ!Box direkt mit Ihrem DSL-Anschluss verbunden ist.' ?>
-<? setvariable var:Text5 'Internetzugang über LAN A / WAN' ?>
+<? setvariable var:Text4 'Wählen Sie diese Zugangsart, wenn FRITZ!Box direkt mit ihrem DSL-Anschluss verbunden ist.' ?>
+<? setvariable var:Text5 'Internetzugang über LAN 1' ?>
 <? if eq $var:OEM 1und1 `
 <? setvariable var:Text6 'Wählen Sie diesen Zugang, wenn Sie FRITZ!Box an ein bereits vorhandenes Netzwerk (LAN) oder einen DSL-Router anschließen möchten.' ?>
 ` `
@@ -28,13 +28,13 @@
 <? setvariable var:Text61 'FRITZ!Box arbeitet als DSL-Modem und baut keine eigene Internetverbindung auf. Alle angeschlossenen Netzwerkgeräte bauen ihre eigene Internetverbindung auf.' ?>
 <? setvariable var:Text62 'Filter für DSL-Modem aktivieren (empfohlen)' ?>
 <? setvariable var:Text63 'Wenn diese Option aktiviert ist, werden ausschließlich PPPoE-Pakete über DSL übertragen. Es ist zudem sichergestellt, dass niemals Pakete der Datei- und Druckerfreigabe ins Internet übertragen werden.' ?>
-<? setvariable var:Text64 'Wird diese Option deaktiviert, werden alle Datenpakete über DSL übertragen. Die DSL-LED ist deaktiviert. Alle Computer müssen sich im selben IP-Netzwerk befinden.' ?>
+<? setvariable var:Text64 'Wird diese Option deaktiviert, werden alle Datenpakete über DSL übertragen. Alle Computer müssen sich im selben IP-Netzwerk befinden.' ?>
 <? setvariable var:Text65 'DSL-ATM-Einstellungen' ?>
 <? setvariable var:Text66 'Alle ATM-Einstellungen automatisch erkennen' ?>
 <? setvariable var:Text67 'ATM-Einstellungen manuell festlegen' ?>
 <? setvariable var:Text68 'VPI' ?>
 <? setvariable var:Text69 'VCI' ?>
-<? setvariable var:Text70 'Die Werte für die folgenden ATM-Einstellungen erhalten Sie von Ihrem DSL-Anbieter.' ?>
+<? setvariable var:Text70 'Die Werte für die folgenden ATM-Einstellungen erhalten Sie von ihrem DSL-Anbieter.' ?>
 <? setvariable var:Text71 'Kapselung' ?>
 <? setvariable var:Text72 'Bridged (Routed Bridge Encapsulation)' ?>
 <? setvariable var:Text73 'IP-Adresse automatisch über DHCP beziehen' ?>
@@ -47,17 +47,17 @@
 <? setvariable var:Text80 'Primärer DNS-Server' ?>
 <? setvariable var:Text81 'Sekundärer DNS-Server' ?>
 <? setvariable var:Text82 'Mac-Adresse der FRITZ!Box: ' ?>
-<? setvariable var:Text84 'Geben Sie die IP-Einstellungen, die Sie in Ihrem Netzwerk verwenden wollen, hier an.' ?>
+<? setvariable var:Text84 'Geben Sie die IP-Einstellungen, die Sie in ihrem Netzwerk verwenden wollen, hier an.' ?>
 <? setvariable var:Text85 'Vorsicht: Die Oberfläche der FRITZ!Box ist nach dem Übernehmen der Änderungen nur noch über die eingestellte oder automatisch über DHCP vergebene IP-Adresse erreichbar.' ?>
 <? setvariable var:Text86 'Geben Sie die IP-Einstellungen hier an.' ?>
 <? setvariable var:Text87 'Angeschlossene Netzwerkgeräte dürfen zusätzlich ihre eigene Internetverbindung aufbauen (PPPoE-Passthrough)' ?>
 <? setvariable var:Text88 'Traffic-Shaping benutzen' ?>
-<? setvariable var:Text89 'Traffic Shaping optimiert die DSL-Übertragung und ermöglicht auch bei gleichzeitigem Up- und Download das Ausschöpfen der vollen Geschwindigkeit Ihrer DSL-Verbindung.' ?>
-<? setvariable var:Text90 'Stellen Sie die Geschwindigkeit Ihrer Internetverbindung ein. Diese Werte werden zur Sicherung der Internettelefonie-Sprachqualität benötigt.' ?>
+<? setvariable var:Text89 'Traffic Shaping optimiert die DSL-Übertragung und ermöglicht auch bei gleichzeitigem Up- und Download das Ausschöpfen der vollen Geschwindigkeit ihrer DSL-Verbindung.' ?>
+<? setvariable var:Text90 'Stellen Sie die Geschwindigkeit ihrer Internetverbindung ein. Diese Werte werden zur Sicherung der Internettelefonie-Sprachqualität benötigt.' ?>
 <? setvariable var:Text91 'Diese Werte werden zur Sicherung der Internettelefonie-Sprachqualität benötigt.' ?>
 <? setvariable var:Text92 'Upstream' ?>
 <? setvariable var:Text93 'Downstream' ?>
-<? setvariable var:Text94 'Bitte beachten Sie, dass nur in seltenen Fällen eine manuelle Einstellung erforderlich ist. Die erforderlichen Werte erhalten Sie von Ihrem DSL-Anbieter.' ?>
+<? setvariable var:Text94 'Bitte beachten Sie, dass nur in seltenen Fällen eine manuelle Einstellung erforderlich ist. Die erforderlichen Werte erhalten Sie von ihrem DSL-Anbieter.' ?>
 <? setvariable var:Text95 'PPPoE' ?>
 <? setvariable var:Text96 'PPPoA/LLC' ?>
 <? setvariable var:Text97 'PPPoA/VC-Mux' ?>
@@ -65,10 +65,10 @@
 <? setvariable var:Text99 'Falls Ihr Internetanbieter eine spezielle MAC-Adresse erwartet, geben Sie diese hier an' ?>
 <? setvariable var:Text100 'Mac-Adresse: ' ?>
 <? setvariable var:Text101 ' :' ?>
-<? setvariable var:Text102 'Traffic Shaping benötigt Angaben zur Geschwindigkeit Ihres DSL-Anschlusses:' ?>
+<? setvariable var:Text102 'Traffic Shaping benötigt Angaben zur Geschwindigkeit ihres DSL-Anschlusses:' ?>
 <? setvariable var:Text103 'Geschwindigkeiten des DSL-Anschlusses automatisch einstellen' ?>
 <? setvariable var:Text104 'Geschwindigkeiten des DSL-Anschlusses manuell angeben' ?>
-<? setvariable var:Text105 'Momentan verwendet FRITZ!Box an jeder Schnittstelle unterschiedliche IP-Einstellungen. In diesem Modus ist die Option "Internetzugang über LAN A / WAN" nicht verfügbar. Aktivieren Sie zunächst unter System/Netzwerkeinstellungen/IP-Adressen die Option "Alle Computer befinden sich im selben Netzwerk", wenn Sie diesen Modus nutzen wollen.' ?>
+<? setvariable var:Text105 'Momentan verwendet FRITZ!Box an jeder Schnittstelle unterschiedliche IP-Einstellungen. In diesem Modus ist die Option "Internetzugang über LAN A" nicht verfügbar. Aktivieren Sie zunächst unter System/Netzwerkeinstellungen/IP-Adressen die Option "Alle Computer befinden sich im selben Netzwerk", wenn Sie diesen Modus nutzen wollen.' ?>
 <? setvariable var:Text106 'kBit/s' ?>
 <? setvariable var:Text107 'DHCP-Hostname' ?>
 <? setvariable var:Text108 'IP-Adresse manuell festlegen' ?>
diff -burN usr/www/all/html/de/internet/internet_expert.js usr/www/all/html/de/internet/internet_expert.js
--- usr/www/all/html/de/internet/internet_expert.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/internet/internet_expert.js	2006-12-13 17:03:02.000000000 +0100
@@ -2,11 +2,10 @@
 <? setvariable var:contype pppoe ?>
 <style type="text/css">
 <!--
-#content {width: 540px; margin: auto;}
+#content {width: 520px; margin: auto;}
 #tStream td {padding: 1px 15px 1px 0px;}
 #tTraffic td {padding: 1px 15px 1px 0px;}
 #tUser td {padding: 0px;}
-#tDbd td {padding: 0px;}
 #tDslModem td {padding: 1px 15px 1px 0px;}
 #tDslPpp td {padding: 1px 15px 1px 0px; vertical-align: top;}
 #tDslIp td {padding: 1px 15px 1px 0px;}
@@ -30,7 +29,7 @@
 var g_VPIMustNumber			= "VPI: Ungültige Eingabe, es sind nur Ziffern erlaubt.";
 var g_VCIMustNumber			= "VCI: Ungültige Eingabe, es sind nur Ziffern erlaubt.";
 var g_VPIOutOfRange			= "VPI: Ungültige Eingabe, es sind Eingaben zwischen 0 und 255 erlaubt.";
-var g_VCIOutOfRange			= "VCI: Ungültige Eingabe, es sind Eingaben zwischen 32 und 65535 erlaubt.";
+var g_VCIOutOfRange			= "VCI: Ungültige Eingabe, es sind Eingaben zwischen 0 und 255 erlaubt.";
 var g_NoEncapsModeDefined	= "Keine Kapselung festgelegt.";
 var g_mldStreamPre			= "Warnung! Der Wert ";
 var g_mldUpstreamPost		= " im Feld Upstream ist sehr klein. Sind Sie sich sicher, dass dieser Wert korrekt ist?";
@@ -42,9 +41,8 @@
 var g_mldWanRouter1 = "Mit Übernahme der Einstellungen wird die \"";
 var g_mldWanRouter2 = "\"-Buchse Ihrer FRITZ!Box zur WAN-Schnittstelle (Verbindung zum Internet).\x0a\x0aAchtung:\x0aDie Oberfläche Ihrer FRITZ!Box ist danach nur noch über ";
 var g_mldWanRouter3 = " erreichbar.";
-var g_txtAlert_1 = "Die VLAN-ID muss einen Wert zwischen 6 und 4095 haben.";
-var g_mldLan1			= "LAN / WAN";
-var g_mldLan2			= "";
+var g_mldLan1			= "LAN 1";
+var g_mldLan2			= "LAN 2, LAN 3, LAN 4";
 var g_mldWLAN		= "WLAN";
 var g_mldUSB			= "USB";
 var g_AlleImNetz = "<? query box:settings/lanbridge/activated ?>";
@@ -303,6 +301,7 @@
 	jslSetChecked("uiViewWanType10", n==1 || n==2);
 	jslSetChecked("uiViewWanType1", n==1);
 	jslSetChecked("uiViewWanType2", n==2);
+	
 	switch (n) {
 		case 0:
 			g_WanType = n;
@@ -349,16 +348,19 @@
 		if (!valIsZahlVorhanden(vpi)) {alert(g_VPIMustNumber); return false;}
 		if ((vpi < 0) || (vpi > 255)) {alert(g_VPIOutOfRange); return false;}
 		if (!valIsZahlVorhanden(vci)) {alert(g_VCIMustNumber); return false;}
-		if ((vci < 32) || (vci > 65535)) {alert(g_VCIOutOfRange); return false;}
+		if ((vci < 0) || (vci > 255)) {alert(g_VCIOutOfRange); return false;}
+		
 		jslSetValue("uiPostAutodetect", "0");
 		jslSetValue("uiPostVPI", vpi);
 		jslSetValue("uiPostVCI", vci);
 	}
 	jslSetValue("uiPostFullBridge", jslGetChecked("uiViewFullBridge") ? "0":"1");
 	jslEnable("uiPostFullBridge");
+	
 	jslEnable("uiPostAutodetect");
 	jslEnable("uiPostVPI");
 	jslEnable("uiPostVCI");
+	
 	jslSetValue("uiPostAta", "0");
 	jslSetValue("uiPostType", "bridge");
 	jslSetValue("uiPostActivType", "bridge");
@@ -384,7 +386,8 @@
 			if (!valIsZahlVorhanden(vpi)) {alert(g_VPIMustNumber); return false;}
 			if ((vpi < 0) || (vpi > 255)) {alert(g_VPIOutOfRange); return false;}
 			if (!valIsZahlVorhanden(vci)) {alert(g_VCIMustNumber); return false;}
-			if ((vci < 32) || (vci > 65535)) {alert(g_VCIOutOfRange); return false;}
+			if ((vci < 0) || (vci > 255)) {alert(g_VCIOutOfRange); return false;}
+	
 			if (jslGetChecked("uiViewDslPppPPPoA1")) jslSetValue("uiPostEncaps", "dslencap_pppoa_llc");
 			else if (jslGetChecked("uiViewDslPppPPPoA2")) jslSetValue("uiPostEncaps", "dslencap_pppoa");
 			else if (jslGetChecked("uiViewDslPppPPPoE")) jslSetValue("uiPostEncaps", "dslencap_pppoe");
@@ -425,7 +428,7 @@
 	if (!valIsZahlVorhanden(vpi)) {alert(g_VPIMustNumber); return false;}
 	if ((vpi < 0) || (vpi > 255)) {alert(g_VPIOutOfRange); return false;}
 	if (!valIsZahlVorhanden(vci)) {alert(g_VCIMustNumber); return false;}
-	if ((vci < 32) || (vci > 65535)) {alert(g_VCIOutOfRange); return false;}
+	if ((vci < 0) || (vci > 255)) {alert(g_VCIOutOfRange); return false;}
 	var SpeedManu = jslGetChecked("uiViewDslSpeedManu");
 	if (SpeedManu && !ValidateSpeed(jslGetValue("uiViewDslSpeedUpstream"), jslGetValue("uiViewDslSpeedDownstream"))) return false;
 	jslSetValue("uiPostAutodetect", "0");
@@ -443,18 +446,22 @@
 		}
 		jslEnable("uiPostSarDhcp");
 		jslSetValue("uiPostEncaps", "dslencap_ether");
+		
 	} else if (jslGetChecked("uiViewDslIpEncaps2")) {
 		if (!ValidateDslIpAdr()) return false;
 		jslSetValue("uiPostEncaps", "dslencap_ipnlpid");
 		SaveDslIpAdr();
+		
 	} else if (jslGetChecked("uiViewDslIpEncaps3")) {
 		if (!ValidateDslIpAdr()) return false;
 		jslSetValue("uiPostEncaps", "dslencap_ipsnap");
 		SaveDslIpAdr();
+		
 	} else if (jslGetChecked("uiViewDslIpEncaps4")) {
 		if (!ValidateDslIpAdr()) return false;
 		jslSetValue("uiPostEncaps", "dslencap_ipraw");
 		SaveDslIpAdr();
+		
 	} else {
 		alert(g_NoEncapsModeDefined); return false;
 	}
@@ -509,6 +516,7 @@
 	jslCopyValue("uiPostDownstream", "uiViewDownstream");
 	jslEnable("uiPostUpstream");
 	jslEnable("uiPostDownstream");
+	
 	jslSetValue("uiPostType", "bridge");
 	jslSetValue("uiPostActivType", "bridge");
 	jslSetValue("uiPostAta", "1");
@@ -530,10 +538,12 @@
 	}
 	if (!afDoSave()) return false;
 	if (changed && !WanRouterAlert()) return false;
+	
 	var traffic = jslGetChecked("uiViewTraffic");
 	if (traffic && !ValidateSpeed(jslGetValue("uiViewUpstream"), jslGetValue("uiViewDownstream"))) return false;
 	jslSetValue("uiPostRouterBridge", jslGetChecked("uiViewRouterBridge") ? "1":"0");
 	jslEnable("uiPostRouterBridge");
+	
 	jslSetValue("uiPostTraffic", traffic ? "1":"0");
 	jslEnable("uiPostTraffic");
 	if (traffic) {
@@ -543,6 +553,8 @@
 		jslEnable("uiPostDownstream");
 	}
 	enableAfForm(true);
+	jslSetValue("uiPostEncaps","dslencap_pppoe");
+	jslEnable("uiPostEncaps");
 	jslSetValue("uiPostType", "pppoe");
 	jslSetValue("uiPostActivType", "pppoe");
 	jslSetValue("uiPostAta", "1");
@@ -636,6 +648,7 @@
 	if (upstream < 128) {
 		if (confirm(g_mldStreamPre+upstream+g_mldUpstreamPost) != true) return false;
 	}
+	
 	if (downstream.match(numberpattern) == null) {alert(g_mldDownstreamNum); return false;}
 	downstream = parseInt(downstream);
 	if (downstream < 128) {
@@ -778,15 +791,15 @@
 	jslSetEnabled("uiPostRegistrar0", b);
 }
 function doPopWindow() {
-	var params = "var:lang=<? echo $var:lang ?>&var:ipa="+jslGetValue("uiPostIpaddr")+"&var:maska="+jslGetValue("uiPostNetmask");
+	var params = "var:ipa="+jslGetValue("uiPostIpaddr")+"&var:maska="+jslGetValue("uiPostNetmask");
 	var url = "../cgi-bin/webcm?getpage=../html/<?echo $var:lang ?>/internet/pp_wanbridge.html&"+params;
-	var ppWindow = window.open(url, g_secondWindow, "width=450,height=250,statusbar,resizable=yes");
+	var ppWindow = window.open(url, g_secondWindow, "width=450,height=200,statusbar,resizable=yes");
 	ppWindow.focus();
 }
 function OnChangeProviderEx (id) {
 	// Bei Inode werden die Parameter automatisch gesetzt
 	jslDisplay("uiRouterBridge", id != "Inode");
 	jslDisplay("uiTraffic", id != "Inode");
-	jslDisplay("uiDslPpp", (id != "Inode") && jslGetChecked( "uiViewAnschlussDsl"));
+	jslDisplay("uiDslPpp", id != "Inode");
 }
 </script>
diff -burN usr/www/all/html/de/internet/internet.frm usr/www/all/html/de/internet/internet.frm
--- usr/www/all/html/de/internet/internet.frm	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/internet/internet.frm	2006-12-13 17:03:02.000000000 +0100
@@ -1,14 +1,12 @@
 <? setvariable var:name 'pppoe' ?>
 <? if eq $var:isDsl 0 `
-<? if eq $var:isVdsl 0 `
 	<? if eq <? query box:settings/expertmode/activated ?> 1 `
 		<? setvariable var:name 'internet_expert' ?>
 	` `
 		<? setvariable var:name '<? query connection0:settings/type ?>' ?>
 	` ?>
 ` ?>
-` ?>
-<? if eq <? query connection0:settings/type ?> 'pppoe' `<? setvariable var:name 'userlist' ?>` ?>
+<? if eq <? query connection0:settings/type ?> 'pppoe' `<? setvariable var:name 'inetstat' ?>` ?>
 <? if eq '<? query wlan:settings/WDS_enabled ?>' '1' `
 <? if eq '<? query wlan:settings/WDS_hop ?>' '1' `
 <? if eq $var:isAta 0 `<? setvariable var:name 'repeater' ?>` ?>
diff -burN usr/www/all/html/de/internet/internet.html usr/www/all/html/de/internet/internet.html
--- usr/www/all/html/de/internet/internet.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/internet/internet.html	2006-12-13 17:03:02.000000000 +0100
@@ -8,7 +8,7 @@
 	` ?>
 ` ?>
 ` ?>
-<? if eq <? query connection0:settings/type ?> 'pppoe' `<? setvariable var:name 'userlist' ?>` ?>
+<? if eq <? query connection0:settings/type ?> 'pppoe' `<? setvariable var:name 'inetstat' ?>` ?>
 <? if eq '<? query wlan:settings/WDS_enabled ?>' '1' `
 <? if eq '<? query wlan:settings/WDS_hop ?>' '1' `
 <? if eq $var:isAta 0 `<? setvariable var:name 'repeater' ?>` ?>
diff -burN usr/www/all/html/de/internet/internet.js usr/www/all/html/de/internet/internet.js
--- usr/www/all/html/de/internet/internet.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/internet/internet.js	2006-12-13 17:03:02.000000000 +0100
@@ -8,7 +8,7 @@
 	` ?>
 ` ?>
 ` ?>
-<? if eq <? query connection0:settings/type ?> 'pppoe' `<? setvariable var:name 'userlist' ?>` ?>
+<? if eq <? query connection0:settings/type ?> 'pppoe' `<? setvariable var:name 'inetstat' ?>` ?>
 <? if eq '<? query wlan:settings/WDS_enabled ?>' '1' `
 <? if eq '<? query wlan:settings/WDS_hop ?>' '1' `
 <? if eq $var:isAta 0 `<? setvariable var:name 'repeater' ?>` ?>
diff -burN usr/www/all/html/de/internet/overview.html usr/www/all/html/de/internet/overview.html
--- usr/www/all/html/de/internet/overview.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/internet/overview.html	2007-07-11 22:32:04.000000000 +0200
@@ -4,7 +4,6 @@
 <? setvariable var:gelbeLeitung "Gelbe_Leitung.gif" ?>
 <? setvariable var:roteLeitung "Rote_Leitung.gif" ?>
 <? setvariable var:grueneLeitung "Gruene_Leitung.gif" ?>
-<? setvariable var:hellblaueLeitung "Hellblaue_Leitung.gif" ?>
 <? setvariable var:DSLTrainingIndex "<? query sar:status/dsl_carrier_state ?>" ?>
 <? setvariable var:DSLTrainingState "$var:Text20" ?>
 <? setvariable var:DSLColor "$var:gelbeLeitung" ?>
@@ -23,12 +22,6 @@
 <? if eq `$var:DSLTrainingIndex` `5` `
 	<? setvariable var:DSLTrainingState "$var:Text17" ?>
 	<? setvariable var:DSLColor "$var:grueneLeitung" ?>
-<? if neq '<? query sar:status/exp_pm_mode_L2 ?>' '0' `
-<? if eq '<? query sar:status/exp_pm_mode_L2_act ?>' '1' `
-	<? setvariable var:DSLTrainingState "$var:Text25" ?>
-	<? setvariable var:DSLColor "$var:hellblaueLeitung" ?>
-` ?>
-` ?>
 ` ?>
 <div id="content">
 <div id="content">
@@ -40,8 +33,6 @@
 		<li class="tabs_on"><a href="javascript:uiDoOverviewPage()"><? echo $var:Text2 ?></a></li>
 		<li><a href="javascript:uiDoADSLPage()"><? echo $var:Text3 ?></a></li>
 		<li><a href="javascript:uiDoATMPage()"><? echo $var:Text4 ?></a></li>
-		<li><a href="javascript:uiDoBitsPage()"><? echo $var:Text5 ?></a></li>
-		<li><a href="javascript:uiDoExpertPage()"><? echo $var:Text19 ?></a></li>
 	</ul>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<table style="margin:auto">
@@ -57,7 +48,6 @@
 						<div style="position:absolute; top:0px; left:0px; width:305px; height:95px"><img src="../html/<? echo $var:lang ?>/images/<? echo $var:Illu ?>"></div>
 						<div class="dslRate" style="position:absolute; top:39px; left:79px;"><? query sar:status/dsl_us_rate ?><? echo $var:Text8 ?></div>
 						<div class="dslRate" style="position:absolute; top:8px; left:180px;"><? query sar:status/dsl_ds_rate ?><? echo $var:Text8 ?></div>
-						<div style="position:absolute; top:61px; left:99px;">
 							<img src='../html/<? echo $var:lang ?>/images/<? echo $var:DSLColor ?>' >
 						</div>
 					</div>
@@ -68,19 +58,14 @@
 				<td colspan="3">
 					<table>
 						<tr>
-							<td class="Label" width="140px"><? echo $var:Text11 ?></td>
-							<td class="Text1" style="text-align: center;"><? echo $var:DSLTrainingState ?></td>
-<? if neq `$var:DSLTrainingIndex` `5` `
+							<td class="Label" style="padding-bottom: 10px;" width="140"><? echo $var:Text11 ?></td>
+							<td class="Text1" style="text-align: center; padding-bottom: 10px;"><? echo $var:DSLTrainingState ?></td>
 							<td class="Text2"></td>
-`?>						
-<? if eq `$var:DSLTrainingIndex` `5` `
-<td class="Text2"><script type="text/javascript">document.write(Sek2Dauer("<? query sar:status/modem_ShowtimeSecs ?>"));</script></td>
-`?>						
 						</tr>
 						<tr>
-							<td class="Label" style="padding-top: 10px;"><? echo $var:Text12 ?></td>
-							<td class="Text1" style="padding-top: 10px;"><? echo $var:Text13 ?></td>
-							<td class="Text2" style="padding-top: 10px;"><? query sar:status/ATUC_vendor_ID ?></td>
+							<td class="Label"><? echo $var:Text12 ?></td>
+							<td class="Text1"><? echo $var:Text13 ?></td>
+							<td class="Text2"><? query sar:status/ATUC_vendor_ID ?></td>
 						</tr>
 						<tr>
 							<td class="Label"><? echo $var:Text14 ?></td>
diff -burN usr/www/all/html/de/internet/overview.inc usr/www/all/html/de/internet/overview.inc
--- usr/www/all/html/de/internet/overview.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/internet/overview.inc	2006-12-13 17:03:02.000000000 +0100
@@ -23,4 +23,3 @@
 <? setvariable var:Text22 'Versionsnummer' ?>
 <? setvariable var:Text23 'Seriennummer' ?>
 <? setvariable var:Text24 'Vdsl-Profil' ?>
-<? setvariable var:Text25 'DSL Aktiv [L2 Power Mode]' ?>
diff -burN usr/www/all/html/de/internet/overview.js usr/www/all/html/de/internet/overview.js
--- usr/www/all/html/de/internet/overview.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/internet/overview.js	2006-12-13 17:03:02.000000000 +0100
@@ -36,20 +36,4 @@
 function uiDoRefresh() {
 	jslGoTo("internet","overview");
 }
-function Sek2Dauer (sec) {
-	if (sec == "no-emu") sec = "0";
-	var d = Math.floor(sec/86400);
-	var h = Math.floor((sec % 86400)/3600);
-	var m = Math.floor((sec % 3600)/60);
-	var s = Math.floor(sec % 60);
-	if (d != 0) {
-		return d.toString()+":"+ZweistelligeNummer(h)+":"+ZweistelligeNummer(m)+":"+ZweistelligeNummer(s);
-	} else {
-		return h.toString()+":"+ZweistelligeNummer(m)+":"+ZweistelligeNummer(s);
-	}
-}
-function ZweistelligeNummer (n) {
-	if (n>9) return n.toString();
-	return "0"+n.toString();
-}
 </script>
diff -burN usr/www/all/html/de/internet/portfw.html usr/www/all/html/de/internet/portfw.html
--- usr/www/all/html/de/internet/portfw.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/internet/portfw.html	2006-12-13 17:03:02.000000000 +0100
@@ -29,10 +29,10 @@
 				<td class="c4"><script type="text/javascript">document.write(PortRange('$5','$8','$5'));</script></td>
 				<td class="c5">$6</td>
 				<td class="c6"><script type="text/javascript">document.write(PortRange('$5','$8','$7'));</script></td>
-				<td class="Iconbutton"><button type="button" id="uiViewEdit$1" onClick="uiDoEdit('$1')" value="<? echo $var:txtIconBtnEdit ?>" title="$var:Text11" style="width: 30px">
+				<td class="Iconbutton"><button type="button" id="uiViewEdit$1" onClick="uiDoEdit('$1')" value="$var:Text11" title="$var:Text11" style="width: 30px">
 					<img src="../html/$var:lang/images/bearbeiten.gif" align=bottom width=16 height=16 hspace=4>
 				</button></td>
-				<td class="Iconbutton"><button type="button" id="uiViewDelete$1" onClick="uiDoDelete('$1')" value="<? echo $var:txtIconBtnDelete ?>" title="$var:Text12" style="width: 30px">
+				<td class="Iconbutton"><button type="button" id="uiViewDelete$1" onClick="uiDoDelete('$1')" value="$var:Text12" title="$var:Text12" style="width: 30px">
 					<img src="../html/$var:lang/images/loeschen.gif" align=bottom width=16 height=16 hspace=4>
 				</button></td>
 			</tr>
@@ -50,7 +50,7 @@
 					<img src="../html/<? echo $var:lang ?>/images/loeschen.gif" align=bottom width=16 height=16 hspace=4>
 				</button></td>
 			</tr>
-<? if eq <? query forwardrules:settings/rule/count ?> 0 `
+<? if eq <? multiquerycount forwardrules:settings/rule/list ?> 0 `
 <? if eq `<? query forwardrules:settings/exposed_host ?>` `` ` 
 			<tr class="bcWeiss"><td colspan=8 class="ac">$var:Text19</td></tr>
 ` ?>
@@ -65,17 +65,18 @@
 		<? include ../html/$var:lang/home/error.html ?>
 	</div></div></div></div></div></div>
 	<div class="backtitel" id="Upnptitel" style="display:none"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo $var:Text20 ?>
+		Über UPnP geöffnete Ports
 	</div></div></div></div></div></div>
 	<div class="backdialog" id="Upnp" style="display:none"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p class="mb10"><? echo $var:Text21 ?></p>
+		<p class="mb10">Die aktuelle Konfiguration Ihrer FRITZ!Box gestattet die Änderung der Sicherheitseinstellungen über UPnP. Anwendungen mit 
+		UPnP-Unterstützung können somit automatisch weitere Ports öffnen.</p>
 		<table id="tUpnp" class="tborder">
 			<tr>
-				<th class="c1"><? echo $var:Text22 ?></th>
-				<th class="c2"><? echo $var:Text23 ?></th>
-				<th class="c3"><? echo $var:Text24 ?></th>
-				<th class="c4"><? echo $var:Text25 ?></th>
-				<th class="c5"><? echo $var:Text26 ?></th>
+				<th class="c1">Protokoll</th>
+				<th class="c2">Port</th>
+				<th class="c3">an Rechnername</th>
+				<th class="c4">an IP-Adresse</th>
+				<th class="c5">an Port</th>
 				<th class="Iconbutton">&nbsp;</th>
 			</tr>
 <? multiquery igdforwardrules:settings/rule/list(protocol,port,fwname,fwip,fwport) `
@@ -85,20 +86,20 @@
 				<td class="c3">$4</td>
 				<td class="c4">$5</td>
 				<td class="c5">$6</td>
-				<td class="Iconbutton"><button type="button" onClick="uiDoDeleteUpnp('$1')" value="$var:Text12" title="<? echo $var:txtIconBtnDelete ?>" style="width: 30px">
+				<td class="Iconbutton"><button type="button" onClick="uiDoDeleteUpnp('$1')" value="$var:Text12" title="$var:Text12" style="width: 30px">
 					<img src="../html/$var:lang/images/loeschen.gif" align=bottom width=16 height=16 hspace=4>
 				</button></td>
 			</tr>
 ` ?>
-<? if eq <? query igdforwardrules:settings/rule/count ?> 0 `
-			<tr><td colspan=6 class="ac"><? echo '$var:Text27' ?></td></tr>
+<? if eq <? multiquerycount igdforwardrules:settings/rule/list ?> 0 `
+			<tr><td colspan=6 class="ac">Es sind keine UPnP-Portfreigaben eingerichtet.</td></tr>
 ` ?>
 		</table>
 	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
+		<input type="button" onclick="uiDoCancel()" value="<? echo $var:txtRefresh ?>" class=Pushbutton>
 		<input type="button" onclick="uiDoSave()" value="<? echo $var:txtApply ?>" class="Pushbutton" id="buttonSave">
 		<input type="button" onclick="uiDoCancel()" value="<? echo $var:txtCancel ?>" class="Pushbutton" id="buttonCancel">
-		<input type="button" onclick="uiDoCancel()" value="<? echo $var:txtRefresh ?>" class=Pushbutton>
 		<input type="button" onclick="uiDoHelp()" value="<? echo $var:txtHelp ?>" class="Pushbutton" id="buttonHilfe">
 	</div></div></div></div></div></div>
 </div>
diff -burN usr/www/all/html/de/internet/portfw.inc usr/www/all/html/de/internet/portfw.inc
--- usr/www/all/html/de/internet/portfw.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/internet/portfw.inc	2006-12-13 17:03:02.000000000 +0100
@@ -13,7 +13,7 @@
 <? setvariable var:Text13 'Neue Portfreigabe' ?>
 <? setvariable var:Text14 'Es sind keine Portfreigaben eingerichtet.' ?>
 <? setvariable var:Text15 'Exposed Host' ?>
-<? if eq <? query forwardrules:settings/rule/count ?> 0 `
+<? if eq <? multiquerycount forwardrules:settings/rule/list ?> 0 `
 <? setvariable var:Text16 'alle Ports' ?>
 ` `
 <? setvariable var:Text16 'alle anderen Ports' ?>
@@ -21,11 +21,3 @@
 <? setvariable var:Text17 'Achtung: Die Firewall Ihrer FRITZ!Box ist deaktiviert.' ?>
 <? setvariable var:Text18 'Der als "Exposed Host" angegebene Computer ist ungeschützt im Internet sichtbar und erreichbar. Ausgenommen sind Portfreigaben zu anderen Computern in der Liste der Portfreigaben, welche nur an diese weiter geleitet werden.' ?>
 <? setvariable var:Text19 'Es sind keine Portfreigaben eingerichtet.' ?>
-<? setvariable var:Text20 'Über UPnP geöffnete Ports' ?>
-<? setvariable var:Text21 'Die aktuelle Konfiguration Ihrer FRITZ!Box gestattet die Änderung der Sicherheitseinstellungen über UPnP. Anwendungen mit UPnP-Unterstützung können somit automatisch weitere Ports öffnen.' ?>
-<? setvariable var:Text22 'Protokoll' ?>
-<? setvariable var:Text23 'Port' ?>
-<? setvariable var:Text24 'an Rechnername' ?>
-<? setvariable var:Text25 'an IP-Adresse' ?>
-<? setvariable var:Text26 'an Port' ?>
-<? setvariable var:Text27 'Es sind keine UPnP-Portfreigaben eingerichtet.' ?>
diff -burN usr/www/all/html/de/internet/portfw.js usr/www/all/html/de/internet/portfw.js
--- usr/www/all/html/de/internet/portfw.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/internet/portfw.js	2006-12-13 17:03:02.000000000 +0100
@@ -34,7 +34,7 @@
 		jslSetChecked("uiViewUseExposed", jslGetValue("uiPostUseExposed") == "1");
 	}
 	jslZebrastreifen("tPorts");
-	if ("<? query box:settings/upnp/activated ?>" == "1" && "<? query box:settings/upnp/control_activated ?>" == "1") {
+	if ("<? query box:settings/upnp/control_activated ?>" == "1") { 
 		jslDisplay("Upnptitel", true);
 		jslDisplay("Upnp", true);
 		jslZebrastreifen("tUpnp");
diff -burN usr/www/all/html/de/internet/portrule.js usr/www/all/html/de/internet/portrule.js
--- usr/www/all/html/de/internet/portrule.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/internet/portrule.js	2006-12-13 17:03:02.000000000 +0100
@@ -19,13 +19,6 @@
 var g_mldIpAdr0000	= "IP-Adresse 0.0.0.0 ist nicht erlaubt.";
 var g_mldIpAdr0		= "IP-Adresse *.*.*.0 ist nicht erlaubt.";
 var g_mldIpAdr255	= "IP-Adresse *.*.*.255 ist nicht erlaubt.";
-var g_mldIpAdr169254	= "IP-Adresse 169.254.*.* ist nicht erlaubt.";
-var g_txtService_1 = "FTP-Server";
-var g_txtService_2 = "HTTP-Server";
-var g_txtService_3 = "eMule TCP";
-var g_txtService_4 = "eMule UDP";
-var g_txtService_5 = "MS Remotedesktop";
-var g_txtService_6 = "Exposed Host";
 var g_isexp = "<? echo $var:isexp ?>";
 function valDoValidateBoxIp (Address) {
 	var address = Address.match("^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$");
@@ -41,8 +34,6 @@
 	if (Number(digits[3]) == 0) return g_mldIpAdr0;
 	// IP-Adresse *.*.*.255 verbieten
 	if (Number(digits[3]) == 255) return g_mldIpAdr255;
-	// IP-Adresse 169.254.*.* verbieten
-	if ((Number(digits[0]) == 169) && (Number(digits[1]) == 254)) return g_mldIpAdr169254;
 	var error=null;
 	return error;
 }
@@ -55,24 +46,26 @@
 		jslCopyValue("uiViewEndPort","uiPostEndPort");
 	jslCopyValue("uiViewFwIp","uiPostFwIp");
 	jslCopyValue("uiViewFwPort","uiPostFwPort");
+	
 	var dienst = "other";
 	if (g_isexp == "1") {
 		jslSetChecked("uiViewActivate", jslGetValue("uiPostUseExposed") == "1");
 		jslCopyValue("uiViewFwIp","uiPostExposed");
-		jslAddOption("uiViewDienst", "Exposed Host", g_txtService_6, false);
-		dienst = g_txtService_6;
+		jslAddOption("uiViewDienst", "Exposed Host", "Exposed Host", false);
+		dienst = "Exposed Host"; 
 	} else {
 <? if eq <? query box:settings/expertmode/activated ?> 1 `
-		if (jslGetValue("uiPostExposed") == "") jslAddOption("uiViewDienst", "Exposed Host", g_txtService_6, false);
+		if (jslGetValue("uiPostExposed") == "") jslAddOption("uiViewDienst", "Exposed Host", "Exposed Host", false);
 ` ?>
-		if (isDienst(g_txtService_1, 'TCP', 21)) dienst = g_txtService_1; else
-		if (isDienst(g_txtService_2, 'TCP', 80)) dienst = g_txtService_2; else
-		if (isDienst(g_txtService_3, 'TCP', 4662)) dienst = g_txtService_3; else
-		if (isDienst(g_txtService_4, 'UDP', 4672)) dienst = g_txtService_4; else
-		if (isDienst(g_txtService_5, 'TCP', 3389)) dienst = g_txtService_5;
+		if (isDienst("FTP-Server", 'TCP', 21)) dienst = "FTP-Server"; else
+		if (isDienst("HTTP-Server", 'TCP', 80)) dienst = "HTTP-Server"; else
+		if (isDienst("eMule TCP", 'TCP', 4662)) dienst = "eMule TCP"; else
+		if (isDienst("eMule UDP", 'UDP', 4672)) dienst = "eMule UDP"; else
+		if (isDienst("MS Remotedesktop", 'TCP', 3389)) dienst = "MS Remotedesktop";
 	}
 	jslSetSelection("uiViewDienst", dienst);
 	uiOnChangeDienst(dienst);
+	
 	uiOnChangePort();
 	uiOnChangeProtocol(jslGetValue("uiViewProtocol"));
 }
@@ -107,12 +100,14 @@
 			}
 		}
 	}
+	
 	message = valDoValidateBoxIp(jslGetValue("uiViewFwIp"));
 	if (message) {alert(message); return false;}
 	if (protokoll != "GRE" && protokoll != "ESP") {
 		message = valDoValidatePort(jslGetValue("uiViewFwPort"), 1);
 		if (message) {alert(g_mldEntryAtPort+message); return false;}
 	}
+	
 	return true;
 }
 function uiDoSave() {
diff -burN usr/www/all/html/de/internet/pppoe.frm usr/www/all/html/de/internet/pppoe.frm
--- usr/www/all/html/de/internet/pppoe.frm	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/internet/pppoe.frm	2006-12-13 17:03:02.000000000 +0100
@@ -1,2 +1,22 @@
 <!--		../internet/pppoe.frm		-->
-<? include ../html/$var:lang/internet/$var:filename.frm ?>
+<? if eq $var:showdualmode 1 `
+ <? if eq <? query box:settings/expertmode/activated ?> 1 `
+ <? include ../html/$var:lang/internet/internet_expert.frm ?>
+ ` `
+		<? if eq $var:OEM avme `
+			<? include ../html/$var:lang/internet/internet_expert.frm ?>
+		` `
+ <? include ../html/$var:lang/internet/internet_normal.frm ?>
+		` ?>
+ ` ?>
+` `
+	<? if eq $var:isDsl 0 `
+		<? if eq $var:isVdsl 0 `
+			<? include ../html/$var:lang/internet/pppoe_ata.frm ?>
+		` `			
+			<? include ../html/$var:lang/internet/pppoe_national.frm ?>
+		` ?>			
+	` `
+		<? include ../html/$var:lang/internet/pppoe_national.frm ?>
+	` ?>
+` ?>
diff -burN usr/www/all/html/de/internet/pppoe.html usr/www/all/html/de/internet/pppoe.html
--- usr/www/all/html/de/internet/pppoe.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/internet/pppoe.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,2 +1,22 @@
 <!--		../internet/pppoe.html		-->
-<? include ../html/$var:lang/internet/$var:filename.html ?>
+<? if eq $var:showdualmode 1 `
+	<? if eq <? query box:settings/expertmode/activated ?> 1 `
+		<? include ../html/$var:lang/internet/internet_expert.html ?>
+	` `
+		<? if eq $var:OEM avme `
+			<? include ../html/$var:lang/internet/internet_expert.html ?>
+		` `
+			<? include ../html/$var:lang/internet/internet_normal.html ?>
+		` ?>
+	` ?>
+` `
+	<? if eq $var:isDsl 0 `
+		<? if eq $var:isVdsl 0 `
+			<? include ../html/$var:lang/internet/pppoe_ata.html ?>
+		` `			
+			<? include ../html/$var:lang/internet/pppoe_national.html ?>
+		` ?>			
+	` `
+		<? include ../html/$var:lang/internet/pppoe_national.html ?>
+	` ?>
+` ?>
diff -burN usr/www/all/html/de/internet/pppoe.js usr/www/all/html/de/internet/pppoe.js
--- usr/www/all/html/de/internet/pppoe.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/internet/pppoe.js	2006-12-13 17:03:02.000000000 +0100
@@ -1,6 +1,5 @@
 <!--		../internet/pppoe.js		-->
 <!-- isAta = <? echo $var:isAta ?>, isAtaFull = <? echo $var:isAtaFull ?>, expert = <? query box:settings/expertmode/activated ?> -->
-<!-- Atamode = <? query box:settings/ata_mode ?>, type = <? query connection0:settings/type ?>, encaps = <? query sar:settings/encapsulation ?> -->
 <? setvariable var:showdualmode 0 ?>
 <? if eq <? query box:settings/expertmode/activated ?> 1 `<? setvariable var:showdualmode 1 ?>` ?>
 <? if eq $var:isDsl 1 `
@@ -13,31 +12,23 @@
 	<? if eq $var:isAtaFull 1 `<? setvariable var:showdualmode 1 ?>` ?>
 ` ?>
 <? if eq $var:showdualmode 1 `
-	<? setvariable var:filename internet_normal ?>
 	<? if eq <? query box:settings/expertmode/activated ?> 1 `
-		<? setvariable var:filename internet_expert ?>
-	` ?>
+		<? include ../html/$var:lang/internet/internet_expert.js ?>
+	` `
 	<? if eq $var:OEM avme `
-			<? setvariable var:filename internet_expert ?>
-	` ?>
-` `
-	<? setvariable var:filename pppoe_national ?>
-	<? if eq '<? query box:settings/ata_mode ?>' '1' `
-		<? if eq '<? query connection0:settings/type ?>' 'pppoe' `
-			<? if eq '<? query sar:settings/encapsulation ?>' 'dslencap_pppoe' `
-				<? setvariable var:filename internet_expert ?>
+			<? include ../html/$var:lang/internet/internet_expert.js ?>
+		` `
+			<? include ../html/$var:lang/internet/internet_normal.js ?>
 			` ?>
-			<? if eq '<? query sar:settings/encapsulation ?>' 'dslencap_mixed' `
-				<? setvariable var:filename internet_expert ?>
 			` ?>
-		` ?>
-	` ?>
-	
+` `
 	<? if eq $var:isDsl 0 `
 		<? if eq $var:isVdsl 0 `
-			<? setvariable var:filename pppoe_ata ?>
+			<? include ../html/$var:lang/internet/pppoe_ata.js ?>
+		` `
+			<? include ../html/$var:lang/internet/pppoe_national.js ?>
 		` ?>
+	` `
+		<? include ../html/$var:lang/internet/pppoe_national.js ?>
 	` ?>
 ` ?>
-<!-- filename = <? echo $var:filename ?> -->
-<? include ../html/$var:lang/internet/$var:filename.js ?>
diff -burN usr/www/all/html/de/internet/pppoe_national.js usr/www/all/html/de/internet/pppoe_national.js
--- usr/www/all/html/de/internet/pppoe_national.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/internet/pppoe_national.js	2006-12-13 17:03:02.000000000 +0100
@@ -2,11 +2,10 @@
 <? setvariable var:contype pppoe ?>
 <style type="text/css">
 <!--
-#content {width: 540px; margin: auto;}
+#content {width: 520px; margin: auto;}
 #tStream {margin: auto;}
 #tStream td {padding: 1px 2px;}
 #tUser td {padding: 0px;}
-#tDbd td {padding: 0px;}
 .left25 {padding-left: 25px;}
 .Label {width: 160px;}
 -->
diff -burN usr/www/all/html/de/internet/pp_wanbridge.html usr/www/all/html/de/internet/pp_wanbridge.html
--- usr/www/all/html/de/internet/pp_wanbridge.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/internet/pp_wanbridge.html	2007-07-11 22:32:04.000000000 +0200
@@ -5,6 +5,13 @@
 <? setvariable var:BoxName 'FRITZ!Box' ?>
 <? if eq $var:OEM tcom '<? setvariable var:BoxName "Speedport" ?>' ?>
 <? include ../html/$var:lang/internet/pp_wanbridge.inc ?>
+<? setvariable var:txt00 "IP-Einstellungen" ?>
+<? setvariable var:txt01 "Sie haben die IP-Einstellungen der $var:BoxName geändert. $var:BoxName arbeitet jetzt mit der folgenden IP-Adresse:" ?>
+<? setvariable var:txt02 "IP-Adresse:" ?>
+<? setvariable var:txt03 "Subnetzmaske:" ?>
+<? setvariable var:txt10 "Es wird empfohlen, diese Einstellungen auszudrucken." ?>
+<? setvariable var:txt11 "Diese Seite drucken" ?>
+<? setvariable var:txt12 "Fenster schließen" ?>
 <head>
 <title><? echo $var:txt00 ?></title>
 <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
diff -burN usr/www/all/html/de/menus/menu2_fon.html usr/www/all/html/de/menus/menu2_fon.html
--- usr/www/all/html/de/menus/menu2_fon.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/menus/menu2_fon.html	2007-07-11 22:32:04.000000000 +0200
@@ -13,14 +13,17 @@
 <? if eq $var:pagename siplist `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename sip1 `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename sipoptionen `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename quality `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('fon','siplist')"><? echo $var:txt01 ?></a></li>
 <? setvariable var:classname 'LSubitem' ?>
-<? if eq $var:pagename dect `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename dectmsn `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename fonlistdect `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
+<? if eq $var:pagename isdn `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
+<? if eq $var:pagename fonlistisdn `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename fon1isdn `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('fon','dect')"><? echo '$var:txt14' ?></a></li>
+<? if eq $var:pagename isdnmsn `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
+<? if eq $var:pagename isdnoptionen `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
+<? if eq $var:pagename fonsetupisdn `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
+<? if eq $var:pagename foneditisdn `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
+<? if eq $var:pagename fon1dect `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
+	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('fon','isdn')"><? echo '$var:txt15' ?></a></li>
 <? setvariable var:classname 'LSubitem' ?>
 <? if eq $var:pagename msn `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename nebenstellen `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
@@ -32,17 +35,11 @@
 <? if gte $var:AbCount 1 `
 	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('fon','<? if lte $var:AbCount 1 `foneinfach` `fonlist` ?>')"><? echo '$var:txt02' ?></a></li>
 ` ?>
-<? setvariable var:showrouting 1 ?>
-<? if eq $var:OEM 1und1 `
-<? if neq <? query box:settings/expertmode/activated ?> 1 `<? setvariable var:showrouting 0 ?>` ?>
-` ?>
 <? setvariable var:classname 'LSubitem' ?>
 <? if eq $var:pagename routing `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename route `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename vorwahl `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-<? if eq $var:showrouting 1 `
-	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('fon','routing')"><? echo '$var:txt03' ?></a></li>
-` ?>
+	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('fon','routing')"><? echo $var:txt03 ?></a></li>
 <? setvariable var:classname 'LSubitem' ?>
 <? if eq $var:pagename fonbuch `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename fonbuch1 `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
@@ -58,8 +55,8 @@
 <? if eq $var:pagename sperre1 `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('fon','sperre')"><? echo $var:txt12 ?></a></li>
 <? setvariable var:classname 'LSubitem' ?>
-<? if eq $var:pagename tamlist `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('fon','tamlist')"><? echo $var:txt13 ?></a></li>
+<? if eq $var:pagename tam `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
+	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('fon','tam')"><? echo '$var:txt13' ?></a></li>
 <? setvariable var:classname 'LSubitem' ?>
 <? if eq $var:pagename wecker `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('fon','wecker')"><? echo $var:txt09 ?></a></li>
@@ -74,7 +71,6 @@
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('usb','status')"><? echo $var:menuUSB ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('wlan','wlan')"><? echo $var:menuWLAN ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('system','syslog')"><? echo $var:menuSystem ?></a></li>
-	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('software','extern')"><? echo $var:menuSoftware ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslPopHelp('home')"><? echo $var:menuHilfe ?></a></li>
 <? if eq $var:isWizz 1 `
 	<li class="LMenuitem" style="margin-top:24px"><img src="<? echo '$var:pfeil' ?>"> <a href="javascript:jslGoTo('first','direkt')">$var:menuAssistent</a></li>
diff -burN usr/www/all/html/de/menus/menu2_homehome.html usr/www/all/html/de/menus/menu2_homehome.html
--- usr/www/all/html/de/menus/menu2_homehome.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/menus/menu2_homehome.html	2006-12-13 17:03:02.000000000 +0100
@@ -7,33 +7,24 @@
 <? setvariable var:classname 'LSubitem' ?>
 <? if eq $var:pagename foncalls `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename dial `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('home','foncalls')"><? echo $var:evtxt01 ?></a></li>
+	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('home','foncalls')">Anrufliste</a></li>
 <? setvariable var:classname 'LSubitem' ?>
 <? if eq $var:pagename fonbuch `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename fonbuch1 `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename dialbuch `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('home','fonbuch')"><? echo $var:evtxt02 ?></a></li>
-<? setvariable var:classname 'LSubitem' ?>
-<? if eq $var:pagename userlist `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename useradd1 `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename useradd2 `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-<? if eq '<? query connection0:settings/type ?>' 'pppoe' `
-	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('home','userlist')"><? echo '$var:evtxt03' ?></a></li>
-` ?>
+	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('home','fonbuch')">Telefonbuch</a></li>
 <? setvariable var:classname 'LSubitem' ?>
 <? if eq $var:pagename inetstat `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename budget `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq '<? query connection0:settings/type ?>' 'pppoe' `
-	<? if eq <? query box:settings/expertmode/activated ?> 1 `
-		<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('home','inetstat')"><? echo '$var:evtxt08' ?></a></li>
-	` ?>
+	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('home','inetstat')">Online-Zähler</a></li>
 ` ?>
 <? setvariable var:classname 'LSubitem' ?>
 <? if eq $var:pagename syslog `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('home','syslog')"><? echo $var:evtxt04 ?></a></li>
+	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('home','syslog')">Ereignisse</a></li>
 <? setvariable var:classname 'LSubitem' ?>
 <? if eq $var:pagename status `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('home','status')"><? echo $var:evtxt05 ?></a></li>
+	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('home','status')">USB-Zubehör</a></li>
 <? setvariable var:show 1 ?>
 <? if eq <? query box:settings/ata_mode ?> 1 `
 <? if eq '<? query connection0:settings/type ?>' 'bridge' '<? setvariable var:show 0 ?>' ?>
@@ -42,9 +33,9 @@
 <? if eq $var:pagename clients `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename mac `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq $var:show 1 `
-	<li class="$var:classname"><img src="<? echo '$var:subpfeil' ?>"> <a href="javascript:jslGoTo('home','clients')"><? echo '$var:evtxt06' ?></a></li>
+	<li class="$var:classname"><img src="<? echo '$var:subpfeil' ?>"> <a href="javascript:jslGoTo('home','clients')">Netzwerkgeräte</a></li>
 ` ?>
-	<li class="LMenuitem"><img src="<? echo '$var:pfeil' ?>"> <a href="javascript:jslSetValue('uiPostKonfig', '1');jslGoTo('home', 'home')"><? echo $var:evtxt07 ?></a></li>
+	<li class="LMenuitem"><img src="<? echo '$var:pfeil' ?>"> <a href="javascript:jslSetValue('uiPostKonfig', '1');jslGoTo('home', 'home')">Einstellungen</a></li>
 <? if eq $var:isWizz 1 `
 	<li class="LMenuitem" style="margin-top:24px"><img src="<? echo '$var:pfeil' ?>"> <a href="javascript:jslGoTo('first','direkt')">$var:menuAssistent</a></li>
 ` ?>
diff -burN usr/www/all/html/de/menus/menu2_homekonfig.html usr/www/all/html/de/menus/menu2_homekonfig.html
--- usr/www/all/html/de/menus/menu2_homekonfig.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/menus/menu2_homekonfig.html	2006-12-13 17:03:02.000000000 +0100
@@ -8,7 +8,6 @@
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('usb','status')"><? echo $var:menuUSB ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('wlan','wlan')"><? echo $var:menuWLAN ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('system','syslog')"><? echo $var:menuSystem ?></a></li>
-	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('software','extern')"><? echo $var:menuSoftware ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslPopHelp('home')"><? echo $var:menuHilfe ?></a></li>
 <? if eq $var:isWizz 1 `
 	<li class="LMenuitem" style="margin-top:24px"><img src="<? echo '$var:pfeil' ?>"> <a href="javascript:jslGoTo('first','direkt')">$var:menuAssistent</a></li>
diff -burN usr/www/all/html/de/menus/menu2_internet.html usr/www/all/html/de/menus/menu2_internet.html
--- usr/www/all/html/de/menus/menu2_internet.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/menus/menu2_internet.html	2007-07-11 22:32:04.000000000 +0200
@@ -7,11 +7,7 @@
 <? setvariable var:showsubmenu 1 ?>
 <? if eq '<? query wlan:settings/WDS_enabled ?>' '1' `
 <? if eq '<? query wlan:settings/WDS_hop ?>' '1' `
-<? if eq $var:isAta 0 `
-	<? setvariable var:class0 "LMenuitemaktiv" ?>
-	<? setvariable var:bild "$var:pfeil" ?>
-	<? setvariable var:showsubmenu 0 ?>
-` ?>
+<? if eq $var:isAta 0 `<? setvariable var:showsubmenu 0 ?>` ?>
 ` ?>
 ` ?>
 	<li class="<? echo '$var:class0' ?>"><img src="<? echo '$var:bild' ?>"> <a href="<? echo '$var:pagepath' ?>var:menu=internet&var:pagename=internet&var:activtype=<? query connection0:settings/type ?>"><? echo $var:title ?></a></li>
@@ -19,9 +15,6 @@
 <? if neq <? query connection0:settings/type ?> pppoe `
 <? if eq $var:pagename internet `<? setvariable var:class1 'LSubitemaktiv' ?>` ?>
 ` ?>
-<? if eq $var:OEM tcom '
-<? if eq $var:pagename internet `<? setvariable var:class1 'LSubitemaktiv' ?>` ?>
-' ?>
 <? if eq $var:pagename pppoe `<? setvariable var:class1 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename bridge `<? setvariable var:class1 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename pppoe_national `<? setvariable var:class1 'LSubitemaktiv' ?>` ?>
@@ -33,20 +26,15 @@
 <? if eq $var:pagename overview `<? setvariable var:class3 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename adsl `<? setvariable var:class3 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename atm `<? setvariable var:class3 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename bits `<? setvariable var:class3 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename expert `<? setvariable var:class3 'LSubitemaktiv' ?>` ?>
 <? setvariable var:class4 'LSubitem' ?>
 <? if eq $var:pagename budget `<? setvariable var:class4 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename inetstat `<? setvariable var:class4 'LSubitemaktiv' ?>` ?>
 <? setvariable var:class5 'LSubitem' ?>
 <? if eq $var:pagename dslsetting `<? setvariable var:class5 'LSubitemaktiv' ?>` ?>
 <? setvariable var:class6 'LSubitem' ?>
 <? if eq $var:pagename dyndns `<? setvariable var:class6 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename vpn `<? setvariable var:class6 'LSubitemaktiv' ?>` ?>
 <? setvariable var:class7 'LSubitem' ?>
-<? if eq $var:pagename userlist `<? setvariable var:class7 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename useradd1 `<? setvariable var:class7 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename useradd2 `<? setvariable var:class7 'LSubitemaktiv' ?>` ?>
+<? if eq $var:pagename inetstat `<? setvariable var:class7 'LSubitemaktiv' ?>` ?>
+<? if eq $var:pagename budget `<? setvariable var:class7 'LSubitemaktiv' ?>` ?>
 <? if eq <? query connection0:settings/type ?> pppoe `
 <? if eq $var:pagename internet `<? setvariable var:class7 'LSubitemaktiv' ?>` ?>
 ` ?>
@@ -69,12 +57,9 @@
 <? if eq '<? query sar:settings/encapsulation ?>' 'dslencap_ipraw' `<? setvariable var:showPortfreigabe 1 ?>` ?>
 <? if eq $var:showsubmenu 1 `
 	<? if eq '<? query connection0:settings/type ?>' 'pppoe' `
-		<li class="<? echo $var:class7 ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('internet','userlist')">$var:txt06</a></li>
-	<? if eq <? query box:settings/expertmode/activated ?> 1 `
-		<li class="<? echo $var:class4 ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('internet','inetstat')">$var:txt00</a></li>
-	` ?>
+		<li class="<? echo $var:class7 ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('internet','inetstat')">$var:txt00</a></li>
 	` ?>
-<li class="<? echo '$var:class1' ?>"><img src="<? echo '$var:subpfeil' ?>"> <a href="<? echo '$var:pagepath' ?>var:menu=internet&var:pagename=pppoe&var:activtype=<? query connection0:settings/type ?>"><? echo '$var:txt01' ?></a></li>
+<li class="<? echo '$var:class1' ?>"><img src="<? echo '$var:subpfeil' ?>"> <a href="<? echo '$var:pagepath' ?>var:menu=internet&var:pagename=pppoe&var:activtype=<? query connection0:settings/type ?>"><? echo $var:txt01 ?></a></li>
 <!-- TYPE=<? query connection0:settings/type ?>, ENCAPS=<? query sar:settings/encapsulation ?>	-->
 	<? if eq $var:showPortfreigabe 1 `
 		<li class="<? echo $var:class2 ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('internet','portfw')">$var:txt03</a></li>
@@ -90,7 +75,6 @@
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('usb','status')"><? echo $var:menuUSB ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('wlan','wlan')"><? echo $var:menuWLAN ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('system','syslog')"><? echo $var:menuSystem ?></a></li>
-	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('software','extern')"><? echo $var:menuSoftware ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslPopHelp('home')"><? echo $var:menuHilfe ?></a></li>
 <? if eq $var:isWizz 1 `
 	<li class="LMenuitem" style="margin-top:24px"><img src="<? echo '$var:pfeil' ?>"> <a href="javascript:jslGoTo('first','direkt')">$var:menuAssistent</a></li>
diff -burN usr/www/all/html/de/menus/menu2_system.html usr/www/all/html/de/menus/menu2_system.html
--- usr/www/all/html/de/menus/menu2_system.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/menus/menu2_system.html	2007-07-11 22:32:04.000000000 +0200
@@ -11,12 +11,7 @@
 <? setvariable var:classname 'LSubitem' ?>
 <? if eq $var:pagename syslog `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('system','syslog')"><? echo $var:txt00 ?></a></li>
-<? setvariable var:classname 'LSubitem' ?>
-<? if eq $var:pagename energy `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename ecosettings `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('system','energy')"><? echo `$var:txt13` ?></a></li>
 <? setvariable var:showemail 1 ?>
-<? if neq <? query box:settings/expertmode/activated ?> 1 `<? setvariable var:showemail 0 ?>` ?>
 <? if eq '<? query box:settings/ata_mode ?>' '0' `
 <? if eq '<? query sar:settings/encapsulation ?>' 'dslencap_pppoe' `
 <? if eq '<? query connection0:settings/type ?>' 'bridge' `<? setvariable var:showemail 0 ?>` ?>
@@ -82,13 +77,7 @@
 <? setvariable var:classname 'LSubitem' ?>
 <? if eq $var:pagename extended `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('system','extended')"><? echo $var:txt06 ?></a></li>
-<? setvariable var:classname 'LSubitem' ?>
-<? if eq $var:pagename timeZone `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-<? if eq $var:OEM avme `
-	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('system','timeZone')"><? echo '$var:txt12' ?></a></li>
-` ?>
 	<li class="LMenutrenner"></li>
-	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('software','extern')"><? echo $var:menuSoftware ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslPopHelp('home')"><? echo $var:menuHilfe ?></a></li>
 <? if eq $var:isWizz 1 `
 	<li class="LMenuitem" style="margin-top:24px"><img src="<? echo '$var:pfeil' ?>"> <a href="javascript:jslGoTo('first','direkt')">$var:menuAssistent</a></li>
diff -burN usr/www/all/html/de/menus/menu2_tr69_autoconfig.html usr/www/all/html/de/menus/menu2_tr69_autoconfig.html
--- usr/www/all/html/de/menus/menu2_tr69_autoconfig.html	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/menus/menu2_tr69_autoconfig.html	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1,2 @@
+<ul class="LMenu">
+</ul>
diff -burN usr/www/all/html/de/menus/menu2_usb.html usr/www/all/html/de/menus/menu2_usb.html
--- usr/www/all/html/de/menus/menu2_usb.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/menus/menu2_usb.html	2006-12-13 17:03:02.000000000 +0100
@@ -8,26 +8,18 @@
 	<li class="LMenuitem"><img src="<? echo $var:aktivpfeil ?>"> <a href="javascript:jslGoTo('usb','status')"><? echo $var:menuUSB ?></a></li>
 <? setvariable var:class1 'LSubitem' ?>
 <? if eq $var:pagename status `<? setvariable var:class1 'LSubitemaktiv' ?>` ?>
-	<li class="<? echo $var:class1 ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('usb','status')"><? echo $var:txt02 ?></a></li>
-<? setvariable var:expmode '<? query box:settings/expertmode/activated ?>' ?>
+	<li class="<? echo $var:class1 ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('usb','status')">Geräteübersicht</a></li>
 <? setvariable var:class1 'LSubitem' ?>
 <? if eq $var:pagename usbprint `<? setvariable var:class1 'LSubitemaktiv' ?>` ?>
-<? setvariable var:showprint 1 ?>
-<? if eq $var:showprint 1 `
-	<li class="<? echo '$var:class1' ?>"><img src="<? echo '$var:subpfeil' ?>"> <a href="javascript:jslGoTo('usb','usbprint')"><? echo '$var:txt00' ?></a></li>
-` ?>
+	<li class="<? echo $var:class1 ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('usb','usbprint')"><? echo $var:txt00 ?></a></li>
 <? setvariable var:class1 'LSubitem' ?>
 <? if eq $var:pagename usbdisk `<? setvariable var:class1 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename usbdisk_cut `<? setvariable var:class1 'LSubitemaktiv' ?>` ?>
-<? setvariable var:showdisk 1 ?>
-<? if eq $var:showdisk 1 `
-	<li class="<? echo '$var:class1' ?>"><img src="<? echo '$var:subpfeil' ?>"> <a href="javascript:jslGoTo('usb','usbdisk')"><? echo '$var:txt01' ?></a></li>
-` ?>
+	<li class="<? echo $var:class1 ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('usb','usbdisk')"><? echo $var:txt01 ?></a></li>
 	<li class="LMenutrenner"></li>
 	
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('wlan','wlan')"><? echo $var:menuWLAN ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('system','syslog')"><? echo $var:menuSystem ?></a></li>
-	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('software','extern')"><? echo $var:menuSoftware ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslPopHelp('home')"><? echo $var:menuHilfe ?></a></li>
 <? if eq $var:isWizz 1 `
 	<li class="LMenuitem" style="margin-top:24px"><img src="<? echo '$var:pfeil' ?>"> <a href="javascript:jslGoTo('first','direkt')">$var:menuAssistent</a></li>
diff -burN usr/www/all/html/de/menus/menu2_wlan.html usr/www/all/html/de/menus/menu2_wlan.html
--- usr/www/all/html/de/menus/menu2_wlan.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/menus/menu2_wlan.html	2006-12-13 17:03:02.000000000 +0100
@@ -25,11 +25,14 @@
 <? if eq $var:pagename encrypt1 `<? setvariable var:classsec 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename encrypt2 `<? setvariable var:classsec 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename encrypt3 `<? setvariable var:classsec 'LSubitemaktiv' ?>` ?>
-<? setvariable var:seclevel 'encrypt0' ?>
-<? if eq <? query wlan:settings/encryption ?> 1 `<? setvariable var:seclevel 'encrypt1' ?>` ?>
-<? if eq <? query wlan:settings/encryption ?> 2 `<? setvariable var:seclevel 'encrypt2' ?>` ?>
-<? if eq <? query wlan:settings/encryption ?> 3 `<? setvariable var:seclevel 'encrypt2' ?>` ?>
-<? if eq <? query wlan:settings/encryption ?> 4 `<? setvariable var:seclevel 'encrypt2' ?>` ?>
+<? setvariable var:classsec0 'LSubitem' ?>
+<? if eq $var:pagename encrypt0 `<? setvariable var:classsec0 'LSubitemaktiv' ?>` ?>
+<? setvariable var:classsec1 'LSubitem' ?>
+<? if eq $var:pagename encrypt1 `<? setvariable var:classsec1 'LSubitemaktiv' ?>` ?>
+<? setvariable var:classsec2 'LSubitem' ?>
+<? if eq $var:pagename encrypt2 `<? setvariable var:classsec2 'LSubitemaktiv' ?>` ?>
+<? setvariable var:classsec3 'LSubitem' ?>
+<? if eq $var:pagename encrypt3 `<? setvariable var:classsec3 'LSubitemaktiv' ?>` ?>
 <? setvariable var:classwds 'LSubitem' ?>
 <? if eq $var:pagename wds `<? setvariable var:classwds 'LSubitemaktiv' ?>` ?>
 <? if eq $var:showWlan 0 `
@@ -37,14 +40,13 @@
 ` `
 	<li class="$var:classmonitor"><img src="$var:subpfeil"> <a href="javascript:jslGoTo('wlan','monitor')">$var:txt02</a></li>
 	<li class="$var:classcommon"><img src="$var:subpfeil"> <a href="javascript:jslGoTo('wlan','common')">$var:txt00</a></li>
-	<li class="$var:classsec"><img src="$var:subpfeil"> <a href="javascript:jslGoTo('wlan','$var:seclevel')">$var:txt01</a></li>
+	<li class="$var:classsec"><img src="$var:subpfeil"> <a href="javascript:jslGoTo('wlan','encrypt<? query wlan:settings/encryption ?>')">$var:txt01</a></li>
 <? if eq <? query box:settings/expertmode/activated ?> 1 `
 	<li class="$var:classwds"><img src="$var:subpfeil"> <a href="javascript:jslGoTo('wlan','wds')">$var:txt03</a></li>
 ` ?>
 ` ?>
 	<li class="LMenutrenner"></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('system','syslog')"><? echo $var:menuSystem ?></a></li>
-	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('software','extern')"><? echo $var:menuSoftware ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslPopHelp('home')"><? echo $var:menuHilfe ?></a></li>
 <? if eq $var:isWizz 1 `
 	<li class="LMenuitem" style="margin-top:24px"><img src="<? echo '$var:pfeil' ?>"> <a href="javascript:jslGoTo('first','direkt')">$var:menuAssistent</a></li>
diff -burN usr/www/all/html/de/system/clients.html usr/www/all/html/de/system/clients.html
--- usr/www/all/html/de/system/clients.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/clients.html	2006-12-13 17:03:02.000000000 +0100
@@ -10,8 +10,7 @@
 				<th class="c2"><? echo $var:txt02 ?></th>
 				<th class="c3"><? echo $var:txt03 ?></th>
 			</tr>
-<? multiquery dhcpd:status/lease/list(name,ip,mac,lan) `
-<? if eq `$5` 1 `
+<? multiquery dhcpd:status/lease/list(name,ip,mac) `
 			<tr>
 				<!-- "$0" / "$1" -->
 				<td class="c1"><script type="text/javascript">document.write(DisplayAsLink("$2"));</script></td>
@@ -19,9 +18,8 @@
 				<td class="c3">$4</td>
 			</tr>
 ` ?>
-` ?>
-<? if eq <? query dhcpd:status/lease/count ?> 0 `
-			<tr class="bcWeiss"><td colspan=3 class="ac fs10">$var:txt24</td></tr>
+<? if eq <? multiquerycount dhcpd:status/lease/list ?> 0 `
+			<tr class="bcWeiss"><td colspan=3 class="ac fs10">Keine Netzwerkgeräte vorhanden.</td></tr>
 ` ?>
 		</table>
 	</div></div></div></div></div></div>
@@ -34,34 +32,30 @@
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<table id="tWlan" class="tborder">
 			<tr>
-				<th class="c1"><? echo '$var:txt20' ?></th>
-				<th class="c2"><? echo '$var:txt21' ?></th>
-				<th class="c3"><p><? echo '$var:txt02' ?></p><p><? echo '$var:txt03' ?></p></th>
-				<th class="c4"><p><? echo '$var:txt06' ?></p><p><? echo '$var:txt13' ?></p></th>
-				<th class="c5"><p><? echo '$var:txt07' ?></p><p><? echo '$var:txt25' ?></p></th>
+				<th class="c1"><? echo $var:txt20 ?></th>
+				<th class="c2"><? echo $var:txt21 ?></th>
+				<th class="c3"><p><? echo $var:txt02 ?></p><p><? echo $var:txt03 ?></p></th>
+				<th class="c4"><p><? echo $var:txt06 ?></p><p><? echo $var:txt13 ?></p></th>
+				<th class="c5"><? echo $var:txt07 ?></th>
 				<th class="c6"></th>
 			</tr>
-<? multiquery wlan:settings/wlanlist/list(hostname,ip,mac,state,speed,is_turbo,quality,cipher,powersave,wmm_active) `
+<? multiquery wlan:settings/wlanlist/list(hostname,ip,mac,state,speed,is_turbo,quality) `
 			<tr>
 				<!-- "$10" / "$11" -->
 				<td class="c1"><script type="text/javascript">document.write(uiAktivLed("$15", "$12"));</script></td>
 				<td class="c2"><span title="$12">$12</span></td>
 				<td class="c3"><p>$13</p><p><script type="text/javascript">document.write(uiMac("$14"));</script></p></td>
 				<td class="c4"><p><script type="text/javascript">document.write(uiSpeed("$16", "$17"));</script></p><p><script type="text/javascript">document.write(uiQuality("$18"));</script></p></td>
-				<td class="c5"><p><script type="text/javascript">document.write(uiEncryptState("$15","$19","$1b"));</script></p><script type="text/javascript">document.write(uiPowerSave("$15","$1a"));</script></p></td>
-				<td class="c6"><button type="button" id="uiViewDelete$11" onClick="uiDoDelete('$11')" value="$var:Text11" title="<? echo $var:txtIconBtnDelete ?>" style="width:30px; display:none"><img src="../html/$var:lang/images/loeschen.gif" align=bottom width=16 height=16 hspace=4></button></td>
+				<td class="c5"><script type="text/javascript">document.write(uiState("$15"));</script></td>
+				<td class="c6"><button type="button" id="uiViewDelete$11" onClick="uiDoDelete('$11')" value="$var:Text11" title="$var:Text11" style="width:30px; display:none"><img src="../html/$var:lang/images/loeschen.gif" align=bottom width=16 height=16 hspace=4></button></td>
 			</tr>
 ` ?>
-` ?>
-<? if eq $var:show 1 `
-<? if eq <? query wlan:settings/wlanlist/count ?> 0 `
-			<tr class="bcWeiss"><td colspan=6 class="ac fs10"><? echo '$var:txt22' ?></td></tr>
+<? if eq <? multiquerycount wlan:settings/wlanlist/list ?> 0 `
+			<tr class="bcWeiss"><td colspan=3 class="ac fs10"><? echo '$var:txt22' ?></td></tr>
 ` ?>
 		</table>
 		<p class="ar mt10" id="uiNewMac" style="display:none"><input type="button" id="uiMac" onclick="uiDoMac()" style="width: 240px" value="<? echo '$var:txt23' ?>"></p>
 	</div></div></div></div></div></div>
-` ?>
-<? if eq $var:show 1 `
 	<div class="backdialog" id="uiFilter" style="display:none"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<p class="mb5" style="font-weight: bold">$var:txt08</p>
 		<p class="ml25"><input type=radio name="macfilter" id="uiViewOpen" onclick="OnChangeMacFilter(0)">&nbsp;<label for="uiViewOpen">$var:txt09</label></p>
diff -burN usr/www/all/html/de/system/clients.inc usr/www/all/html/de/system/clients.inc
--- usr/www/all/html/de/system/clients.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/clients.inc	2006-12-13 17:03:02.000000000 +0100
@@ -9,7 +9,7 @@
 <? setvariable var:txt04 "Bekannte Netzwerkgeräte (WLAN)" ?>
 <? setvariable var:txt05 "Aktiv" ?>
 <? setvariable var:txt06 "Geschwindigkeit" ?>
-<? setvariable var:txt07 "Verbindungs-" ?>
+<? setvariable var:txt07 "Zustand" ?>
 <? setvariable var:txt08 "WLAN-Zugang beschränken (MAC-Address-Filter)" ?>
 <? setvariable var:txt09 "Neue WLAN-Netzwerkgeräte zulassen" ?>
 <? setvariable var:txt10 "Keine neuen WLAN-Netzwerkgeräte zulassen" ?>
@@ -20,5 +20,3 @@
 <? setvariable var:txt21 'Name' ?>
 <? setvariable var:txt22 'Keine WLAN-Netzwerkgeräte vorhanden.' ?>
 <? setvariable var:txt23 'Neues WLAN-Netzwerkgerät' ?>
-<? setvariable var:txt24 'Keine Netzwerkgeräte vorhanden.' ?>
-<? setvariable var:txt25 'eigenschaften' ?>
diff -burN usr/www/all/html/de/system/clients.js usr/www/all/html/de/system/clients.js
--- usr/www/all/html/de/system/clients.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/clients.js	2006-12-13 17:03:02.000000000 +0100
@@ -10,12 +10,12 @@
 #tWlan {width: 100%; table-layout: fixed; font-size: 12px; }
 #tWlan td, #tWlan th {padding: 2px 2px; vertical-align:top; overflow: hidden}
 #tWlan p {font-size: 12px;}
-#tWlan .c1 {text-align: center; width:28px;}
+#tWlan .c1 {text-align: center; width:30px;}
 #tWlan .c2 {}
-#tWlan .c3 {width:106px;}
-#tWlan .c4 {text-align: right; width:105px;}
-#tWlan .c5 {text-align: right; width:130px;}
-#tWlan .c6 {text-align: right; width:32px;}
+#tWlan .c3 {width:110px;}
+#tWlan .c4 {text-align: right; width:100px;}
+#tWlan .c5 {text-align: right; width:70px;}
+#tWlan .c6 {text-align: right; width:30px;}
 .ar				{ text-align: right;}
 .ac				{ text-align: center;}
 -->
@@ -37,12 +37,6 @@
 var g_txtState5 = "Verbunden";
 var g_txtState6 = "Abmelden";
 var g_txtMBit = " MBit/s";
-var g_txt_U_APSD_State_0 = " ";
-var g_txt_U_APSD_State_1 = "WMM Power Save";
-var g_txt_Wlan_Cipher_State_0 = "unverschlüsselt";
-var g_txt_Wlan_Cipher_State_1 = "WPA";
-var g_txt_Wlan_Cipher_State_2 = "WEP";
-var g_txt_Wlan_Cipher_State_3 = "WPA2";
 function uiDoOnLoad() {
 	jslZebrastreifen("tLan");
 <? setvariable var:show 0 ?>
@@ -53,10 +47,8 @@
 	jslSetChecked("uiViewClose", n == "1");
 	jslSetEnabled("uiMac", n=="1");
 	if (jslGetChecked("uiViewClose")) {
-<? multiquery wlan:settings/wlanlist/list(is_repeater) `
-		if ( "$12" != "1") {
+<? multiquery wlan:settings/wlanlist/list `
 			jslDisplay("uiViewDelete$11", true);
-		}
 ` ?>
 	}
 	if (g_expertMode == "1") {
@@ -70,14 +62,13 @@
 	jslSetChecked("uiViewOpen", n== 0);
 	jslSetChecked("uiViewClose", n== 1);
 	jslSetEnabled("uiMac", n==1);
-	if (n == 1 && <? query wlan:settings/wlanlist/count ?> <= 0) {
+	if (n == 1 && <? multiquerycount wlan:settings/wlanlist/list ?> <= 0) {
 		alert(g_mldClose);
-		jslSetValue("uiPostPageMaster", "clients");
 		jslFormSubmitEx(jslGetValue("uiPostMenu"), "mac");
 	}
 }
 function uiSpeed (n, turbo) {
-	var str = n + g_txtMBit;
+	var str = n + " MBit/s";
 	if (turbo == "1") str += " (g++)";
 	return str;
 }
@@ -94,26 +85,6 @@
 	}
 	return state;
 }
-function uiEncryptState (state, encrpState, isQoS){
-	if ( state != "5") return "";
-	var l_txtQoS = "";
-	if ( isQoS == "1") l_txtQoS = ", WMM";
-	switch (encrpState) {
-		case "0": return g_txt_Wlan_Cipher_State_0 + l_txtQoS;
-		case "1": return g_txt_Wlan_Cipher_State_1 + l_txtQoS;
-		case "2": return g_txt_Wlan_Cipher_State_2 + l_txtQoS;
-		case "3": return g_txt_Wlan_Cipher_State_3 + l_txtQoS;
-	}
-	return encrpState + l_txtQoS;
-}
-function uiPowerSave (state, powerState){
-	if ( state != "5") return "";
-	switch (powerState) {
-		case "0": return g_txt_U_APSD_State_0;
-		case "1": return g_txt_U_APSD_State_1;
-	}
-	return powerState;
-}
 function DisplayAsLink( name){
 	if ( name == "fritz.fonata.box")
 		return '<a href="http://fritz.fonata.box" target="_blank" title="FRITZ!Box Fon ata"><b>fritz.fonata.box</b></a>';
@@ -147,7 +118,7 @@
 }
 function uiDoDelete (n) {
 <? if eq <? query wlan:settings/ap_enabled ?> 1 `
-	if (<? query wlan:settings/wlanlist/count ?> <= 1) {
+	if (<? multiquerycount wlan:settings/wlanlist/list ?> <= 1) {
 		alert(g_mldLastWlan); return;
 	}
 	alert(g_mldWlan);
@@ -162,7 +133,6 @@
 ` ?>
 }
 function uiDoMac () {
-	jslSetValue("uiPostPageMaster", "clients");
-	jslFormSubmitEx(jslGetValue("uiPostMenu"), "mac");
+	jslGoTo(jslGetValue("uiPostMenu"), "mac");
 }
 </script>
diff -burN usr/www/all/html/de/system/email.html usr/www/all/html/de/system/email.html
--- usr/www/all/html/de/system/email.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/email.html	2006-12-13 17:03:02.000000000 +0100
@@ -39,7 +39,6 @@
 		</table>
 		<p class="mb5"><? echo $var:Text15 ?></p>
 		<table>
-			<tr><td class="c1" height="1px"></td><td height="1px"></td></tr>
 			<tr id="SmtpProvider" style="display:none">
 				<td class="c1"><label for="uiViewSMTPProvider"><? echo $var:Text16 ?></label></td>
 				<td class="c3">
diff -burN usr/www/all/html/de/system/extended.html usr/www/all/html/de/system/extended.html
--- usr/www/all/html/de/system/extended.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/extended.html	2006-12-13 17:03:02.000000000 +0100
@@ -13,5 +13,4 @@
 		<p class="pText25"><? echo `$var:tx05` ?></p>
 	</div></div></div></div></div></div>
 ` ?>
-	<? include ../html/$var:lang/home/rbb_applycancel.html ?>
-</div>
+	<? include ../html/$var:lang/home/rbb_applycancel.html ?></div>
diff -burN usr/www/all/html/de/system/imexport.html usr/www/all/html/de/system/imexport.html
--- usr/www/all/html/de/system/imexport.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/imexport.html	2006-12-13 17:03:02.000000000 +0100
@@ -6,8 +6,8 @@
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 		<div id="uiSave" style="display:none">
 		 	<ul class="tabs">
-		 		<li class="tabs_on"><a href="javascript:Tabs(0)"><? echo $var:Text10 ?></a></li>
-		 		<li><a href="javascript:Tabs(1)"><? echo $var:Text11 ?></a></li>
+		 		<li class="tabs_on"><a href="javascript:Tabs(0)">Sichern</a></li>
+		 		<li><a href="javascript:Tabs(1)">Wiederherstellen</a></li>
 		 	</ul>
 			<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 				<? echo $var:Text2 ?>
@@ -36,8 +36,8 @@
 		</div>
 		<div id="uiRestore" style="display:none">
 		 	<ul class="tabs">
-		 		<li><a href="javascript:Tabs(0)"><? echo $var:Text10 ?></a></li>
-		 		<li class="tabs_on"><a href="javascript:Tabs(1)"><? echo $var:Text11 ?></a></li>
+		 		<li><a href="javascript:Tabs(0)">Sichern</a></li>
+		 		<li class="tabs_on"><a href="javascript:Tabs(1)">Wiederherstellen</a></li>
 		 	</ul>
 			<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 				<? echo $var:Text2 ?>
diff -burN usr/www/all/html/de/system/iprlist.html usr/www/all/html/de/system/iprlist.html
--- usr/www/all/html/de/system/iprlist.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/iprlist.html	2006-12-13 17:03:02.000000000 +0100
@@ -32,7 +32,7 @@
 				</button></td>
 			</tr>
 ` ?>
-<? if eq <? query route:settings/route/count ?> 0 `
+<? if eq <? multiquerycount route:settings/route/list ?> 0 `
 			<tr><td colspan=6 class="ac">$var:tx09</td></tr>
 ` ?>
 		</table>
diff -burN usr/www/all/html/de/system/iproute.html usr/www/all/html/de/system/iproute.html
--- usr/www/all/html/de/system/iproute.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/iproute.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,4 +1,9 @@
-<? include ../html/$var:lang/system/iproute.inc ?>
+<? include ../html/$var:lang/global.inc ?>
+<? setvariable var:txt00 "Statische IP-Route" ?>
+<? setvariable var:txt01 "IP-Netzwerk" ?>
+<? setvariable var:txt02 "Subnetzmaske" ?>
+<? setvariable var:txt03 "Gateway" ?>
+<? setvariable var:txt04 "Route aktiv" ?>
 <div id="content">
  	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
 		<? echo $var:txt00 ?>
diff -burN usr/www/all/html/de/system/iproute.js usr/www/all/html/de/system/iproute.js
--- usr/www/all/html/de/system/iproute.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/iproute.js	2006-12-13 17:03:02.000000000 +0100
@@ -13,7 +13,6 @@
 var g_mldNetmaskPost		= "Die eingegebene Subnetzmaske ist ungültig.";
 var g_mldDefault		= "Für das Setzen der Default-Route müssen Netz und Netzmaske den Wert 0.0.0.0 haben.";
 var g_mldDefault2		= "Die Default-Route kann nur einmal gesetzt werden. Bitte bearbeiten Sie den bereits vorhandenen Eintrag.";
-var g_mld169254		= "Die IP-Adresse 169.254.*.* darf nicht verwendet werden.";
 var def_exists = false;
 <? multiquery route:settings/route/list(netmask) `
 	<? if neq `$var:route` `$1` `
@@ -33,7 +32,6 @@
 	if (valIpadrFormatId("uiPostNetmask") == false) {alert(g_mldNetmaskPost); return false;}
 	if (valNetmaskId("uiPostNetmask") == false) {alert(g_mldNetmaskPost); return false;}
 	if (jslGetValue("uiPostNetmask")=="0.0.0.0" && def_exists) {alert(g_mldDefault2); return false;}
-	if ((jslGetValue("uiPostIp").substr(0, 7) == "169.254") && (jslGetValue("uiPostNetmask").substr(0, 7) == "255.255")) {alert(g_mld169254); return false;}
 	if ((jslGetValue("uiPostIp")=="0.0.0.0" && jslGetValue("uiPostNetmask")!="0.0.0.0") ||
 		((jslGetValue("uiPostNetmask")=="0.0.0.0") && (jslGetValue("uiPostIp")!="0.0.0.0")))
 	{
diff -burN usr/www/all/html/de/system/mac.html usr/www/all/html/de/system/mac.html
--- usr/www/all/html/de/system/mac.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/mac.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,15 +1,15 @@
 <? include ../html/$var:lang/system/mac.inc ?>
 <div id="content">
 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo $var:Text1 ?>
+		MAC-Adresse manuell hinzufügen
 	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p class="mb5"><? echo $var:Text2 ?></p>
+		<p class="mb5">MAC-Adresse des WLAN-Clients</p>
 		<p class="ac"><input type="text" id="uiViewMac0" class="Eingabefeld" size="3" maxlength="2"> :
-		<input type="text" id="uiViewMac1" class="Eingabefeld" size="3" maxlength="2"><? echo $var:Text3 ?>
-		<input type="text" id="uiViewMac2" class="Eingabefeld" size="3" maxlength="2"><? echo $var:Text3 ?>
-		<input type="text" id="uiViewMac3" class="Eingabefeld" size="3" maxlength="2"><? echo $var:Text3 ?>
-		<input type="text" id="uiViewMac4" class="Eingabefeld" size="3" maxlength="2"><? echo $var:Text3 ?>
+		<input type="text" id="uiViewMac1" class="Eingabefeld" size="3" maxlength="2"> :
+		<input type="text" id="uiViewMac2" class="Eingabefeld" size="3" maxlength="2"> :
+		<input type="text" id="uiViewMac3" class="Eingabefeld" size="3" maxlength="2"> :
+		<input type="text" id="uiViewMac4" class="Eingabefeld" size="3" maxlength="2"> :
 		<input type="text" id="uiViewMac5" class="Eingabefeld" size="3" maxlength="2"></p>
 	</div></div></div></div></div></div>
 	<? include ../html/$var:lang/home/rbb_applycancel.html ?>
diff -burN usr/www/all/html/de/system/mac.js usr/www/all/html/de/system/mac.js
--- usr/www/all/html/de/system/mac.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/mac.js	2006-12-13 17:03:02.000000000 +0100
@@ -11,8 +11,6 @@
 // globals
 var g_mldMacPart	= "Alle Felder der Mac-Adresse müssen genau zwei Zeichen (Ziffern oder die Buchstaben A-F) enthalten.";
 var g_mldWlan 	= "Die neuen Einstellungen für die WLAN-Zugangsbeschränkung werden übernommen. Alle aktiven WLAN-Verbindungen werden nun kurz unterbrochen.";
-var g_txtAlert_1 = "Mac-Adresse 00:00:00:00:00:00 ist ungültig.";
-var g_txtAlert_2 = "Mac-Adresse FF:FF:FF:FF:FF:FF ist ungültig.";
 function uiDoOnLoad() {
 	var mac = jslGetValue("uiPostMac");
 	if (mac.length==17) {
@@ -28,15 +26,15 @@
 	for (i=0; i<6; i++) {
 		mac += jslGetValue("uiViewMac"+i)+((i<5) ? ":" : "");
 	}
-	if (mac == "00:00:00:00:00:00") {alert(g_txtAlert_1); return false;}
-	if (mac.toUpperCase() == "FF:FF:FF:FF:FF:FF") {alert(g_txtAlert_2); return false;}
+	if (mac == "00:00:00:00:00:00") {alert("Mac-Adresse 00:00:00:00:00:00 ist ungültig."); return false;}
+	if (mac.toUpperCase() == "FF:FF:FF:FF:FF:FF") {alert("Mac-Adresse FF:FF:FF:FF:FF:FF ist ungültig."); return false;}
 	jslSetValue("uiPostMac", mac);
 	alert(g_mldWlan);
 	jslSetValue("uiPostMacFilter", "1");
-	jslFormSubmitEx(jslGetValue("uiPostMenu"), jslGetValue("uiPostPageMaster"), "mac");
+	jslFormSubmitEx(jslGetValue("uiPostMenu"), "clients", "mac");
 }
 function uiDoCancel() {
-	jslGoTo(jslGetValue("uiPostMenu"),jslGetValue("uiPostPageMaster"));
+	jslGoTo(jslGetValue("uiPostMenu"),"clients");
 }
 function uiDoHelp() {
 	jslPopHelp("hilfe_clients");
diff -burN usr/www/all/html/de/system/nacht.frm usr/www/all/html/de/system/nacht.frm
--- usr/www/all/html/de/system/nacht.frm	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/nacht.frm	2006-12-13 17:03:02.000000000 +0100
@@ -3,4 +3,15 @@
 <input type="hidden" name="box:settings/night_time_control_on_time" value="<? query box:settings/night_time_control_on_time ?>" id="uiPostNachtEnd">
 <input type="hidden" name="box:settings/night_time_control_ring_blocked" value="<? query box:settings/night_time_control_ring_blocked ?>" id="uiPostNachtFon">
 <input type="hidden" name="wlan:settings/night_time_control_enabled" value="<? query wlan:settings/night_time_control_enabled ?>" id="uiPostNachtWlan">
-<input type="hidden" name="wlan:settings/night_time_control_no_forced_off" value="<? query wlan:settings/night_time_control_no_forced_off ?>" id="uiPostWlanForcedOff" disabled>
+<input type="hidden" name="telcfg:settings/MSN/Port0/RingAllowed" value="<? query telcfg:settings/MSN/Port0/RingAllowed ?>" id="uiPostRingAllowed0" disabled>
+<input type="hidden" name="telcfg:settings/MSN/Port0/NoRingTime" value="<? query telcfg:settings/MSN/Port0/NoRingTime?>" id="uiPostNoRingTime0" disabled>
+<input type="hidden" name="telcfg:settings/MSN/Port0/NoRingWithNightSetting" value="<? query telcfg:settings/MSN/Port0/NoRingWithNightSetting?>" id="uiPostNoRingNS0" disabled>
+<input type="hidden" name="telcfg:settings/MSN/Port1/RingAllowed" value="<? query telcfg:settings/MSN/Port1/RingAllowed ?>" id="uiPostRingAllowed1" disabled>
+<input type="hidden" name="telcfg:settings/MSN/Port1/NoRingTime" value="<? query telcfg:settings/MSN/Port1/NoRingTime?>" id="uiPostNoRingTime1" disabled>
+<input type="hidden" name="telcfg:settings/MSN/Port1/NoRingWithNightSetting" value="<? query telcfg:settings/MSN/Port1/NoRingWithNightSetting?>" id="uiPostNoRingNS1" disabled>
+<input type="hidden" name="telcfg:settings/MSN/Port2/RingAllowed" value="<? query telcfg:settings/MSN/Port2/RingAllowed ?>" id="uiPostRingAllowed2" disabled>
+<input type="hidden" name="telcfg:settings/MSN/Port2/NoRingTime" value="<? query telcfg:settings/MSN/Port2/NoRingTime?>" id="uiPostNoRingTime2" disabled>
+<input type="hidden" name="telcfg:settings/MSN/Port2/NoRingWithNightSetting" value="<? query telcfg:settings/MSN/Port2/NoRingWithNightSetting?>" id="uiPostNoRingNS2" disabled>
+<input type="hidden" name="telcfg:settings/MSN/Port3/RingAllowed" value="<? query telcfg:settings/MSN/Port3/RingAllowed ?>" id="uiPostRingAllowed3" disabled>
+<input type="hidden" name="telcfg:settings/MSN/Port3/NoRingTime" value="<? query telcfg:settings/MSN/Port3/NoRingTime?>" id="uiPostNoRingTime3" disabled>
+<input type="hidden" name="telcfg:settings/MSN/Port3/NoRingWithNightSetting" value="<? query telcfg:settings/MSN/Port3/NoRingWithNightSetting?>" id="uiPostNoRingNS3" disabled>
diff -burN usr/www/all/html/de/system/nacht.html usr/www/all/html/de/system/nacht.html
--- usr/www/all/html/de/system/nacht.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/nacht.html	2006-12-13 17:03:02.000000000 +0100
@@ -14,8 +14,7 @@
 			<p class="mb10"><label for="uiViewStartHH"><? echo $var:Text4 ?></label>&nbsp;<input type="text" id="uiViewStartHH" size="3" maxlength="2" class="Eingabefeld"><? echo $var:Text5 ?><input type="text" id="uiViewStartMM" size="3" maxlength="2" class="Eingabefeld">
 			<label for="uiViewEndHH"><? echo $var:Text6 ?></label>&nbsp;<input type="text" id="uiViewEndHH" size="3" maxlength="2" class="Eingabefeld"><? echo $var:Text5 ?><input type="text" id="uiViewEndMM" size="3" maxlength="2" class="Eingabefeld"></p>
 			<p class="pCheck25"><input type="checkbox" id="uiViewUseNachtWlan" onclick="OnUseWlan()">&nbsp;<label for="uiViewUseNachtWlan"><? echo $var:Text7 ?></label><br><? echo $var:Text9 ?></p>
-			<p class="pCheck50 mb20"><input type="checkbox" id="uiViewUseWlanForcedOff" onclick="OnUseWlanNoForcedOff()">&nbsp;<label for="uiViewUseWlanForcedOff"><? echo $var:Text12 ?></label></p>
-			<p class="pCheck25 mb10"><input type="checkbox" id="uiViewUseNachtFon">&nbsp;<label for="uiViewUseNachtFon"><? echo $var:Text8 ?></label><br><? echo $var:Text10 ?></p>
+			<p class="pCheck25"><input type="checkbox" id="uiViewUseNachtFon">&nbsp;<label for="uiViewUseNachtFon"><? echo $var:Text8 ?></label><br><? echo $var:Text10 ?></p>
 		</div>
 	</div></div></div></div></div></div>
 	<? include ../html/$var:lang/home/rbb_applycancel.html ?>
diff -burN usr/www/all/html/de/system/nacht.inc usr/www/all/html/de/system/nacht.inc
--- usr/www/all/html/de/system/nacht.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/nacht.inc	2006-12-13 17:03:02.000000000 +0100
@@ -7,7 +7,6 @@
 <? setvariable var:Text6 'bis' ?>
 <? setvariable var:Text7 'Funknetz (WLAN) abschalten' ?>
 <? setvariable var:Text8 'Klingelsperre aktivieren' ?>
-<? setvariable var:Text9 'Das Abschalten des Funknetzes spart Strom. Sie können WLAN jederzeit über Ihr Telefon (Tastencode #96*1*) oder über den WLAN-Taster aktivieren.' ?>
+<? setvariable var:Text9 'Das Abschalten des Funknetzes spart Strom. Das Funknetz wird erst abgeschaltet, wenn keine WLAN-Netzwerkgeräte mehr aktiv sind. Sie können WLAN jederzeit über Ihr Telefon (Tastencode #96*1*) oder über den WLAN-Taster aktivieren.' ?>
 <? setvariable var:Text10 'Die Klingelsperre sorgt für Ruhe vor Telefonanrufen.' ?>
 <? setvariable var:Text11 'FRITZ!Box verfügt über keine gültige Uhrzeit. Die Nachtschaltung ist daher nicht verfügbar. FRITZ!Box muss mindestens einmal mit dem Internet verbunden werden, damit eine gültige Uhrzeit vorliegt.' ?>
-<? setvariable var:Text12 'Das Funknetz wird erst abgeschaltet, wenn kein WLAN-Netzwerkgerät mehr aktiv ist.' ?>
diff -burN usr/www/all/html/de/system/nacht.js usr/www/all/html/de/system/nacht.js
--- usr/www/all/html/de/system/nacht.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/nacht.js	2006-12-13 17:03:02.000000000 +0100
@@ -2,8 +2,7 @@
 <style type="text/css">
 <!--
 #content {width: 540px; margin: auto;}
-.pCheck25 {text-indent: -25px; padding-left: 25px; margin-bottom: 0px;}
-.pCheck50 {text-indent: -25px; padding-left: 50px; margin-bottom: 0px;}
+.pCheck25 {text-indent: -25px; padding-left: 25px; margin-bottom: 10px;}
 -->
 </style>
 <script type="text/javascript">
@@ -21,6 +20,7 @@
 	} else {
 		jslDisplay("ShowNacht", true);
 		jslSetChecked("uiViewUseNacht", jslGetValue("uiPostUseNacht") == "1");
+	
 		var str = jslGetValue("uiPostNachtStart");
 		var n1 = str.indexOf(":");
 		if (n1 != -1) {
@@ -33,8 +33,8 @@
 			jslSetValue("uiViewEndHH", str.slice(0, n1));
 			jslSetValue("uiViewEndMM", str.slice(n1+1));
 		}
+	
 		jslSetChecked("uiViewUseNachtWlan", jslGetValue("uiPostNachtWlan") == "1");
-		jslSetChecked("uiViewUseWlanForcedOff", jslGetValue("uiPostWlanForcedOff") == "1");
 		jslSetChecked("uiViewUseNachtFon", jslGetValue("uiPostNachtFon") == "1");
 		OnUseNacht();
 	}
@@ -46,32 +46,43 @@
 		if (starth.length == 0) starth = "0";
 		if (!valIsZahl(starth)) {alert(g_mldStunden); return;}
 		if (Number(starth)<0 || Number(starth)>23) {alert(g_mldStunden); return;}
+	
 		var startm = jslGetValue("uiViewStartMM");
 		if (startm.length == 0) starthm = "0";
 		if (!valIsZahl(startm)) {alert(g_mldMinuten); return;}
 		if (Number(startm)<0 || Number(startm)>59) {alert(g_mldMinuten); return;}
 		jslSetValue("uiPostNachtStart", ZweistelligeNummer(Number(starth)) + ":" + ZweistelligeNummer(Number(startm)));
+	
 		var endh = jslGetValue("uiViewEndHH");
 		if (endh.length == 0) endh = "0";
 		if (!valIsZahl(endh)) {alert(g_mldStunden); return;}
 		if (Number(endh)<0 || Number(endh)>23) {alert(g_mldStunden); return;}
+	
 		var endm = jslGetValue("uiViewEndMM");
 		if (endm.length == 0) endm = "0";
 		if (!valIsZahl(endm)) {alert(g_mldMinuten); return;}
 		if (Number(endm)<0 || Number(endm)>59) {alert(g_mldMinuten); return;}
 		jslSetValue("uiPostNachtEnd", ZweistelligeNummer(Number(endh)) + ":" + ZweistelligeNummer(Number(endm)));
 		jslSetValue("uiPostNachtWlan", jslGetChecked("uiViewUseNachtWlan") ? "1":"0");
-		jslSetValue("uiPostWlanForcedOff", jslGetChecked("uiViewUseWlanForcedOff") ? "1":"0");
-		jslEnable( "uiPostNachtWlan");
-		jslEnable( "uiPostWlanForcedOff");
 		if (jslGetChecked("uiViewUseNachtFon")) {
 			jslSetValue("uiPostNachtFon", "1");
+			Klingelsperre("0", starth, startm, endh, endm);
+			Klingelsperre("1", starth, startm, endh, endm);
+			Klingelsperre("2", starth, startm, endh, endm);
+			Klingelsperre("3", starth, startm, endh, endm);
 		} else {
 			jslSetValue("uiPostNachtFon", "0");
+			KeineSperre("0");
+			KeineSperre("1");
+			KeineSperre("2");
+			KeineSperre("3");
 		}
 	} else {
 		jslSetValue("uiPostUseNacht", "0");
 		KeineSperre("0");
+		KeineSperre("1");
+		KeineSperre("2");
+		KeineSperre("3");
 	}
 	jslFormSubmitEx("system", "nacht");
 }
@@ -108,22 +119,15 @@
 	jslSetEnabled("uiViewEndHH", b);
 	jslSetEnabled("uiViewEndMM", b);
 	jslSetEnabled("uiViewUseNachtWlan", b);
-	if ( "<? query wlan:settings/WDS_enabled ?>" == "1") {
-		jslSetEnabled("uiViewUseWlanForcedOff", false);
-	} else {
-		jslSetEnabled("uiViewUseWlanForcedOff", b);
-	}
 	jslSetEnabled("uiViewUseNachtFon", b);
 }
 function OnUseWlan () {
 	var wds = "<? query wlan:settings/WDS_enabled ?>";
 	if (jslGetChecked("uiViewUseNachtWlan") && (wds=="1")) {
-//		alert(g_mldWds);
-//		jslSetChecked("uiViewUseNachtWlan", false);
+		alert(g_mldWds); 
+		jslSetChecked("uiViewUseNachtWlan", false);
 	}
 }
-function OnUseWlanNoForcedOff() {
-}
 function ZweistelligeNummer (n) {
 	if (n>9) return n.toString();
 	return "0"+n.toString();
diff -burN usr/www/all/html/de/system/net.frm usr/www/all/html/de/system/net.frm
--- usr/www/all/html/de/system/net.frm	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/net.frm	2007-07-11 22:32:04.000000000 +0200
@@ -2,3 +2,6 @@
 <input type="hidden" name="box:settings/upnp/control_activated" value="<? query box:settings/upnp/control_activated ?>" id="uiPostUpnpControl" disabled>
 <input type="hidden" name="box:settings/lanbridge/activated" value="<? query box:settings/lanbridge/activated ?>" id="uiPostLanBridge">
 <input type="hidden" name="var:ShowPopup" value="<? echo $var:ShowPopup ?>" id="uiShowPopup">
+<? if eq $var:isTr069 1 '
+<input type="hidden" name="tr069:settings/enabled" value="<? query tr069:settings/enabled ?>" id="uiPostSetTr069" disabled>
+' ?>
diff -burN usr/www/all/html/de/system/net.html usr/www/all/html/de/system/net.html
--- usr/www/all/html/de/system/net.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/net.html	2007-07-11 22:32:04.000000000 +0200
@@ -1,7 +1,4 @@
 <? include ../html/$var:lang/system/net.inc ?>
-<? setvariable var:showTr069Switch `0` ?>
-<? if eq <? query env:status/OEM ?> 1und1 '<? setvariable var:showTr069Switch `1` ?>' ?>
-<? if eq <? query env:status/OEM ?> freenet '<? setvariable var:showTr069Switch `1` ?>' ?>
 <div id="content">
  	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
 		<? echo $var:tx01 ?>
@@ -15,6 +12,14 @@
 		<p class="ml25"><? echo $var:tx05 ?></p>
 	</div></div></div></div></div></div>
 	<div id="uiExpert" style="display:none">
+<? if eq $var:isTr069 1 '
+<? if eq `<? query box:settings/ata_mode ?>` 0 `
+		<div class="backdialog" id="uiSetTr069" style="display:none"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+			<p class="pCheck25"><input type="checkbox" id="uiViewSetTr069">&nbsp;<label for="uiViewSetTr069">$var:tx12</label></p>
+			<p class="ml25">$var:tx13<br><u>$var:tx14</u>&nbsp;$var:tx15</p>
+		</div></div></div></div></div></div>
+` ?>
+' ?>
 		<div class="backdialog" id="uiAdressen" style="display:none"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 			<p class="mb5"><? echo $var:tx06 ?></p>
 			<p><? echo $var:tx07 ?></p>
diff -burN usr/www/all/html/de/system/net.inc usr/www/all/html/de/system/net.inc
--- usr/www/all/html/de/system/net.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/net.inc	2007-07-11 22:32:04.000000000 +0200
@@ -10,3 +10,11 @@
 <? setvariable var:tx09 'Vorsicht: Unsachgemäße Einstellungen können dazu führen, dass die Benutzeroberfläche von FRITZ!Box nicht mehr erreichbar ist!' ?>
 <? setvariable var:tx10 'IP-Adressen' ?>
 <? setvariable var:tx11 'IP-Routen' ?>
+<? if eq $var:isTr069 1 '
+<? if eq `<? query box:settings/ata_mode ?>` 0 `
+<? setvariable var:tx12 'Automatische Einrichtung durch den Dienstanbieter zulassen' ?>
+<? setvariable var:tx13 'Diese Einstellung ermöglicht dem DSL-Dienstanbieter die sichere (verschlüsselte) Übertragung der Internetzugangsdaten und Anmeldedaten für Internettelefonie auf diese FRITZ!Box. Diese Funktion wird nicht von allen Internet- und Internettelefonieanbietern unterstützt.' ?>
+<? setvariable var:tx14 'Hinweis:' ?>
+<? setvariable var:tx15 'Wenn Sie diese Einstellung ändern, startet die FRITZ!Box neu und trennt kurzzeitig die Verbindungen.' ?>
+` ?>
+' ?>
diff -burN usr/www/all/html/de/system/netipadr.js usr/www/all/html/de/system/netipadr.js
--- usr/www/all/html/de/system/netipadr.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/netipadr.js	2006-12-13 17:03:02.000000000 +0100
@@ -19,18 +19,17 @@
 var g_mldIpaddrFormatPost	= ": die Eingabe ist keine gültige IP-Adresse.";
 var g_mldNetmaskPost		= ": die eingegebene Subnetzmaske ist ungültig.";
 var g_mldIpaddrTheNet		= ": dieser Wert stellt das Subnetz an sich dar und kann nicht verwendet werden.";
-var g_mldIpaddrBroadcast		= ": dieser Wert stellt die Broadcast-Adresse dar und kann nicht verwendet werden.";
+var g_mldIpaddrBroadcast		= ": dieser Wert stellt die Broadcast-Adresse in Ihrem Subnetz dar und kann nicht verwendet werden.";
 var g_mldIpaddrDiffNet		= " : diese Adresse befindet sich in einem anderen Subnetz, als das durch die IP-Adresse und Netzmaske definierte.";
 var g_mldNetmask0000		= "0.0.0.0 ist keine zulässige Subnetzmaske.";
 var g_mldNetmask24			= "Die kleinste zulässige Subnetzmaske ist 255.255.255.0.";
 var g_mldNetwork				= "Die Netzwerke dürfen sich nicht überschneiden.";
 var g_mld192168180			= "Bitte verwenden Sie nicht das Subnetz 192.168.180/24. Wählen Sie eine andere IP-Adresse!";
-var g_mld192168178			= "Bitte verwenden Sie im WLAN-Bereich nicht das Subnetz 192.168.178. Wählen Sie eine andere IP-Adresse!";
 var g_mld192168178254		= "Die IP-Adresse 192.168.178.254 darf nicht vom DHCP-Server vergeben werden. Stellen Sie einen anderen Adressbereich ein.";
 var g_mldIllegal				= ": Geben Sie einen gültigen Wert ein."
 var g_mldDhcpSort				= "Die 'von'- Eingabe ist größer als der 'bis'-Wert.";
 var g_mldIpInRange			= "Die IP-Adresse der FRITZ!Box darf nicht im Adressenbereich vom DHCP-Server enthalten sein.";
-var g_mldAtamode			= 'Sie haben "Internetzugang über LAN A / WAN" konfiguriert. In diesem Modus müssen sich alle Computer in einem Netzwerk befinden.';
+var g_mldAtamode			= 'Sie haben "Internetzugang über LAN 1" konfiguriert. In diesem Modus müssen sich alle Computer in einem Netzwerk befinden.';
 var g_mldFullbridge		= "Sie haben den Filter für das DSL-Modem deaktiviert. In diesem Modus müssen sich alle Computer in einem Netzwerk befinden."
 var g_isFon = "<? echo $var:isFon ?>";
 var g_isWlan = "<? echo $var:isWlan ?>";
@@ -217,18 +216,6 @@
 	pattern.exec(mask);
 	return RegExp.$4 == 0;
 }
-function valIpadrIdTheNet (id) {
-	var addr = jslGetValue(id);
-	var pattern = /^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/;
-	pattern.exec(addr);
-	return RegExp.$4 != 0;
-}
-function valIpadrIdBroadcast (id) {
-	var addr = jslGetValue(id);
-	var pattern = /^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/;
-	pattern.exec(addr);
-	return RegExp.$4 != 255;
-}
 function GetNetBits(addr,mask) {
 	var netstr = IpToBitstring(addr);
 	var maskstr = IpToBitstring(mask);
@@ -267,8 +254,6 @@
 	var AlleImNetz = <? if eq $var:isDsl 1 'jslGetChecked("uiViewLanBridge")' 'true' ?>;
 	if (AlleImNetz == true) {
 		if (valIpadrFormatId("uiViewIpaddr") == false) {alert(g_mldPrefix+g_mldIpAdr+g_mldIpaddrFormatPost); return false;}
-		if (valIpadrIdTheNet("uiViewIpaddr") == false) {alert(g_mldPrefix+g_mldIpAdr+g_mldIpaddrTheNet); return false;}
-		if (valIpadrIdBroadcast("uiViewIpaddr") == false) {alert(g_mldPrefix+g_mldIpAdr+g_mldIpaddrBroadcast); return false;}
 		if (valIpadrFormatId("uiViewNetmask") == false) {alert(g_mldPrefix+g_mldNetMask+g_mldNetmaskPost); return false;}
 		if (valNetmaskId("uiViewNetmask") == false) {alert(jslGetValue("uiViewNetmask")+g_mldNetmaskPost); return false;}
 		if (valNetmaskId_0000("uiViewNetmask") == false) {alert(g_mldNetmask0000); return false;}
@@ -286,8 +271,6 @@
 		}
 	} else {
 		if (valIpadrFormatId("uiViewIpaddrA") == false) {alert(g_mldPrefix+g_mldIpAdr_Lan+g_mldIpaddrFormatPost); return false;}
-		if (valIpadrIdTheNet("uiViewIpaddrA") == false) {alert(g_mldPrefix+g_mldIpAdr_Lan+g_mldIpaddrTheNet); return false;}
-		if (valIpadrIdBroadcast("uiViewIpaddrA") == false) {alert(g_mldPrefix+g_mldIpAdr_Lan+g_mldIpaddrBroadcast); return false;}
 		if (valIpadrFormatId("uiViewNetmaskA") == false) {alert(g_mldPrefix+g_mldNetMask_Lan+g_mldNetmaskPost); return false;}
 		if (valNetmaskId("uiViewNetmaskA") == false) {alert(jslGetValue("uiViewNetmaskA")+g_mldNetmaskPost); return false;}
 		if (valNetmaskId_0000("uiViewNetmaskA") == false) {alert(g_mldNetmask0000); return false;}
@@ -304,14 +287,11 @@
 			if (!valIpRange(adr, start, end)) {alert(g_mldIpInRange); return false;}
 		}
 		if (valIpadrFormatId("uiViewIpaddrWLAN") == false) {alert(g_mldPrefix+g_mldIpAdr_Wlan+g_mldIpaddrFormatPost); return false;}
-		if (valIpadrIdTheNet("uiViewIpaddrWLAN") == false) {alert(g_mldPrefix+g_mldIpAdr_Wlan+g_mldIpaddrTheNet); return false;}
-		if (valIpadrIdBroadcast("uiViewIpaddrWLAN") == false) {alert(g_mldPrefix+g_mldIpAdr_Wlan+g_mldIpaddrBroadcast); return false;}
 		if (valIpadrFormatId("uiViewNetmaskWLAN") == false) {alert(g_mldPrefix+g_mldNetMask_Wlan+g_mldNetmaskPost); return false;}
 		if (valNetmaskId("uiViewNetmaskWLAN") == false) {alert(jslGetValue("uiViewNetmaskWLAN")+g_mldNetmaskPost); return false;}
 		if (valNetmaskId_0000("uiViewNetmaskWLAN") == false) {alert(g_mldNetmask0000); return false;}
 		if (valNetmaskId_24("uiViewNetmaskWLAN") == false) {alert(g_mldNetmask24); return false;}
 		if (jslGetValue("uiViewIpaddrWLAN").substr(0,11)=="192.168.180" && jslGetValue("uiViewNetmaskWLAN")=="255.255.255.0" ) {alert(g_mld192168180); return false;}
-		if (jslGetValue("uiViewIpaddrWLAN").substr(0,11)=="192.168.178") {alert(g_mld192168178); return false;}
 		if (jslGetChecked("uiViewDhcpWLAN")) {
 			var start = jslGetValue("uiViewStartWLAN");
 			var end = jslGetValue("uiViewEndWLAN");
diff -burN usr/www/all/html/de/system/net.js usr/www/all/html/de/system/net.js
--- usr/www/all/html/de/system/net.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/net.js	2007-07-11 22:32:04.000000000 +0200
@@ -18,6 +18,12 @@
 	jslSetChecked("uiViewUpnpControl", jslGetValue("uiPostUpnpControl") == "1");
 	OnChangeUpnpAktiv();
 	if (g_ExpertMode == "1") {
+<? if eq $var:isTr069 1 '
+<? if eq `<? query box:settings/ata_mode ?>` 0 `
+		jslSetChecked("uiViewSetTr069", jslGetValue("uiPostSetTr069") == "1");
+		jslDisplay("uiSetTr069", true);
+` ?>
+' ?>
 		
 		jslDisplay("uiExpert", true);
 		jslDisplay("uiAdressen", !isIpClient());
@@ -39,6 +45,17 @@
 		jslEnable("uiPostUpnpControl");
 	}
 	
+<? if eq $var:isTr069 1 '
+<? if eq `<? query box:settings/ata_mode ?>` 0 `
+	var tr069Set = jslGetChecked("uiViewSetTr069") ? "1":"0";
+	if ( tr069Set != jslGetValue("uiPostSetTr069")) {
+		if (!confirm(g_confirmMsgText)) return;
+		jslSetValue("uiPostSetTr069", tr069Set);
+		jslEnable("uiPostSetTr069");
+		jslSetValue("uiPostGetPage", "../html/reboot.html");
+	}
+` ?>
+' ?>
 	jslFormSubmitEx("system", "net");
 }
 function uiDoAdressen () {
@@ -70,8 +87,8 @@
 	} else {
 		params = "var:oneip=0";
 	}
-	var url = "../cgi-bin/webcm?getpage=../html/<?echo $var:lang ?>/system/pp_netipadr.html&var:lang=<?echo $var:lang ?>&"+params;
-	var ppWindow = window.open(url, "zweitfenster", "width=450,height=500,statusbar,resizable=yes");
+	var url = "../cgi-bin/webcm?getpage=../html/<?echo $var:lang ?>/system/pp_netipadr.html&"+params;
+	var ppWindow = window.open(url, "zweitfenster", "width=450,height=400,statusbar,resizable=yes");
 	ppWindow.focus();
 }
 </script>
diff -burN usr/www/all/html/de/system/pp_netipadr.html usr/www/all/html/de/system/pp_netipadr.html
--- usr/www/all/html/de/system/pp_netipadr.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/pp_netipadr.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,14 +1,28 @@
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"	"http://www.w3.org/TR/html4/loose.dtd">
 <html>
 <? include ../html/config.def ?>
-<? include ../html/$var:lang/system/pp_netipadr.inc ?>
+<? setvariable var:txt00 "IP-Einstellungen" ?>
+<? setvariable var:txt01 "Sie haben die IP-Einstellungen der FRITZ!Box geändert. FRITZ!Box arbeitet jetzt mit der folgenden IP-Adresse:" ?>
+<? setvariable var:txt02 "IP-Adresse:" ?>
+<? setvariable var:txt03 "Subnetzmaske:" ?>
+<? setvariable var:txt04 "DHCP-Server:" ?>
+<? setvariable var:txt05 "Sie haben die IP-Einstellungen der FRITZ!Box geändert. FRITZ!Box arbeitet jetzt mit den folgenden IP-Adressen:" ?>
+<? setvariable var:txt06 "LAN" ?>
+<? setvariable var:txt07 "LAN B" ?>
+<? setvariable var:txt08 "USB" ?>
+<? setvariable var:txt09 "WLAN" ?>
+<? setvariable var:txt10 "Es wird empfohlen, diese Einstellungen auszudrucken." ?>
+<? setvariable var:txt11 "Diese Seite drucken" ?>
+<? setvariable var:txt12 "Fenster schließen" ?>
+<? setvariable var:txt13 "von:" ?>
+<? setvariable var:txt14 "bis:" ?>
 <head>
 <title><? echo $var:txt00 ?></title>
 <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
 <meta http-equiv="expires" content="0">
 <style type="text/css">
 <!-- 
-<? include ../html/$var:lang/css/fb2.css ?>
+<? include ../html/de/css/fb2.css ?>
 .t1 {margin: auto;}
 .t1 td {padding: 2px 5px;}
 .c1 {width: 90px;}
diff -burN usr/www/all/html/de/system/ppSyslog.html usr/www/all/html/de/system/ppSyslog.html
--- usr/www/all/html/de/system/ppSyslog.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/ppSyslog.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,14 +1,17 @@
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"	"http://www.w3.org/TR/html4/loose.dtd">
 <html>
 <? include ../html/config.def ?>
-<? include ../html/$var:lang/system/ppSyslog.inc ?>
+<? setvariable var:txt00 "Ereignisse - Druckansicht" ?>
+<? setvariable var:txt01 "Diese Seite drucken" ?>
+<? setvariable var:txt02 "Fenster schließen" ?>
+<? setvariable var:txt03 "FRITZ!Box Ereignisse, Stand " ?>
 <head>
 <title><? echo $var:txt00 ?></title>
 <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
 <meta http-equiv="expires" content="0">
 <style type="text/css">
 <!--
-<? include ../html/$var:lang/css/fb2.css ?>
+<? include ../html/de/css/fb2.css ?>
 .log {text-indent: -108px; padding-left: 108px; padding-bottom: 5px;}
 @media print {input {display:none;}}
 -->
diff -burN usr/www/all/html/de/system/ppSyslog.inc usr/www/all/html/de/system/ppSyslog.inc
--- usr/www/all/html/de/system/ppSyslog.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/ppSyslog.inc	1970-01-01 01:00:00.000000000 +0100
@@ -1,5 +0,0 @@
-<? include ../html/$var:lang/global.inc ?>
-<? setvariable var:txt00 "Ereignisse - Druckansicht" ?>
-<? setvariable var:txt01 "Diese Seite drucken" ?>
-<? setvariable var:txt02 "Fenster schließen" ?>
-<? setvariable var:txt03 "FRITZ!Box Ereignisse, Stand " ?>
diff -burN usr/www/all/html/de/system/reset.html usr/www/all/html/de/system/reset.html
--- usr/www/all/html/de/system/reset.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/reset.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,4 +1,10 @@
-<? include ../html/$var:lang/system/reset.inc ?>
+<? include ../html/$var:lang/global.inc ?>
+<? setvariable var:txt00 "Zurücksetzen" ?>
+<? setvariable var:txt01 "Klicken Sie hier, wenn Sie $var:BoxName neu starten wollen. Die Ereignisse werden beim Neustart zurückgesetzt. Alle anderen Einstellungen bleiben erhalten." ?>
+<? setvariable var:txt02 "$var:BoxName neu starten" ?>
+<? setvariable var:txt03 "Klicken Sie hier, wenn Sie $var:BoxName neu starten und in den Auslieferungszustand zurücksetzen wollen. Alle individuellen Einstellungen werden gelöscht." ?>
+<? setvariable var:txt04 "Vorsicht! Wenn Sie eine individuelle IP-Konfiguration <? if eq $var:isWlan 1 'oder einen individuellen WLAN-Netzwerkschlüssel ' ?> benutzen, müssen Sie die Netzwerkeinstellungen Ihres Computers anpassen, um nach dem Zurücksetzen wieder auf $var:BoxName zugreifen zu können." ?>
+<? setvariable var:txt05 "$var:BoxName neu starten und Werkseinstellungen laden" ?>
 <div id="content">
  	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
 		<? echo $var:txt00 ?>
@@ -6,8 +12,8 @@
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 		<div id="uiReboot" style="display:none">
 		 	<ul class="tabs">
-		 		<li class="tabs_on"><a href="javascript:Tabs(0)"><? echo $var:txt06 ?></a></li>
-		 		<li><a href="javascript:Tabs(1)"><? echo $var:txt07 ?></a></li>
+		 		<li class="tabs_on"><a href="javascript:Tabs(0)">Neustart</a></li>
+		 		<li><a href="javascript:Tabs(1)">Werkseinstellungen</a></li>
 		 	</ul>
 			<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 				<p class="mb10"><? echo $var:txt01 ?></p>
@@ -19,8 +25,8 @@
 		</div>
 		<div id="uiDefaults" style="display:none">
 		 	<ul class="tabs">
-		 		<li><a href="javascript:Tabs(0)"><? echo $var:txt06 ?></a></li>
-		 		<li class="tabs_on"><a href="javascript:Tabs(1)"><? echo $var:txt07 ?></a></li>
+		 		<li><a href="javascript:Tabs(0)">Neustart</a></li>
+		 		<li class="tabs_on"><a href="javascript:Tabs(1)">Werkseinstellungen</a></li>
 		 	</ul>
 			<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 				<p class="mb5"><? echo $var:txt03 ?></p>
diff -burN usr/www/all/html/de/system/syslog.html usr/www/all/html/de/system/syslog.html
--- usr/www/all/html/de/system/syslog.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/syslog.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,4 +1,7 @@
-<? include ../html/$var:lang/system/syslog.inc ?>
+<? include ../html/$var:lang/global.inc ?>
+<? setvariable var:txt00 "Ereignisse" ?>
+<? setvariable var:txt01 "Druckansicht" ?>
+<? setvariable var:txt02 "Liste löschen" ?>
 <div id="content">
  	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
 		<? echo $var:txt00 ?>
@@ -6,77 +9,77 @@
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 	<div id="uiAll" style="display:none">
 	 	<ul class="tabs">
-	 		<li class="tabs_on"><a href="javascript:Tabs(0)"><? echo $var:txt03 ?></a></li>
-	 		<li><a href="javascript:Tabs(1)"><? echo $var:txt04 ?></a></li>
-	 		<li><a href="javascript:Tabs(2)"><? echo $var:txt05 ?></a></li>
-	 		<li><a href="javascript:Tabs(3)"><? echo $var:txt06 ?></a></li>
-	 		<li><a href="javascript:Tabs(4)"><? echo $var:txt07 ?></a></li>
-	 		<li><a href="javascript:Tabs(5)"><? echo $var:txt08 ?></a></li>
+	 		<li class="tabs_on"><a href="javascript:Tabs(0)">Alle</a></li>
+	 		<li><a href="javascript:Tabs(1)">Telefonie</a></li>
+	 		<li><a href="javascript:Tabs(2)">Internetverbindung</a></li>
+	 		<li><a href="javascript:Tabs(3)">USB-Zubehör</a></li>
+	 		<li><a href="javascript:Tabs(4)">WLAN</a></li>
+	 		<li><a href="javascript:Tabs(5)">System</a></li>
 	 	</ul>
 	</div>	 	
 	<div id="uiFon" style="display:none">
 	 	<ul class="tabs">
-	 		<li><a href="javascript:Tabs(0)"><? echo $var:txt03 ?></a></li>
-	 		<li class="tabs_on"><a href="javascript:Tabs(1)"><? echo $var:txt04 ?></a></li>
-	 		<li><a href="javascript:Tabs(2)"><? echo $var:txt05 ?></a></li>
-	 		<li><a href="javascript:Tabs(3)"><? echo $var:txt06 ?></a></li>
-	 		<li><a href="javascript:Tabs(4)"><? echo $var:txt07 ?></a></li>
-	 		<li><a href="javascript:Tabs(5)"><? echo $var:txt08 ?></a></li>
+	 		<li><a href="javascript:Tabs(0)">Alle</a></li>
+	 		<li class="tabs_on"><a href="javascript:Tabs(1)">Telefonie</a></li>
+	 		<li><a href="javascript:Tabs(2)">Internetverbindung</a></li>
+	 		<li><a href="javascript:Tabs(3)">USB-Zubehör</a></li>
+	 		<li><a href="javascript:Tabs(4)">WLAN</a></li>
+	 		<li><a href="javascript:Tabs(5)">System</a></li>
 	 	</ul>
 	</div>	 	
 	<div id="uiDsl" style="display:none">
 	 	<ul class="tabs">
-	 		<li><a href="javascript:Tabs(0)"><? echo $var:txt03 ?></a></li>
-	 		<li><a href="javascript:Tabs(1)"><? echo $var:txt04 ?></a></li>
-	 		<li class="tabs_on"><a href="javascript:Tabs(2)"><? echo $var:txt05 ?></a></li>
-	 		<li><a href="javascript:Tabs(3)"><? echo $var:txt06 ?></a></li>
-	 		<li><a href="javascript:Tabs(4)"><? echo $var:txt07 ?></a></li>
-	 		<li><a href="javascript:Tabs(5)"><? echo $var:txt08 ?></a></li>
+	 		<li><a href="javascript:Tabs(0)">Alle</a></li>
+	 		<li><a href="javascript:Tabs(1)">Telefonie</a></li>
+	 		<li class="tabs_on"><a href="javascript:Tabs(2)">Internetverbindung</a></li>
+	 		<li><a href="javascript:Tabs(3)">USB-Zubehör</a></li>
+	 		<li><a href="javascript:Tabs(4)">WLAN</a></li>
+	 		<li><a href="javascript:Tabs(5)">System</a></li>
 	 	</ul>
 	</div>	 	
 	<div id="uiUsb" style="display:none">
 	 	<ul class="tabs">
-	 		<li><a href="javascript:Tabs(0)"><? echo $var:txt03 ?></a></li>
-	 		<li><a href="javascript:Tabs(1)"><? echo $var:txt04 ?></a></li>
-	 		<li><a href="javascript:Tabs(2)"><? echo $var:txt05 ?></a></li>
-	 		<li class="tabs_on"><a href="javascript:Tabs(3)"><? echo $var:txt06 ?></a></li>
-	 		<li><a href="javascript:Tabs(4)"><? echo $var:txt07 ?></a></li>
-	 		<li><a href="javascript:Tabs(5)"><? echo $var:txt08 ?></a></li>
+	 		<li><a href="javascript:Tabs(0)">Alle</a></li>
+	 		<li><a href="javascript:Tabs(1)">Telefonie</a></li>
+	 		<li><a href="javascript:Tabs(2)">Internetverbindung</a></li>
+	 		<li class="tabs_on"><a href="javascript:Tabs(3)">USB-Zubehör</a></li>
+	 		<li><a href="javascript:Tabs(4)">WLAN</a></li>
+	 		<li><a href="javascript:Tabs(5)">System</a></li>
 	 	</ul>
 	</div>	 	
 	<div id="uiWlan" style="display:none">
 	 	<ul class="tabs">
-	 		<li><a href="javascript:Tabs(0)"><? echo $var:txt03 ?></a></li>
-	 		<li><a href="javascript:Tabs(1)"><? echo $var:txt04 ?></a></li>
-	 		<li><a href="javascript:Tabs(2)"><? echo $var:txt05 ?></a></li>
-	 		<li><a href="javascript:Tabs(3)"><? echo $var:txt06 ?></a></li>
-	 		<li class="tabs_on"><a href="javascript:Tabs(4)"><? echo $var:txt07 ?></a></li>
-	 		<li><a href="javascript:Tabs(5)"><? echo $var:txt08 ?></a></li>
+	 		<li><a href="javascript:Tabs(0)">Alle</a></li>
+	 		<li><a href="javascript:Tabs(1)">Telefonie</a></li>
+	 		<li><a href="javascript:Tabs(2)">Internetverbindung</a></li>
+	 		<li><a href="javascript:Tabs(3)">USB-Zubehör</a></li>
+	 		<li class="tabs_on"><a href="javascript:Tabs(4)">WLAN</a></li>
+	 		<li><a href="javascript:Tabs(5)">System</a></li>
 	 	</ul>
 	</div>	 	
 	<div id="uiSystem" style="display:none">
 	 	<ul class="tabs">
-	 		<li><a href="javascript:Tabs(0)"><? echo $var:txt03 ?></a></li>
-	 		<li><a href="javascript:Tabs(1)"><? echo $var:txt04 ?></a></li>
-	 		<li><a href="javascript:Tabs(2)"><? echo $var:txt05 ?></a></li>
-	 		<li><a href="javascript:Tabs(3)"><? echo $var:txt06 ?></a></li>
-	 		<li><a href="javascript:Tabs(4)"><? echo $var:txt07 ?></a></li>
-	 		<li class="tabs_on"><a href="javascript:Tabs(5)"><? echo $var:txt08 ?></a></li>
+	 		<li><a href="javascript:Tabs(0)">Alle</a></li>
+	 		<li><a href="javascript:Tabs(1)">Telefonie</a></li>
+	 		<li><a href="javascript:Tabs(2)">Internetverbindung</a></li>
+	 		<li><a href="javascript:Tabs(3)">USB-Zubehör</a></li>
+	 		<li><a href="javascript:Tabs(4)">WLAN</a></li>
+	 		<li class="tabs_on"><a href="javascript:Tabs(5)">System</a></li>
 	 	</ul>
 	</div>	 	
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<p class="mb10">Um weitere Informationen zu einem Ereignis zu bekommen, klicken Sie auf das Ereignis.</p>
+		<p class="mb5"><b>Ereignisse</b></p>
 		<div class="tborder" style="height: 300px; overflow: auto" id="eventlist">
 <? multiquery logger:status/log `<p class="log"><a href="javascript:Eventhelp('$2')">$1</a></p>
 ` ?>
 		</div>
-		<p class="mt10 mb10"><b><? echo $var:txt09 ?></b></p>
-<!--		<p class="mb5"><b><? echo $var:txt00 ?></b></p> -->
 	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
-		<input id="uiBTNCleanList" type="button" onclick="uiDoClear()" value="<? echo $var:txt02 ?>" class="Pushbutton" style="display: none">
-		<input type="button" onclick="uiDoRefresh()" value="<? echo $var:txtRefresh ?>" class="Pushbutton">
-		<input type="button" onclick="uiDoHelp()" value="<? echo $var:txtHelp ?>" class="Pushbutton">
-		<input type="button" onclick="uiDoShowPrintView()" value="<? echo $var:txt01 ?>" class="Pushbutton">
+		<input type="button" onclick="uiDoClear()" value="<? echo $var:txt02 ?>" class=Pushbutton>
+		<input type="button" onclick="uiDoRefresh()" value="<? echo $var:txtRefresh ?>" class=Pushbutton>
+		<input type="button" onclick="uiDoHelp()" value="<? echo $var:txtHelp ?>" class=Pushbutton>
+		<input type="button" onclick="uiDoShowPrintView()" value="<? echo $var:txt01 ?>" class=Pushbutton>
 	</div></div></div></div></div></div>
 	</div></div></div></div></div></div></div>
 </div>
diff -burN usr/www/all/html/de/system/syslog.js usr/www/all/html/de/system/syslog.js
--- usr/www/all/html/de/system/syslog.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/syslog.js	2006-12-13 17:03:02.000000000 +0100
@@ -67,13 +67,11 @@
 }
 function ShowTabs (n) {
 	jslDisplay("uiAll", n==0);
-	jslDisplay( "uiBTNCleanList", n==0);
 	jslDisplay("uiFon", n==1);
 	jslDisplay("uiDsl", n==2);
 	jslDisplay("uiUsb", n==3);
 	jslDisplay("uiWlan", n==4);
 	jslDisplay("uiSystem", n==5);
-	
 }
 function uiShowAll() {
 	jslGoTo(jslGetValue("uiPostMenu"),"syslog");
diff -burN usr/www/all/html/de/system/update.html usr/www/all/html/de/system/update.html
--- usr/www/all/html/de/system/update.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/update.html	2006-12-13 17:03:02.000000000 +0100
@@ -23,7 +23,7 @@
 		<p><? echo $var:txt07 ?></p>
 	</div></div></div></div></div></div>
 	<div class="backdialog" id="uiStatusbar" style="display:none"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog" style="text-align: center; padding: 5px 10px;" >
-		<span id="uiStatus" class="fett">&nbsp;</span>
+		<span id="uiStatus">&nbsp;</span>
 	</div></div></div></div></div></div>
 	<div class="backdialog" id="uiButtonbar"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
 		<input type="button" onclick="uiDoHelp()" value="<? echo $var:txtHelp ?>" class=Pushbutton id="uiHelp">
diff -burN usr/www/all/html/de/system/update.js usr/www/all/html/de/system/update.js
--- usr/www/all/html/de/system/update.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/update.js	2006-12-13 17:03:02.000000000 +0100
@@ -8,7 +8,6 @@
 	padding: 0px;
 }
 ol li {padding-bottom: 10px;}
-.fett { font-weight:bold; }
 -->
 </style>
 <script type="text/javascript">
@@ -23,10 +22,9 @@
 `?>
 var uiToolsTopLock=false;
 function uiDoOnLoad() {
-	SetSpanText("uiStatus", " ");
+	jslSetValue("uiStatus", "");
 <? if eq $var:OEM freenet `
-	var usePstn = "<? query telcfg:settings/UsePSTN ?>";
-	if (usePstn == "0") alert(g_mldfreenet);
+	alert(g_mldfreenet);
 `?>
 }
 function OnDownload() {
diff -burN usr/www/all/html/de/system/update_OnClick_1.html usr/www/all/html/de/system/update_OnClick_1.html
--- usr/www/all/html/de/system/update_OnClick_1.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/update_OnClick_1.html	2006-12-13 17:03:02.000000000 +0100
@@ -36,7 +36,7 @@
 			</form>
 		</div></div></div></div></div></div>
 		<div class="backdialog" id="uiStatusbar" style="display:none"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog" style="text-align: center; padding: 5px 10px;" >
-			<span id="uiStatus" class="fett">&nbsp;</span>
+			<span id="uiStatus">&nbsp;</span>
 		</div></div></div></div></div></div>
 	</div>		
 	<div class="backdialog" id="uiButtonbar"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
diff -burN usr/www/all/html/de/system/update_OnClick_1.inc usr/www/all/html/de/system/update_OnClick_1.inc
--- usr/www/all/html/de/system/update_OnClick_1.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/update_OnClick_1.inc	2006-12-13 17:03:02.000000000 +0100
@@ -6,10 +6,6 @@
 <? setvariable var:txt04 "Hier können Sie eine Firmware-Datei auf die FRITZ!Box übertragen, die sich bereits auf der Festplatte Ihres Computers befindet." ?>
 <? setvariable var:txt05 "Update starten" ?>
 <? setvariable var:txt07 "$var:BoxName wird sich nach dem Firmware-Update neu starten. Alle Verbindungen werden dabei unterbrochen." ?>
-<? setvariable var:txt08 "Die Firmware ist die Software der FRITZ!Box. Sie enthält sämtliche Funktionen für alle Bereiche Ihrer FRITZ!Box." ?>
+<? setvariable var:txt08 "Die Firmware ist die Software der FRITZ!Box. Sie enthält sämtliche Funktionen des DSL-Modems und -Routers, der Telefonie, des WLANs und der Benutzeroberfläche." ?>
 <? setvariable var:txt09 "Automatisches Update" ?>
 <? setvariable var:txt10 "Firmware-Datei" ?>
-<? setvariable var:jstr0 `Die Anlage wird aktualisiert. Bitte warten...` ?>
-<? setvariable var:jstr1 `Keine Datei angegeben !` ?>
-<? setvariable var:jstr2 `Bitte den vollständigen Pfadnamen angeben.` ?>
-<? setvariable var:jstr3 `Wichtiger Hinweis:\x0aSie sind mit einem freenet DSL-Anschluss ohne Verbindung zum Festnetz verbunden. Verwenden Sie für die FRITZ!Box nur Firmware, die von freenet empfohlen wird. Anderenfalls kann die volle Funktionsfähigkeit an diesem Anschluss nicht mehr garantiert werden. Weitere Informationen finden Sie unter www.freenet.de` ?>
diff -burN usr/www/all/html/de/system/update_OnClick_1.js usr/www/all/html/de/system/update_OnClick_1.js
--- usr/www/all/html/de/system/update_OnClick_1.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/update_OnClick_1.js	2006-12-13 17:03:02.000000000 +0100
@@ -1,29 +1,26 @@
 <!--		../system/update_OnClick_1.js		-->
-<? include ../html/$var:lang/system/update_OnClick_1.inc ?>
 <style type="text/css">
 <!--
 #content {width: 520px; margin: auto;}
 .ar {text-align: right;}
 .ml20 {margin-left: 20px;}
-.fett { font-weight:bold; }
 -->
 </style>
 <script type="text/javascript">
 <? include ../html/$var:lang/js/jsl.js ?>
-var g_msgTextUpdate		= "<? print $var:jstr0 ?>";
-var g_msgTextNoFile		= "<? print $var:jstr1 ?>";
-var g_ProduktName		= "<? print $var:ProduktName ?>";
-var g_mldPfad			= "<? print $var:jstr2 ?>";
+var g_msgTextUpdate		= "Die Anlage wird aktualisiert. Bitte warten...";
+var g_msgTextNoFile		= "Keine Datei angegeben !";
+var g_ProduktName		= "<? echo $var:ProduktName ?>";
+var g_mldPfad			= "Bitte den vollständigen Pfadnamen angeben.";
 <? if eq $var:OEM freenet `
-var g_mldfreenet			= "Wichtiger Hinweis:\x0aSie sind mit einem freenet DSL-Anschluss ohne Verbindung zum Festnetz verbunden. Verwenden Sie für die FRITZ!Box nur Firmware, die von freenet empfohlen wird. Anderenfalls kann die volle Funktionsfähigkeit an diesem Anschluss nicht mehr garantiert werden. Weitere Informationen finden Sie unter www.freenet.de.";
+var g_mldfreenet			= "Wichtiger Hinweis:\x0aSie sind mit einem freenet DSL-Anschluss ohne Verbindung zum Festnetz verbunden. Verwenden Sie für die FRITZ!Box nur Firmware, die von freenet empfohlen wird. Anderenfalls kann die volle Funktionsfähigkeit an diesem Anschluss nicht mehr garantiert werden. Weitere Informationen finden Sie unter www.freenet.de";
 `?>
-var g_tab = 0;
+var uiToolsTopLock = false;
 function uiDoOnLoad() {
-	SetSpanText("uiStatus", " ");
+	jslSetValue("uiStatus", "");
 	Tabs(0);
 <? if eq $var:OEM freenet `
-	var usePstn = "<? query telcfg:settings/UsePSTN ?>";
-	if (usePstn == "0") alert(g_mldfreenet);
+	alert(g_mldfreenet);
 `?>
 }
 function uiStartFWSearch() {
@@ -46,11 +43,10 @@
 	document.getElementById("uiPostUpdateForm").submit();
 }
 function uiDoHelp() {
-	jslPopHelp(g_tab == 0 ? "hilfe_system_update_automatic":"hilfe_system_update");
+	jslPopHelp("hilfe_system_update");
 }
 function Tabs (n) {
 	jslDisplay("uiUpdate", n==0);
 	jslDisplay("uiManuell", n==1);
-	g_tab = n;
 }
 </script>
diff -burN usr/www/all/html/de/system/update_OnClick_2.html usr/www/all/html/de/system/update_OnClick_2.html
--- usr/www/all/html/de/system/update_OnClick_2.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/update_OnClick_2.html	2006-12-13 17:03:02.000000000 +0100
@@ -31,7 +31,7 @@
 		<p class="taR_mt10 mb10"><input id="uiBtn_UpgradeStart" type="button" onclick="uiDoUpdate()" value="<? echo $var:txt07 ?>" class=Pushbutton style="width: 250px"></p>
 	</div></div></div></div></div></div>
 	<div class="backdialog" id="uiStatusbar" style="display:none"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog" style="text-align: center; padding: 5px 10px;" >
-		<span id="uiStatus" class="fett">&nbsp;</span>
+		<span id="uiStatus">&nbsp;</span>
 	</div></div></div></div></div></div>
 	<div class="backdialog" id="uiButtonbar"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
 		&nbsp;<input type="button" onclick="uiDoUpdateManuell()" value="<? echo $var:txt11 ?>" class=Pushbutton id="btnOldUpdate" style="width: 200px; display:none;">
diff -burN usr/www/all/html/de/system/update_OnClick_2.js usr/www/all/html/de/system/update_OnClick_2.js
--- usr/www/all/html/de/system/update_OnClick_2.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/update_OnClick_2.js	2006-12-13 17:03:02.000000000 +0100
@@ -1,5 +1,4 @@
 <!--		../system/update_OnClick_2.js		-->
-<? include ../html/$var:lang/system/update_OnClick_2.inc ?>
 <style type="text/css">
 <!--
 #content {width: 500px; margin: auto;}
@@ -9,29 +8,28 @@
 #t1 .c2 {width: 270px }
 .mt30 { margin-top: 30px; }
 .mb20 { margin-bottom: 20px; }
-.fett { font-weight:bold; }
 -->
 </style>
 <script type="text/javascript">
 <? include ../html/$var:lang/js/jsl.js ?>
-var g_msgTextUpdate		= "<? print $var:jstr0 ?>";
-var g_msgTextNoFile		= "<? print $var:jstr1 ?>";
+var g_msgTextUpdate		= "Die Anlage wird aktualisiert. Bitte warten...";
+var g_msgTextNoFile		= "Keine Datei angegeben !";
 var g_PicturePath_Success	= "../html/<? echo $var:lang ?>/images/finished-ok-green.gif";
 var g_PicturePath_Failed	= "../html/<? echo $var:lang ?>/images/finished-error.gif";
-var g_WaitText_No_0		= "<? print $var:jstr2 ?>";
-var g_WaitText_No_x		= "<? print $var:jstr3 ?>";
-var g_WaitText_No_10	= "<? print $var:jstr4 ?>";
-var g_stateText_No_0	= "<? print $var:jstr5 ?>";
-var g_stateText_No_1	= "<? print $var:jstr6 ?>";
-var g_stateText_No_2	= "<? print $var:jstr7 ?>";
-var g_stateText_No_3	= "<? print $var:jstr8 ?>";
-var g_stateText_No_4	= "<? print $var:jstr9 ?>";
-var g_stateText_No_5	= "<? print $var:jstr10 ?>";
-var g_stateText_No_6	= "<? print $var:jstr11 ?>";
-var g_stateText_No_7	= "<? print $var:jstr12 ?>";
-var g_stateText_No_8	= "<? print $var:jstr13 ?>";
-var g_stateText_No_9	= "<? print $var:jstr14 ?>";
-var g_stateText_No_10	= "<? print $var:jstr15 ?>";
+var g_WaitText_No_0		= "Es gibt kein neues Firmware-Update, weil keine Suche gestartet wurde.";
+var g_WaitText_No_x		= "Die Suche nach einer neuen Firmware-Version ist fehlgeschlagen.";
+var g_WaitText_No_10	= "Es wurde keine neuere als die bereits installierte Firmware gefunden.";
+var g_stateText_No_0	= "Die Suche nach einer neuen Firmware-Version wurde nicht gestartet.";
+var g_stateText_No_1	= "Bitte haben Sie einen Moment Geduld.";
+var g_stateText_No_2	= "Die Suche nach einer neuen Firmware-Version ist fehlgeschlagen. Grund: Statuscode 2.";
+var g_stateText_No_3	= "Die Suche nach einer neuen Firmware-Version ist fehlgeschlagen. Grund: Statuscode 3.";
+var g_stateText_No_4	= "Die Suche nach einer neuen Firmware-Version ist fehlgeschlagen. Grund: Statuscode 4.";
+var g_stateText_No_5	= "Die Suche nach einer neuen Firmware-Version ist fehlgeschlagen. Grund: Statuscode 5.";
+var g_stateText_No_6	= "Die Suche nach einer neuen Firmware-Version ist fehlgeschlagen. Grund: Statuscode 6.";
+var g_stateText_No_7	= "Die Suche nach einer neuen Firmware-Version ist fehlgeschlagen. Grund: Statuscode 7.";
+var g_stateText_No_8	= "Die Suche nach einer neuen Firmware-Version ist fehlgeschlagen. Grund: Statuscode 8.";
+var g_stateText_No_9	= "Die Suche nach einer neuen Firmware-Version ist fehlgeschlagen. Grund: Statuscode 9.";
+var g_stateText_No_10	= "Es wurde keine neuere als die bereits installierte Firmware gefunden.";
 var g_QueryItems = new Array();
 g_QueryItems[0] = new Item( "<? query updatecheck:status/state ?>", "updatecheck:status/state");
 g_QueryItems[1] = new Item( "<? query updatecheck:status/version ?>", "updatecheck:status/version");
diff -burN usr/www/all/html/de/system/user.html usr/www/all/html/de/system/user.html
--- usr/www/all/html/de/system/user.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/system/user.html	2006-12-13 17:03:02.000000000 +0100
@@ -1,4 +1,11 @@
-<? include ../html/$var:lang/system/user.inc ?>
+<? include ../html/$var:lang/global.inc ?>
+<? setvariable var:txt00 "Kennwortschutz für die $var:BoxName" ?>
+<? setvariable var:txt01 "Hier können Sie den Zugriff auf die Benutzeroberfläche der $var:BoxName mit einem Kennwort schützen." ?>
+<? setvariable var:txt02 "Kennwortschutz für diese $var:BoxName aktivieren" ?>
+<? setvariable var:txt03 "$var:BoxName-Kennwort" ?>
+<? setvariable var:txt04 "Kennwortbestätigung" ?>
+<? setvariable var:txt05 "Bei aktiviertem Kennwortschutz ist der Zugriff auf die Einstellungen und Informationen der $var:BoxName nur mit dem hier eingegebenen Kennwort möglich. Bewahren Sie es daher gut auf." ?>
+<? setvariable var:txt06 "Bei vergessenem Kennwort ist die Benutzeroberfläche erst nach dem Rücksetzen auf Werkseinstellungen wieder erreichbar. Dabei gehen alle Einstellungen verloren." ?>
 <div id="content">
  	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
 		<? echo $var:txt00 ?>
diff -burN usr/www/all/html/de/tr69_autoconfig/lib.js usr/www/all/html/de/tr69_autoconfig/lib.js
--- usr/www/all/html/de/tr69_autoconfig/lib.js	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/tr69_autoconfig/lib.js	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1,4 @@
+<? if eq 1 <? error found ?> 
+	'<? include ../html/$var:lang/$var:menu/$var:errorpagename.js ?>'
+	'<? include ../html/$var:lang/$var:menu/$var:pagename.js ?>'
+?>
diff -burN usr/www/all/html/de/tr69_autoconfig/tr69_config_end_0.frm usr/www/all/html/de/tr69_autoconfig/tr69_config_end_0.frm
--- usr/www/all/html/de/tr69_autoconfig/tr69_config_end_0.frm	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/tr69_autoconfig/tr69_config_end_0.frm	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1 @@
+<? include ../html/$var:lang/tr69_autoconfig/tr69.frm ?>
diff -burN usr/www/all/html/de/tr69_autoconfig/tr69_config_end_0.html usr/www/all/html/de/tr69_autoconfig/tr69_config_end_0.html
--- usr/www/all/html/de/tr69_autoconfig/tr69_config_end_0.html	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/tr69_autoconfig/tr69_config_end_0.html	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1,27 @@
+<? include ../html/$var:lang/tr69_autoconfig/tr69_config_end_0.inc ?>
+<? setvariable var:picture '../html/$var:lang/images/servicecard.jpg' ?>
+<div id="content" style="width: 540px; margin: auto">
+ 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
+		<? echo $var:Text1 ?>
+	</div></div></div></div></div></div>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<p style="margin-bottom: 15px"><b><? echo $var:Text10 ?></b></p>
+		<p style="margin-bottom: 5px"><? echo $var:Text11 ?></p>
+		<p style="margin-left: 25px; margin-bottom: 2px;"><i><span id="uiReason"><? echo $var:Text19 ?></span></i><? echo $var:Text20 ?></p>
+		<div id="uiRepeating" style="display: none">
+			<p style="margin-bottom: 5px"><? echo $var:Text12 ?></p>
+			<p class="left_35" style="margin-bottom: 20px"><input id="uiBtnRepeat" type="button" onclick="uiDoRepeat()" value="<? echo $var:Text16 ?>" class=Pushbutton style="width: 300px"></p>
+		</div>
+		<p style="margin-bottom: 5px"><span id="uiToAssist"><? echo $var:Text13 ?></span></p>
+		<p class="left_35" style="margin-bottom: 25px"><input id="uiBtnManuell" type="button" onclick="uiDoManuell()" value="<? echo $var:Text17 ?>" class=Pushbutton style="width: 300px"></p>
+	</div></div></div></div></div></div>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<p style="margin-bottom: 7px"><? echo $var:Text14 ?></p>
+		<p style="margin-bottom: 10px"><? echo $var:Text15 ?></p>
+		<p style="margin-bottom: 25px"><img src="<? echo $var:picture ?>" style="width: 180px; height: 90px;" title="<? echo $var:Text18 ?>"></p>
+	</div></div></div></div></div></div>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
+<!--		<input type="button" onclick="uiDoCancel()" value="<? echo $var:txtCancel ?>" class="Pushbuttonfett"> -->
+		<input type="button" onclick="uiDoCancel()" value="<? echo $var:Text7 ?>" class="Pushbutton">
+	</div></div></div></div></div></div>
+</div>
diff -burN usr/www/all/html/de/tr69_autoconfig/tr69_config_end_0.inc usr/www/all/html/de/tr69_autoconfig/tr69_config_end_0.inc
--- usr/www/all/html/de/tr69_autoconfig/tr69_config_end_0.inc	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/tr69_autoconfig/tr69_config_end_0.inc	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1,14 @@
+<? include ../html/$var:lang/global.inc ?>
+<? setvariable var:Text1 'Automatische Einrichtung' ?>
+<? setvariable var:Text7 'Beenden' ?>
+<? setvariable var:Text10 'Der Einrichtungsvorgang wurde abgebrochen.' ?>
+<? setvariable var:Text11 'Leider konnte die Einrichtung nicht erfolgreich durchgeführt werden. Grund:' ?>
+<? setvariable var:Text12 'Bitte wiederholen Sie den Einrichtungsvorgang ' ?>
+<? setvariable var:Text13 'oder tragen Sie Ihre Zugangsdaten direkt ein.' ?>
+<? setvariable var:Text14 'Sollte mehrmalige Einrichtungsversuche oder das Eintragen der Zugangsdaten scheitern, wenden Sie sich bitte an den Support.' ?>
+<? setvariable var:Text15 'Die Rufnummer finden Sie auf der Rückseite Ihrer Service-Card.' ?>
+<? setvariable var:Text16 'Automatische Einrichtung wiederholen' ?>
+<? setvariable var:Text17 'Zugangsdaten eintragen' ?>
+<? setvariable var:Text18 'Service-Card' ?>
+<? setvariable var:Text19 'Zeitüberschreitung (Timeout) während des Einrichtungsvorganges' ?>
+<? setvariable var:Text18 '.' ?>
diff -burN usr/www/all/html/de/tr69_autoconfig/tr69_config_end_0.js usr/www/all/html/de/tr69_autoconfig/tr69_config_end_0.js
--- usr/www/all/html/de/tr69_autoconfig/tr69_config_end_0.js	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/tr69_autoconfig/tr69_config_end_0.js	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1,40 @@
+<!--		../tr69_autoconfig/tr69_provision.js		-->
+<style type="text/css">
+<!--
+.left_35 {text-align: right; margin-top: 0px;}
+#t1 {height: 12px; font-size: 13px;}
+#t1 td {padding: 1px 2px;}
+#t1 .c1 {width: 50px; text-align: right;}
+#t1 .c2 {width: 10px; text-align: center;}
+#t1 .c3 {width: 70px; text-align: left;}
+.ac {text-align:center;}
+.fett {font-weight: bold;}
+-->
+</style>
+<script type="text/javascript">
+<? include ../html/$var:lang/js/jsl.js ?>
+var g_mldText1 = "Bitte tragen Sie Ihre Zugangsdaten direkt ein.";
+function uiDoOnLoad() {
+	if (jslGetValue("uiConfigErr") == "1") {
+		jslSetSpanText("uiReason", "<? query connection0:pppoe:status/detail ?>");
+	}
+	if (jslGetValue("uiFailCount") < "3") {
+		jslDisplay( "uiRepeating", true);
+	} else {
+		jslSetSpanText("uiToAssist", g_mldText1);
+	}
+}
+function uiDoCancel() {
+	jslGoTo("home", "home");
+}
+function uiDoManuell() {
+	jslGoTo("first", "first_Start_ISP");
+}
+function uiDoRepeat() {
+	var nFailCount = jslGetValue("uiFailCount");
+	jslSetValue("uiFailCount", ++nFailCount);
+	jslSetValue("uiProvisionCount", "0");
+	jslSetValue("uiConfigErr", "");
+	jslGoTo("tr69_autoconfig", "tr69_start_code");
+}
+</script>
diff -burN usr/www/all/html/de/tr69_autoconfig/tr69_config_end_1.frm usr/www/all/html/de/tr69_autoconfig/tr69_config_end_1.frm
--- usr/www/all/html/de/tr69_autoconfig/tr69_config_end_1.frm	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/tr69_autoconfig/tr69_config_end_1.frm	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1,2 @@
+<? include ../html/$var:lang/tr69_autoconfig/tr69.frm ?>
+<input type="hidden" name="connection0:pppoe:settings/username" value="<? query connection0:pppoe:settings/username ?>" id="uiPostPppUsername" disabled>
diff -burN usr/www/all/html/de/tr69_autoconfig/tr69_config_end_1.html usr/www/all/html/de/tr69_autoconfig/tr69_config_end_1.html
--- usr/www/all/html/de/tr69_autoconfig/tr69_config_end_1.html	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/tr69_autoconfig/tr69_config_end_1.html	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1,30 @@
+<? include ../html/$var:lang/tr69_autoconfig/tr69_config_end_1.inc ?>
+<? setvariable var:picture '../html/$var:lang/images/servicecard.jpg' ?>
+<div id="content" style="width: 540px; margin: auto">
+ 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
+		<? echo $var:Text1 ?>
+	</div></div></div></div></div></div>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<p style="margin-bottom: 15px"><b><? echo $var:Text2 ?></b></p>
+		<p style="margin-bottom: 5px"><? echo $var:Text3 ?></p>
+		<div id="uiShowNumbers" style="display: none">
+			<p style="margin-bottom: 5px"><? echo $var:Text4 ?></p>
+			<div class="b10" style="padding-left: 120px">
+				<table id="t1" >
+<? multiquery sip:settings/sip/list(username,displayname) `
+					<tr id="uiViewSipNumber$0" style="display: none">
+						<td class="c1"><script type="text/javascript">document.write(uiDisplayOkz("$0","$2","$3"));</script></td>
+						<td class="c2">$var:Text8</td>
+						<td class="c3">$3</td>
+					</tr>
+` ?>
+				</table>
+			</div>
+			<p style="margin-top: 15px;margin-bottom: 15px;"><? echo $var:Text5 ?></p>
+		</div>
+	</div></div></div></div></div></div>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
+<!--		<input type="button" onclick="uiDoCancel()" value="<? echo $var:txtCancel ?>" class="Pushbuttonfett"> -->
+		<input type="button" onclick="uiDoCancel()" value="<? echo $var:Text7 ?>" class="Pushbutton">
+	</div></div></div></div></div></div>
+</div>
diff -burN usr/www/all/html/de/tr69_autoconfig/tr69_config_end_1.inc usr/www/all/html/de/tr69_autoconfig/tr69_config_end_1.inc
--- usr/www/all/html/de/tr69_autoconfig/tr69_config_end_1.inc	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/tr69_autoconfig/tr69_config_end_1.inc	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1,9 @@
+<? include ../html/$var:lang/global.inc ?>
+<? setvariable var:Text1 'Automatische Einrichtung' ?>
+<? setvariable var:Text2 'Die Einrichtung ihrer FRITZ!Box war erfolgreich.' ?>
+<? setvariable var:Text3 'Ihre DSL-Zugangsdaten wurden auf die FRITZ!Box übertragen. Ihr Internetzugang ist nun fertig eingerichtet.' ?>
+<? setvariable var:Text4 'Weiterhin wurden für Sie DSL-Rufnummern angelegt und in die FRITZ!Box eingetragen:' ?>
+<? setvariable var:Text5 'Nach dem Beenden der automatischen Einrichtung können Sie im Menü "Telefonie" weitere Einstellungen und Rufnummernzuweisungen vornehmen. Beachten Sie dazu auch die Hilfe und das Benutzerhandbuch der FRITZ!Box.' ?>
+<? setvariable var:Text6 'zur "DSL-Telefonie-Funktion"' ?>
+<? setvariable var:Text7 'Beenden' ?>
+<? setvariable var:Text8 ' / ' ?>
diff -burN usr/www/all/html/de/tr69_autoconfig/tr69_config_end_1.js usr/www/all/html/de/tr69_autoconfig/tr69_config_end_1.js
--- usr/www/all/html/de/tr69_autoconfig/tr69_config_end_1.js	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/tr69_autoconfig/tr69_config_end_1.js	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1,52 @@
+<!--		../tr69_autoconfig/tr69_provision.js		-->
+<style type="text/css">
+<!--
+.left_35 {text-align: right; margin-top: 10px;}
+#t1 {height: 12px; font-size: 13px;}
+#t1 td {padding: 1px 2px;}
+#t1 .c1 {width: 50px; text-align: right;}
+#t1 .c2 {width: 10px; text-align: center;}
+#t1 .c3 {width: 70px; text-align: left;}
+.ac {text-align:center;}
+.fett {font-weight: bold;}
+-->
+</style>
+<script type="text/javascript">
+<? include ../html/$var:lang/js/jsl.js ?>
+function uiDoOnLoad() {
+	var showNumbers = false;
+<? multiquery sip:settings/sip/list(displayname) '
+	if ("$2" != "") {
+		showNumbers = true;
+	}
+' ?>
+	jslDisplay("uiShowNumbers", showNumbers);
+}
+function uiDoCancel() {
+	var realm = jslGetValue( "uiPostPppUsername");
+	if (realm.substring(0, 6) == "1und1/") {
+		realm = "1und1";
+	} else if (realm.substring(0, 4) == "GMX/") {
+		realm = "GMX";
+	} else if (realm.substring(0, 4) == "S+P/") {
+		realm = "S+P";
+	} else {
+		realm = "";
+	}
+	var url = "http://www.1und1.de/dslstart/index.php?label="+realm;
+	var ppWindow = window.open( url, "_blank");
+	jslGoTo("home", "home");
+}
+function uiDisplayOkz( id, user, display) {
+	var idx = user.indexOf(display);
+	var okz = user.substr( 0, idx);
+	idx = okz.indexOf("49");
+	if ( idx != -1) {
+		okz = okz.substr((idx+2), okz.length-(idx+1));
+		if ( okz.charAt(0) != "0")
+			okz = "0" + okz;
+		jslDisplay("uiViewSipNumber"+id, true);
+	}
+	return okz;
+}
+</script>
diff -burN usr/www/all/html/de/tr69_autoconfig/tr69.frm usr/www/all/html/de/tr69_autoconfig/tr69.frm
--- usr/www/all/html/de/tr69_autoconfig/tr69.frm	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/tr69_autoconfig/tr69.frm	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1,5 @@
+<input type="hidden" name="var:TestSynCount" value="<? echo $var:TestSynCount ?>" id="uiSyncCount">
+<input type="hidden" name="var:HasCabelChecked" value="<? echo $var:HasCabelChecked ?>" id="uiCabelChecked">
+<input type="hidden" name="var:ProvisionCount" value="<? echo $var:ProvisionCount ?>" id="uiProvisionCount">
+<input type="hidden" name="var:ConfigError" value="<? echo $var:ConfigError ?>" id="uiConfigErr">
+<input type="hidden" name="var:FailCount" value="<? echo $var:FailCount ?>" id="uiFailCount">
diff -burN usr/www/all/html/de/tr69_autoconfig/tr69_provision.frm usr/www/all/html/de/tr69_autoconfig/tr69_provision.frm
--- usr/www/all/html/de/tr69_autoconfig/tr69_provision.frm	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/tr69_autoconfig/tr69_provision.frm	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1 @@
+<? include ../html/$var:lang/tr69_autoconfig/tr69.frm ?>
diff -burN usr/www/all/html/de/tr69_autoconfig/tr69_provision.html usr/www/all/html/de/tr69_autoconfig/tr69_provision.html
--- usr/www/all/html/de/tr69_autoconfig/tr69_provision.html	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/tr69_autoconfig/tr69_provision.html	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1,24 @@
+<? include ../html/$var:lang/tr69_autoconfig/tr69_provision.inc ?>
+<? setvariable var:picture '../html/$var:lang/images/wait.gif' ?>
+<div id="content" style="width: 540px; margin: auto">
+ 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
+		<? echo $var:Text1 ?>
+	</div></div></div></div></div></div>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<p style="margin-bottom: 15px"><b><? echo $var:Text3 ?></b></p>
+		<div style="padding-top: 20px">
+			<table id="tProgress" style="margin: auto">
+				<tr><td><? echo $var:Text30 ?><? echo $var:Text4 ?></td></tr>
+				<tr><td><? echo $var:Text5 ?></td></tr>
+				<tr>
+					<td style="height: 10px; padding: 10px 0px"><img src="<? echo $var:picture ?>" style="width: 325px; height: 5px;" title="<? echo $var:Text6 ?>"></td>
+				</tr>
+			</table>
+		</div>
+		<p style="margin-bottom: 35px"></p>
+	</div></div></div></div></div></div>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
+<!--		<input type="button" onclick="uiDoOk()" value="<? echo $var:Text5 ?>" class="Pushbuttonfett">&nbsp;&nbsp; -->
+		<input type="button" onclick="uiDoCancel()" value="<? echo $var:txtCancel ?>" class="Pushbutton">
+	</div></div></div></div></div></div>
+</div>
diff -burN usr/www/all/html/de/tr69_autoconfig/tr69_provision.inc usr/www/all/html/de/tr69_autoconfig/tr69_provision.inc
--- usr/www/all/html/de/tr69_autoconfig/tr69_provision.inc	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/tr69_autoconfig/tr69_provision.inc	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1,8 @@
+<? include ../html/$var:lang/global.inc ?>
+<? setvariable var:Text1 'Automatische Einrichtung' ?>
+<? setvariable var:Text2 'Ihr Zugang wird jetzt eingerichtet ...' ?>
+<? setvariable var:Text3 'Ihre FRITZ!Box wird jetzt eingerichtet ...' ?>
+<? setvariable var:Text4 'Dies kann einige Augenblicke in Anspruch nehmen.' ?>
+<? setvariable var:Text5 'Bitte warten Sie, bis die Einrichtung abgeschlossen ist ...' ?>
+<? setvariable var:Text6 'Ihre FRITZ!Box wird eingerichtet. Bitte warten Sie ...' ?>
+<? setvariable var:Text7 'Weiter >' ?>
diff -burN usr/www/all/html/de/tr69_autoconfig/tr69_provision.js usr/www/all/html/de/tr69_autoconfig/tr69_provision.js
--- usr/www/all/html/de/tr69_autoconfig/tr69_provision.js	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/tr69_autoconfig/tr69_provision.js	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1,68 @@
+<!--		../tr69_autoconfig/tr69_provision.js		-->
+<style type="text/css">
+<!--
+#tProgress td {vertical-align: middle; text-align: center;}
+#t1 {font-size: 12px;}
+#t1 td {padding: 2px 2px; vertical-align: top;}
+#t1 .c1 {width: 190px }
+#t1 .c2 {width: 298px }
+-->
+</style>
+<script type="text/javascript">
+<? include ../html/$var:lang/js/jsl.js ?>
+var g_maxRefresh	= 10;
+var g_checkStatus	= 3;
+var g_QueryItems = new Array();
+g_QueryItems[0] = new Item( "<? query tr069:settings/provcode ?>", "tr069:settings/provcode");
+g_QueryItems[1] = new Item( "<? query connection0:settings/type ?>", "connection0:settings/type");
+g_QueryItems[2] = new Item( "<? query box:settings/ata_mode ?>", "box:settings/ata_mode");
+g_QueryItems[3] = new Item( "<? query sar:settings/encapsulation ?>", "sar:settings/encapsulation");
+g_QueryItems[4] = new Item( "<? query connection0:status/connect ?>", "connection0:status/connect");
+g_QueryItems[5] = new Item( "<? query connection0:pppoe:status/detail ?>", "connection0:pppoe:status/detail");
+function uiDoOnLoad() {
+	if (jslGetValue("uiProvisionCount") == "") {
+		jslSetValue("uiProvisionCount", "0");
+	}
+	if (jslGetValue("uiFailCount") == "") {
+		jslSetValue("uiFailCount", "0");
+	}
+	window.setTimeout("doRefresh()", 10000);
+}
+function uiDoCancel() {
+	jslGoTo("home", "home");
+}
+function uiDoRefresch() {
+	jslGoTo("tr69_autoconfig", "tr69_provision");
+}
+function doRefresh() {
+	var provCount = jslGetValue("uiProvisionCount");
+	
+	if ( g_QueryItems[0].value != "000.000.000.000") {
+		jslGoTo("tr69_autoconfig", "tr69_config_end_"+"1");
+	} else {
+		if (provCount > g_maxRefresh) {
+			jslSetValue("uiProvisionCount", provCount);
+			jslSetValue("uiConfigErr", "0");
+			jslGoTo("tr69_autoconfig", "tr69_config_end_"+"0");
+		} else {
+			if ( provCount > g_checkStatus) {
+				if (( g_QueryItems[1].value == "pppoe") && 
+					( g_QueryItems[2].value != "1") && 
+					((g_QueryItems[3].value == "dslencap_pppoe") || (g_QueryItems[2].value == "dslencap_pppoa") || (g_QueryItems[2].value == "dslencap_pppoa_11c")) &&
+					(g_QueryItems[4].value == "3")) {
+					jslSetValue("uiProvisionCount", provCount);
+					jslSetValue("uiConfigErr", "1");
+					jslGoTo("tr69_autoconfig", "tr69_config_end_"+"0");
+					return;
+				}
+			}
+			jslSetValue("uiProvisionCount", ++provCount);
+			jslGoTo("tr69_autoconfig", "tr69_provision");
+		}
+	}
+}
+function Item ( wert, query) {
+	this.value = wert;
+	this.query = query;
+}
+</script>
diff -burN usr/www/all/html/de/tr69_autoconfig/tr69_start_code.frm usr/www/all/html/de/tr69_autoconfig/tr69_start_code.frm
--- usr/www/all/html/de/tr69_autoconfig/tr69_start_code.frm	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/tr69_autoconfig/tr69_start_code.frm	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1,8 @@
+<? include ../html/$var:lang/tr69_autoconfig/tr69.frm ?>
+<input type="hidden" name="connection0:settings/type" value="<? query connection0:settings/type ?>" id="uiPostType" disabled>
+<input type="hidden" name="sar:settings/encapsulation" value="<? query sar:settings/encapsulation ?>" id="uiPostEncaps" disabled>
+<input type="hidden" name="box:settings/ata_mode" value="<? query box:settings/ata_mode ?>" id="uiPostAta" disabled>
+<input type="hidden" name="connection0:pppoe:settings/username" value="<? query connection0:pppoe:settings/username ?>" id="uiPostPppUsername" disabled>
+<input type="hidden" name="connection0:pppoe:settings/password" value="<? query connection0:pppoe:settings/password ?>" id="uiPostPppPassword" disabled>
+<input type="hidden" name="tr069:settings/username" value="<? query tr069:settings/username ?>" id="uiPostTr69Username" disabled>
+<input type="hidden" name="tr069:settings/password" value="<? query tr069:settings/password ?>" id="uiPostTr69Password" disabled>
diff -burN usr/www/all/html/de/tr69_autoconfig/tr69_start_code.html usr/www/all/html/de/tr69_autoconfig/tr69_start_code.html
--- usr/www/all/html/de/tr69_autoconfig/tr69_start_code.html	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/tr69_autoconfig/tr69_start_code.html	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1,26 @@
+<? include ../html/$var:lang/tr69_autoconfig/tr69_start_code.inc ?>
+<? setvariable var:picture '../html/$var:lang/images/sealer.jpg' ?>
+<div id="content" style="width: 540px; margin: auto">
+ 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
+		<? echo $var:Text1 ?>
+	</div></div></div></div></div></div>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<p style="margin-bottom: 15px"><b><? echo $var:Text2 ?></b></p>
+		<p style="margin-bottom: 5px"><? echo $var:Text3 ?></p>
+		<p style="margin-bottom: 5px"><img src="<? echo $var:picture ?>" style="width: 375px; height: 150px;" title="<? echo $var:Text5 ?>"></p>
+		<p class="mb10 style="margin-top: 10px;"><b><? echo $var:Text4 ?></b></p>
+		<p style="margin-top: 10px; margin-left: 80px; margin-bottom: 5px"><? echo $var:Text6 ?>
+			<input type="text" onKeyUp="OnCheckTupel(event,'0')" id="uiViewStartCode0" class="Eingabefeld" size="5" maxlength="4" autocomplete="off"> -
+			<input type="text" onKeyUp="OnCheckTupel(event,'1')" id="uiViewStartCode1" class="Eingabefeld" size="5" maxlength="4" autocomplete="off"> -
+			<input type="text" onKeyUp="OnCheckTupel(event,'2')" id="uiViewStartCode2" class="Eingabefeld" size="5" maxlength="4" autocomplete="off">
+		</p>
+		<p class="left_35" style="margin-bottom: 0px"><input id="uiGoOn" type="button" onclick="uiDoOk()" value="<? echo $var:Text7 ?>" class=Pushbutton style="width: 180px"></p>
+	</div></div></div></div></div></div>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<p style="margin-top: 10px; margin-bottom: 10px"><? echo $var:Text9 ?> <a href="javascript:uiDoManuell();" id="nsLink1"><? echo $var:Text10 ?></a><? echo $var:Text11 ?></p>
+	</div></div></div></div></div></div>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
+<!--		<input type="button" onclick="uiDoOk()" value="<? echo $var:Text7 ?>" class="Pushbuttonfett">&nbsp;&nbsp; -->
+		<input type="button" onclick="uiDoCancel()" value="<? echo $var:txtCancel ?>" class="Pushbutton">
+	</div></div></div></div></div></div>
+</div>
diff -burN usr/www/all/html/de/tr69_autoconfig/tr69_start_code.inc usr/www/all/html/de/tr69_autoconfig/tr69_start_code.inc
--- usr/www/all/html/de/tr69_autoconfig/tr69_start_code.inc	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/tr69_autoconfig/tr69_start_code.inc	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1,12 @@
+<? include ../html/$var:lang/global.inc ?>
+<? setvariable var:Text1 'Automatische Einrichtung' ?>
+<? setvariable var:Text2 'Gleich sind Sie im Internet ...' ?>
+<? setvariable var:Text3 'Zur Einnrichtung Ihrer FRITZ!Box benötigen Sie nur Ihren Start-Code. Die Einrichtung läuft dann voll automatisch ab. Ihren Start-Code finden Sie in Ihrem Sicherheits-Umschlag.' ?>
+<? setvariable var:Text4 'Geben Sie den Start-Code ein' ?>
+<? setvariable var:Text5 'Hier finden Sie Ihren Start-Code!' ?>
+<? setvariable var:Text6 'Start-Code : ' ?>
+<? setvariable var:Text7 'Weiter >' ?>
+<? setvariable var:Text8 'Kein Start-Code vorhanden ? ' ?>
+<? setvariable var:Text9 'Wenn Sie keinen Start-Code haben, klicken Sie bitte ' ?>
+<? setvariable var:Text10 'hier' ?>
+<? setvariable var:Text11 '.' ?>
diff -burN usr/www/all/html/de/tr69_autoconfig/tr69_start_code.js usr/www/all/html/de/tr69_autoconfig/tr69_start_code.js
--- usr/www/all/html/de/tr69_autoconfig/tr69_start_code.js	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/tr69_autoconfig/tr69_start_code.js	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1,65 @@
+<!--		../tr69_autoconfig/tr69_start_code.js		-->
+<style type="text/css">
+<!--
+#nsLink1:link
+			{ color: #6495ED; font-weight: bold;}
+#nsLink1:visited, #nsLink1:active, #nsLink1:hover
+			{ color: #6495ED; text-decoration: underline; font-weight: bold;}
+.left_35 {text-align: right; margin-top: 0px;}
+-->
+</style>
+<script type="text/javascript">
+<? include ../html/$var:lang/js/jsl.js ?>
+var g_mldText1 = "Das erste Vierer-Tupel des Start-Code ist unvollständig!\x0d\x0aBitte überprüfen Sie Ihre Eingabe und wiederholen sie gegebenfalls.";
+var g_mldText2 = "Das zweite Vierer-Tupel des Start-Code ist unvollständig!\x0d\x0aBitte überprüfen Sie Ihre Eingabe und wiederholen sie gegebenfalls.";
+var g_mldText3 = "Das dritte Vierer-Tupel des Start-Code ist unvollständig!\x0d\x0aBitte überprüfen Sie Ihre Eingabe und wiederholen sie gegebenfalls.";
+function uiDoOnLoad() {
+	uiSelect("uiViewStartCode0");
+}
+function uiDoCancel() {
+	jslGoTo("home", "home");
+}
+function uiDoManuell() {
+	jslGoTo("first", "first_Start_ISP");
+}
+function OnCheckTupel(e,id) {
+	var ev = e == null ? window.event : e;
+	var c = ev.keyCode;
+	var value = jslGetValue( "uiViewStartCode"+id);
+//	alert( "Id:="+id+" Length:="+value.length);
+	if ( (value.length == 4) && ( c != 37 ) && ( c != 39 ) && ( c != 9 )&& ( c != 16 )) {
+		if ( id == "0") { 
+			uiFocus("uiViewStartCode1");
+		} else if ( id == "1") {
+			uiFocus("uiViewStartCode2");
+		} else if ( id == "2") {
+			uiFocus("uiGoOn");
+		}
+	}
+}
+function uiDoOk() {
+	if ( jslGetValue( "uiViewStartCode0").length != 4 ) {alert(g_mldText1);uiSelect("uiViewStartCode0");return;};
+	if ( jslGetValue( "uiViewStartCode1").length != 4 ) {alert(g_mldText2);uiSelect("uiViewStartCode1");return;};
+	if ( jslGetValue( "uiViewStartCode2").length != 4 ) {alert(g_mldText3);uiSelect("uiViewStartCode2");return;};
+	
+	var user = jslGetValue( "uiViewStartCode0") + jslGetValue( "uiViewStartCode1").charAt(0);
+	var pw = jslGetValue( "uiViewStartCode1").substr( 1,3) + jslGetValue( "uiViewStartCode2");
+	
+	jslSetValue( "uiPostType", "pppoe");
+	jslSetValue( "uiPostEncaps", "dslencap_pppoe");
+	jslSetValue( "uiPostAta", "0");
+	jslSetValue( "uiPostPppUsername", "1und1/"+user+"@online.de");
+	jslSetValue( "uiPostPppPassword", pw);
+	jslSetValue( "uiPostTr69Username", user /*"1und1/"+user+"@online.de"*/);
+	jslSetValue( "uiPostTr69Password", pw);
+	jslEnable("uiPostType");
+	jslEnable("uiPostEncaps");
+	jslEnable("uiPostAta");
+	jslEnable("uiPostPppUsername");
+	jslEnable("uiPostPppPassword");
+	jslEnable("uiPostTr69Username");
+	jslEnable("uiPostTr69Password");
+	jslFormSubmitEx(jslGetValue("uiPostMenu"), "tr69_provision");
+	//jslGoTo(jslGetValue("uiPostMenu"), "tr69_provision");
+}
+</script>
diff -burN usr/www/all/html/de/tr69_autoconfig/tr69_sync_error.frm usr/www/all/html/de/tr69_autoconfig/tr69_sync_error.frm
--- usr/www/all/html/de/tr69_autoconfig/tr69_sync_error.frm	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/tr69_autoconfig/tr69_sync_error.frm	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1,2 @@
+<? include ../html/$var:lang/tr69_autoconfig/tr69.frm ?>
+<input type="hidden" name="connection0:settings/type" value="<? query connection0:settings/type ?>" id="uiPostType" disabled>
diff -burN usr/www/all/html/de/tr69_autoconfig/tr69_sync_error.html usr/www/all/html/de/tr69_autoconfig/tr69_sync_error.html
--- usr/www/all/html/de/tr69_autoconfig/tr69_sync_error.html	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/tr69_autoconfig/tr69_sync_error.html	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1,27 @@
+<? include ../html/$var:lang/tr69_autoconfig/tr69_sync_error.inc ?>
+<? setvariable var:picture '../html/$var:lang/images/servicecard.jpg' ?>
+<div id="content" style="width: 540px; margin: auto">
+ 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
+		<? echo $var:Text1 ?>
+	</div></div></div></div></div></div>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<p style="margin-bottom: 15px"><b><? echo $var:Text2 ?></b></p>
+		<div id="uiCheckCabel" style="display: none">
+			<p style="margin-top: 15px; margin-bottom: 8px"><? echo $var:Text3 ?></p>
+			<p class="pCheck25" style="margin-top: 0px; margin-left: 10px; margin-bottom: 50px"><input type="checkbox" name="uiCabelCheck" id="uiViewCabelCheck" onclick="OnCheckCabel()">
+				<label for="uiViewCabelCheck"><b><? echo $var:Text4 ?></b></label><br>
+				<? echo $var:Text5 ?></p>
+		</div>
+		<div id="uiToSupport" style="display: none">
+			<p style="margin-bottom: 15px"><? echo $var:Text11 ?><? echo $var:Text12 ?></p>
+			<p style="margin-bottom: 15px"><? echo $var:Text13 ?></p>
+			<p style="margin-bottom: 0px"><? echo $var:Text14 ?></p>
+			<p style="margin-bottom: 5px"><? echo $var:Text15 ?></p>
+			<p style="margin-bottom: 25px"><img src="<? echo $var:picture ?>" style="width: 180px; height: 90px;" title="<? echo $var:Text6 ?>"></p>
+		</div>
+	</div></div></div></div></div></div>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
+		<input type="button" onclick="uiDoOk()" value="<? echo $var:Text20 ?>" class="Pushbuttonfett" id="uiBtnOK">&nbsp;&nbsp;
+		<input type="button" onclick="uiDoCancel()" value="<? echo $var:txtCancel ?>" class="Pushbutton">
+	</div></div></div></div></div></div>
+</div>
diff -burN usr/www/all/html/de/tr69_autoconfig/tr69_sync_error.inc usr/www/all/html/de/tr69_autoconfig/tr69_sync_error.inc
--- usr/www/all/html/de/tr69_autoconfig/tr69_sync_error.inc	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/tr69_autoconfig/tr69_sync_error.inc	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1,14 @@
+<? include ../html/$var:lang/global.inc ?>
+<? setvariable var:Text1 'Automatische Einrichtung' ?>
+<? setvariable var:Text2 'Keine Verbindung zum DSL-Netz' ?>
+<? setvariable var:Text3 'Bitte überprüfen Sie die Verkabelung ihrer FRITZ!Box anhand der Installations-Anleitung.' ?>
+<? setvariable var:Text4 'Verkabelung korrekt.' ?>
+<? setvariable var:Text5 'Die Verkabelung der FRITZ!Box wurde überprüft und ist korrekt.' ?>
+<? setvariable var:Text6 'Service-Card' ?>
+<? setvariable var:Text10 ' ' ?>
+<? setvariable var:Text11 'Es war nicht möglich, eine Verbindung zum DSL-Netz herzustellen. ' ?>
+<? setvariable var:Text12 'Möglicherweise ist Ihr DSL-Anschluss noch nicht freigeschaltet. Den Freischaltungstermin finden Sie in ihrer Auftragungsbestätigung.' ?>
+<? setvariable var:Text13 'Falls dieser Termin noch nicht erreicht ist, klicken Sie auf "Abbrechen" und starten die Einrichtung der FRITZ!Box erneut, sobald die Freischaltung erfolgt ist.' ?>
+<? setvariable var:Text14 'Falls der Termin der Freischaltung bereits verstrichen ist, oder Sie den Termin nicht kennen, wenden Sie sich an den Support.' ?>
+<? setvariable var:Text15 'Die Rufnummer des Supports finden Sie auf der Rückseite ihrer Service-Card im Service-Umschlag.' ?>
+<? setvariable var:Text20 'Weiter >' ?>
diff -burN usr/www/all/html/de/tr69_autoconfig/tr69_sync_error.js usr/www/all/html/de/tr69_autoconfig/tr69_sync_error.js
--- usr/www/all/html/de/tr69_autoconfig/tr69_sync_error.js	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/tr69_autoconfig/tr69_sync_error.js	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1,52 @@
+<!--		../tr69_autoconfig/tr69_sync.js		-->
+<style type="text/css">
+<!--
+#t1 td {padding: 1px 2px 1px 0px;}
+#tUser td {padding: 0px;}
+#tWebDeUser td {padding: 0px;}
+.left25 {padding-left: 25px;}
+.left50 {padding-left: 50px;}
+.left75 {padding-left: 75px;}
+#tModem td {padding: 1px 15px 1px 0px;}
+#tATM td {padding: 1px 15px 1px 0px; vertical-align: top;}
+#tATM2 td {padding: 1px 15px 1px 0px;}
+#tRFC td {padding: 1px 15px 1px 0px;}
+.pText25 {padding-left: 25px;}
+.pCheck25 {text-indent: -25px; padding-left: 35px; margin-bottom: 10px;}
+-->
+</style>
+<script type="text/javascript">
+<? include ../html/$var:lang/js/jsl.js ?>
+function uiDoOnLoad() {
+	if ( (jslGetValue("uiSyncCount") > 1) && ( jslGetValue("uiCabelChecked") == "1")) {
+		jslDisplay( "uiBtnOK", false);
+		jslDisplay( "uiToSupport", true);
+	} else {
+		jslDisplay( "uiCheckCabel", true);
+		if ( jslGetValue("uiCabelChecked") != "1")
+			jslDisable( "uiBtnOK");
+	}
+}
+function OnCheckCabel() {
+	if (jslGetChecked("uiViewCabelCheck") == true) {
+		jslSetValue( "uiCabelChecked", "1");
+		jslEnable("uiBtnOK");
+	} else {
+		jslSetValue( "uiCabelChecked", "0");
+		jslDisable( "uiBtnOK");
+	}
+}
+function uiDoCancel() {
+	jslGoTo("home", "home");
+}
+function uiDoOk() {
+	if (jslGetChecked("uiViewCabelCheck") == true) {
+		jslGoTo("tr69_autoconfig", "tr69_sync");
+	} else {
+	}
+}
+<? if eq $var:OEM 1und1 `
+function SetAssiContext() {
+}
+` ?>
+</script>
diff -burN usr/www/all/html/de/tr69_autoconfig/tr69_sync.frm usr/www/all/html/de/tr69_autoconfig/tr69_sync.frm
--- usr/www/all/html/de/tr69_autoconfig/tr69_sync.frm	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/tr69_autoconfig/tr69_sync.frm	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1 @@
+<? include ../html/$var:lang/tr69_autoconfig/tr69.frm ?>
diff -burN usr/www/all/html/de/tr69_autoconfig/tr69_sync.html usr/www/all/html/de/tr69_autoconfig/tr69_sync.html
--- usr/www/all/html/de/tr69_autoconfig/tr69_sync.html	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/tr69_autoconfig/tr69_sync.html	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1,27 @@
+<? include ../html/$var:lang/tr69_autoconfig/tr69_sync.inc ?>
+<? setvariable var:picture '../html/$var:lang/images/wait.gif' ?>
+<? setvariable var:pictureText '$var:Text6' ?>
+<div id="content" style="width: 540px; margin: auto">
+ 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
+		<? echo $var:Text1 ?>
+	</div></div></div></div></div></div>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<p style="margin-bottom: 0px">
+			<span id="uiWelcome" style="display: none"><b><? echo $var:Text2 ?></b></span>
+			<? echo $var:Text3 ?><? echo $var:Text4 ?>
+		</p>
+		<div style="padding-top: 20px">
+			<table id="tProgress" style="margin: auto">
+				<tr><td><? echo $var:Text5 ?></td></tr>
+				<tr>
+					<td style="height: 10px; padding: 10px 0px"><img src="<? echo $var:picture ?>" style="width: 325px; height: 5px;" title="<? echo $var:pictureText ?>"></td>
+				</tr>
+				<tr><td class="tProgress"><span id="uiViewCheckStatus2">&nbsp;</span></td></tr>
+			</table>
+		</div>
+	</div></div></div></div></div></div>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
+<!--		<input type="button" onclick="uiDoOk()" value="<? echo $var:Text5 ?>" class="Pushbuttonfett">&nbsp;&nbsp; -->
+		<input type="button" onclick="uiDoCancel()" value="<? echo $var:txtCancel ?>" class="Pushbutton">
+	</div></div></div></div></div></div>
+</div>
diff -burN usr/www/all/html/de/tr69_autoconfig/tr69_sync.inc usr/www/all/html/de/tr69_autoconfig/tr69_sync.inc
--- usr/www/all/html/de/tr69_autoconfig/tr69_sync.inc	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/tr69_autoconfig/tr69_sync.inc	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1,14 @@
+<? include ../html/$var:lang/global.inc ?>
+<? setvariable var:Text1 'Automatische Einrichtung' ?>
+<? setvariable var:Text2 'Herzlich Willkommen. ' ?>
+<? if eq $var:TestSynCount '1' `
+<? setvariable var:Text3 'Die Einrichtung Ihrer FRITZ!Box wird erneut vorbereitet. ' ?>
+<? setvariable var:Text4 'Hierzu wird nochmals versucht, eine Verbindung zum DSL-Netz herzustellen.' ?>
+` `
+<? setvariable var:Text3 'Die Einrichtung Ihrer FRITZ!Box wird vorbereitet. ' ?>
+<? setvariable var:Text4 'Hierzu muss eine Verbindung zum DSL-Netz hergestellt werden.' ?>
+` ?>
+<? setvariable var:Text5 'Bitte warten Sie, dies kann einige Augenblicke dauern...' ?>
+<? setvariable var:Text6 'Verbindung zum DSL-Netz wird hergestellt. Bitte warten Sie ...' ?>
+<? setvariable var:Text7 'Weiter >' ?>
+<? setvariable var:Text8 '' ?>
diff -burN usr/www/all/html/de/tr69_autoconfig/tr69_sync.js usr/www/all/html/de/tr69_autoconfig/tr69_sync.js
--- usr/www/all/html/de/tr69_autoconfig/tr69_sync.js	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/tr69_autoconfig/tr69_sync.js	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1,51 @@
+<!--		../tr69_autoconfig/tr69_sync.js		-->
+<style type="text/css">
+<!--
+#tProgress td {vertical-align: middle; text-align: center;}
+#t1 {font-size: 12px;}
+#t1 td {padding: 2px 2px; vertical-align: top;}
+#t1 .c1 {width: 190px }
+#t1 .c2 {width: 298px }
+-->
+</style>
+<script type="text/javascript">
+<? include ../html/$var:lang/js/jsl.js ?>
+var g_QueryItems = new Array();
+g_QueryItems[0] = new Item( "<? query sar:status/dsl_carrier_state ?>", "sar:status/dsl_carrier_state");
+function uiDoOnLoad() {
+	if (jslGetValue("uiSyncCount") == "") {
+		jslSetValue("uiSyncCount", "0");
+		jslDisplay("uiWelcome", true);
+	}
+	if (jslGetValue("uiCabelChecked") == "")
+		jslSetValue("uiSyncCount", "0");
+	window.setTimeout("doRefresh()", 10000);
+}
+function uiDoCancel() {
+	jslGoTo("home", "home");
+}
+function doRefresh() {
+	if ( g_QueryItems[0].value == "3") {
+		jslGoTo("tr69_autoconfig", "tr69_sync");
+		startDataRefreshing();
+	} else if ( g_QueryItems[0].value == "4") {
+		jslGoTo("tr69_autoconfig", "tr69_sync");
+	} else if ( g_QueryItems[0].value == "5") {
+		var syncCount = jslGetValue("uiSyncCount");
+		jslSetValue("uiSyncCount", ++syncCount);
+		jslGoTo("tr69_autoconfig", "tr69_start_code");
+	} else {
+		var syncCount = jslGetValue("uiSyncCount");
+		jslSetValue("uiSyncCount", ++syncCount);
+		jslGoTo("tr69_autoconfig", "tr69_sync_error");
+	}
+}
+<? if eq $var:OEM 1und1 `
+function SetAssiContext() {
+}
+` ?>
+function Item ( wert, query) {
+	this.value = wert;
+	this.query = query;
+}
+</script>
diff -burN usr/www/all/html/de/usb/status.html usr/www/all/html/de/usb/status.html
--- usr/www/all/html/de/usb/status.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/usb/status.html	2006-12-13 17:03:02.000000000 +0100
@@ -10,7 +10,7 @@
 		<div id="ViewDisk" style="display:none">
 			<p class="mb5"><? echo $var:Text5 ?></p>
 <? multiquery ctlusb:settings/storage-part/list `
-			<p class="ml25"><script type="text/javascript">document.write(DiskLink('<? query ctlusb:settings/$1 ?>'));</script></p>
+			<p class="Left25"><a href="ftp://<? if neq '<? query ctlusb:settings/ftp-password ?>' '' 'ftpuser@' ?><? query interfaces:settings/$var:ethnr/ipaddr ?>/<? query ctlusb:settings/$1 ?>" target="_dummy"><? query ctlusb:settings/$1 ?></a></p>
 ` ?>
 		</div>
 	</div></div></div></div></div></div>
diff -burN usr/www/all/html/de/usb/status.js usr/www/all/html/de/usb/status.js
--- usr/www/all/html/de/usb/status.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/usb/status.js	2006-12-13 17:03:02.000000000 +0100
@@ -1,28 +1,16 @@
 <!--		../system/status.js		-->
-<? include ../html/$var:lang/usb/status.inc ?>
 <style type="text/css">
 <!--
-#content {width: 560px; margin: auto;}
-.tAura {width: 540px; table-layout: fixed}
-.tAura td {padding: 2px; overflow: hidden}
-.tAura .c1 {width: 290px;}
-.tAura .c2 {width: 230px; padding-left:10px;}
-.ac {text-align: center;}
+#content {width: 480px; margin: auto;}
 -->
 </style>
 <script type="text/javascript">
 <? include ../html/$var:lang/js/jsl.js ?>
-var g_expertMode = "<? query box:settings/expertmode/activated ?>";
-var g_foundPrinter	= false;
-var g_foundDisk	= false;
-var g_txtNoPrinter	= "<? print $var:jstr0 ?>";
-var g_txtNoDisk	= "<? print $var:jstr1 ?>";
 function uiDoOnLoad() {
 	var b = "<? query ctlusb:settings/printer-avail ?>";
 			jslDisplay("NoPrinter", b != "1");
 			jslDisplay("ViewPrinter", b == "1");
-	var n = Number("<? query ctlusb:settings/storage-part/count ?>");
-	if (isNaN(n)) n = 0;
+	var n = <? multiquerycount ctlusb:settings/storage-part/list ?>;
 			jslDisplay("NoDisk", n == 0);
 			jslDisplay("ViewDisk", n != 0);
 }
@@ -32,20 +20,4 @@
 function uiDoHelp() {
 	jslPopHelp("hilfe_usb_status");
 }
-function IsIpClient () {
-	var conntype = "<? query connection0:settings/type ?>";
-	var atamode = "<? query box:settings/ata_mode ?>";
-	return (atamode == "1") && (conntype == "bridge");
-}
-function DiskLink (name) {
-	var adr = "";
-	if ("<? query ctlusb:settings/ftp-password ?>" != "") adr = "ftpuser@";
-	
-	if (IsIpClient()) {
-		adr += "<? query connection0:status/ip ?>";
-	} else {
-		adr += "<? query interfaces:settings/lan0/ipaddr ?>";
-	}
-	return "<a href=\"ftp://"+adr+"/"+name+"\" target=\"_blank\">"+name+"</a>";
-}
 </script>
diff -burN usr/www/all/html/de/usb/usbdisk_cut.js usr/www/all/html/de/usb/usbdisk_cut.js
--- usr/www/all/html/de/usb/usbdisk_cut.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/usb/usbdisk_cut.js	2006-12-13 17:03:02.000000000 +0100
@@ -1,5 +1,4 @@
 <!--		../usb/usbdisk_cut.js		-->
-<? include ../html/$var:lang/usb/usbdisk_cut.inc ?>
 <style type="text/css">
 <!--
 #content {width: 500px; margin: auto;}
@@ -11,11 +10,11 @@
 <? include ../html/$var:lang/js/jsl.js ?>
 var g_PicturePath_Success	= "../html/<? echo $var:lang ?>/images/finished-ok-green.gif";
 var g_PicturePath_Failed	= "../html/<? echo $var:lang ?>/images/finished-error.gif";
-var g_stateText_No_0	= "<? print $var:jstr0 ?>";
-var g_stateText_No_1	= "<? print $var:jstr1 ?>";
-var g_stateText_No_2	= "<? print $var:jstr2 ?>";
-var g_stateText_No_3	= "<? print $var:jstr3 ?>";
-var g_stateText_No_4	= "<? print $var:jstr4 ?>";
+var g_stateText_No_0	= "Es wurde keine Abtrennung der USB-Massenspeichern ausgelöst.";
+var g_stateText_No_1	= "Der Status der Abtrennung der USB-Massenspeichern ist unbekannt.";
+var g_stateText_No_2	= "Bitte haben Sie einen Moment Geduld.";
+var g_stateText_No_3	= "Alle USB-Massenspeicher können nun sicher getrennt werden.";
+var g_stateText_No_4	= "Die Abtrennung der USB-Massenspeichern ist fehlgeschlagen.";
 var g_QueryItems = new Array();
 g_QueryItems[0] = new Item( "<? query ctlusb:settings/unplug-status ?>", "ctlusb:settings/unplug-status");
 function uiDoOnLoad() {
diff -burN usr/www/all/html/de/usb/usbdisk.html usr/www/all/html/de/usb/usbdisk.html
--- usr/www/all/html/de/usb/usbdisk.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/usb/usbdisk.html	2006-12-13 17:03:02.000000000 +0100
@@ -26,7 +26,7 @@
 		<div id="uiViewDisk" style="display:none">
 			<p class="mb5"><? echo $var:Text9 ?></p>
 <? multiquery ctlusb:settings/storage-part/list `
-			<p class="Left25"><script type="text/javascript">document.write(DiskLink('<? query ctlusb:settings/$1 ?>'));</script></p>
+			<p class="Left25"><a href="ftp://<? if neq '<? query ctlusb:settings/ftp-password ?>' '' 'ftpuser@' ?><? query interfaces:settings/$var:ethnr/ipaddr ?>/<? query ctlusb:settings/$1 ?>" target="_dummy"><? query ctlusb:settings/$1 ?></a></p>
 ` ?>
 			<p class="mt10"><? echo $var:Text11 ?></p>
 			<p style="text-align: right;"><input type="button" onclick="uiDoTrennen()" value="<? echo $var:Text12 ?>" class="Pushbutton"></p>
diff -burN usr/www/all/html/de/usb/usbdisk.js usr/www/all/html/de/usb/usbdisk.js
--- usr/www/all/html/de/usb/usbdisk.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/usb/usbdisk.js	2006-12-13 17:03:02.000000000 +0100
@@ -1,18 +1,18 @@
 <!--		../system/usbdisk.js		-->
 <style type="text/css">
 <!--
-#content {width: 560px; margin: auto;}
+#content {width: 500px; margin: auto;}
 .Left25 {margin-left: 25px;}
 #t1 td {padding: 1px 3px;}
 -->
 </style>
 <script type="text/javascript">
 <? include ../html/$var:lang/js/jsl.js ?>
-var g_expertMode = "<? query box:settings/expertmode/activated ?>";
+var g_expertMode = <? query box:settings/expertmode/activated ?>;
 var g_mldPassword = "Das Kennwort stimmt nicht mit der Bestätigung überein.";
 var g_mldNoPassword = "Die Freigabe eines USB-Massenspeichers im Internet ist nur mit aktivem Kennwortschutz möglich.";
 function uiDoOnLoad() {
-	var n = <? query ctlusb:settings/storage-part/count ?>;
+	var n = <? multiquerycount ctlusb:settings/storage-part/list ?>;
 	uiDoRights(jslGetValue("uiPostRights") == "0" ? 1:0);
 	var str = jslGetValue("uiPostPassword");
 	jslSetValue("uiViewPassword", str);
@@ -22,7 +22,7 @@
 	
 	jslDisplay("uiViewNoDisk", n == 0);
 	jslDisplay("uiViewDisk", n != 0);
-	if (n != 0 && g_expertMode == "1") {
+	if (n != 0 && g_expertMode == 1) {
 		jslDisplay("FtpServer", !IsDslModem() && !IsIpClient());
 		jslSetChecked("uiViewFtpServer", jslGetValue("uiPostFtpServer") == "1");
 		SetSpanText("uiViewFtpAdr", GetFtpAdr());
@@ -37,7 +37,7 @@
 		jslSetValue("uiPostPassword", "");
 	}
 	jslSetValue("uiPostRights", jslGetChecked("uiViewRead") ? "1":"0");
-	if (g_expertMode == "1") {
+	if (g_expertMode == 1) {
 		if (!jslGetChecked("uiViewUsePassword") && jslGetChecked("uiViewFtpServer")) {
 			alert(g_mldNoPassword); return;
 		}
@@ -91,17 +91,4 @@
 	var atamode = "<? query box:settings/ata_mode ?>";
 	return (atamode == "1") && (conntype == "bridge");
 }
-function DiskLink(name) {
-	var adr = "";
-	if ("<? query ctlusb:settings/ftp-password ?>" != "") adr = "ftpuser@";
-	
-	if (IsIpClient()) {
-		adr += "<? query connection0:status/ip ?>";
-	} else {
-		adr += "<? query interfaces:settings/lan0/ipaddr ?>";
-	}
-	
-	return "<a href=\"ftp://"+adr+"/"+name+"\" target=\"_blank\">"+name+"</a>";
-	
-}
 </script>
diff -burN usr/www/all/html/de/usb/usbprint.js usr/www/all/html/de/usb/usbprint.js
--- usr/www/all/html/de/usb/usbprint.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/usb/usbprint.js	2006-12-13 17:03:02.000000000 +0100
@@ -1,12 +1,8 @@
 <!--		../system/usbprint.js		-->
 <style type="text/css">
 <!--
-#content {width: 560px; margin: auto;}
+#content {width: 520px; margin: auto;}
 #t1 td {padding: 2px 20px 2px 2px;}
-.tAura {table-layout: fixed}
-.tAura td, .tAura th {padding: 2px; overflow: hidden}
-.tAura .c1 {width: 380px;}
-.tAura .c3 {width: 150px;}
 -->
 </style>
 <script type="text/javascript">
diff -burN usr/www/all/html/de/vergessen.html usr/www/all/html/de/vergessen.html
--- usr/www/all/html/de/vergessen.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/vergessen.html	2006-12-13 17:03:02.000000000 +0100
@@ -27,6 +27,7 @@
 table			{ border-collapse: collapse; }
 .pTitel, .pTitelo
 				{ font-weight: bold; text-align: center; background-color: #E1F4FF; padding: 5px 10px; border: 1px solid #C6C7BF; }
+				 
 .pDialog, .pDialogo, .pDialogb, .pDialogob
 				{ padding: 10px 10px; text-align: left; background-color: #FBFAF7/*#FEFCF0*/; border: 1px solid #C6C7BF; }
 .pButtonbar 	{ text-align: right; padding: 5px 10px; background-color: #E1F4FF; border: 1px solid #C6C7BF; }
diff -burN usr/www/all/html/de/wlan/common.frm usr/www/all/html/de/wlan/common.frm
--- usr/www/all/html/de/wlan/common.frm	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/wlan/common.frm	2006-12-13 17:03:02.000000000 +0100
@@ -6,6 +6,4 @@
 <input type="hidden" name="wlan:settings/bg_mode" value="<? query wlan:settings/bg_mode ?>" id="uiPost_Mode">
 <input type="hidden" name="wlan:settings/user_isolation" value="<? query wlan:settings/user_isolation ?>" id="uiPost_UserIsolation">
 <input type="hidden" name="wlan:settings/turbomode" value="<? query wlan:settings/turbomode ?>" id="uiPostTurbo">
-<input type="hidden" name="wlan:settings/wmm_enabled" value="<? query wlan:settings/wmm_enabled ?>" id="uiPostWmm">
-<input type="hidden" name="wlan:settings/IPTVoptimize" value="<? query wlan:settings/IPTVoptimize ?>" id="uiPostIPTV">
 <input type="hidden" name="ctlusb:settings/autoprov_enabled" value="<? query ctlusb:settings/autoprov_enabled ?>" id="uiPostAutoprov">
diff -burN usr/www/all/html/de/wlan/common.html usr/www/all/html/de/wlan/common.html
--- usr/www/all/html/de/wlan/common.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/wlan/common.html	2006-12-13 17:03:02.000000000 +0100
@@ -33,8 +33,8 @@
 					<td><input type="text" size="33" maxlength="32" class="Eingabefeld" id="uiView_SSID"></td>
 				</tr>
 			</table>
+			<p class="pCheck25"><input type="checkbox" id="uiView_ShowSSID">&nbsp;<label for="uiView_ShowSSID"><? echo $var:Text19 ?></label></p>
 			<div id="uiViewExpert" style="display:none; margin-top: 10px;">
-				<p class="pCheck25 mb5"><input type="checkbox" id="uiView_ShowSSID">&nbsp;<label for="uiView_ShowSSID"><? echo $var:Text19 ?></label></p>
 				<table>
 					<tr>
 						<td class="c1"><label for="uiView_PowerLevel"><? echo $var:Text20 ?></label></td>
@@ -58,7 +58,6 @@
 					</tr>
 				</table>
 				<p class="pCheck25"><input type="checkbox" id="uiViewTurbo">&nbsp;<label for="uiViewTurbo"><? echo $var:Text31 ?></label></p>
-				<p class="pCheck25"><input type="checkbox" id="uiViewWmm">&nbsp;<label for="uiViewWmm"><? echo $var:Text34 ?></label></p>
 				<p class="pCheck25"><input type="checkbox" id="uiView_UserIsolation">&nbsp;<label for="uiView_UserIsolation"><? echo $var:Text30 ?></label></p>
 			</div>
 			<p class="pCheck25"><input type="checkbox" id="uiViewAutoprov">&nbsp;<label for="uiViewAutoprov"><? echo $var:Text32 ?></label></p>
diff -burN usr/www/all/html/de/wlan/common.js usr/www/all/html/de/wlan/common.js
--- usr/www/all/html/de/wlan/common.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/wlan/common.js	2006-12-13 17:03:02.000000000 +0100
@@ -21,15 +21,14 @@
 	}
 	jslSetSelection("uiView_Channel", jslGetValue("uiPost_Channel"));
 	jslCopyValue("uiView_SSID", "uiPost_SSID");
+	jslSetChecked("uiView_ShowSSID", jslGetValue("uiPost_HideSSID") == "0");
 	jslSetChecked("uiViewAutoprov", jslGetValue("uiPostAutoprov") == "1");
 	//-- Expert mode ---
 	uiShowExpertMode(g_expertMode);
-	jslSetChecked("uiView_ShowSSID", jslGetValue("uiPost_HideSSID") == "0");
 	jslSetSelection("uiView_PowerLevel", jslGetValue("uiPost_PowerLevel"));
 	jslSetSelection("uiView_Mode", jslGetValue("uiPost_Mode"));
 	jslSetChecked("uiView_UserIsolation", jslGetValue("uiPost_UserIsolation") == "0");
 	jslSetChecked("uiViewTurbo", jslGetValue("uiPostTurbo") == "1");
-	jslSetChecked("uiViewWmm", jslGetValue("uiPostWmm") == "1");
 }
 function uiOnChangeActivated(idui, idpost) {
 	if (jslGetChecked(idui)) {
@@ -44,15 +43,25 @@
 	uiWLanElementsEnable(uiOnChangeActivated("uiView_WLANActivated", "uiView_WLANActivated"));
 }
 function uiWLanElementsEnable(iActive) {
-	jslSetEnabled("uiView_Channel", iActive == 1);
-	jslSetEnabled("uiView_SSID", iActive == 1);
-	jslSetEnabled("uiView_ShowSSID", iActive == 1);
-	jslSetEnabled("uiView_PowerLevel", iActive == 1);
-	jslSetEnabled("uiView_Mode", iActive == 1);
-	jslSetEnabled("uiView_UserIsolation", iActive == 1);
-	jslSetEnabled("uiViewTurbo", iActive == 1);
-	jslSetEnabled("uiViewWmm", iActive == 1);
-	jslSetEnabled("uiViewAutoprov", iActive == 1);
+	if (iActive == 1) {
+		jslEnable("uiView_Channel");
+		jslEnable("uiView_SSID");
+		jslEnable("uiView_ShowSSID");
+		jslEnable("uiView_PowerLevel");
+		jslEnable("uiView_Mode");
+		jslEnable("uiView_UserIsolation");
+		jslEnable("uiViewTurbo");
+		jslEnable("uiViewAutoprov");
+	} else {
+		jslDisable("uiView_Channel");
+		jslDisable("uiView_SSID");
+		jslDisable("uiView_ShowSSID");
+		jslDisable("uiView_PowerLevel");
+		jslDisable("uiView_Mode");
+		jslDisable("uiView_UserIsolation");
+		jslDisable("uiViewTurbo");
+		jslDisable("uiViewAutoprov");
+	}
 }
 function uiShowExpertMode(iVisible) {
 	jslDisplay("uiViewExpert", iVisible == 1);
@@ -61,14 +70,13 @@
 	jslSetValue("uiPost_WLANActivated", jslGetChecked("uiView_WLANActivated") ? "1":"0");
 	jslCopyValue("uiPost_Channel", "uiView_Channel");
 	jslCopyValue("uiPost_SSID", "uiView_SSID");
+	jslSetValue("uiPost_HideSSID", jslGetChecked("uiView_ShowSSID") ? "0":"1");
 	jslSetValue("uiPostAutoprov", jslGetChecked("uiViewAutoprov") ? "1":"0");
 	if (g_expertMode == 1) {
-		jslSetValue("uiPost_HideSSID", jslGetChecked("uiView_ShowSSID") ? "0":"1");
 		jslCopyValue("uiPost_PowerLevel", "uiView_PowerLevel");
 		jslCopyValue("uiPost_Mode", "uiView_Mode");
 		jslSetValue("uiPost_UserIsolation", jslGetChecked("uiView_UserIsolation") ? "0":"1");
 		jslSetValue("uiPostTurbo", jslGetChecked("uiViewTurbo") ? "1":"0");
-		jslSetValue("uiPostWmm", jslGetChecked("uiViewWmm") ? "1":"0");
 	}
 	jslFormSubmitEx("wlan", "common");
 }
diff -burN usr/www/all/html/de/wlan/encrypt0.html usr/www/all/html/de/wlan/encrypt0.html
--- usr/www/all/html/de/wlan/encrypt0.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/wlan/encrypt0.html	2006-12-13 17:03:02.000000000 +0100
@@ -6,7 +6,7 @@
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<p style="padding-bottom: 5px;"><? echo $var:Text2 ?></p>
 		<table style="margin:auto">
-			<tr><td><input type="radio" name="Level" id="uiView_SecLevel0" checked>&nbsp;<label for="uiView_SecLevel0"><b><? echo $var:Text3 ?></b></label></td></tr>
+			<tr><td><input type="radio" onclick="uiDoSecLevel(0)" name="Level" id="uiView_SecLevel0" checked>&nbsp;<label for="uiView_SecLevel0"><b><? echo $var:Text3 ?></b></label></td></tr>
 			<tr><td><input type="radio" onclick="uiDoSecLevel(1)" name="Level" id="uiView_SecLevel1">&nbsp;<label for="uiView_SecLevel1"><b><? echo $var:Text4 ?></b></label></td></tr>
 			<tr><td><input type="radio" onclick="uiDoSecLevel(2)" name="Level" id="uiView_SecLevel2">&nbsp;<label for="uiView_SecLevel2"><b><? echo $var:Text5 ?></b></label></td></tr>
 		</table>
diff -burN usr/www/all/html/de/wlan/encrypt0.js usr/www/all/html/de/wlan/encrypt0.js
--- usr/www/all/html/de/wlan/encrypt0.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/wlan/encrypt0.js	2006-12-13 17:03:02.000000000 +0100
@@ -9,22 +9,26 @@
 <? include ../html/$var:lang/js/jsl.js ?>
 var g_expertMode = <? query box:settings/expertmode/activated ?>;
 function uiDoOnLoad() {
+	jslSetValue("uiPost_Encryption", 0);
 }
 function uiDoSecLevel(iSecLevel) {
+	if (iSecLevel == "2") {
+		var wpaMode = "<? query wlan:settings/encryption ?>";
+		jslGoTo("wlan", wpaMode == "3" ? "encrypt3":"encrypt2");
+	} else {
 	jslGoTo("wlan", "encrypt" + iSecLevel);
+	}
 }
 function uiDoSave() {
-	jslSetValue("uiPost_Encryption", 0);
-	jslFormSubmitEx("wlan", "encrypt0");
+	uiDoSaveGo("encrypt0");
+}
+function uiDoSaveGo(page) {
+	jslSetValue("uiPostMenu" ,"wlan");
+	jslSetValue("uiPostPageName" ,page);
+	jslFormSubmit("uiPostForm");
 }
 function uiDoCancel() {
-	switch ("<? query wlan:settings/encryption ?>") {
-		case "1": jslGoTo("wlan", "encrypt1"); break;
-		case "2": jslGoTo("wlan", "encrypt2"); break;
-		case "3": jslGoTo("wlan", "encrypt2"); break;
-		case "4": jslGoTo("wlan", "encrypt2"); break;
-		default: jslGoTo("wlan", "encrypt0"); break;
-	}
+	jslGoTo("wlan", "encrypt<? query wlan:settings/encryption ?>");
 }
 function uiDoHelp() {
 	jslPopHelp("hilfe_wlan_sicherheit");
diff -burN usr/www/all/html/de/wlan/encrypt1.html usr/www/all/html/de/wlan/encrypt1.html
--- usr/www/all/html/de/wlan/encrypt1.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/wlan/encrypt1.html	2006-12-13 17:03:02.000000000 +0100
@@ -7,7 +7,7 @@
 		<p style="padding-bottom: 5px;"><? echo $var:Text2 ?></p>
 		<table style="margin:auto">
 			<tr><td><input type="radio" onclick="uiDoSecLevel(0)" name="Level" id="uiView_SecLevel0">&nbsp;<label for="uiView_SecLevel0"><b><? echo $var:Text3 ?></b></label></td></tr>
-			<tr><td><input type="radio" name="Level" id="uiView_SecLevel1" checked>&nbsp;<label for="uiView_SecLevel1"><b><? echo $var:Text4 ?></b></label></td></tr>
+			<tr><td><input type="radio" onclick="uiDoSecLevel(1)" name="Level" id="uiView_SecLevel1" checked>&nbsp;<label for="uiView_SecLevel1"><b><? echo $var:Text4 ?></b></label></td></tr>
 			<tr><td><input type="radio" onclick="uiDoSecLevel(2)" name="Level" id="uiView_SecLevel2">&nbsp;<label for="uiView_SecLevel2"><b><? echo $var:Text5 ?></b></label></td></tr>
 		</table>
 	</div></div></div></div></div></div>
diff -burN usr/www/all/html/de/wlan/encrypt1.js usr/www/all/html/de/wlan/encrypt1.js
--- usr/www/all/html/de/wlan/encrypt1.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/wlan/encrypt1.js	2006-12-13 17:03:02.000000000 +0100
@@ -28,6 +28,7 @@
 var g_hexlen = 26;		// Länge des verschlüsselten Keys(26/10 Zeichen)
 var g_keylen = 13;		// Länge des Wortes (13/5 Zeichen)
 function uiDoOnLoad() {
+	jslSetValue("uiPost_Encryption", 1);
 	if (g_expertMode == 1) {
 		if (jslGetValue("uiPostWDSAktiv") == "1" && jslGetValue("uiPostWDSLevel") == "1" ) jslDisplay("WdsWep", true);
 		jslDisplay("WEPLen", true);
@@ -55,7 +56,12 @@
 	}
 }
 function uiDoSecLevel(iSecLevel) {
+	if (iSecLevel == "2") {
+		var wpaMode = "<? query wlan:settings/encryption ?>";
+		jslGoTo("wlan", wpaMode == "3" ? "encrypt3":"encrypt2");
+	} else {
 	jslGoTo("wlan", "encrypt" + iSecLevel);
+	}
 }
 function uiDoSetWEPKeyId(value) {
 	jslSetValue("uiPost_WEPKey_Id", value);
@@ -142,7 +148,9 @@
 	ppWindow.focus();
 }
 function uiDoSave() {
-	jslSetValue("uiPost_Encryption", 1);
+	uiDoSaveGo("encrypt1");
+}
+function uiDoSaveGo(page) {
 	if (g_expertMode == 1) {
 		jslCopyValue("uiPost_WEPKey_Value1", "uiView_WEPKey_Value1");
 		jslCopyValue("uiPost_WEPKey_Value2", "uiView_WEPKey_Value2");
@@ -170,16 +178,10 @@
 	}
 	if (uiDoValidateWEPKeys() == false) return;
 	doPopWindow();
-	jslFormSubmitEx("wlan", "encrypt1");
+	jslFormSubmitEx("wlan", page);
 }
 function uiDoCancel() {
-	switch ("<? query wlan:settings/encryption ?>") {
-		case "1": jslGoTo("wlan", "encrypt1"); break;
-		case "2": jslGoTo("wlan", "encrypt2"); break;
-		case "3": jslGoTo("wlan", "encrypt2"); break;
-		case "4": jslGoTo("wlan", "encrypt2"); break;
-		default: jslGoTo("wlan", "encrypt0"); break;
-	}
+	jslGoTo("wlan", "encrypt<? query wlan:settings/encryption ?>");
 }
 function uiDoHelp() {
 	jslPopHelp("hilfe_wlan_wep");
diff -burN usr/www/all/html/de/wlan/encrypt2.frm usr/www/all/html/de/wlan/encrypt2.frm
--- usr/www/all/html/de/wlan/encrypt2.frm	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/wlan/encrypt2.frm	2006-12-13 17:03:02.000000000 +0100
@@ -1,6 +1,6 @@
-<input type="hidden" name="var:cryptlevel" value="<? echo $var:cryptlevel ?>" id="uiPostLevel">
 <!-- Refresh variables of encrypt2 begin-->
 <input type="hidden" name="wlan:settings/encryption" value="<? query wlan:settings/encryption ?>" id="uiPost_Encryption"> 
 <input type="hidden" name="wlan:settings/pskvalue" value="<? query wlan:settings/pskvalue ?>" id="uiPost_WPA_Value">
 <input type="hidden" name="wlan:settings/psktype" value="<? query wlan:settings/psktype ?>" id="uiPost_WPA_Type">
+<input type="hidden" name="wlan:settings/interval" value="<? query wlan:settings/interval ?>" id="uiPost_WPA_Interval">
 <!-- Refresh encrypt2 End -->
diff -burN usr/www/all/html/de/wlan/encrypt2.html usr/www/all/html/de/wlan/encrypt2.html
--- usr/www/all/html/de/wlan/encrypt2.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/wlan/encrypt2.html	2006-12-13 17:03:02.000000000 +0100
@@ -20,10 +20,9 @@
 			<tr>
 				<td class="c1"><label for="uiViewWPAType"><b><? echo $var:Text11 ?></b></label></td>
 				<td class="c1">
-					<select class="Eingabefeld" id="uiViewWPAType">
+					<select class="Eingabefeld" id="uiViewWPAType" onchange="uiDoSecLevel(value)">
 						<option value="2"><? echo $var:Text12 ?></option>
 						<option value="3"><? echo $var:Text13 ?></option>
-						<option value="4"><? echo $var:Text14 ?></option>
 					</select>
 				</td>
 			</tr>
@@ -31,6 +30,10 @@
 				<td class="c1"><label for="uiView_WPA_Value"><b><? echo $var:Text8 ?></b></label></td>
 				<td class="c1"><input type="text" size="40" maxlength="63" class="Eingabefeld" id="uiView_WPA_Value"></td>
 			</tr>
+			<tr id="uiView_Table_Body_User_Expert" style="display:none">
+				<td class="c1"><label for="uiView_WPA_Interval"><b><? echo $var:Text9 ?></b></label></td>
+				<td class="c1"><input type="text" size="15" maxlength="12" class="Eingabefeld" id="uiView_WPA_Interval"><? echo $var:Text10 ?></td>
+			</tr>
 		</table>
 	</div></div></div></div></div></div>
 	<? include ../html/$var:lang/home/rbb_applycancel.html ?>
diff -burN usr/www/all/html/de/wlan/encrypt2.inc usr/www/all/html/de/wlan/encrypt2.inc
--- usr/www/all/html/de/wlan/encrypt2.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/wlan/encrypt2.inc	2006-12-13 17:03:02.000000000 +0100
@@ -10,6 +10,5 @@
 <? setvariable var:Text9 'Group Key Intervall' ?>
 <? setvariable var:Text10 ' Sekunden' ?>
 <? setvariable var:Text11 'WPA Modus' ?>
-<? setvariable var:Text12 'WPA (TKIP)' ?>
-<? setvariable var:Text13 'WPA2 (CCMP)' ?>
-<? setvariable var:Text14 'WPA + WPA2' ?>
+<? setvariable var:Text12 'TKIP (WPA)' ?>
+<? setvariable var:Text13 'AES (WPA2)' ?>
diff -burN usr/www/all/html/de/wlan/encrypt2.js usr/www/all/html/de/wlan/encrypt2.js
--- usr/www/all/html/de/wlan/encrypt2.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/wlan/encrypt2.js	2006-12-13 17:03:02.000000000 +0100
@@ -13,8 +13,10 @@
 var g_mldIllegalChar = "Der WPA-Netzwerkschlüssel enthält unzulässige Zeichen. Die Online-Hilfe enthält eine Liste aller für den WPA-Netzwerkschlüssel gültigen Zeichen.";
 var g_expertMode = <? query box:settings/expertmode/activated ?>;
 function uiDoOnLoad() {
+	jslSetValue("uiPost_Encryption", 2);
 	jslCopyValue("uiView_WPA_Value", "uiPost_WPA_Value");
-	jslSetSelection("uiViewWPAType", jslGetValue("uiPost_Encryption"));
+	jslCopyValue("uiView_WPA_Interval", "uiPost_WPA_Interval");
+	jslSetSelection("uiViewWPAType", "2");
 	uiShowExpertMode(g_expertMode);
 }
 function uiShowExpertMode(iVisible) {
@@ -36,26 +38,33 @@
 	}
 	return true;
 }
+function uiDoValidateWPAInterval(id) {
+	if (valIsZahlVorhanden(jslGetValue(id)) == false) {alert(g_mldInterval); return false;}
+	return true;
+}
 function uiDoValidateWPAKeys() {
 	if (uiDoValidateWPAKey("uiView_WPA_Value") == false) return false;
+	if (g_expertMode == 1) {
+		if (uiDoValidateWPAInterval("uiView_WPA_Interval") == false) return false;
+	}
 	return true;
 }
 function uiDoSave() {
+	uiDoSaveGo("encrypt2");
+}
+function uiDoSaveGo(page)
+{
 	if (uiDoValidateWPAKeys() == true) {
-		jslCopyValue("uiPost_Encryption", "uiViewWPAType");
 		jslCopyValue("uiPost_WPA_Value", "uiView_WPA_Value");
+		jslCopyValue("uiPost_WPA_Interval", "uiView_WPA_Interval");
 		doPopWindow();
-		jslFormSubmitEx("wlan", "encrypt2");
+		jslSetValue("uiPostMenu", "wlan");
+		jslSetValue("uiPostPageName", page);
+		jslFormSubmit("uiPostForm");
 	}
 }
 function uiDoCancel() {
-	switch ("<? query wlan:settings/encryption ?>") {
-		case "1": jslGoTo("wlan", "encrypt1"); break;
-		case "2": jslGoTo("wlan", "encrypt2"); break;
-		case "3": jslGoTo("wlan", "encrypt2"); break;
-		case "4": jslGoTo("wlan", "encrypt2"); break;
-		default: jslGoTo("wlan", "encrypt0"); break;
-	}
+	jslGoTo("wlan", "encrypt<? query wlan:settings/encryption ?>");
 }
 function uiDoHelp() {
 	jslPopHelp("hilfe_wlan_wpa");
@@ -65,7 +74,7 @@
 	var hexkey2 = "";
 	var hexkey3 = "";
 	var hexkey4 = "";
-	var url = "../cgi-bin/webcm?getpage=../html/<? echo $var:lang ?>/wlan/ppEncryption.html&var:lang=<? echo $var:lang ?>&var:encryption="+jslGetValue('uiPost_Encryption')+"&var:wlankey="+PasswortToXCode(jslGetValue('uiPost_WPA_Value'));
+	var url = "../cgi-bin/webcm?getpage=../html/<? echo $var:lang ?>/wlan/ppEncryption.html&var:lang=<? echo $var:lang ?>&var:encryption=2&var:wlankey="+PasswortToXCode(jslGetValue('uiPost_WPA_Value'));
 	url += "&var:hexkey1="+hexkey1+"&var:hexkey2="+hexkey2+"&var:hexkey3="+hexkey3+"&var:hexkey4="+hexkey4;
 	var ppWindow = window.open(url, "Zweitfenster", "width=520,height=375,statusbar,resizable=yes");
 	ppWindow.focus();
diff -burN usr/www/all/html/de/wlan/encrypt3.inc usr/www/all/html/de/wlan/encrypt3.inc
--- usr/www/all/html/de/wlan/encrypt3.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/wlan/encrypt3.inc	2006-12-13 17:03:02.000000000 +0100
@@ -10,6 +10,5 @@
 <? setvariable var:Text9 'Group Key Intervall' ?>
 <? setvariable var:Text10 ' Sekunden' ?>
 <? setvariable var:Text11 'WPA Modus' ?>
-<? setvariable var:Text12 'WPA (TKIP)' ?>
-<? setvariable var:Text13 'WPA2 (CCMP)' ?>
-<? setvariable var:Text14 'WPA + WPA2' ?>
+<? setvariable var:Text12 'TKIP (WPA)' ?>
+<? setvariable var:Text13 'AES (WPA2)' ?>
diff -burN usr/www/all/html/de/wlan/mac.frm usr/www/all/html/de/wlan/mac.frm
--- usr/www/all/html/de/wlan/mac.frm	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/wlan/mac.frm	2006-12-13 17:03:02.000000000 +0100
@@ -1 +1,2 @@
-<? include ../html/$var:lang/system/mac.frm ?>
+<input type="hidden" name="wlan:settings/wmac_add" value="<? query wlan:settings/wmac_add ?>" id="uiPostMac">
+<input type="hidden" name="wlan:settings/is_macfilter_active" value="<? query wlan:settings/is_macfilter_active ?>" id="uiPostMacFilter">
diff -burN usr/www/all/html/de/wlan/mac.html usr/www/all/html/de/wlan/mac.html
--- usr/www/all/html/de/wlan/mac.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/wlan/mac.html	2006-12-13 17:03:02.000000000 +0100
@@ -1 +1,16 @@
-<? include ../html/$var:lang/system/mac.html ?>
+<? include ../html/$var:lang/wlan/mac.inc ?>
+<div id="content">
+ 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
+		MAC-Adresse hinzufügen
+	</div></div></div></div></div></div>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<p class="mb5">MAC-Adresse des WLAN-Netzwerkgerätes</p>
+		<p class="ac"><input type="text" id="uiViewMac0" class="Eingabefeld" size="3" maxlength="2"> :
+		<input type="text" id="uiViewMac1" class="Eingabefeld" size="3" maxlength="2"> :
+		<input type="text" id="uiViewMac2" class="Eingabefeld" size="3" maxlength="2"> :
+		<input type="text" id="uiViewMac3" class="Eingabefeld" size="3" maxlength="2"> :
+		<input type="text" id="uiViewMac4" class="Eingabefeld" size="3" maxlength="2"> :
+		<input type="text" id="uiViewMac5" class="Eingabefeld" size="3" maxlength="2"></p>
+	</div></div></div></div></div></div>
+	<? include ../html/$var:lang/home/rbb_applycancel.html ?>
+</div>
diff -burN usr/www/all/html/de/wlan/mac.inc usr/www/all/html/de/wlan/mac.inc
--- usr/www/all/html/de/wlan/mac.inc	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/wlan/mac.inc	2006-12-13 17:03:02.000000000 +0100
@@ -0,0 +1 @@
+<? include ../html/$var:lang/global.inc ?>
diff -burN usr/www/all/html/de/wlan/mac.js usr/www/all/html/de/wlan/mac.js
--- usr/www/all/html/de/wlan/mac.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/wlan/mac.js	2006-12-13 17:03:02.000000000 +0100
@@ -1 +1,42 @@
-<? include ../html/$var:lang/system/mac.js ?>
+<!--		../wlan/mac.js		-->
+<style type="text/css">
+<!--
+#content {width: 520px; margin: auto;}
+.ac {text-align:center;}
+-->
+</style>
+<script type="text/javascript">
+<? include ../html/$var:lang/js/val.js ?>
+<? include ../html/$var:lang/js/jsl.js ?>
+// globals
+var g_mldMacPart	= "Alle Felder der Mac-Adresse müssen genau zwei Zeichen (Ziffern oder die Buchstaben A-F) enthalten.";
+var g_mldWlan 	= "Die neuen Einstellungen für die WLAN-Zugangsbeschränkung werden übernommen. Alle aktiven WLAN-Verbindungen werden nun kurz unterbrochen.";
+function uiDoOnLoad() {
+	var mac = jslGetValue("uiPostMac");
+	if (mac.length==17) {
+		for (i=0; i<6; i++) jslSetValue("uiViewMac"+i, mac.substr(i*3,2));
+	}
+}
+function uiDoSave() {
+	for (i=0; i<6; i++) {
+		var part = jslGetValue("uiViewMac"+i);
+		if (!part.match(/^[\dA-F]{2}$/i)) {alert(g_mldMacPart); document.getElementById("uiViewMac"+i).focus();	return false;}
+	}
+	var mac = "";
+	for (i=0; i<6; i++) {
+		mac += jslGetValue("uiViewMac"+i)+((i<5) ? ":" : "");
+	}
+	if (mac == "00:00:00:00:00:00") {alert("Mac-Adresse 00:00:00:00:00:00 ist ungültig."); return false;}
+	if (mac.toUpperCase() == "FF:FF:FF:FF:FF:FF") {alert("Mac-Adresse FF:FF:FF:FF:FF:FF ist ungültig."); return false;}
+	jslSetValue("uiPostMac", mac);
+	alert(g_mldWlan);	
+	jslSetValue("uiPostMacFilter", "1");
+	jslFormSubmitEx("wlan", "monitor", "mac");
+}
+function uiDoCancel() {
+	jslGoTo("wlan", "monitor");
+}
+function uiDoHelp() {
+	jslPopHelp("hilfe_wlan_monitor");
+}
+</script>
diff -burN usr/www/all/html/de/wlan/monitor.html usr/www/all/html/de/wlan/monitor.html
--- usr/www/all/html/de/wlan/monitor.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/wlan/monitor.html	2006-12-13 17:03:02.000000000 +0100
@@ -10,18 +10,18 @@
 				<th class="c2"><? echo $var:Text2 ?></th>
 				<th class="c3"><p><? echo $var:Text3 ?></p><p><? echo $var:Text4 ?></p></th>
 				<th class="c4"><p><? echo $var:Text6 ?></p><p><? echo $var:Text19 ?></p></th>
-				<th class="c5"><p><? echo $var:Text7 ?></p><p><? echo $var:Text22 ?></p></th>
+				<th class="c5"><? echo $var:Text7 ?></th>
 				<th class="c6"></th>
 			</tr>
-<? multiquery wlan:settings/wlanlist/list(hostname,ip,mac,state,speed,is_turbo,quality,cipher,powersave,wmm_active) `
+<? multiquery wlan:settings/wlanlist/list(hostname,ip,mac,state,speed,is_turbo,quality) `
 			<tr>
 				<!-- "$0" / "$1" -->
 				<td class="c1"><script type="text/javascript">document.write(uiAktivLed("$5", "$2"));</script></td>
 				<td class="c2"><span title="$2">$2</span></td>
 				<td class="c3"><p>$3</p><p><script type="text/javascript">document.write(uiMac("$4"));</script></p></td>
 				<td class="c4"><p><script type="text/javascript">document.write(uiSpeed("$6", "$7"));</script></p><p><script type="text/javascript">document.write(uiQuality("$8"));</script></p></td>
-				<td class="c5"><p><script type="text/javascript">document.write(uiEncryptState("$5","$9","$b"));</script></p><script type="text/javascript">document.write(uiPowerSave("$5","$a"));</script></p></td>
-				<td class="c6"><button type="button" id="uiViewDelete$1" onClick="uiDoDelete('$1')" value="$var:Text11" title="<? echo $var:txtIconBtnDelete ?>" style="width:30px; display:none"><img src="../html/$var:lang/images/loeschen.gif" align=bottom width=16 height=16 hspace=4></button></td>
+				<td class="c5"><script type="text/javascript">document.write(uiState("$5"));</script></td>
+				<td class="c6"><button type="button" id="uiViewDelete$1" onClick="uiDoDelete('$1')" value="$var:Text11" title="$var:Text11" style="width:30px; display:none"><img src="../html/$var:lang/images/loeschen.gif" align=bottom width=16 height=16 hspace=4></button></td>
 			</tr>
 ` ?>
 		</table>
@@ -35,6 +35,10 @@
 		<p class="ml25"><input type="radio" name="macfilter" id="uiViewOpen" onclick="OnChangeMacFilter(0)">&nbsp;<label for="uiViewOpen"><? echo $var:Text13 ?></label></p>
 		<p class="ml25"><input type="radio" name="macfilter" id="uiViewClose" onclick="OnChangeMacFilter(1)">&nbsp;<label for="uiViewClose"><? echo $var:Text14 ?></label></p>
 	</div></div></div></div></div></div>
+	<div class="backdialog" id="uiDetails" style="display:none"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<p style="float: left;"><? echo $var:Text15 ?></p>
+		<p style="text-align:right"><input type="button" onclick="uiDoDetails()" value="<? echo $var:Text16 ?>" class="Pushbutton"></p>
+	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
 		<input type="button" onclick="uiDoSave()" value="<? echo $var:txtApply ?>" class="Pushbutton">
 		<input type="button" onclick="uiDoCancel()" value="<? echo $var:txtCancel ?>" class="Pushbutton">
diff -burN usr/www/all/html/de/wlan/monitor.inc usr/www/all/html/de/wlan/monitor.inc
--- usr/www/all/html/de/wlan/monitor.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/wlan/monitor.inc	2006-12-13 17:03:02.000000000 +0100
@@ -5,7 +5,7 @@
 <? setvariable var:Text4 'MAC-Adresse' ?>
 <? setvariable var:Text5 'Aktiv' ?>
 <? setvariable var:Text6 'Geschwindigkeit' ?>
-<? setvariable var:Text7 'Verbindungs-' ?>
+<? setvariable var:Text7 'Zustand' ?>
 <? setvariable var:Text8 'WXP_Kandidate_mit_langer_Bezeichnung' ?>
 <? setvariable var:Text9 '192.168.178.24' ?>
 <? setvariable var:Text10 '00:0c:6e:40:92:b2' ?>
@@ -20,8 +20,3 @@
 <? setvariable var:Text19 'Qualität' ?>
 <? setvariable var:Text20 'Eigene WLAN-MAC-Adresse dieser FRITZ!Box: ' ?>
 <? setvariable var:Text21 'Neues WLAN-Netzwerkgerät' ?>
-<? setvariable var:Text22 'eigenschaften' ?>
-<? setvariable var:Text23 'AVM WLAN-Eco-Modus' ?>
-<? setvariable var:Text24 'Wenn WLAN nicht genutzt wird, verringert der AVM WLAN-Eco-Modus die Energieaufnahme von FRITZ!Box.' ?>
-<? setvariable var:Text25 'Status: ' ?>
-<? setvariable var:Text26 'aktueller WLAN - Energieverbrauch' ?>
diff -burN usr/www/all/html/de/wlan/monitor.js usr/www/all/html/de/wlan/monitor.js
--- usr/www/all/html/de/wlan/monitor.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/wlan/monitor.js	2006-12-13 17:03:02.000000000 +0100
@@ -1,27 +1,16 @@
 <!--		../wlan/monitor.js		-->
 <style type="text/css">
 <!--
-#tBalken {margin: 0px;}
-#tBalken td {padding: 1px;}
-.bar {
-	width: 406px;
-	background-position: center;
-	background-image: url(../html/<? echo $var:lang ?>/images/progress_back_2.gif);
-	background-repeat: no-repeat;
-	vertical-align: middle;
-}
-#tBalken .s1 {text-align: right; width:35px;}
-#tBalken .s2 {text-align: left; width:40px;}
 #content {width: 580px; margin: auto;}
 #tWlan {width: 100%; table-layout: fixed; font-size: 12px; }
 #tWlan td, #tWlan th {padding: 2px 2px; vertical-align:top; overflow: hidden}
 #tWlan p {font-size: 12px;}
-#tWlan .c1 {text-align: center; width:28px;}
+#tWlan .c1 {text-align: center; width:30px;}
 #tWlan .c2 {}
-#tWlan .c3 {width:116px;}
-#tWlan .c4 {text-align: right; width:105px;}
-#tWlan .c5 {text-align: right; width:130px;}
-#tWlan .c6 {text-align: right; width:32px;}
+#tWlan .c3 {width:110px;}
+#tWlan .c4 {text-align: right; width:100px;}
+#tWlan .c5 {text-align: right; width:70px;}
+#tWlan .c6 {text-align: right; width:30px;}
 .ml25 {margin-left: 25px;}
 .mt10 {margin-top: 10px;}
 .ar {text-align: right;}
@@ -42,16 +31,6 @@
 var g_txtState4 = "Einbuchen";
 var g_txtState5 = "Verbunden";
 var g_txtState6 = "Abmelden";
-var g_txt_U_APSD_State_0 = " ";
-var g_txt_U_APSD_State_1 = "WMM Power Save";
-var g_txt_Wlan_Eco_State_0 = "WLAN ist nicht aktiviert";
-var g_txt_Wlan_Eco_State_1 = "AVM WLAN-Eco-Modus ist aktiv, keine WLAN-Station angemeldet";
-var g_txt_Wlan_Eco_State_2 = "WLAN ist aktiv, 1 WLAN-Station ist angemeldet";
-var g_txt_Wlan_Eco_State_2x = "WLAN ist aktiv, %1 WLAN-Stationen sind angemeldet";
-var g_txt_Wlan_Cipher_State_0 = "unverschlüsselt";
-var g_txt_Wlan_Cipher_State_1 = "WPA";
-var g_txt_Wlan_Cipher_State_2 = "WEP";
-var g_txt_Wlan_Cipher_State_3 = "WPA2";
 function uiDoOnLoad() {
 	var n = jslGetValue("uiPostMacFilter");
 	jslSetChecked("uiViewOpen", n != "1");
@@ -59,25 +38,23 @@
 	jslSetEnabled("uiMac", n=="1");
 	jslZebrastreifen("tWlan");
 	if (jslGetChecked("uiViewClose")) {
-<? multiquery wlan:settings/wlanlist/list(is_repeater) `
-		if ( "$2" != "1") {
+<? multiquery wlan:settings/wlanlist/list `
 			jslDisplay("uiViewDelete$1", true);
-		}
 ` ?>
 	}
 	if (g_expertMode == "1") {
 		jslDisplay("uiNewMac", true);
 		jslDisplay("uiMyMac", true);
 		jslDisplay("uiFilter", true);
+		jslDisplay("uiDetails", true);
 	}
 }
 function OnChangeMacFilter (n) {
 	jslSetChecked("uiViewOpen", n== 0);
 	jslSetChecked("uiViewClose", n== 1);
 	jslSetEnabled("uiMac", n==1);
-	if (n == 1 && <? query wlan:settings/wlanlist/count ?> <= 0) {
+	if (n == 1 && <? multiquerycount wlan:settings/wlanlist/list ?> <= 0) {
 		alert(g_mldClose);
-		jslSetValue("uiPostPageMaster", "monitor");
 		jslFormSubmitEx("wlan", "mac");
 	}
 }
@@ -99,35 +76,6 @@
 	}
 	return state;
 }
-function uiEncryptState (state, encrpState, isQoS){
-	if ( state != "5") return "";
-	var l_txtQoS = "";
-	if ( isQoS == "1") l_txtQoS = ", WMM";
-	switch (encrpState) {
-		case "0": return g_txt_Wlan_Cipher_State_0 + l_txtQoS;
-		case "1": return g_txt_Wlan_Cipher_State_1 + l_txtQoS;
-		case "2": return g_txt_Wlan_Cipher_State_2 + l_txtQoS;
-		case "3": return g_txt_Wlan_Cipher_State_3 + l_txtQoS;
-	}
-	return encrpState + l_txtQoS;
-}
-function uiPowerSave (state, powerState){
-	if ( state != "5") return "";
-	switch (powerState) {
-		case "0": return g_txt_U_APSD_State_0;
-		case "1": return g_txt_U_APSD_State_1;
-	}
-	return powerState;
-}
-function uiEcoState (state) {
-	var n = "<? query wlan:settings/active_stations ?>";
-	switch (state) {
-		case "0": return g_txt_Wlan_Eco_State_0;
-		case "1": return g_txt_Wlan_Eco_State_1;
-		case "2": return n=="1" ? g_txt_Wlan_Eco_State_2 : jslPrintf1(g_txt_Wlan_Eco_State_2x, n);
-	}
-	return state;
-}
 function uiAktivLed (state, name) {
 	if (g_WdsAktiv == "1" && g_WdsEncryption != "2" && g_WdsEncryption != "3" && (name.indexOf("Repeater")==0 || name.indexOf("Basisstation")==0)) return ""
 	if (state == "5") return "<img src=\"../html/<? echo $var:lang ?>/images/led_green.gif\">";
@@ -152,8 +100,11 @@
 function uiDoHelp() {
 	jslPopHelp("hilfe_wlan_monitor");
 }
+function uiDoDetails() {
+	jslGoTo("wlan","details");
+}
 function uiDoDelete (n) {
-	if (<? query wlan:settings/wlanlist/count ?> <= 1) {
+	if (<? multiquerycount wlan:settings/wlanlist/list ?> <= 1) {
 		alert(g_mldLastWlan); return;
 	}
 	alert(g_mldWlan);
@@ -170,7 +121,6 @@
 	jslFormSubmit("uiPostForm");
 }
 function uiDoMac () {
-	jslSetValue("uiPostPageMaster", "monitor");
-	jslFormSubmitEx(jslGetValue("uiPostMenu"), "mac");
+	jslGoTo("wlan", "mac");
 }
 </script>
diff -burN usr/www/all/html/de/wlan/ppEncryption.html usr/www/all/html/de/wlan/ppEncryption.html
--- usr/www/all/html/de/wlan/ppEncryption.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/wlan/ppEncryption.html	2006-12-13 17:03:02.000000000 +0100
@@ -34,7 +34,7 @@
 			jslSetSpanText("Key", FormatKey(ShiftBlanks(XCodeToPasswort("<? echo $var:wlankey ?>"))));
 			document.getElementById("HexkeyNormal").style.display="";
 		}
-	} else if ((encryption == "2")||(encryption == "3")||(encryption == "4")){
+	} else if ((encryption == "2")||(encryption == "3")){
 		document.getElementById("Asciikey").style.display="";
 		jslSetSpanText("Key", FormatKey(ShiftBlanks(XCodeToPasswort("<? echo $var:wlankey ?>"))));
 	}
@@ -82,7 +82,6 @@
 ` ?>
 <? if eq $var:encryption 2 `<? setvariable var:crypt 'WPA' ?>` ?>
 <? if eq $var:encryption 3 `<? setvariable var:crypt 'WPA2' ?>` ?>
-<? if eq $var:encryption 4 `<? setvariable var:crypt 'WPA + WPA2' ?>` ?>
 				<tr>
 					<td class="c1"><? echo $var:Text5 ?></td>
 					<td class="c2"><? echo $var:crypt ?></td>
@@ -101,7 +100,6 @@
 <? if eq `$var:shared` `1` `<? setvariable var:authentication '$var:Text27' ?>` ?>
 <? if eq `$var:encryption` `2` `<? setvariable var:authentication '$var:Text12' ?>` ?>
 <? if eq `$var:encryption` `3` `<? setvariable var:authentication '$var:Text26' ?>` ?>
-<? if eq `$var:encryption` `4` `<? setvariable var:authentication '$var:Text12, $var:Text26' ?>` ?>
 					<td class="c2"><? echo $var:authentication ?></td>
 				</tr>
 <? if eq $var:encryption 2 `
diff -burN usr/www/all/html/de/wlan/ppWds.html usr/www/all/html/de/wlan/ppWds.html
--- usr/www/all/html/de/wlan/ppWds.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/wlan/ppWds.html	2006-12-13 17:03:02.000000000 +0100
@@ -13,8 +13,8 @@
 <style type="text/css">
 <!-- 
 #t1, #t2 {margin:auto;}
-.c1 {width: 190px; text-align: left; padding: 2px;}
-.c2 {width: 270px; padding: 2px;}
+.c1 {width: 180px; text-align: left; padding: 2px;}
+.c2 {width: 280px; padding: 2px;}
 .mb20 	{ margin-bottom: 20px; }
 @media print {input {display:none;}}
  -->
@@ -107,14 +107,14 @@
 			 </table>
 		</div>
 		<div class="mb20" id="uiRepeater" style="display:none">
-			<p class="mb10"><b><? echo $var:Text29 ?></b><? echo $var:Text30 ?></p>
+			<p class="mb10"><b>Diese</b> FRITZ!Box ist ab sofort unter der folgenden IP-Adresse erreichbar.</p>
 			<table id="t2" class="tborder">
 				<tr>
-					<td class="c1"><? echo $var:Text31 ?></td>
+					<td class="c1">IP-Adresse:</td>
 					<td class="c2"><? echo $var:wdsipadr ?></td>
 				</tr>
 				<tr>
-					<td class="c1"><? echo $var:Text32 ?></td>
+					<td class="c1">Subnetzmaske:</td>
 					<td class="c2"><? echo $var:wdsnetmask ?></td>
 				</tr>
 			 </table>
diff -burN usr/www/all/html/de/wlan/ppWds.inc usr/www/all/html/de/wlan/ppWds.inc
--- usr/www/all/html/de/wlan/ppWds.inc	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/wlan/ppWds.inc	2006-12-13 17:03:02.000000000 +0100
@@ -30,13 +30,5 @@
 <? setvariable var:Text24 'Fenster schließen' ?>
 <? setvariable var:Text25 'AES' ?>
 <? setvariable var:Text26 'WPA2-PSK' ?>
-<? if eq $var:wdsmode 0 `
-<? setvariable var:Text27 'MAC-Adresse der Basisstation:' ?>
-` `
-<? setvariable var:Text27 'MAC-Adresse des Repeaters:' ?>
-` ?>
+<? setvariable var:Text27 'Mac-Adresse des Repeaters:' ?>
 <? setvariable var:Text28 'Kanal:' ?>
-<? setvariable var:Text29 'Diese' ?>
-<? setvariable var:Text30 ' FRITZ!Box ist ab sofort unter der folgenden IP-Adresse erreichbar.' ?>
-<? setvariable var:Text31 'IP-Adresse:' ?>
-<? setvariable var:Text32 'Subnetzmaske:' ?>
diff -burN usr/www/all/html/de/wlan/wds.frm usr/www/all/html/de/wlan/wds.frm
--- usr/www/all/html/de/wlan/wds.frm	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/wlan/wds.frm	2006-12-13 17:03:02.000000000 +0100
@@ -11,7 +11,6 @@
 <input type="hidden" name="wlan:settings/key_value0" value="<? query wlan:settings/key_value0 ?>" id="uiPostWepValue1" disabled>
 <input type="hidden" name="wlan:settings/key_len0" value="<? query wlan:settings/key_len0 ?>" id="uiPostWepLen1" disabled>
 <input type="hidden" name="wlan:settings/night_time_control_enabled" value="<? query wlan:settings/night_time_control_enabled ?>" id="uiPostNachtWlan" disabled>
-<input type="hidden" name="wlan:settings/night_time_control_no_forced_off" value="<? query wlan:settings/night_time_control_no_forced_off" ?>" id="uiPostWlanForcedOff" disabled>
 <input type="hidden" name="wlan:settings/encryption" value="<? query wlan:settings/encryption ?>" id="uiPost_Encryption" disabled>
 <input type="hidden" name="connection0:settings/type" value="<? query connection0:settings/type ?>" id="uiPostType" disabled>
 <input type="hidden" name="var:activtype" value="<? echo $var:activtype?>" id="uiPostActivType" disabled>
diff -burN usr/www/all/html/de/wlan/wds.html usr/www/all/html/de/wlan/wds.html
--- usr/www/all/html/de/wlan/wds.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/wlan/wds.html	2006-12-13 17:03:02.000000000 +0100
@@ -6,8 +6,8 @@
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 	 	<div id="uiRepeater" style="display:none">
 		 	<ul class="tabs">
-		 		<li class="tabs_on"><a href="javascript:Tabs(0)"><? echo $var:Text3 ?></a></li>
-		 		<li><a href="javascript:Tabs(1)"><? echo $var:Text45 ?></a></li>
+		 		<li class="tabs_on"><a href="javascript:Tabs(0)">Betriebsart</a></li>
+		 		<li><a href="javascript:Tabs(1)">Sicherheit</a></li>
 		 	</ul>
 			<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 				<p><input type="checkbox" onclick="uiOnChangeWDS()" id="uiViewWDS">&nbsp;<label for="uiViewWDS"><? echo $var:Text2 ?></label></p>
@@ -39,26 +39,26 @@
 				</div>
 			</div></div></div></div></div></div>
 			<div class="backdialog" id="uiWanIp" style="display:none"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-				<p class="mb10"><? echo $var:Text48 ?></p>
+				<p class="mb10">IP-Einstellungen für den Repeaterbetrieb</p>
 				<table id="tWanIp" style="margin:auto">
 					<tr>
-						<td><label for="uiViewWanIpIpaddr"><? echo $var:Text49 ?></label></td>
+						<td><label for="uiViewWanIpIpaddr">IP-Adresse</label></td>
 						<td><input type="text" size="16" maxlength="15" id="uiViewWanIpIpaddr"></td>
 					</tr>
 					<tr>
-						<td><label for="uiViewWanIpNetmask"><? echo $var:Text50 ?></label></td>
+						<td><label for="uiViewWanIpNetmask">Subnetzmaske</label></td>
 						<td><input type="text" size="16" maxlength="15" id="uiViewWanIpNetmask"></td>
 					</tr>
 					<tr>
-						<td><label for="uiViewWanIpGateway"><? echo $var:Text51 ?></label></td>
+						<td><label for="uiViewWanIpGateway">Standard-Gateway</label></td>
 						<td><input type="text" size="16" maxlength="15" id="uiViewWanIpGateway"></td>
 					</tr>
 					<tr>
-						<td><label for="uiViewWanIpDns0"><? echo $var:Text52 ?></label></td>
+						<td><label for="uiViewWanIpDns0">Primärer DNS-Server</label></td>
 						<td><input type="text" size="16" maxlength="15" id="uiViewWanIpDns0"></td>
 					</tr>
 					<tr>
-						<td><label for="uiViewWanIpDns1"><? echo $var:Text53 ?></label></td>
+						<td><label for="uiViewWanIpDns1">Sekundärer DNS-Server</label></td>
 						<td><input type="text" size="16" maxlength="15" id="uiViewWanIpDns1"></td>
 					</tr>
 				</table>
@@ -72,8 +72,8 @@
 		</div>			
 		<div id="uiEncryption" style="display:none">
 			<ul class="tabs">
-				<li><a href="javascript:Tabs(0)"><? echo $var:Text3 ?></a></li>
-				<li class="tabs_on"><a href="javascript:Tabs(1)"><? echo $var:Text45 ?></a></li>
+		 		<li><a href="javascript:Tabs(0)">Betriebsart</a></li>
+		 		<li class="tabs_on"><a href="javascript:Tabs(1)">Sicherheit</a></li>
 			</ul>
 			<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 				<p class="mb5"><? echo $var:Text21 ?></p>
@@ -88,8 +88,8 @@
 					<p class="ml25"><? echo $var:Text29 ?>&nbsp;<? query wlan:settings/key_value0 ?></p>
 				</div>
 				<div id="uiLevel1edit" style="display:none">
-					<p class="ml25 mb10"><label for="uiViewWEPValue"><? echo $var:Text46 ?></label>&nbsp;<input type="text" size="27" maxlength="26" class="Eingabefeld" id="uiViewWEPValue"></p>
-					<p><? echo $var:Text47 ?></p>
+					<p class="ml25 mb10"><label for="uiViewWEPValue">WEP-Schlüssel 1:</label>&nbsp;<input type="text" size="27" maxlength="26" class="Eingabefeld" id="uiViewWEPValue"></p>
+					<p>Geben Sie den WEP-Schlüssel im hexadezimalen Format (26 Stellen) ein.</p>
 				</div>
 				<div id="uiLevel2" style="display:none">
 					<p class="ml25 mb10"><label for="uiViewWPAValue"><? echo $var:Text42 ?></label>&nbsp;<input type="text" size="40" maxlength="63" class="Eingabefeld" id="uiViewWPAValue"></p>
diff -burN usr/www/all/html/de/wlan/wds.js usr/www/all/html/de/wlan/wds.js
--- usr/www/all/html/de/wlan/wds.js	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/de/wlan/wds.js	2006-12-13 17:03:02.000000000 +0100
@@ -87,9 +87,10 @@
 		if (jslGetChecked("uiViewMode0")) {
 <? repeat [ 0 3 ] `			if (!valIsMac(jslGetValue("uiViewMAC0$0"))) {alert(jslGetValue('uiViewMAC0$0') + g_mldNoMac); return;}
 ` ?>
-//		if (jslGetChecked("uiViewWDSLevel2")) {
-//			if (!isAvmMac(jslGetValue("uiViewMAC00")) || !isAvmMac(jslGetValue("uiViewMAC01")) || !isAvmMac(jslGetValue("uiViewMAC02")) || !isAvmMac(jslGetValue("uiViewMAC03"))) alert(g_mldNoAVM);
-//		}	
+		if (jslGetChecked("uiViewWDSLevel2")) {
+			if (!isAvmMac(jslGetValue("uiViewMAC00")) || !isAvmMac(jslGetValue("uiViewMAC01")) || !isAvmMac(jslGetValue("uiViewMAC02")) || !isAvmMac(jslGetValue("uiViewMAC03"))) alert(g_mldNoAVM);
+		}
+		
 <? repeat [ 0 3 ] `			jslCopyValue("uiPostWDSSlave$0", "uiViewMAC0$0");
 ` ?>
 <? repeat [ 0 3 ] `			jslEnable("uiPostWDSSlave$0");
@@ -155,11 +156,12 @@
 			jslCopyValue("uiPostWDSKey", "uiViewWPAValue");
 			jslEnable("uiPostWDSKey");
 		}
-		jslSetValue("uiPostWlanForcedOff", "0");
-		jslEnable("uiPostWlanForcedOff");
-		if ( bShowPopUp) {
-			doPopWindow();
+		if (jslGetValue("uiPostNachtWlan") == "1") {
+			jslSetValue("uiPostNachtWlan", "0");
+			jslEnable("uiPostNachtWlan");
 		}
+		if ( bShowPopUp)
+			doPopWindow();
 	} else {
 			if ( ( bWDSActive) && (wdsmode == "1")) {
 <? if eq $var:isAta 0 `
@@ -175,6 +177,7 @@
 				jslSetValue("uiPostGetPage", "../html/networkchange.html");
 ` ?>
 			}
+		
 	}
 	jslFormSubmitEx("wlan", "wds");
 }
@@ -216,7 +219,7 @@
 	jslSetEnabled("uiViewWDSLevel1", b);
 	jslSetEnabled("uiViewWDSLevel2", b);
 	jslSetEnabled("uiViewWPAValue", b);
-//	if (b && (jslGetValue("uiPostNachtWlan") == "1")) alert(g_mldNacht);
+	if (b && (jslGetValue("uiPostNachtWlan") == "1")) alert(g_mldNacht);
 }
 var g_initMode0 = false;
 function InitMode0 () {
@@ -291,7 +294,7 @@
 	if (mac.length == 0) return true;
 	if (mac == "00:00:00:00:00:00") return true;
 	var bigmac = mac.toUpperCase();
-	return bigmac.indexOf("00:04:0E") == 0 || bigmac.indexOf("00:1A:4F") == 0;
+	return bigmac.indexOf("00:04:0E") == 0 || bigmac.indexOf("00:15:0C") == 0;
 }
 function CheckWEPKey (key) {
 	if (key.length == 0) return null;	// leere Einträge sind gültig
diff -burN usr/www/all/html/import_reboot.html usr/www/all/html/import_reboot.html
--- usr/www/all/html/import_reboot.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/import_reboot.html	2006-12-13 17:03:02.000000000 +0100
@@ -27,6 +27,7 @@
 table			{ border-collapse: collapse; }
 .pTitel, .pTitelo
 				{ font-weight: bold; text-align: center; background-color: #E1F4FF; padding: 5px 10px; border: 1px solid #C6C7BF; }
+				 
 .pDialog, .pDialogo, .pDialogb, .pDialogob
 				{ padding: 10px 10px; text-align: left; background-color: #FBFAF7/*#FEFCF0*/; border: 1px solid #C6C7BF; }
 .pButtonbar 	{ text-align: right; padding: 5px 10px; background-color: #E1F4FF; border: 1px solid #C6C7BF; }
diff -burN usr/www/all/html/logincheck.html usr/www/all/html/logincheck.html
--- usr/www/all/html/logincheck.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/logincheck.html	2006-12-13 17:03:02.000000000 +0100
@@ -8,6 +8,24 @@
 <meta http-equiv="expires" content="0">
 <script type="text/javascript">
 function uiDoOnLoad() {
+<? if eq $var:isTr069 1 '
+<? if eq `<? query box:settings/ata_mode ?>` 0 `
+<? if eq `<? query tr069:settings/enabled ?>` 1 `
+<? if eq $var:isAtaFull 0 '
+<? if eq `<? query env:status/OEM ?>` 1und1 `
+	var user = "<? query connection0:settings/username ?>";
+	var pass = "<? query connection0:settings/password ?>";
+	var type = "<? query connection0:settings/type ?>";
+	if (user=="" && pass=="" && type=="bridge")
+	{
+		document.getElementById("uiPostMenu").value = "tr69_autoconfig";
+		document.getElementById("uiPostPageName").value = "tr69_sync";
+	}
+` ?>
+' ?>
+` ?>
+` ?>
+' ?>
 	if ("<? query security:settings/password ?>" != "") {
 		// login is enabled
 		// --> present the login page always
diff -burN usr/www/all/html/login.html usr/www/all/html/login.html
--- usr/www/all/html/login.html	2007-05-22 15:02:59.000000000 +0200
+++ usr/www/all/html/login.html	2006-12-13 17:03:02.000000000 +0100
@@ -49,8 +49,6 @@
 .foretitel		{ text-align: center; font-weight: bold; padding: 5px 10px;}
 .foredialog		{ padding: 10px; }
 .forebuttons	{ text-align: right; padding: 7px 10px;}
-.errorMessage { font-family: Arial, Helvetica, sans-serif; font-size: 13px; font-weight: bold; color: #CC0000; text-align: center;
-				 margin: 5px; padding: 2px; background-color: white; }
 #Menuspalte	{ width: 200px; padding: 0px; vertical-align: top; }
 #Dataspalte	{ width: 606px; height: 400px; vertical-align: top; }
 -->
@@ -104,7 +102,7 @@
 				<table style="margin: auto;">
 					<tr>
 						<td style="width: 80px;"><label for="uiViewPassword">Kennwort</label>&nbsp;</td>
-						<td><input type="password" size="15" maxlength="128" id="uiViewPassword" name="pass"></td>
+						<td><input type="password" size="15" maxlength="128" id="uiViewPassword"></td>
 					</tr>
 				</table>
 			</div>
