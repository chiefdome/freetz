--- usr/www/all/html/capture.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/capture.html	2007-07-26 15:15:54.000000000 +0200
@@ -4,16 +4,13 @@
 </head>
 <body>
 <h1>FRITZ!Box Paketmitschnitt</h1>
-FRITZ!Box kann zur Diagnose alle Pakete, die über DSL oder im Modus "Internetzugang über LAN/Router" verschickt werden, im <a href="http://www.wireshark.org">Wireshark</a>-Format mitschneiden. Starten Sie den Mitschnitt über die entsprechende Start-Schaltfläche und speichern Sie die Datei auf der Festplatte. Zum Beenden des Mitschnitts drücken Sie die Stop-Schaltfläche.<br><br>
+FRITZ!Box kann zur Diagnose alle Pakete, die über DSL oder im Modus "Internetzugang über LAN/Router" verschickt werden, im <a href="http://www.ethereal.com">Ethereal</a>-Format mitschneiden. Starten Sie den Mitschnitt über die entsprechende Start-Schaltfläche und speichern Sie die Datei auf der Festplatte. Zum Beenden des Mitschnitts drücken Sie die Stop-Schaltfläche.<br><br>
 <b>Wichtig:</b> Brechen Sie nicht den Download im Browser ab, wenn Sie den Mitschnitt beenden wollen, sondern drücken Sie die entsprechende Stop-Schaltfläche.<br><br>
-<b>FRITZ!Box Packet Trace</b>
-FRITZ!Box can trace all packets sent via DSL or in "Internet connection via LAN (as router)" mode in <a href="http://www.wireshark.org">Wireshark</a> format.
-Start the packet trace by clicking the corresponding "Start" button and save the file to the hard disk. 
-Click the "Stop" button to end the trace.<br><br>
-<b>Important:</b> Do not interrupt the download in the browser to end the trace! Click the corresponding "Stop" button instead.
-<hr>
+<b>FRITZ!Box Packet Trace</b><br>
+For diagnostic purposes FRITZ!Box can trace in <a href="http://www.ethereal.com">Ethereal</a> format all packets, which are sent via DSL or in the operating mode "Internet access via LAN/Router". Start the trace using the appropriate start button and save the file to the hard drive. To end the trace click on the stop button.<br><br>
+<b>Important:</b> Do not use the browser controls to interrupt the download. Use the appropriate stop button to end the trace.<br><hr>
 Paketmitschnitt auf DSL-Ebene (Standard):<br>
-Packet trace on the DSL level (default):<br>
+Packet trace at DSL level (Standard):<br>
 <table>
 <tr>
  <td>
@@ -32,7 +29,7 @@
 </table>
 <hr>
 Paketmitschnitt auf DSL-Ebene (nur 2. PVC):<br>
-Packet trace on the DSL level (2nd PVC only):<br>
+Packet trace at DSL level (only 2nd PVC):<br>
 <table>
 <tr>
  <td>
@@ -50,25 +47,6 @@
 </tr>
 </table>
 <hr>
-Paketmitschnitt auf DSL-Ebene (nur 3. PVC):<br>
-Packet trace on the DSL level (3nd PVC only):<br>
-<table>
-<tr>
- <td>
- <form name="Capture3start" method="GET" action="../cgi-bin/capture_notimeout" >
- <input type="hidden" value="3" name="start" >
- <input type="submit" value="Start" name="start3" >
- </form>
- </td>
- <td>
- <form name="Capture3stop" method="GET" action="../cgi-bin/capture_notimeout" >
- <input type="hidden" value="3" name="stop" >
- <input type="submit" value="Stop" name="stop3" >
- </form>
- </td>
-</tr>
-</table>
-<hr>
 Paketmitschnitt ohne DSL-Rahmen:<br>
 Packet trace without DSL frames:<br>
 <table>
--- usr/www/all/html/de/fon/buchsend.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/buchsend.html	2007-07-26 15:15:54.000000000 +0200
@@ -30,7 +30,7 @@
 				<th class="c2"><? echo $var:Text4 ?></th>
 				<th class="c3"><? echo $var:Text5 ?></th>
 			</tr>
-<? if neq <? query telcfg:settings/HotDialEntry/count ?> 0 `
+<? if neq <? multiquerycount telcfg:settings/HotDialEntry/list ?> 0 `
 			<tr>
 				<td class="c1"><input type="checkbox" name="all" id="all" onclick="CheckAll()" /></td>
 				<td colspan="2"><label for="all"><? echo $var:Text8 ?></label></td>
@@ -43,7 +43,7 @@
 				<td class="c3"><span title="$2">$2</span></td>
 			</tr>
 ` ?>
-<? if eq <? query telcfg:settings/HotDialEntry/count ?> 0 `
+<? if eq <? multiquerycount telcfg:settings/HotDialEntry/list ?> 0 `
 			<tr class="Dialoglist"><td colspan=3 class="ac" style="font-size: 13px;">$var:Text9</td></tr>
 ` ?>
 		</table>
--- usr/www/all/html/de/fon/dial.frm.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/dial.frm	2007-07-26 15:15:54.000000000 +0200
@@ -6,7 +6,3 @@
 <? repeat [ 0 2 ] `
 <input type="hidden" name="telcfg:settings/MSN/Port$0/Name" value="<? query telcfg:settings/MSN/Port$0/Name ?>" id="uiPostFon$0" disabled>
 ` ?>
-<? repeat [ 1 8 ] `
-<input type="hidden" name="telcfg:settings/NTHotDialList/Name$0" value="<? query telcfg:settings/NTHotDialList/Name$0 ?>" id="uiPostIsdn$0" disabled>
-<input type="hidden" name="telcfg:settings/NTHotDialList/Number$0" value="<? query telcfg:settings/NTHotDialList/Number$0 ?>" id="uiPostIsdnNumber$0" disabled>
-` ?>
--- usr/www/all/html/de/fon/dial.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/dial.html	2007-07-26 15:15:54.000000000 +0200
@@ -1,11 +1,7 @@
 <? include ../html/$var:lang/fon/dial.inc ?>
 <div id="content">
 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-<? if eq '$var:pagename' 'dialbuch' `
-		<? echo '$var:Text24' ?>
-` `
-		<? echo '$var:Text25' ?>
-` ?>		
+		<? echo '$var:Text23' ?>
 	</div></div></div></div></div></div>
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 	<ul class="tabs">
@@ -17,9 +13,9 @@
 			<li class="tabs_on"><a href="javascript:jslGoTo('','')"><? echo '$var:Text26' ?></a></li>
 		</ul>
 		<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-			<p class="mb10"><? echo $var:Text28 ?></p>
-			<p><input type="checkbox" id="uiViewClickToDial" name="uiViewClickToDial" onclick="OnClickClickToDial()">&nbsp;<label for="uiViewClickToDial"><? echo $var:Text20 ?></label></p>
+			<p class="mt10"><input type="checkbox" id="uiViewClickToDial" name="uiViewClickToDial" onclick="OnClickClickToDial()">&nbsp;<label for="uiViewClickToDial"><? echo $var:Text20 ?></label></p>
 			<div class="ml25">
+				<p class="mb5"><? echo $var:Text21 ?></p>
 				<p style="float: left;"><? echo $var:Text22 ?>&nbsp;<select id="uiViewPort" name="uiViewPort" class="Eingabefeld"></select></p>
 				<p class="ar"><input type="button" id="uiViewTest" onclick="uiDoTest()" value="<? echo $var:Text27 ?>" class="Pushbutton" disabled></p>
 			</div>
--- usr/www/all/html/de/fon/dial.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/dial.inc	2007-07-26 15:15:54.000000000 +0200
@@ -1,5 +1,6 @@
 <? include ../html/$var:lang/global.inc ?>
 <? setvariable var:Text20 'Wählhilfe verwenden' ?>
+<? setvariable var:Text21 'Anwahl durch Anklicken der Rufnummern in der Anrufliste.' ?>
 <? setvariable var:Text22 'Verbindung mit dem Telefon' ?>
 <? setvariable var:Text23 'Telefonie' ?>
 <? setvariable var:Text24 'Telefonbuch' ?>
--- usr/www/all/html/de/fon/dial.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/dial.js	2007-07-26 15:15:54.000000000 +0200
@@ -21,14 +21,6 @@
 	name = jslGetValue("uiPostFon1");
 	if (name.length == 0) name = g_Fon2;
 	jslAddOption("uiViewPort", "2", name, false);
-	name = jslGetValue("uiPostFon2");
-	if (name.length == 0) name = g_Fon3;
-	jslAddOption("uiViewPort", "3", name, false);
-	jslAddOption("uiViewPort", "50", g_txtIsdn, false);
-	for (var i=1; i<9; i++) {
-		name = jslGetValue("uiPostIsdnNumber"+i);
-		if (name.length > 0) jslAddOption("uiViewPort", "5"+i, jslGetValue("uiPostIsdn"+i), false);
-	}
 	jslSetSelection("uiViewPort", "1");
 	if (jslGetValue("uiTestPort") != "") {
 		jslSetSelection("uiViewPort", jslGetValue("uiTestPort"));
--- usr/www/all/html/de/fon/durchwahl.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/durchwahl.html	2007-07-26 15:15:54.000000000 +0200
@@ -22,7 +22,8 @@
 	</div></div></div></div></div></div>
 	<div class="backdialog" id="uiDurchwahl" style="display:none"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<div>
-			<p class="mb10"><label for="uiViewCalls"><? echo $var:Text23 ?></label>&nbsp;<select class="Eingabefeld" size="1" id="uiViewCalls"></select></p>
+			<p class="mb10"><label for="uiViewCalls"><? echo $var:Text23 ?></label>&nbsp;<select class="Eingabefeld" size="1" id="uiViewCalls">
+			</select></p>
 		</div>
 		<p class="mb5" style="padding-top: 5px;"><b><? echo $var:Text24 ?></b></p>
 		<table style="margin-left: 25px" id="t1">
--- usr/www/all/html/de/fon/durchwahl.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/durchwahl.js	2007-07-26 15:15:54.000000000 +0200
@@ -91,7 +91,6 @@
 	jslCopyValue("uiViewAmt", "uiPostAmt");
 }
 function fillId(id) {
-<? if eq '$var:usePSTN' 1 `
 	// Auswahl mit den vorgegebenen MSN füllen
 	addMsn(id, g_msn0);
 	addMsn(id, g_msn1);
@@ -104,21 +103,16 @@
 	addMsn(id, g_msn8);
 	addMsn(id, g_msn9);
 	addOption(id, "POTS", g_preFestnetz+g_Pots);
-` ?>
 	
 	// Sip Zugänge anfügen
 <? multiquery sip:settings/sip/list(ID,displayname) '
 	if ("$3" != "") addOption(id, "SIP"+"$2", g_preInternet+jslGetValue("ui$1"));
 ' ?>
-<? if eq '$var:usePSTN' 0 `
-	addOption(id, "Leer", "");
-` ?>
+//	addOption(id, "Leer", "");
 }
 function uiDoSave() {
 	if (jslGetChecked("uiViewAktiv")) {
 		if (jslGetChecked("uiViewDurchwahl")) {
-			if ( jslGetValue( "uiViewCalls") == "Leer") { alert( g_txt_NoNrDurchwahl); return;}
-			if ( jslGetValue( "uiViewWeiterleiten") == "Leer") { alert( g_txt_NoNrWeiterleiten); return;}
 			var pin = jslGetValue("uiViewPin");
 			if ((pin!="****") && (pin.length != 4 || !valIsZahl(pin))) {alert(g_mldPin); return;}
 			if (jslGetChecked("uiViewCtId")) {
@@ -225,14 +219,9 @@
 			if (!g_InitMode0) {
 				g_InitMode0 = true;
 				fillId("uiViewCalls");
-<? if eq '$var:usePSTN' 0 `
-				jslSetSelection("uiViewCalls", "Leer");
-` ?>
 				jslSetSelection("uiViewCalls", jslGetValue("uiPostCtMsn"));
+		
 				fillId("uiViewWeiterleiten");
-<? if eq '$var:usePSTN' 0 `
-				jslSetSelection("uiViewWeiterleiten", "Leer");
-` ?>
 				jslSetSelection("uiViewWeiterleiten", jslGetValue("uiPostWeiterleiten"));
 			}
 			break;
--- usr/www/all/html/de/fon/fon1.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/fon1.html	2007-07-26 15:15:54.000000000 +0200
@@ -5,11 +5,9 @@
 	</div></div></div></div></div></div>
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 	<ul class="tabs">
-		<li class="tabs_on"><a href="javascript:uiDoFon1()"><? echo '$var:FonDeviceKind' ?></a></li>
-		<li><a href="javascript:uiDoKlingelsperre()"><? echo '$var:Text11' ?></a></li>
-<? if eq <? query box:settings/expertmode/activated ?> 1 `
-		<li><a href="javascript:uiDoMerkmale()"><? echo '$var:Text9' ?></a></li>
-` ?>
+ 		<li class="tabs_on"><a href="javascript:uiDoFon1()">Nebenstelle</a></li>
+ 		<li><a href="javascript:uiDoKlingelsperre()">Klingelsperre</a></li>
+ 		<li><a href="javascript:uiDoMerkmale()">Merkmale der Nebenstelle</a></li>
 	</ul>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<p><? echo $var:Text2 ?></p>
@@ -19,15 +17,13 @@
 		<p class="pFett"><script type="text/javascript">document.write(uiFonDisplay("<? echo $var:FonNr ?>"));</script></p>
 		<div style="padding-left: 20px">
 			<p class="mb10"><? echo $var:Text3 ?><input type="text" id="uiViewName0" size="21" maxlength="20" class="Eingabefeld"></p>
-			<p style="padding-top:10px"><b><? echo $var:Text5 ?></b></p>
+			<p><input type="checkbox" id="uiViewGlobal0">&nbsp;<label for="uiViewGlobal0"><? echo $var:Text4 ?></label></p>
+			<p style="padding-top:10px"><label for="uiViewN00"><? echo $var:Text5 ?></label></p>
 			<p class="combo">
-				<select size="1" id="uiViewN00" class="Eingabefeld" style="width:200px" onchange="OnChangeOutgoingNo(id)"></select>
+				<select size="1" id="uiViewN00" class="Eingabefeld" style="width:200px"></select>
 			</p>
-			<p class="mb5" style="padding-top:10px"><b><? echo $var:Text6 ?></b></p>
-			<p class="mb5"><input type="radio" id="uiGUI2_ViewGlobal0" onclick="OnReactionType(0)">&nbsp;<label for="uiGUI2_ViewGlobal0"><? echo $var:Text4 ?></label></p>
-			<p class="mb5"><input type="radio" id="uiGUI2_ViewGlobal1" onclick="OnReactionType(1)">&nbsp;<label for="uiGUI2_ViewGlobal1"><? echo $var:Text4b ?></label></p>
-			<p id="idShowOutgoingNo" style="margin-left: 25px; display: none;"><b><span id="spanOutgoingNo"><? echo $var:Text12 ?></span></b>&nbsp;<? echo $var:Text13 ?></p>
-			<table id="uiViewTableIncomingNo">
+			<p style="padding-top:10px"><label for="uiViewN01"><? echo $var:Text6 ?></label></p>
+			<table>
 				<tr>
 					<td style="vertical-align:top">
 						<p class="combo">
--- usr/www/all/html/de/fon/fon1.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/fon1.inc	2007-07-26 15:15:54.000000000 +0200
@@ -2,15 +2,9 @@
 <? setvariable var:Text1 'Nebenstellen' ?>
 <? setvariable var:Text2 'Die Rufnummer, die Sie unter "Rufnummer der Nebenstelle" angeben, bestimmt die Standard-Verbindungsart und die abgehende Rufnummer für diese Nebenstelle.' ?>
 <? setvariable var:Text3 'Bezeichnung: ' ?>
-<? setvariable var:Text2 'Die Rufnummer, die Sie unter "Ausgehende Anrufe" angeben, bestimmt die Standard-Verbindungsart und die abgehende Rufnummer für diesen Anschluss.' ?>
 <? setvariable var:Text4 'auf alle Rufnummern reagieren' ?>
-<? setvariable var:Text4b 'nur auf folgende Rufnummern reagieren' ?>
-<? setvariable var:Text5 'Ausgehende Anrufe' ?>
-<? setvariable var:Text6 'Einkommende Anrufe' ?>
+<? setvariable var:Text5 'Rufnummer der Nebenstelle' ?>
+<? setvariable var:Text6 'zusätzliche Rufnummern' ?>
 <? setvariable var:Text7 'Weitere Leistungsmerkmale' ?>
 <? setvariable var:Text8 'Unter Merkmale der Nebenstelle können Sie zusätzliche Leistungsmerkmale aktivieren.' ?>
-<? setvariable var:Text9 'Merkmale des Telefoniegerätes' ?>
-<? setvariable var:Text10 'Nebenstelle' ?>
-<? setvariable var:Text11 'Klingelsperre' ?>
-<? setvariable var:Text12 '<Rufnummer bei Ausgehende Anrufe>' ?>
-<? setvariable var:Text13 '(ausgehende Rufnummer)' ?>
+<? setvariable var:Text9 'Merkmale der Nebenstelle' ?>
--- usr/www/all/html/de/fon/fon1isdn.frm.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/fon1isdn.frm	2007-07-26 15:15:54.000000000 +0200
@@ -1,16 +1,5 @@
-<input type="hidden" name="var:FonNr" value="<? echo $var:FonNr ?>" id="uiPostFonNr">
-<input type="hidden" name="var:IsdnNr" value="<? echo $var:IsdnNr ?>" id="uiPostIsdnNr">
-<input type="hidden" name="var:parent" value="<? echo $var:parent ?>" id="uiPostParent">
-<input type="hidden" name="var:ShowIsdnDefault" value="<? echo $var:ShowIsdnDefault ?>" id="uiShowIsdnDefault">
-<? repeat [ 1 8 ] `
-<input type="hidden" name="telcfg:settings/NTHotDialList/Name$0" value="<? query telcfg:settings/NTHotDialList/Name$0 ?>" id="uiPostName$0" disabled>
-<input type="hidden" name="telcfg:settings/NTHotDialList/Number$0" value="<? query telcfg:settings/NTHotDialList/Number$0 ?>" id="uiPostNummer$0" disabled>
-<input type="hidden" name="telcfg:settings/NTHotDialList/Type$0" value="<? query telcfg:settings/NTHotDialList/Type$0 ?>" id="uiPostIsdnType$0" disabled>
-` ?>
+<input type="hidden" name="telcfg:settings/NTHotDialList/Name<? echo $var:IsdnNr ?>" value="<? query telcfg:settings/NTHotDialList/Name<? echo $var:IsdnNr ?> ?>" id="uiPostName">
+<input type="hidden" name="telcfg:settings/NTHotDialList/Number<? echo $var:IsdnNr ?>" value="<? query telcfg:settings/NTHotDialList/Number<? echo $var:IsdnNr ?> ?>" id="uiPostRufnummer">
 <? repeat [ 0 9 ] `
 <input type="hidden" name="telcfg:settings/MSN/MSN$0" value="<? query telcfg:settings/MSN/MSN$0 ?>" id="uiMsn$0" disabled>` ?>
 <input type="hidden" name="telcfg:settings/MSN/POTS" value="<? query telcfg:settings/MSN/POTS ?>" id="uiPots" disabled>
-<? repeat [ 0 2 ] `
-<input type="hidden" name="telcfg:settings/FaxModem$0/Number" value="<? query telcfg:settings/FaxModem$0/Number ?>" id="uiPostIsdnFaxNumber$0" disabled>
-<input type="hidden" name="telcfg:settings/FaxModem$0/Type" value="<? query telcfg:settings/FaxModem$0/Type ?>" id="uiPostIsdnFaxType$0" disabled>
-` ?>
--- usr/www/all/html/de/fon/fon1isdn.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/fon1isdn.html	2007-07-26 15:15:54.000000000 +0200
@@ -3,14 +3,6 @@
  	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
 		<? echo $var:Text1 ?>
 	</div></div></div></div></div></div>
-<? if eq '$var:parent' 'fondevices' `
-	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
-	<ul class="tabs">
-		<li class="tabs_on"><a href="javascript:uiDoRefresh()"><? echo '$var:Text5' ?></a></li>
-		<li><a href="javascript:uiDoIsdn()"><? echo '$var:Text6' ?></a></li>
-		<li><a href="javascript:uiDoOptionen()"><? echo '$var:Text7' ?></a></li>
-	</ul>
-` ?>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<table>
 			<tr>
--- usr/www/all/html/de/fon/fon1isdn.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/fon1isdn.inc	2007-07-26 15:15:54.000000000 +0200
@@ -1,14 +1,6 @@
 <? include ../html/$var:lang/global.inc ?>
-<? if eq '$var:parent' 'fondevices' `
-<? setvariable var:Text1 'ISDN-Endgeräte' ?>
-` `
 <? setvariable var:Text1 'Interne Nummer' ?>
-` ?>
 <? setvariable var:Text2 'Nummer' ?>
 <? setvariable var:Text3 '5' ?>
 <? setvariable var:Text4 'Bezeichnung' ?>
-<? setvariable var:Text5 'Rufnummer des Endgerätes' ?>
-<? setvariable var:Text6 'FON S0' ?>
-<? setvariable var:Text7 'Klingelsperre (FON S0)' ?>
-<? setvariable var:Text8 '' ?>
-<? setvariable var:Text9 '' ?>
+<? setvariable var:Text5 'Rufnummer des Telefons' ?>
--- usr/www/all/html/de/fon/fon1isdn.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/fon1isdn.js	2007-07-26 15:15:54.000000000 +0200
@@ -10,65 +10,22 @@
 <? include ../html/$var:lang/js/jsl.js ?>
 var g_mldNoName = "Geben Sie bitte eine Bezeichnung an.";
 var g_mldNoNummer = "Geben Sie bitte eine Rufnummer an.";
-var g_mldNoFaxListSpace = "ACHTUNG! Keine Rufnummerzuweisung möglich.\x0aDie Liste der zuweisbaren Rufnummern ist voll.";
-var g_mldAssignErr1 = "ACHTUNG !! Unzulässige Rufnummernzuweisung!\x0aSie wollen unzulässigerweise ihrem Faxgerät eine Rufnummer zuweisen, die schon von einem Telefon benutzt wird.";
-var g_mldAssignErr2 = "ACHTUNG !! Unzulässige Rufnummernzuweisung!\x0aSie wollen unzulässigerweise ihrem Telefon eine Rufnummer zuweisen, die schon von einem Faxgerät benutzt wird.";
-var g_txt_TkAnlage = "ISDN-Telefonanlage";
-var g_mld_TkAnlageforbidden = "ACHTUNG! Unzulässige Bezeichung!\x0aDer Begriff 'ISDN-Telefonanlage' ist reservierter Begriff, der anderweitig nicht verwendet werden darf.\x0aBitte geben Sie eine andere Bezeichnung ein.";
 function uiDoOnLoad() {
-	fillId("uiViewRufnummer", jslGetValue("uiPostNummer"+jslGetValue("uiPostIsdnNr")));
-	jslCopyValue("uiViewName", "uiPostName"+jslGetValue("uiPostIsdnNr"));
+	fillId("uiViewRufnummer", jslGetValue("uiPostRufnummer"));
+	jslCopyValue("uiViewName", "uiPostName");
 }
 function uiDoSave() {
 	if (jslGetValue("uiViewName") == "") {alert(g_mldNoName); return;}
-	if (jslGetValue("uiViewName") == g_txt_TkAnlage) {alert(g_mld_TkAnlageforbidden); return;}
 	if (jslGetValue("uiViewRufnummer") == "") {alert(g_mldNoNummer); return;}
-	if ( jslGetValue( "uiViewRufnummer") != jslGetValue( "uiPostNummer"+jslGetValue("uiPostIsdnNr"))) {
-		if ( inFaxList( jslGetValue( "uiPostNummer"+jslGetValue("uiPostIsdnNr")))) {
-			if ( !(inFaxList(jslGetValue( "uiViewRufnummer")))) {
-				if ( allocationExists( jslGetValue( "uiViewRufnummer"))) {	
-					alert(g_mldAssignErr1);
-					return;
-				} else {
-					var newFaxPos = String( getCurrentFreeFaxPos(jslGetValue( "uiPostNummer"+jslGetValue("uiPostIsdnNr"))));
-					if ( newFaxPos.length == 0) {
-						alert(g_mldNoFaxListSpace);
-						return;
-					} else {
-						jslCopyValue("uiPostIsdnFaxNumber"+newFaxPos, "uiViewRufnummer");
-						jslSetValue("uiPostIsdnFaxType"+newFaxPos, "0");
-						jslEnable("uiPostIsdnFaxNumber"+newFaxPos);
-						jslEnable("uiPostIsdnFaxType"+newFaxPos);
-					}
-				}
-			}
-		} else {
-			if ( inFaxList(jslGetValue( "uiViewRufnummer"))) {
-				alert( g_mldAssignErr2);
-				return;
-			}
-		}
-	}
-	jslCopyValue("uiPostName"+jslGetValue("uiPostIsdnNr"), "uiViewName");
-	jslCopyValue("uiPostNummer"+jslGetValue("uiPostIsdnNr"), "uiViewRufnummer");
-	jslEnable("uiPostName"+jslGetValue("uiPostIsdnNr"));
-	jslEnable("uiPostNummer"+jslGetValue("uiPostIsdnNr"));
-	jslSubmitFormEx("fon", jslGetValue("uiPostParent"));
+	jslCopyValue("uiPostName", "uiViewName");
+	jslCopyValue("uiPostRufnummer", "uiViewRufnummer");
+	jslSubmitFormEx("fon", jslGetValue("uiPostPageMaster"));
 }
 function uiDoCancel() {
-	jslGoTo("fon", jslGetValue("uiPostParent"));
-}
-function uiDoRefresh() {
-	jslGoTo("", "");
-}
-function uiDoIsdn() {
-	jslGoTo("fon", "isdn");
-}
-function uiDoOptionen() {
-	jslGoTo("fon", "isdnoptionen");
+	jslGoTo("fon", jslGetValue("uiPostPageMaster"));
 }
 function uiDoHelp() {
-<? if eq '$var:parent' 'fonlistdect' `
+<? if eq '$var:pagemaster' 'fonlistdect' `
 	jslPopHelp("hilfe_fon_dect_fon1isdn");
 ` `
 	jslPopHelp("hilfe_fon_fon1isdn");
@@ -76,11 +33,9 @@
 }
 function fillId(id, nr) {
 	// Auswahl mit den vorgegebenen MSN füllen und Eintrag msn selektieren
-<? if eq '$var:usePSTN' 1 `
 <? repeat [ 0 9 ] `
-	addMsn(id, jslGetValue("uiMsn$10"));` ?>
+	addMsn(id, jslGetValue("uiMsn$0"));` ?>
 	addMsn(id, jslGetValue("uiPots"));
-` ?>
 	// Sip Zugänge anfügen
 <? multiquery sip:settings/sip/list(displayname) '
 	addMsn(id, "$2");' ?>
@@ -102,42 +57,4 @@
 	var eintrag = new Option(val, val, false, false);
 	element.options[element.length]=eintrag;
 }
-function inFaxList( number) {
-	if (number == "") return false
-	for(var i=0;i<3;i++) {
-		if ((jslGetValue( "uiPostIsdnFaxType"+i) == "0") && 
-			(jslGetValue( "uiPostIsdnFaxNumber"+i) == number))
-			return true;
-	}
-	return false;
-}
-function allocationExists( number) {
-	if ( number =="") return false;
-	for(var i=1;i<9;i++) {
-		if ( jslGetValue( "uiPostNummer"+i) == number) return true;
-	}
-	return false;
-}
-function getCurrentFreeFaxPos( oldNumber) {
-	var rc = "";
-	for(var i=0;i<3;i++) {
-		if (jslGetValue( "uiPostIsdnFaxNumber"+i) == oldNumber) {
-			var bNoFurtherNo = true;
-			for( var j=1;j<9;j++) {
-				if ((jslGetValue( "uiPostNummer"+j) == oldNumber) &&
-					(jslGetValue("uiPostIsdnNr") != j)) {
-					bNoFurtherNo =false;
-					break;
-				}
-			}
-			if ( bNoFurtherNo == true) {
-				return i;
-			}
-		}
-		if (jslGetValue( "uiPostIsdnFaxNumber"+i) == "") {
-			return i;
-		}
-	}
-	return "";
-}
 </script>
--- usr/www/all/html/de/fon/fon1.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/fon1.js	2007-07-26 15:15:54.000000000 +0200
@@ -10,8 +10,8 @@
 <script type="text/javascript">
 <? include ../html/$var:lang/js/jsl.js ?>
 var g_txt_Festnetz		= "Festnetz: ";
-var g_txt_Nebenstelle	= " am Anschluss FON";
-var g_txt_Titel 	= "Telefoniegerät am Anschluss \"FON ";
+var g_txt_Nebenstelle = "Nebenstelle FON";
+var g_txt_Titel 			= "Nebenstelle Fon ";
 <? multiquery sip:settings/sip/list '
 var g_$1;
 ' ?>
@@ -25,10 +25,6 @@
 var g_msn7;
 var g_msn8;
 var g_msn9;
-var g_mldNoNotation = "Es müssen für Ihr Telefonie-Endgerät eine Bezeichnung vergeben werden !!";
-var g_txt_TkAnlage = "ISDN-Telefonanlage";
-var g_mld_TkAnlageforbidden = "ACHTUNG! Unzulässige Bezeichung!\x0aDer Begriff 'ISDN-Telefonanlage' ist reservierter Begriff, der anderweitig nicht verwendet werden darf.\x0aBitte geben Sie eine andere Bezeichnung ein.";
-var g_txt_OldDefault = "Fon ";		// nicht übersetzen
 function uiDoOnLoad() {
 <? multiquery sip:settings/sip/list '
 	g_$1 = jslGetValue("ui$1");
@@ -53,14 +49,10 @@
 		fillId("uiViewN0"+j, jslGetValue("uiPostNr0"+j));
 	}
 	jslCopyValue("uiViewName0", "uiPostName0");
-	OnReactionType(jslGetValue("uiPostAll0") == "1"?0:1)
-	if (getSelectedOptionText("uiViewN00") != "") {
-		jslSetSpanText( "spanOutgoingNo", getSelectedOptionText("uiViewN00"));
-		jslDisplay( "idShowOutgoingNo", true);
-	}
+	jslSetChecked("uiViewGlobal0", jslGetValue("uiPostAll0") == "1");
 }
 function uiDoSave() {
-	uiDoSaveGo(jslGetValue("uiPostPageMaster"));
+	uiDoSaveGo("fonlist");
 }
 function uiDoFon1() {
 	jslGoTo("fon", "fon1");
@@ -74,14 +66,8 @@
 	jslGoTo("fon", "klingelsperre");
 }
 function uiDoSaveGo (page) {
-	if (jslGetValue( "uiViewName0") == "") { alert( g_mldNoNotation);return;}
-	if (jslGetValue( "uiViewName0") == g_txt_TkAnlage) { alert( g_mld_TkAnlageforbidden);return;}
-	if (jslGetValue( "uiViewName0") == ( g_txt_OldDefault + jslGetValue( "uiPostFonNr"))) {
-		jslSetValue( "uiPostName0", jslGetValue( "uiViewName0") + " ");
-	} else {
 		jslCopyValue("uiPostName0", "uiViewName0");
-	}
-	jslSetValue("uiPostAll0", jslGetChecked("uiGUI2_ViewGlobal0") ? "1" :"0");
+	jslSetValue("uiPostAll0", jslGetChecked("uiViewGlobal0") ? "1" :"0");
 	if (jslGetValue("uiViewN00") == "Leer") jslSetValue("uiPostNr00", ""); else jslCopyValue("uiPostNr00", "uiViewN00");
 	if (jslGetValue("uiViewN01") == "Leer") jslSetValue("uiPostNr01", ""); else jslCopyValue("uiPostNr01", "uiViewN01");
 	if (jslGetValue("uiViewN02") == "Leer") jslSetValue("uiPostNr02", ""); else jslCopyValue("uiPostNr02", "uiViewN02");
@@ -95,7 +81,7 @@
 	jslSubmitFormEx("fon", page);
 }
 function uiDoCancel() {
-	jslGoTo("fon", jslGetValue("uiPostPageMaster"));
+	jslGoTo("fon", "fonlist");
 }
 function uiDoHelp() {
 	jslPopHelp("hilfe_fon_nebenstelle");
@@ -132,12 +118,6 @@
 	var eintrag = new Option(text, val, false, false);
 	element.options[element.length]=eintrag;
 }
-function getSelectedOptionText( id) {
-	var element;
-	element = document.getElementById(id);
-	if (element == null) return;
-	return element.options[element.selectedIndex].text;
-}
 function isFilled(id) {
 	var element = document.getElementById(id);
 	if (element == null) return false;
@@ -160,14 +140,6 @@
 		case "uiViewN08": enableSelect("09"); break;
 	}
 }
-function OnChangeOutgoingNo(id) {
-	if (getSelectedOptionText("uiViewN00") != "") {
-		jslSetSpanText( "spanOutgoingNo", getSelectedOptionText("uiViewN00"));
-		jslDisplay( "idShowOutgoingNo", true);
-	} else {
-		jslDisplay( "idShowOutgoingNo", false);
-	}
-}
 function SetChecked (postid, viewid) {
 	jslSetChecked(viewid, jslGetValue(postid) != "0");
 }
@@ -175,20 +147,9 @@
 	jslSetValue(postid, jslGetChecked(viewid) ? "1":"0");
 }
 function uiFonDisplay (n) {
-	return "<? echo '$var:FonDeviceKind' ?>" + g_txt_Nebenstelle+(Number(n)+1);
+	return g_txt_Nebenstelle+(Number(n)+1);
 }
 function uiTitelDisplay (n) {
-	return g_txt_Titel+(Number(n)+1)+ "\"";
-}
-function OnReactionType(reactionType) {
-	jslSetChecked( "uiGUI2_ViewGlobal0", reactionType == 0);
-	jslSetChecked( "uiGUI2_ViewGlobal1", reactionType == 1);
-	if ( reactionType == 0 ) {
-		jslDisable( "idShowOutgoingNo");
-		for ( var i = 9; i >0; i--) { jslDisable( "uiViewN0"+i);};
-	} else {
-		jslEnable( "idShowOutgoingNo");
-		for ( var i = 9; i >0; i--) { jslEnable( "uiViewN0"+i);};
-	}
+	return g_txt_Titel+(Number(n)+1);
 }
 </script>
--- usr/www/all/html/de/fon/fonbuch1.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/fonbuch1.html	2007-07-26 15:15:54.000000000 +0200
@@ -6,25 +6,25 @@
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<table style="margin:auto">
 			<tr>
-				<td class="c1"><label for="uiViewName"><? echo $var:Text2 ?></label></td>
+				<td class="c1"><label for="uiViewName">Name</label></td>
 				<td><input type="text" size="21" maxlength="19" id="uiViewName" class="Eingabefeld"></td>
 			</tr>
 			<tr>
-				<td class="c1"><label for="uiViewNumber"><? echo $var:Text3 ?></label></td>
+				<td class="c1"><label for="uiViewNumber">Rufnummer</label></td>
 				<td><input type="text" size="32" maxlength="48" id="uiViewNumber" class="Eingabefeld"></td>
 			</tr>
 			<tr>
-				<td class="c1"><label for="uiViewCode"><? echo $var:Text4 ?></label></td>
-				<td><? echo $var:Text5 ?><input type="text" size="3" maxlength="2" id="uiViewCode" class="Eingabefeld"></td>
+				<td class="c1"><label for="uiViewCode">Kurzwahl</label></td>
+				<td>**7 <input type="text" size="3" maxlength="2" id="uiViewCode" class="Eingabefeld"></td>
 			</tr>
 			<tr>
-				<td class="c1"><label for="uiViewVanity"><? echo $var:Text6 ?></label></td>
-				<td><? echo $var:Text7 ?><input type="text" size="9" maxlength="8" id="uiViewVanity" class="Eingabefeld"></td>
+				<td class="c1"><label for="uiViewVanity">Vanity</label></td>
+				<td>**8 <input type="text" size="9" maxlength="8" id="uiViewVanity" class="Eingabefeld"></td>
 			</tr>
 			<tr>
-				<td colspan="2">
-					<p class="mt10"><input type="checkbox" id="uiViewVIP">&nbsp;<label for="uiViewVIP"><? echo $var:Text8 ?></label></p>
-					<p class="ml25"><? echo $var:Text9 ?></p>
+				<td colspan=2>
+					<p class="mt10"><input type="checkbox" id="uiViewVIP">&nbsp;<label for="uiViewVIP">Wichtige Person</label></p>
+					<p class="ml25">Sie sind auch bei aktivierter Klingelsperre für diese Person erreichbar.</p>
 				</td>
 			</tr>
 		</table>
--- usr/www/all/html/de/fon/fonbuch1.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/fonbuch1.js	2007-07-26 15:15:54.000000000 +0200
@@ -36,13 +36,13 @@
 	var number = FormatNumber(jslGetValue("uiViewNumber"));
 	jslSetValue("uiPostNumber", number);
 	jslSetValue("uiPostName", name);
-	jslSubmitFormEx("", jslGetValue("uiPostPageMaster"), "fonbuch1");
+	jslSubmitFormEx("", "fonbuch", "fonbuch1");
 }
 function uiDoHelp() {
 	jslPopHelp("hilfe_fon_telefonbucheintrag");
 }
 function uiDoCancel() {
-	jslGoTo("", jslGetValue("uiPostPageMaster"));
+	jslGoTo("", "fonbuch");
 }
 // Ggf. Registar anhängen
 function FormatNumber (n) {
--- usr/www/all/html/de/fon/fonbuch.frm.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/fonbuch.frm	2007-07-26 15:15:54.000000000 +0200
@@ -11,10 +11,6 @@
 <? repeat [ 0 2 ] `
 <input type="hidden" name="telcfg:settings/MSN/Port$0/Name" value="<? query telcfg:settings/MSN/Port$0/Name ?>" id="uiPostFon$0" disabled>
 ` ?>
-<? repeat [ 1 8 ] `
-<input type="hidden" name="telcfg:settings/NTHotDialList/Name$0" value="<? query telcfg:settings/NTHotDialList/Name$0 ?>" id="uiPostIsdn$0" disabled>
-<input type="hidden" name="telcfg:settings/NTHotDialList/Number$0" value="<? query telcfg:settings/NTHotDialList/Number$0 ?>" id="uiPostIsdnNumber$0" disabled>
-` ?>
 <? multiquery telcfg:settings/HotDialEntry/list(Code,Vanity,Number,Name) '
 <input type="hidden" name="telcfg:settings/$1/Name" value="$5" id="uiPostName$0" disabled>
 <input type="hidden" name="telcfg:settings/$1/Number" value="$4" id="uiPostNumber$0" disabled>
--- usr/www/all/html/de/fon/fonbuch.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/fonbuch.html	2007-07-26 15:15:54.000000000 +0200
@@ -1,7 +1,7 @@
 <? include ../html/$var:lang/fon/fonbuch.inc ?> 
 <div id="content">
  	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo '$var:Text1' ?>
+		<? echo '$var:Text12' ?>
 	</div></div></div></div></div></div>
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 	 	<ul class="tabs">
@@ -23,11 +23,11 @@
 <? multiquery telcfg:settings/HotDialEntry/list(Code,Vanity,Number,Name) `
 			<script type="text/javascript">document.write(TrFon("$0", "$5", "$4", "$2", "$3"));</script>
 ` ?>
-<? if eq <? query telcfg:settings/HotDialEntry/count ?> 0 `
+<? if eq <? multiquerycount telcfg:settings/HotDialEntry/list ?> 0 `
 			<tr class="Dialoglist"><td colspan=6 class="ac fs10">$var:Text10</td></tr>
 ` ?>
 		</table>
-		<p class="mt10 ar"><input type="button" id="uiViewNewButton" onclick="uiDoNew('<? query telcfg:settings/HotDialEntry/newid ?>')" value="<? echo $var:Text9 ?>" class="Pushbutton" style="width:180px" disabled></p>
+		<p class="mt10 ar"><input type="button" id="uiViewNewButton" onclick="uiDoNew('<? query telcfg:settings/HotDialEntry/newid ?>')" value="<? echo $var:Text9 ?>" class="Pushbutton" style="width:180px"></p>
 		<? include ../html/$var:lang/home/error.html ?>
 	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
--- usr/www/all/html/de/fon/fonbuch.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/fonbuch.inc	2007-07-26 15:15:54.000000000 +0200
@@ -1,6 +1,6 @@
 <? include ../html/$var:lang/global.inc ?>
 <? setvariable var:Text1 'Telefonbuch' ?>
-<? setvariable var:Text2 'Hier können Sie die Rufnummern Ihrer Bekannten angeben. In der Anrufliste werden diese Rufnummern durch den jeweiligen Namen ersetzt.' ?>
+<? setvariable var:Text2 'Hier können Sie die Telefonnummern Ihrer Bekannten angeben. In der Anrufliste werden diese Telefonnummern durch den Namen ersetzt.' ?>
 <? setvariable var:Text4 'Kurzwahl' ?>
 <? setvariable var:Text5 'Vanity' ?>
 <? setvariable var:Text6 'Rufnummer' ?>
--- usr/www/all/html/de/fon/fonbuch.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/fonbuch.js	2007-07-26 15:15:54.000000000 +0200
@@ -21,7 +21,7 @@
 var g_mldDelete = "Wollen Sie diesen Eintrag löschen ?";
 var g_qstDial = "Wollen Sie die Verbindung jetzt herstellen?";
 var g_txtBtn_Delete = "Löschen";
-var g_txtBtn_Change = "Bearbeiten";
+var g_txtBtn_Change = "Ändern";
 var g_txtmld_1 = "Verbindung mit ";
 var g_txtmld_2 = "wird hergestellt...\x0A\x0ANehmen Sie jetzt den Hörer von Telefon ";
 var g_txtmld_3 = " auf.\x0A\x0AUm die Anwahl zu beenden klicken Sie auf Abbrechen.";
@@ -37,7 +37,6 @@
 			jslFormSubmitEx("", "");
 		}
 	}
-	jslEnable("uiViewNewButton");
 }
 function uiDoDelete(nr) {
 	if (!confirm(g_mldDelete)) return;
@@ -50,7 +49,6 @@
 	jslCopyValue("uiPostVanity", "uiPostVanity"+nr);
 	jslCopyValue("uiPostNumber", "uiPostNumber"+nr);
 	jslCopyValue("uiPostName", "uiPostName"+nr);
-	jslSetValue("uiPostPageMaster", "fonbuch");
 	jslSubmitFormEx("", "fonbuch1", "fonbuch");
 }
 function uiDoNew(wahl) {
@@ -59,11 +57,10 @@
 	jslSetValue("uiPostVanity", "");
 	jslSetValue("uiPostNumber", "");
 	jslSetValue("uiPostName", "");
-	jslSetValue("uiPostPageMaster", "fonbuch");
 	jslSubmitFormEx("", "fonbuch1", "fonbuch");
 }
 function GetFreeCode () {
-	var n = <? query telcfg:settings/HotDialEntry/count ?>;
+	var n = <? multiquerycount telcfg:settings/HotDialEntry/list ?>;
 	var i;
 	var c = 0;
 	while (c<99) {
@@ -152,13 +149,6 @@
 			name = jslGetValue("uiPostFon1");
 			if (name.length == 0) name = g_Fon2;
 			break;
-		case "3":
-			name = jslGetValue("uiPostFon2");
-			if (name.length == 0) name = g_Fon3;
-			break;
-		case "50": 	name = g_txtIsdn; break;
-<? repeat [ 1 8 ] `	case "5$0": name = jslGetValue("uiPostIsdnNumber$0"); break;
-` ?>
 	}
 	return name;
 }
--- usr/www/all/html/de/fon/foncalls.frm.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/foncalls.frm	2007-07-26 15:15:54.000000000 +0200
@@ -2,26 +2,14 @@
 <input type="hidden" name="var:showDialing" value="<? echo $var:showDialing ?>" id="uiPostShowDialing" />
 <input type="hidden" name="var:tabFoncalls" value="<? echo $var:tabFoncalls ?>" id="uiPostTab">
 <input type="hidden" name="var:TestPort" value="<? echo $var:TestPort?>" id="uiTestPort">
-<input type="hidden" name="var:kurzwahl" value="" id="uiPostKurzwahl">
-<input type="hidden" name="var:kwCode" value="" id="uiPostCode">
-<input type="hidden" name="var:kwVanity" value="" id="uiPostVanity">
-<input type="hidden" name="var:kwNumber" value="" id="uiPostNumber">
-<input type="hidden" name="var:kwName" value="" id="uiPostName">
 <input type="hidden" name="telcfg:settings/ClearJournal" value="1" id="uiPostClearJournal" disabled>
 <input type="hidden" name="telcfg:settings/UseClickToDial" value="<? query telcfg:settings/UseClickToDial ?>" id="uiPostClickToDial" disabled>
 <input type="hidden" name="telcfg:settings/DialPort" value="<? query telcfg:settings/DialPort ?>" id="uiPostDialPort" disabled>
-<input type="hidden" name="telcfg:settings/UseJournal" value="<? query telcfg:settings/UseJournal ?>" id="uiPostUseJournal">
 <input type="hidden" name="telcfg:command/Dial" value="" id="uiPostDial" disabled>
 <input type="hidden" name="telcfg:command/Hangup" value="" id="uiPostHangup" disabled>
 <? repeat [ 0 2 ] `
 <input type="hidden" name="telcfg:settings/MSN/Port$0/Name" value="<? query telcfg:settings/MSN/Port$0/Name ?>" id="uiPostFon$0" disabled>
 ` ?>
-<? repeat [ 1 8 ] `
-<input type="hidden" name="telcfg:settings/NTHotDialList/Name$0" value="<? query telcfg:settings/NTHotDialList/Name$0 ?>" id="uiPostIsdn$0" disabled>
-<input type="hidden" name="telcfg:settings/NTHotDialList/Number$0" value="<? query telcfg:settings/NTHotDialList/Number$0 ?>" id="uiPostIsdnNumber$0" disabled>
-` ?>
-<? multiquery telcfg:settings/HotDialEntry/list(Code) `<input type="hidden" name="telcfg:settings/$1/Code" value="$2" id="uiPostCode$0" disabled>
-` ?>
 </form>
 <form method="GET" action="../cgi-bin/webcm" target="_self" id="uiPostExport">
 <input type="hidden" name="getpage" value="../html/<? echo $var:lang ?>/<? echo $var:Text23 ?>">
--- usr/www/all/html/de/fon/foncalls.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/foncalls.html	2007-07-26 15:15:54.000000000 +0200
@@ -1,7 +1,7 @@
 <? include ../html/$var:lang/fon/foncalls.inc ?>
 <div id="content">
  	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo '$var:Text1' ?>
+		<? echo '$var:Text25' ?>
 	</div></div></div></div></div></div>
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 	 	<ul class="tabs">
@@ -9,8 +9,7 @@
 	 		<li><a href="javascript:jslGoTo(jslGetValue('uiPostMenu'),'dial')"><? echo '$var:Text26' ?></a></li>
 	 	</ul>
 		<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-			<p class="mb10"><? echo $var:Text2 ?></p>
-			<p class="ml25 mb10" id="UseJournal" style="display:none"><input type="checkbox" id="uiViewUseJournal">&nbsp;<label for="uiViewUseJournal"><? echo $var:Text27 ?></label></p>
+			<p class="mb5"><? echo $var:Text2 ?></p>
 			<table id="tLegende">
 				<tr>
 					<td><img src="../html/<? echo $var:lang ?>/images/Callout.gif"><? echo $var:Text4 ?></td>
@@ -18,20 +17,19 @@
 					<td><img src="../html/<? echo $var:lang ?>/images/Callinfailed.gif"><? echo $var:Text6 ?></td>
 				</tr>
 			</table>
-			<div class="mt10 mb5 tborder" style="height: 280px; width: 538px; overflow: auto">
+			<div class="mt10 mb5 tborder" style="height: 280px; width: 518px; overflow: auto">
 				<table id="tClient">
 					<tr>
 						<th class="c1"></th>
-						<th class="c3"><nobr><? echo '$var:Text7' ?></nobr></th>
-						<th class="c8"><nobr><? echo '$var:Text24' ?> / <? echo '$var:Text8' ?></nobr></th>
-						<th class="c5"><nobr><? echo '$var:Text9' ?></nobr></th>
-						<th class="c7"><nobr><? echo '$var:Text18' ?></nobr></th>
-						<th class="c6"><nobr><? echo '$var:Text10' ?></nobr></th>
-						<th class="c9">&nbsp;</th>
+						<th class="c3"><nobr><? echo $var:Text7 ?></nobr></th>
+						<th class="c8"><nobr><? echo $var:Text24 ?> / <? echo $var:Text8 ?></nobr></th>
+						<th class="c5"><nobr><? echo $var:Text9 ?></nobr></th>
+						<th class="c7"><nobr><? echo $var:Text18 ?></nobr></th>
+						<th class="c6"><nobr><? echo $var:Text10 ?></nobr></th>
 					</tr>
 					<!-- "<? query telcfg:settings/RefreshJournal ?>" -->
-<? if eq $var:max `` `<? setvariable var:max 9 ?>` ?>
-<? setvariable var:cnt `<? query telcfg:settings/Journal/count ?>` ?> 
+<? if eq $var:max `` `<? setvariable var:max 13 ?>` ?>
+<? setvariable var:cnt `<? multiquerycount telcfg:settings/Journal/list ?>` ?> 
 <? if eq $var:showall 1 `
 <? multiquery telcfg:settings/Journal/list(Type,Date,Number,Port,Duration,Route,RouteType,Name) `
 					<script type="text/javascript">document.write(TrCall("$12", "$13", "$19", "$14", "$15", "$17", "$18", "$16"));</script>
@@ -43,28 +41,22 @@
 ` ?>
 <? if eq $var:cnt 0 `
 					<tr>
-						<td colspan="7" style="font-size: 13px; text-align:center"><? if eq '<? query telcfg:settings/UseJournal ?>' '1' '$var:Text11' '$var:Text28' ?></td>
+						<td colspan="6" style="font-size: 13px; text-align:center">$var:Text11</td>
 					</tr>
 ` ?>
 				</table>
 			</div>
-			<p class="ar">
-				<input type="button" onclick="uiDoExport()" value="<? echo $var:Text19 ?>" class=Pushbutton style="display:none" id="buttonExport">
-				<input type="button" onclick="uiDoClear()" value="<? echo $var:Text16 ?>" class=Pushbutton id="buttonClear">
-				<input type="button" onclick="uiDoRefresh()" value="<? echo $var:Text17 ?>" class=Pushbutton id="buttonRefresh">
 <? if neq $var:showall 1 `
 <? if gt $var:cnt $var:max `
-				<input type="button" value="$var:Text12 $var:cnt $var:Text13" onclick="uiDoShowAll()" />
+			<p class="ar"><input type="button" value="$var:Text12 $var:cnt $var:Text13" onclick="uiDoShowAll()" /></p>
 ` ?>
 ` ?>
-			</p>
 		</div></div></div></div></div></div>
 		<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
-<? if eq '<? query box:settings/expertmode/activated ?>' '1' `
-			<input type="button" onclick="uiDoSave()" value="<? echo '$var:txtApply' ?>" class="Pushbutton" id="buttonSave">
-			<input type="button" onclick="uiDoCancel()" value="<? echo '$var:txtCancel' ?>" class="Pushbutton" id="buttonCancel">
-` ?>
-			<input type="button" onclick="uiDoHelp()" value="<? echo $var:txtHelp ?>" class="Pushbutton" id="buttonHelp">
+			<input type="button" onclick="uiDoExport()" value="<? echo $var:Text19 ?>" class=Pushbutton style="display:none" id="buttonExport">
+			<input type="button" onclick="uiDoClear()" value="<? echo $var:Text16 ?>" class=Pushbutton>
+			<input type="button" onclick="uiDoRefresh()" value="<? echo $var:Text17 ?>" class=Pushbutton>
+			<input type="button" onclick="uiDoHelp()" value="<? echo $var:txtHelp ?>" class="Pushbutton">
 		</div></div></div></div></div></div>
 	</div></div></div></div></div></div></div>
 </div>
--- usr/www/all/html/de/fon/fonlist.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/fonlist.html	2007-07-26 15:15:54.000000000 +0200
@@ -6,12 +6,12 @@
 <? if eq '$var:usePSTN' 1 `
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
  	<ul class="tabs">
- 		<li class="tabs_on"><a href="javascript:uiDoCancel()"><? echo '$var:Text15' ?></a></li>
+ 		<li class="tabs_on"><a href="javascript:uiDoCancel()">Übersicht</a></li>
  		<li><a href="javascript:uiDoMsn()"><? echo '$var:Text12' ?></a></li>
  	</ul>
 ` ?>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p class="mb10"><? echo '$var:Text16' ?></p>
+		<p class="mb10">Hier können Sie einstellen, auf welche Rufnummern die angeschlossenen analogen Telefone reagieren sollen.</p>
 		<table id="tFon" class="tborder">
 			<tr>
 				<th class="c1"><? echo $var:Text3 ?></th>
@@ -23,7 +23,7 @@
 				<td class="c1"><? echo $var:Text6 ?></td>
 				<td class="c2"><? query telcfg:settings/MSN/Port0/Name ?></td>
 				<td class="c3"><script type="text/javascript">document.write(uiNummerDisplay("<? query telcfg:settings/MSN/Port0/MSN0 ?>"));</script></td>
-				<td class="c4" style="text-align: right;"><button type="button" id="uiViewEdit0" onclick="uiEditFon(0)" title="<? echo $var:txtIconBtnEdit ?>" style="width: 30px">
+				<td class="c4" style="text-align: right;"><button type="button" id="uiViewEdit0" onclick="uiEditFon(0)" title="<? echo $var:Text7 ?>" style="width: 30px">
 					<img src="../html/<? echo $var:lang ?>/images/bearbeiten.gif" align="bottom" width="16" height="16" hspace="4">
 				</button></td>
 			</tr>
@@ -31,15 +31,7 @@
 				<td class="c1"><? echo $var:Text8 ?></td>
 				<td class="c2"><? query telcfg:settings/MSN/Port1/Name ?></td>
 				<td class="c3"><script type="text/javascript">document.write(uiNummerDisplay("<? query telcfg:settings/MSN/Port1/MSN0 ?>"));</script></td>
-				<td class="c4" style="text-align: right;"><button type="button" id="uiViewEdit1" onclick="uiEditFon(1)" title="<? echo $var:txtIconBtnEdit ?>" style="width: 30px">
-					<img src="../html/<? echo $var:lang ?>/images/bearbeiten.gif" align="bottom" width="16" height="16" hspace="4">
-				</button></td>
-			</tr>
-			<tr>
-				<td class="c1"><? echo $var:Text10 ?></td>
-				<td class="c2"><? query telcfg:settings/MSN/Port2/Name ?></td>
-				<td class="c3"><script type="text/javascript">document.write(uiNummerDisplay("<? query telcfg:settings/MSN/Port2/MSN0 ?>"));</script></td>
-				<td class="c4" style="text-align: right;"><button type="button" id="uiViewEdit2" onclick="uiEditFon(2)" title="<? echo $var:txtIconBtnEdit ?>" style="width: 30px">
+				<td class="c4" style="text-align: right;"><button type="button" id="uiViewEdit1" onclick="uiEditFon(1)" title="<? echo $var:Text7 ?>" style="width: 30px">
 					<img src="../html/<? echo $var:lang ?>/images/bearbeiten.gif" align="bottom" width="16" height="16" hspace="4">
 				</button></td>
 			</tr>
--- usr/www/all/html/de/fon/fonlist.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/fonlist.inc	2007-07-26 15:15:54.000000000 +0200
@@ -12,8 +12,3 @@
 <? setvariable var:Text12 'Festnetzrufnummern' ?>
 <? setvariable var:Text13 'Geben Sie hier Ihre Festnetzrufnummern an.' ?>
 <? setvariable var:Text14 'Festnetzrufnummern' ?>
-<? setvariable var:Text15 'Übersicht' ?>
-<? setvariable var:Text16 'Hier können Sie einstellen, auf welche Rufnummern die angeschlossenen analogen Telefone reagieren sollen.' ?>
-<? setvariable var:Text17 'Anrufbeantworter ' ?>
-<? setvariable var:Text18 'aktiv' ?>
-<? setvariable var:Text19 'nicht aktiv' ?>
--- usr/www/all/html/de/fon/fonlistisdn.frm.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/fonlistisdn.frm	2007-07-26 15:15:54.000000000 +0200
@@ -1,5 +1,4 @@
 <input type="hidden" name="var:IsdnNr" value="<? echo $var:IsdnNr ?>" id="uiPostIsdnNr">
-<input type="hidden" name="var:parent" value="<? echo $var:parent ?>" id="uiPostParent">
 <? repeat [ 1 8 ] `
 <input type="hidden" name="telcfg:settings/NTHotDialList/Name$0" value="<? query telcfg:settings/NTHotDialList/Name$0 ?>" id="uiPostName$0" disabled>
 <input type="hidden" name="telcfg:settings/NTHotDialList/Number$0" value="<? query telcfg:settings/NTHotDialList/Number$0 ?>" id="uiPostNummer$0" disabled>
--- usr/www/all/html/de/fon/fonlistisdn.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/fonlistisdn.html	2007-07-26 15:15:54.000000000 +0200
@@ -17,10 +17,8 @@
 <? if eq '<? query box:settings/expertmode/activated ?>' '1' `
 		<li class="tabs_on"><a href="javascript:uiDoCancel()"><? echo '$var:Text26' ?></a></li>
 ` ?>
-<? if eq '$var:pagemaster' 'isdn' `
 		<li><a href="javascript:uiDoOptionen()"><? echo '$var:Text27' ?></a></li>
 ` ?>
-` ?>
 	</ul>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<p class="mb10"><? echo $var:Text17 ?></p>
@@ -37,10 +35,10 @@
 				<td class="c1">5$0</td>
 				<td class="c2"><? query telcfg:settings/NTHotDialList/Name$0 ?></td>
 				<td class="c3"><? query telcfg:settings/NTHotDialList/Number$0 ?></td>
-				<td class="c4"><button type="button" id="uiViewEdit0" onclick="uiEditISDN($0)" title="<? echo $var:txtIconBtnEdit ?>" style="width: 30px">
+				<td class="c4"><button type="button" id="uiViewEdit0" onclick="uiEditISDN($0)" title="$var:Text7" style="width: 30px">
 					<img src="../html/<? echo $var:lang ?>/images/bearbeiten.gif" align="bottom" width="16" height="16" hspace="4">
 				</button></td>
-				<td class="c5"><button type="button" id="uiViewDelete0" onclick="uiDeleteISDN($0)" title="<? echo $var:txtIconBtnDelete ?>" style="width: 30px">
+				<td class="c5"><button type="button" id="uiViewDelete0" onclick="uiDeleteISDN($0)" title="$var:Text31" style="width: 30px">
 					<img src="../html/<? echo $var:lang ?>/images/loeschen.gif" align="bottom" width="16" height="16" hspace="4">
 				</button></td>
 			</tr>
--- usr/www/all/html/de/fon/fonlistisdn.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/fonlistisdn.js	2007-07-26 15:15:54.000000000 +0200
@@ -40,10 +40,10 @@
 	jslGoTo("", "");
 }
 function uiDoIsdn() {
-	jslGoTo("fon", jslGetValue("uiPostPageMaster"));
+	jslGoTo("fon", "isdn");
 }
 function uiDoMsn() {
-//	jslSetValue("uiPostPageMaster", "isdn");
+	jslSetValue("uiPostPageMaster", "isdn");
 	jslGoTo("fon", "isdnmsn");
 }
 function uiDoOptionen() {
@@ -56,7 +56,7 @@
 	jslGoTo("fon", "dectmsn");
 }
 function uiEditISDN(nr) {
-	jslCopyValue("uiPostParent", "uiPostPageName");
+	jslCopyValue("uiPostPageMaster", "uiPostPageName");
 	jslSetValue("uiPostIsdnNr", nr);
 	jslSubmitFormEx("fon", "fon1isdn", jslGetValue("uiPostPageName"));
 }
@@ -69,7 +69,7 @@
 	jslSubmitFormEx("fon", "", "");
 }
 function uiNewISDN() {
-	jslCopyValue("uiPostParent", "uiPostPageName");
+	jslCopyValue("uiPostPageMaster", "uiPostPageName");
 	jslSetValue("uiPostIsdnNr", g_New);
 	jslSubmitFormEx("fon", "fon1isdn", jslGetValue("uiPostPageName"));
 }
--- usr/www/all/html/de/fon/isdn.frm.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/isdn.frm	2007-07-26 15:15:54.000000000 +0200
@@ -1,7 +1,3 @@
-<input type="hidden" name="var:FonNr" value="<? echo $var:FonNr ?>" id="uiPostFonNr">
-<input type="hidden" name="var:IsdnNr" value="<? echo $var:IsdnNr ?>" id="uiPostIsdnNr">
-<input type="hidden" name="var:parent" value="<? echo $var:parent ?>" id="uiPostParent">
-<input type="hidden" name="var:ShowIsdnDefault" value="<? echo $var:ShowIsdnDefault ?>" id="uiShowIsdnDefault">
 <input type="hidden" name="telcfg:settings/MSN/POTS" value="<? query telcfg:settings/MSN/POTS ?>" id="uiPostPots">
 <input type="hidden" name="telcfg:settings/MSN/NTDefault" value="<? query telcfg:settings/MSN/NTDefault ?>" id="uiPostNTDefault">
 <input type="hidden" name="telcfg:settings/MSN/MSN0" value="<? query telcfg:settings/MSN/MSN0 ?>" id="uiPostMsn0" disabled>
@@ -17,13 +13,3 @@
 <? multiquery sip:settings/sip/list(displayname) '
 <input type="hidden" name="sip:settings/$1/displayname" value="$2" id="uiPost$1" disabled>
 ' ?>
-<input type="hidden" name="telcfg:settings/MSN/Port3/BusyOnBusy" value="<? query telcfg:settings/MSN/Port3/BusyOnBusy ?>" id="uiPostBusy">
-<input type="hidden" name="telcfg:settings/MSN/Port3/CallWaitingProt" value="<? query telcfg:settings/MSN/Port3/CallWaitingProt ?>" id="uiPostWaiting">
-<input type="hidden" name="telcfg:settings/MSN/Port3/NoRingWithNightSetting" value="<? query telcfg:settings/MSN/Port3/NoRingWithNightSetting?>" id="uiPostNoRingNS">
-<input type="hidden" name="telcfg:settings/MSN/Port3/RingAllowed" value="<? query telcfg:settings/MSN/Port3/RingAllowed ?>" id="uiPostRingAllowed0">
-<input type="hidden" name="telcfg:settings/MSN/Port3/NoRingTime" value="<? query telcfg:settings/MSN/Port3/NoRingTime?>" id="uiPostNoRingTime0">
-<input type="hidden" name="telcfg:settings/MSN/Port3/COLR" value="<? query telcfg:settings/MSN/Port3/COLR?>" id="uiPostColr">
-<input type="hidden" name="telcfg:settings/MSN/Port3/MWI_Voice" value="<? query telcfg:settings/MSN/Port3/MWI_Voice?>" id="uiPostMwiVoice">
-<input type="hidden" name="telcfg:settings/MSN/Port3/MWI_Fax" value="<? query telcfg:settings/MSN/Port3/MWI_Fax?>" id="uiPostMwiFax">
-<input type="hidden" name="telcfg:settings/MSN/Port3/MWI_Mail" value="<? query telcfg:settings/MSN/Port3/MWI_Mail?>" id="uiPostMwiMail">
-<input type="hidden" name="telcfg:settings/MSN/Port3/MWI_Once" value="<? query telcfg:settings/MSN/Port3/MWI_Once ?>" id="uiPostMwiOnce">
--- usr/www/all/html/de/fon/isdn.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/isdn.html	2007-07-26 15:15:54.000000000 +0200
@@ -5,20 +5,13 @@
 	</div></div></div></div></div></div>
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 	<ul class="tabs">
-<? if eq '$var:pagemaster' 'fondevices' `
-<? if eq '$var:ShowIsdnDefault' '0' `
-		<li><a href="javascript:uiDoEditIsdn()"><? echo '$var:Text24' ?></a></li>
-` ?>
-` ?>
-		<li class="tabs_on"><a href="javascript:uiDoRefresh()"><? echo $var:Text18 ?></a></li>
-<? if neq '$var:pagemaster' 'fondevices' `
+ 		<li class="tabs_on"><a href="javascript:uiDoCancel()"><? echo $var:Text18 ?></a></li>
 <? if eq '$var:usePSTN' 1 `
 		<li><a href="javascript:uiDoMsn()"><? echo '$var:Text19' ?></a></li>
 ` ?>
 <? if eq '<? query box:settings/expertmode/activated ?>' '1' `
 		<li><a href="javascript:uiDoListIsdn()"><? echo '$var:Text20' ?></a></li>
 ` ?>
-` ?>
 		<li><a href="javascript:uiDoOptionen()"><? echo $var:Text21 ?></a></li>
 	</ul>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
@@ -29,58 +22,17 @@
 		</p>
 		<p class="mb10"><? echo $var:Text5 ?></p>
 		<p class="Left25 mb5"><? echo $var:Text6 ?></p>
-		<table id="t1" class="Left50 tborder mt5" style="width: 300px">
-			<tr ><th class="c2"><b><? echo $var:Text25 ?></b></th><th class="c1"><b><? echo $var:Text26 ?></b></th></tr>
+		<table id="t1" class="Left50 tborder" style="width: 300px">
 <? multiquery sip:settings/sip/list(displayname) `
-			<tr id="uiSip$0" style="display:none"><td class="c2">&nbsp;$2</td><td class="c1">$var:Text16</td></tr>
+			<tr id="uiSip$0" style="display:none"><td class="c1">$var:Text16</td><td class="c2">$2</td></tr>
 ` ?>
-<? if eq '$var:usePSTN' 1 `
 <? repeat [ 0 9 ] `
-			<tr id="uiMsn$10" style="display:none"><td class="c2">&nbsp;<? query telcfg:settings/MSN/MSN$10 ?></td><td class="c1">$var:Text7</td></tr> 
-` ?>
-			<tr id="uiPots" style="display:none"><td class="c2">&nbsp;<? query telcfg:settings/MSN/POTS ?></td><td class="c1"><? echo $var:Text7 ?></td></tr>
+			<tr id="uiMsn$0" style="display:none"><td class="c1">$var:Text7</td><td class="c2"><? query telcfg:settings/MSN/MSN$0 ?></td></tr> 
 ` ?>
+			<tr id="uiPots" style="display:none"><td class="c1"><? echo $var:Text7 ?></td><td class="c2"><? query telcfg:settings/MSN/POTS ?></td></tr>
 			<tr id="uiNichts" style="display:none"><td colspan=2 class="ac"><? echo $var:Text17 ?></td></tr>
 		</table>
-<? if eq '<? query box:settings/expertmode/activated ?>' '1' `
-		<p class="mb5">&nbsp;</p>
-` ?>
-	</div></div></div></div></div></div>
-<? if eq '<? query box:settings/expertmode/activated ?>' '1' `
-	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p class="mb5"><b><? echo '$var:Text30' ?></b></p>
-		<p class="mb5"><? echo '$var:Text31' ?></p>
-		<table id="tMerkmale">
-			<tr>
-				<td class="c3"><input type="checkbox" id="uiViewBusy" onclick="OnClickBusy()"></td>
-				<td class="c4"><label for="uiViewBusy"><? echo '$var:Text32' ?></label><br><? echo '$var:Text33' ?></td>
-			</tr>
-			<tr>
-				<td class="c3"></td>
-				<td class="c4"><input type="checkbox" id="uiViewBusyDelayed">&nbsp;<label for="uiViewBusyDelayed"><? echo '$var:Text36' ?></label></td>
-			</tr>
-<? if eq '$var:usePSTN' 1 `
-			<tr>
-				<td class="c3"><input type="checkbox" id="uiViewColr"></td>
-				<td class="c4"><label for="uiViewColr"><? echo '$var:Text34' ?></label><br><? echo '$var:Text35' ?></td>
-			</tr>
-` ?>
-			<tr>
-				<td class="c3"><input type="checkbox" id="uiViewMwi" onclick="OnClickMwi()"></td>
-				<td class="c4">
-					<p class="mb5"><label for="uiViewMwiVoice"><? echo '$var:Text38' ?></label><br><? echo '$var:Text39' ?></p>
-					<p><? echo $var:Text44 ?></p>
-					<p class="ml25"><input type="radio" name="MWIOnce" id="uiViewEinmal" onclick="OnOnce(0)">&nbsp;<label for="uiViewEinmal"><? echo '$var:Text46' ?></label></p>
-					<p class="ml25"><input type="radio" name="MWIOnce" id="uiViewImmer" onclick="OnOnce(1)">&nbsp;<label for="uiViewImmer"><? echo '$var:Text47' ?></label></p>
-					<p><? echo $var:Text45 ?></p>
-					<p class="ml25"><input type="checkbox" id="uiViewMwiVoice">&nbsp;<label for="uiViewMwiVoice"><? echo '$var:Text41' ?></p>
-					<p class="ml25"><input type="checkbox" id="uiViewMwiMail">&nbsp;<label for="uiViewMwiMail"><? echo '$var:Text43' ?></p>
-					<p class="ml25"><input type="checkbox" id="uiViewMwiFax">&nbsp;<label for="uiViewMwiFax"><? echo '$var:Text42' ?></p>
-				</td>
-			</tr>
-		</table>
 	</div></div></div></div></div></div>
-` ?>
 	<? include ../html/$var:lang/home/rbb_applycancel.html ?>
 	</div></div></div></div></div></div></div>
 </div>
--- usr/www/all/html/de/fon/isdn.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/isdn.inc	2007-07-26 15:15:54.000000000 +0200
@@ -7,35 +7,9 @@
 <? setvariable var:Text7 'Festnetz:' ?>
 <? setvariable var:Text16 'Internet:' ?>
 <? setvariable var:Text17 'Keine Rufnummern eingerichtet' ?>
-<? if eq '$var:pagemaster' 'fondevices' `
-<? setvariable var:Text18 'FON S0' ?>
-<? setvariable var:Text24 'Rufnummer des Endgerätes' ?>
-` `
 <? setvariable var:Text18 'Übersicht' ?>
-<? setvariable var:Text24 'Interne Nummer' ?>
-` ?>
 <? setvariable var:Text19 'Festnetzrufnummern' ?>
 <? setvariable var:Text20 'Interne Nummern' ?>
-<? setvariable var:Text21 'Klingelsperre (FON S0)' ?>
+<? setvariable var:Text21 'Leistungsmerkmale' ?>
 <? setvariable var:Text22 'Sie können die Telefonbucheinträge an ein Mobilteil senden.' ?>
 <? setvariable var:Text23 'Telefonbuch senden' ?>
-<? setvariable var:Text24 'Rufnummer des Endgerätes' ?>
-<? setvariable var:Text25 'Rufnummer' ?>
-<? setvariable var:Text26 'Verbindung via' ?>
-<? setvariable var:Text30 'Weitere Leistungsmerkmale für ISDN-Endgeräte' ?>
-<? setvariable var:Text31 'Aktivieren Sie die gewünschten Komfort- und Leistungsmerkmale' ?>
-<? setvariable var:Text32 'Ruf abweisen bei besetzt (Busy on busy).' ?>
-<? setvariable var:Text33 'Einkommende Rufe werden abgelehnt, wenn mit der angerufenen MSN bereits ein Gespräch geführt wird.' ?>
-<? setvariable var:Text34 'Eigene Rufnummer unterdrücken (COLR).' ?>
-<? setvariable var:Text35 'Die eigene Rufnummer erscheint nicht im Display des Anrufenden.' ?>
-<? setvariable var:Text36 'Ruf abweisen bei besetzt durch das ISDN-Endgerät bestimmen.' ?>
-<? setvariable var:Text38 'Neue Nachrichten am Telefon signalisieren (MWI)' ?>
-<? setvariable var:Text39 'Die FRITZ!Box informiert Sie über das Telefon, ob sich neue Nachrichten in der Mailbox Ihres Telefonie-Anbieters befinden. Bei neuen Nachrichten finden Sie einen Eintrag in der Anrufliste Ihres Telefons.' ?>
-<? setvariable var:Text40 'Die Benachrichtigung erfolgt durch ein kurzes Klingeln des Telefons an dieser Nebenstelle. Welche Nachrichten sollen berücksichtigt werden?' ?>
-<? setvariable var:Text41 'neue Sprachnachricht' ?>
-<? setvariable var:Text42 'neues Fax' ?>
-<? setvariable var:Text43 'neue E-Mail' ?>
-<? setvariable var:Text44 'Informationen senden' ?>
-<? setvariable var:Text45 'für' ?>
-<? setvariable var:Text46 'nur bei der ersten neuen Nachricht' ?>
-<? setvariable var:Text47 'bei jeder neuen Nachricht' ?>
--- usr/www/all/html/de/fon/isdn.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/isdn.js	2007-07-26 15:15:54.000000000 +0200
@@ -3,17 +3,13 @@
 <!--
 #content {width: 580px; margin: auto;}
 .pFett {font-weight: bold; margin-bottom: 10px;}
-.c1 {width: 150px; margin-left: 5px; padding: 2px 5px;}
-.c2 { margin-left: 5px; padding: 2px 0px;}
+.c1 {width: 60px; padding: 1px 5px;}
+.c2 {padding: 1px 0px;}
 .Left20 {margin-left: 20px;}
 .Left25 {margin-left: 25px;}
 .Left50 {margin-left: 50px;}
 .ar {text-align: right;}
 .ac {text-align: center;}
-#tMerkmale .c3 {padding: 4px 5px; text-align: center; vertical-align: top;}
-#tMerkmale .c4 {padding: 5px 5px;}
-.ml25 {margin-left: 25px;}
-.mt10 {margin-top: 10px;}
 -->
 </style>
 <script type="text/javascript">
@@ -25,7 +21,6 @@
 <? multiquery sip:settings/sip/list '
 var g_$1;
 ' ?>
-<? if eq '$var:usePSTN' 1 `
 var g_msn0;
 var g_msn1;
 var g_msn2;
@@ -36,12 +31,10 @@
 var g_msn7;
 var g_msn8;
 var g_msn9;
-` ?>
 function uiDoOnLoad() {
 <? multiquery sip:settings/sip/list '
 	g_$1 = jslGetValue("uiPost$1");
 ' ?>
-<? if eq '$var:usePSTN' 1 `
 	g_msn0 = jslGetValue("uiPostMsn0");
 	g_msn1 = jslGetValue("uiPostMsn1");
 	g_msn2 = jslGetValue("uiPostMsn2");
@@ -52,66 +45,25 @@
 	g_msn7 = jslGetValue("uiPostMsn7");
 	g_msn8 = jslGetValue("uiPostMsn8");
 	g_msn9 = jslGetValue("uiPostMsn9");
-` ?>
 	fillId("uiViewNr", jslGetValue("uiPostNTDefault"));
 	var bFound = false;
 <? multiquery sip:settings/sip/list(displayname) `
 	if (valIsZahlVorhanden("$2")) {jslDisplay("uiSip$0", true); bFound = true;}
 ` ?>
-<? if eq '$var:usePSTN' 1 `
 	for (var i=0; i<10; i++) {
 		if (jslGetValue("uiPostMsn"+i) != "") {jslDisplay("uiMsn"+i, true); bFound = true;}
 	}
 	if (jslGetValue("uiPostPots") != "") {jslDisplay("uiPots", true); bFound = true;}
-` ?>
 	if (!bFound) jslDisplay("uiNichts", true);
-	jslZebrastreifen("t1","#FFFFFF","#F8F8F8");
-	if (g_expertMode == "1") {
-		jslSetChecked("uiViewBusy", jslGetValue("uiPostBusy") == "1");
-<? if eq '$var:usePSTN' 1 ` 
-		jslSetChecked("uiViewColr", jslGetValue("uiPostColr") == "1");
-` ?> 
-		OnOnce(jslGetValue("uiPostMwiOnce") == "1" ? 0:1);
-		SetChecked("uiPostMwiVoice", "uiViewMwiVoice");
-		SetChecked("uiPostMwiFax", "uiViewMwiFax");
-		SetChecked("uiPostMwiMail", "uiViewMwiMail");
-		jslSetChecked("uiViewMwi",jslGetChecked("uiViewMwiVoice") || jslGetChecked("uiViewMwiFax") || jslGetChecked("uiViewMwiMail"));
-		OnClickMwi();
-		jslSetChecked("uiViewBusyDelayed", jslGetValue("uiPostWaiting") == "0");
-		OnClickBusy();
-	}
+	jslZebrastreifen("t1", "#F8F8F8", "#FFFFFF");
 }
 function uiDoSave() {
 	var nr = jslGetValue("uiViewNr");
 	jslSetValue("uiPostNTDefault", nr == "Leer" ? "":nr);
-	jslSetValue("uiPostBusy", jslGetChecked("uiViewBusy") ? "1" :"0");
-	if (jslGetChecked("uiViewBusy")) {
-		jslSetValue("uiPostWaiting", jslGetChecked("uiViewBusyDelayed") ? "0" :"1");
-	}
-<? if eq '$var:usePSTN' 1 ` 
-	jslSetValue("uiPostColr", jslGetChecked("uiViewColr") ? "1": "0");
-` ?>
-	jslSetValue("uiPostMwiOnce", jslGetChecked("uiViewEinmal") ? 1:0);
-	if (jslGetChecked("uiViewMwi")) {
-		GetChecked("uiPostMwiVoice", "uiViewMwiVoice");
-		GetChecked("uiPostMwiFax", "uiViewMwiFax");
-		GetChecked("uiPostMwiMail", "uiViewMwiMail");
-	} else 	{
-		jslSetValue("uiPostMwiVoice","0");
-		jslSetValue("uiPostMwiFax","0");
-		jslSetValue("uiPostMwiMail","0");
-	}
 	jslFormSubmitEx("fon", "isdn");
 }
-function uiDoRefresh() {
-	jslGoTo("", "");
-}
 function uiDoCancel() {
-<? if eq '$var:pagemaster' 'fondevices' `
-	jslGoTo("fon", jslGetValue("uiPostPageMaster"));
-` `
 	jslGoTo("fon", "isdn");
-` ?>
 }
 function uiDoHelp() {
 	jslPopHelp("hilfe_fon_isdn");
@@ -123,9 +75,6 @@
 function uiDoOptionen() {
 	jslGoTo("fon", "isdnoptionen");
 }
-function uiDoEditIsdn() {
-	jslGoTo("fon", "fon1isdn");
-}
 function uiDoListIsdn() {
 	jslGoTo("fon", "fonlistisdn");
 }
@@ -160,25 +109,4 @@
 	var eintrag = new Option(text, val, false, false);
 	element.options[element.length]=eintrag;
 }
-function SetChecked (postid, viewid) {
-	jslSetChecked(viewid, jslGetValue(postid) != "0");
-}
-function GetChecked (postid, viewid) {
-	jslSetValue(postid, jslGetChecked(viewid) ? "1":"0");
-}
-function OnOnce(n) {
-	jslSetChecked("uiViewEinmal", n==0);
-	jslSetChecked("uiViewImmer", n==1);
-}
-function OnClickMwi() {
-	var on = jslGetChecked("uiViewMwi");
-	jslSetEnabled("uiViewEinmal",on);
-	jslSetEnabled("uiViewImmer",on);
-	jslSetEnabled("uiViewMwiVoice",on);
-	jslSetEnabled("uiViewMwiFax",on);
-	jslSetEnabled("uiViewMwiMail",on);
-}
-function OnClickBusy() {
-	jslSetEnabled("uiViewBusyDelayed", jslGetChecked("uiViewBusy"));
-}
 </script>
--- usr/www/all/html/de/fon/isdnoptionen.frm.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/isdnoptionen.frm	2007-07-26 15:15:54.000000000 +0200
@@ -1,7 +1,3 @@
-<input type="hidden" name="var:FonNr" value="<? echo $var:FonNr ?>" id="uiPostFonNr">
-<input type="hidden" name="var:IsdnNr" value="<? echo $var:IsdnNr ?>" id="uiPostIsdnNr">
-<input type="hidden" name="var:ShowIsdnDefault" value="<? echo $var:ShowIsdnDefault ?>" id="uiShowIsdnDefault">
-<input type="hidden" name="var:parent" value="<? echo $var:parent ?>" id="uiPostParent">
 <input type="hidden" name="telcfg:settings/MSN/Port3/BusyOnBusy" value="<? query telcfg:settings/MSN/Port3/BusyOnBusy ?>" id="uiPostBusy">
 <input type="hidden" name="telcfg:settings/MSN/Port3/CallWaitingProt" value="<? query telcfg:settings/MSN/Port3/CallWaitingProt ?>" id="uiPostWaiting">
 <input type="hidden" name="telcfg:settings/MSN/Port3/NoRingWithNightSetting" value="<? query telcfg:settings/MSN/Port3/NoRingWithNightSetting?>" id="uiPostNoRingNS">
--- usr/www/all/html/de/fon/isdnoptionen.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/isdnoptionen.html	2007-07-26 15:15:54.000000000 +0200
@@ -1,27 +1,52 @@
 <? include ../html/$var:lang/fon/isdnoptionen.inc ?>
 <div id="content">
 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo '$var:Text48' ?>
+		ISDN-Endgeräte
 	</div></div></div></div></div></div>
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 	<ul class="tabs">
-<? if eq '$var:pagemaster' 'fondevices' `
-<? if eq '$var:ShowIsdnDefault' '0' `
-		<li><a href="javascript:uiDoEditIsdn()"><? echo '$var:Text53' ?></a></li>
-` ?>
-` ?>
-		<li><a href="javascript:uiDoIsdn()"><? echo '$var:Text49' ?></a></li>
-<? if neq '$var:pagemaster' 'fondevices' `
+ 		<li><a href="javascript:uiDoIsdn()">Übersicht</a></li>
 <? if eq '$var:usePSTN' 1 `
-		<li><a href="javascript:uiDoMsn()"><? echo '$var:Text50' ?></a></li>
+ 		<li><a href="javascript:uiDoMsn()">Festnetzrufnummern</a></li>
 ` ?>
 <? if eq '<? query box:settings/expertmode/activated ?>' '1' `
-		<li><a href="javascript:uiDoListIsdn()"><? echo '$var:Text51' ?></a></li>
-` ?>
+ 		<li><a href="javascript:uiDoListIsdn()">Interne Nummern</a></li>
 ` ?>
-		<li class="tabs_on"><a href="javascript:uiDoRefresh()"><? echo '$var:Text52' ?></a></li>
+ 		<li class="tabs_on"><a href="javascript:uiDoCancel()">Leistungsmerkmale</a></li>
 	</ul>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<p class="mb5"><? echo $var:Text2 ?></p>
+		<table id="tMerkmale">
+			<tr>
+				<td class="c1"><input type="checkbox" id="uiViewBusy" onclick="OnClickBusy()"></td>
+				<td class="c2"><label for="uiViewBusy"><? echo $var:Text3 ?></label><br><? echo $var:Text4 ?></td>
+			</tr>
+			<tr>
+				<td class="c1"></td>
+				<td class="c2"><input type="checkbox" id="uiViewBusyDelayed">&nbsp;<label for="uiViewBusyDelayed"><? echo $var:Text7 ?></label></td>
+			</tr>
+<? if eq '$var:usePSTN' 1 ` 
+			<tr>
+				<td class="c1"><input type="checkbox" id="uiViewColr"></td>
+				<td class="c2"><label for="uiViewColr"><? echo '$var:Text5' ?></label><br><? echo '$var:Text6' ?></td>
+			</tr>
+` ?> 
+			<tr>
+				<td class="c1"><input type="checkbox" id="uiViewMwi" onclick="OnClickMwi()"></td>
+				<td class="c2">
+					<p class="mb5"><label for="uiViewMwiVoice"><? echo $var:Text38 ?></label><br><? echo $var:Text39 ?></p>
+					<p><? echo $var:Text44 ?></p>
+					<p class="ml25"><input type="radio" name="MWIOnce" id="uiViewEinmal" onclick="OnOnce(0)">&nbsp;<label for="uiViewEinmal"><? echo $var:Text46 ?></label></p>
+					<p class="ml25"><input type="radio" name="MWIOnce" id="uiViewImmer" onclick="OnOnce(1)">&nbsp;<label for="uiViewImmer"><? echo $var:Text47 ?></label></p>
+					<p><? echo $var:Text45 ?></p>
+					<p class="ml25"><input type="checkbox" id="uiViewMwiVoice">&nbsp;<label for="uiViewMwiVoice"><? echo $var:Text41 ?></p>
+					<p class="ml25"><input type="checkbox" id="uiViewMwiMail">&nbsp;<label for="uiViewMwiMail"><? echo $var:Text43 ?></p>
+					<p class="ml25"><input type="checkbox" id="uiViewMwiFax">&nbsp;<label for="uiViewMwiFax"><? echo $var:Text42 ?></p>
+				</td>
+			</tr>
+		</table>
+	</div></div></div></div></div></div>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<p class="mb10"><? echo $var:Text8 ?></p>
 		<div>
 			<p class="mb5"><input type="radio" name="Nachtschaltung" id="uiViewUseNs" onclick="OnNachtschaltung(0)">&nbsp;<label for="uiViewUseNs"><? echo $var:Text9 ?></label></p>
--- usr/www/all/html/de/fon/isdnoptionen.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/isdnoptionen.inc	2007-07-26 15:15:54.000000000 +0200
@@ -1,8 +1,8 @@
 <? include ../html/$var:lang/global.inc ?>
 <? setvariable var:Text1 'Weitere Leistungsmerkmale für ISDN-Telefone' ?>
 <? setvariable var:Text2 'Aktivieren Sie die gewünschten Komfort- und Leistungsmerkmale' ?>
-<? setvariable var:Text3 'Ruf abweisen bei besetzt (busy on busy).' ?>
-<? setvariable var:Text4 'Wenn Sie über die gewählte Rufnummer gerade ein Gespräch führen, dann bekommen weitere Anrufer das Besetzt-Zeichen.' ?>
+<? setvariable var:Text3 'Ruf abweisen bei besetzt (Busy on busy).' ?>
+<? setvariable var:Text4 'Einkommende Rufe werden abgelehnt, wenn mit der angerufenen MSN bereits ein Gespräch geführt wird.' ?>
 <? setvariable var:Text5 'Eigene Rufnummer unterdrücken (COLR).' ?>
 <? setvariable var:Text6 'Die eigene Rufnummer erscheint nicht im Display des Anrufenden.' ?>
 <? setvariable var:Text7 'Ruf abweisen bei besetzt durch das ISDN-Endgerät bestimmen.' ?>
--- usr/www/all/html/de/fon/isdnoptionen.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/isdnoptionen.js	2007-07-26 15:15:54.000000000 +0200
@@ -16,6 +16,16 @@
 var g_mldMinuten 	= "Geben Sie bitte bei den Minuten einen gültigen Wert ein.";
 var g_expertMode = "<? query box:settings/expertmode/activated ?>";
 function uiDoOnLoad() {
+	jslSetChecked("uiViewBusy", jslGetValue("uiPostBusy") == "1");
+<? if eq '$var:usePSTN' 1 ` 
+	jslSetChecked("uiViewColr", jslGetValue("uiPostColr") == "1");
+` ?> 
+	OnOnce(jslGetValue("uiPostMwiOnce") == "1" ? 0:1);
+	SetChecked("uiPostMwiVoice", "uiViewMwiVoice");
+	SetChecked("uiPostMwiFax", "uiViewMwiFax");
+	SetChecked("uiPostMwiMail", "uiViewMwiMail");
+	jslSetChecked("uiViewMwi",jslGetChecked("uiViewMwiVoice") || jslGetChecked("uiViewMwiFax") || jslGetChecked("uiViewMwiMail"));
+	OnClickMwi();
 	var KlingelPeriod = jslGetValue("uiPostNoRingTime0");
 	var time1h = "00";
 	var time1m = "00";
@@ -120,8 +130,27 @@
 		}
 	}
 	OnNachtschaltung(jslGetValue("uiPostNoRingNS")=="1" ? 0:1);
+	jslSetChecked("uiViewBusyDelayed", jslGetValue("uiPostWaiting") == "0");
+	OnClickBusy();
 }
 function uiDoSave() {
+	jslSetValue("uiPostBusy", jslGetChecked("uiViewBusy") ? "1" :"0");
+	if (jslGetChecked("uiViewBusy")) {
+		jslSetValue("uiPostWaiting", jslGetChecked("uiViewBusyDelayed") ? "0" :"1");
+	}
+<? if eq '$var:usePSTN' 1 ` 
+	jslSetValue("uiPostColr", jslGetChecked("uiViewColr") ? "1": "0");
+` ?> 
+	jslSetValue("uiPostMwiOnce", jslGetChecked("uiViewEinmal") ? 1:0);
+	if (jslGetChecked("uiViewMwi")) {
+		GetChecked("uiPostMwiVoice", "uiViewMwiVoice");
+		GetChecked("uiPostMwiFax", "uiViewMwiFax");
+		GetChecked("uiPostMwiMail", "uiViewMwiMail");
+	} else 	{
+		jslSetValue("uiPostMwiVoice","0");
+		jslSetValue("uiPostMwiFax","0");
+		jslSetValue("uiPostMwiMail","0");
+	}
 	if (jslGetChecked("uiViewUseNs")) {
 		jslSetValue("uiPostNoRingNS", "1");
 		if (jslGetValue("uiPostUseNacht") == "1" && jslGetValue("uiPostNachtFon") == "1") {
@@ -130,6 +159,7 @@
 			var startm = 0;
 			var endh = 0;
 			var endm = 0;
+			
 			var str = jslGetValue("uiPostNachtStart");
 			var n1 = str.indexOf(":");
 			if (n1 != -1) {
@@ -142,6 +172,7 @@
 				endh = Number(str.slice(0, n1));
 				endm = Number(str.slice(n1+1));
 			}
+			
 			jslSetValue("uiPostRingAllowed0", "1");	// Klingeln immer erlaubt, ausser Zeitraum
 			if (Number(starth)==0 && Number(startm)==0 && Number(endh)==0 && Number(endm)==0) {
 				jslSetValue("uiPostNoRingTime0"+n, "");
@@ -155,6 +186,7 @@
 		}
 	} else {
 		jslSetValue("uiPostNoRingNS", "0");
+		
 		var starth = jslGetValue("uiViewStartHH");
 		if (!valIsZahlVorhanden(starth)) {alert(g_mldStunden); return;}
 		if (Number(starth)<0 || Number(starth)>23) {alert(g_mldStunden); return;}
@@ -187,24 +219,10 @@
 			}
 		}
 	}
-<? if eq '$var:pagemaster' 'fondevices' `
-	jslFormSubmitEx("fon", jslGetValue("uiPostPageMaster"));
-` `
 	jslFormSubmitEx("fon", "isdnoptionen");
-` ?>
-}
-function uiDoEditIsdn() {
-	jslGoTo("fon", "fon1isdn");
-}
-function uiDoRefresh() {
-	jslGoTo("", "");
 }
 function uiDoCancel() {
-<? if eq '$var:pagemaster' 'fondevices' `
-	jslGoTo("fon", jslGetValue("uiPostPageMaster"));
-` `
 	jslGoTo("fon", "isdnoptionen");
-` ?>
 }
 function uiDoIsdn() {
 	jslGoTo("fon", "isdn");
@@ -262,4 +280,15 @@
 	if (n>9) return n.toString();
 	return "0"+n.toString();
 }
+function OnClickMwi() {
+	var on = jslGetChecked("uiViewMwi");
+	jslSetEnabled("uiViewEinmal",on);
+	jslSetEnabled("uiViewImmer",on);
+	jslSetEnabled("uiViewMwiVoice",on);
+	jslSetEnabled("uiViewMwiFax",on);
+	jslSetEnabled("uiViewMwiMail",on);
+}
+function OnClickBusy() {
+	jslSetEnabled("uiViewBusyDelayed", jslGetChecked("uiViewBusy"));
+}
 </script>
--- usr/www/all/html/de/fon/klingelsperre.frm.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/klingelsperre.frm	2007-07-26 15:15:54.000000000 +0200
@@ -1,5 +1,4 @@
 <input type="hidden" name="var:FonNr" value="<? echo $var:FonNr ?>">
-<input type="hidden" name="var:FonDeviceKind" value="<? echo $var:FonDeviceKind ?>">
 <input type="hidden" name="telcfg:settings/MSN/Port<? echo $var:FonNr ?>/NoRingWithNightSetting" value="<? query telcfg:settings/MSN/Port<? echo $var:FonNr ?>/NoRingWithNightSetting?>" id="uiPostNoRingNS">
 <input type="hidden" name="telcfg:settings/MSN/Port<? echo $var:FonNr ?>/RingAllowed" value="<? query telcfg:settings/MSN/Port<? echo $var:FonNr ?>/RingAllowed ?>" id="uiPostRingAllowed0">
 <input type="hidden" name="telcfg:settings/MSN/Port<? echo $var:FonNr ?>/NoRingTime" value="<? query telcfg:settings/MSN/Port<? echo $var:FonNr ?>/NoRingTime?>" id="uiPostNoRingTime0">
--- usr/www/all/html/de/fon/klingelsperre.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/klingelsperre.html	2007-07-26 15:15:54.000000000 +0200
@@ -5,14 +5,11 @@
 	</div></div></div></div></div></div>
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 		<ul class="tabs">
-			<li><a href="javascript:uiDoFon1()"><? echo '$var:FonDeviceKind' ?></a></li>
+	 		<li><a href="javascript:uiDoFon1()">Nebenstelle</a></li>
 			<li class="tabs_on"><a href="javascript:uiDoKlingelsperre()"><? echo $var:Text24 ?></a></li>
-<? if eq <? query box:settings/expertmode/activated ?> 1 `
-			<li ><a href="javascript:uiDoMerkmale()"><? echo '$var:Text37' ?></a></li>
-` ?>
+	 		<li ><a href="javascript:uiDoMerkmale()">Merkmale der Nebenstelle</a></li>
 		</ul>
 		<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-			<p class="mb10"><? echo $var:Text38 ?></p>
 			<p class="mb5"><input type="radio" name="Nachtschaltung" id="uiViewUseNs" onclick="OnNachtschaltung(0)">&nbsp;<label for="uiViewUseNs"><? echo $var:Text25 ?></label></p>
 			<p class="mb5"><input type="radio" name="Nachtschaltung" id="uiViewMyLocking" onclick="OnNachtschaltung(1)">&nbsp;<label for="uiViewMyLocking"><? echo $var:Text26 ?></label></p>
 			<div <? if eq <? query box:settings/expertmode/activated ?> 1 `class="ml25"` ?>>
--- usr/www/all/html/de/fon/klingelsperre.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/klingelsperre.inc	2007-07-26 15:15:54.000000000 +0200
@@ -6,15 +6,8 @@
 <? setvariable var:Text28 'immer gesperrt' ?>
 <? setvariable var:Text29 'mit Ausnahme:' ?>
 <? setvariable var:Text30 'täglich' ?>
-<? setvariable var:Text31 'samstags und sonntags' ?>
-<? setvariable var:Text32 'montags bis freitags' ?>
+<? setvariable var:Text31 'an Samstag und Sonntag' ?>
+<? setvariable var:Text32 'von Montag bis Freitag' ?>
 <? setvariable var:Text33 'von' ?>
 <? setvariable var:Text34 ':' ?>
 <? setvariable var:Text35 'bis' ?>
-<? setvariable var:Text36 'Nebenstelle' ?>
-<? setvariable var:Text37 'Merkmale des Telefoniegerätes' ?>
-<? setvariable var:Text38 'Hier können Sie einstellen, ob und wann das angeschlossene Telefoniegerät nicht mehr klingeln soll (Ruhe vor Anrufen).' ?>
-<? setvariable var:jstr0 `Geben Sie bitte bei den Stunden einen gültigen Wert ein.` ?>
-<? setvariable var:jstr1 `Geben Sie bitte bei den Minuten einen gültigen Wert ein.` ?>
-<? setvariable var:jstr2 `Nebenstelle FON ` ?>
-<? setvariable var:jstr2 `Telefoniegerät am Anschluss ` ?>
--- usr/www/all/html/de/fon/klingelsperre.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/klingelsperre.js	2007-07-26 15:15:54.000000000 +0200
@@ -1,5 +1,4 @@
 <!--		../fon/klingelsperre.js		-->
-<? include ../html/$var:lang/fon/klingelsperre.inc ?>
 <style type="text/css">
 <!--
 #content {width: 560px; margin: auto;}
@@ -13,10 +12,10 @@
 <script type="text/javascript">
 <? include ../html/$var:lang/js/jsl.js ?>
 <? include ../html/$var:lang/js/val.js ?>
-var g_mldStunden	= "<? print $var:jstr0 ?>";
-var g_mldMinuten 	= "<? print $var:jstr1 ?>";
+var g_mldStunden	= "Geben Sie bitte bei den Stunden einen gültigen Wert ein.";
+var g_mldMinuten 	= "Geben Sie bitte bei den Minuten einen gültigen Wert ein.";
 var g_expertMode = "<? query box:settings/expertmode/activated ?>";
-var g_txt_Titel 			= "<? print $var:jstr2 ?>";
+var g_txt_Titel 			= "Nebenstelle Fon ";
 function uiDoOnLoad() {
 	var KlingelPeriod = jslGetValue("uiPostNoRingTime0");
 	var time1h = "00";
@@ -132,6 +131,7 @@
 			var startm = 0;
 			var endh = 0;
 			var endm = 0;
+			
 			var str = jslGetValue("uiPostNachtStart");
 			var n1 = str.indexOf(":");
 			if (n1 != -1) {
@@ -144,6 +144,7 @@
 				endh = Number(str.slice(0, n1));
 				endm = Number(str.slice(n1+1));
 			}
+			
 			jslSetValue("uiPostRingAllowed0", "1");	// Klingeln immer erlaubt, ausser Zeitraum
 			if (Number(starth)==0 && Number(startm)==0 && Number(endh)==0 && Number(endm)==0) {
 				jslSetValue("uiPostNoRingTime0"+n, "");
@@ -157,6 +158,7 @@
 		}
 	} else {
 		jslSetValue("uiPostNoRingNS", "0");
+		
 		var starth = jslGetValue("uiViewStartHH");
 		if (!valIsZahlVorhanden(starth)) {alert(g_mldStunden); return;}
 		if (Number(starth)<0 || Number(starth)>23) {alert(g_mldStunden); return;}
@@ -246,6 +248,6 @@
 	return "0"+n.toString();
 }
 function uiTitelDisplay (n) {
-	return g_txt_Titel+ "\"FON " +(Number(n)+1)+ "\"";
+	return g_txt_Titel+(Number(n)+1);
 }
 </script>
--- usr/www/all/html/de/fon/merkmale.frm.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/merkmale.frm	2007-07-26 15:15:54.000000000 +0200
@@ -1,5 +1,4 @@
 <input type="hidden" name="var:FonNr" value="<? echo $var:FonNr ?>">
-<input type="hidden" name="var:FonDeviceKind" value="<? echo $var:FonDeviceKind ?>">
 <input type="hidden" name="telcfg:settings/MSN/Port<? echo $var:FonNr ?>/Fax" value="<? query telcfg:settings/MSN/Port<? echo $var:FonNr ?>/Fax ?>" id="uiPostFax0">
 <input type="hidden" name="telcfg:settings/MSN/Port<? echo $var:FonNr ?>/OutDialing" value="<? query telcfg:settings/MSN/Port<? echo $var:FonNr ?>/OutDialing ?>" id="uiPostOutDialing0"<? if lte $var:AbCount 1 ` disabled` ?>>
 <input type="hidden" name="telcfg:settings/MSN/Port<? echo $var:FonNr ?>/CLIR" value="<? query telcfg:settings/MSN/Port<? echo $var:FonNr ?>/CLIR ?>" id="uiPostClir0">
--- usr/www/all/html/de/fon/merkmale.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/merkmale.html	2007-07-26 15:15:54.000000000 +0200
@@ -5,15 +5,34 @@
 	</div></div></div></div></div></div>
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 	<ul class="tabs">
-		<li><a href="javascript:uiDoFon1()"><? echo '$var:FonDeviceKind' ?></a></li>
-		<li><a href="javascript:uiDoKlingelsperre()"><? echo $var:Text49 ?></a></li>
-<? if eq <? query box:settings/expertmode/activated ?> 1 `
-		<li class="tabs_on"><a href="javascript:uiDoMerkmale()"><? echo '$var:Text50' ?></a></li>
-` ?>
+ 		<li><a href="javascript:uiDoFon1()">Nebenstelle</a></li>
+ 		<li><a href="javascript:uiDoKlingelsperre()">Klingelsperre</a></li>
+ 		<li class="tabs_on"><a href="javascript:uiDoMerkmale()">Merkmale der Nebenstelle</a></li>
 	</ul>
+	<div class="backdialog" <? if lte $var:AbCount 1 `style="display:none"` ?>><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<p class="mb5"><? echo $var:Text2 ?></p>
+		<table class="left20">
+			<tr>
+				<td class="c1"><input type="radio" name="NS1" onclick="OnChangeTyp('Fon')" id="uiViewFon0"></td>
+				<td class="c2"><label for="uiViewFon0"><? echo $var:Text3 ?></label></td>
+			</tr>
+			<tr>
+				<td class="c1"><input type="radio" name="NS1" onclick="OnChangeTyp('AB')" id="uiViewAB0"></td>
+				<td class="c2"><label for="uiViewAB0"><? echo $var:Text4 ?></label><br><? echo $var:Text36 ?></td>
+			</tr>
+			<tr>
+				<td class="c1"><input type="radio" name="NS1" onclick="OnChangeTyp('Fax')" id="uiViewFax0"></td>
+				<td class="c2"><label for="uiViewFax0"><? echo $var:Text5 ?></label></td>
+			</tr>
+		</table>
+	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<p class="mb5"><? echo $var:Text6 ?></p>
 		<table class="left20">
+			<tr <? if lte $var:AbCount 1 `style="display:none"` ?>>
+				<td class="c1"><input type="checkbox" id="uiViewAmt0"></td>
+				<td class="c2"><label for="uiViewAmt0"><? echo $var:Text7 ?></label><br><? echo $var:Text8 ?></td>
+			</tr>
 			<tr>
 				<td class="c1"><input type="checkbox" id="uiViewClir0" onclick="OnClickClir(id)"></td>
 				<td class="c2"><label for="uiViewClir0"><? echo $var:Text9 ?></label><br><? echo $var:Text10 ?></td>
@@ -28,14 +47,14 @@
 					</div>
 				</td>
 			</tr>
-			<tr id="uiShowSchutz0">
-				<td class="c1"><input type="checkbox" id="uiViewAnklopfen"></td>
-				<td class="c2"><label for="uiViewAnklopfen"><? echo $var:Text17 ?></label><br><? echo $var:Text18 ?></td>
-			</tr>
 			<tr <? if lte $var:AbCount 1 `style="display:none"` ?>>
 				<td class="c1"><input type="checkbox" id="uiViewBusy0"></td>
 				<td class="c2"><label for="uiViewBusy0"><? echo $var:Text15 ?></label><br><? echo $var:Text16 ?></td>
 			</tr>
+			<tr>
+				<td class="c1"><input type="checkbox" id="uiViewSchutz0"></td>
+				<td class="c2"><label for="uiViewSchutz0"><? echo $var:Text17 ?></label><br><? echo $var:Text18 ?></td>
+			</tr>
 <? if eq '$var:usePSTN' 1 `
 			<tr>
 				<td class="c1"><input type="checkbox" id="uiViewColr0"></td>
--- usr/www/all/html/de/fon/merkmale.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/merkmale.inc	2007-07-26 15:15:54.000000000 +0200
@@ -13,10 +13,10 @@
 <? setvariable var:Text12 'FRITZ!Box überträgt die Rufnummer des Anrufers an das angeschlossene Telefon.' ?>
 <? setvariable var:Text13 'erweiterter Modus' ?>
 <? setvariable var:Text14 'einfacher Modus' ?>
-<? setvariable var:Text15 'Ruf abweisen bei besetzt (busy on busy).' ?>
-<? setvariable var:Text16 'Wenn Sie über die gewählte Rufnummer gerade ein Gespräch führen, dann bekommen weitere Anrufer das Besetzt-Zeichen.' ?>
-<? setvariable var:Text17 'Anklopfen' ?>
-<? setvariable var:Text18 'Wenn während eines Telefonats ein weiterer Anrufer versucht, Sie zu erreichen, dann hören Sie einen Signalton.' ?>
+<? setvariable var:Text15 'Ruf abweisen bei besetzt (Busy on busy).' ?>
+<? setvariable var:Text16 'Einkommende Rufe werden abgelehnt, wenn mit der angerufenen MSN bereits ein Gespräch geführt wird.' ?>
+<? setvariable var:Text17 'Signalisierung eines zweiten Anrufs während eines Telefonates verhindern (Anklopfschutz).' ?>
+<? setvariable var:Text18 'Ein zweiter Anruf wird während eines Gespräches nicht signalisiert. Der Anrufende bekommt in diesem Fall ein besetzt signalisiert.' ?>
 <? setvariable var:Text22 'Übermittlung der Rufnummer des Telefons zum Anrufer unterdrücken (COLR).' ?>
 <? setvariable var:Text23 'Die eigene Rufnummer erscheint nicht im Display des Anrufenden.' ?>
 <? setvariable var:Text36 'Anrufe auf dieser Nebenstelle können von einem anderen Telefon mit *09 übernommen werden (Pickup).' ?>
@@ -30,6 +30,3 @@
 <? setvariable var:Text45 'für' ?>
 <? setvariable var:Text46 'nur bei der ersten neuen Nachricht' ?>
 <? setvariable var:Text47 'bei jeder neuen Nachricht' ?>
-<? setvariable var:Text48 'Nebenstelle' ?>
-<? setvariable var:Text49 'Klingelsperre' ?>
-<? setvariable var:Text50 'Merkmale des Telefoniegerätes' ?>
--- usr/www/all/html/de/fon/merkmale.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/merkmale.js	2007-07-26 15:15:54.000000000 +0200
@@ -15,8 +15,9 @@
 var g_mldClir = "Achtung: Aktivieren Sie die Rufnummernunterdrückung (CLIR) nur dann, wenn Sie <? echo $var:BoxName ?> an "+ 
 				"einem Telefonanschluss mit aktiviertem Dienstemerkmal \"CLIR\" betreiben.\x0A\x0A"+ 
 				"Überprüfen Sie in jedem Fall, ob das Telefonieren über das Festnetz weiterhin möglich ist und machen Sie bei Problemen die CLIR-Aktivierung rückgängig.";
-var g_txt_Titel 	= "Telefoniegerät am Anschluss \"FON ";
+var g_txt_Titel 			= "Nebenstelle Fon ";
 function uiDoOnLoad() {
+	SetChecked("uiPostOutDialing0", "uiViewAmt0");
 	SetChecked("uiPostClir0", "uiViewClir0");
 	var clip = jslGetValue("uiPostClip0");
 	switch (clip) {
@@ -35,7 +36,7 @@
 	}
 	OnClickClip();
 	SetChecked("uiPostBusy0", "uiViewBusy0");
-	jslSetChecked("uiViewAnklopfen", jslGetValue("uiPostWaiting0") == "0");
+	SetChecked("uiPostWaiting0", "uiViewSchutz0");
 <? if eq '$var:usePSTN' 1 ` 
 	SetChecked("uiPostColr0", "uiViewColr0");
 ` ?> 
@@ -56,6 +57,7 @@
 	OnChangeTyp(t);
 }
 function uiDoSave() {
+	GetChecked("uiPostOutDialing0", "uiViewAmt0");
 	GetChecked("uiPostClir0", "uiViewClir0");
 	if (jslGetChecked("uiViewClip0")) {
 <? if gt $var:AbCount 1 `
@@ -80,18 +82,18 @@
 		jslSetValue("uiPostMwiFax","0");
 		jslSetValue("uiPostMwiMail","0");
 	}
-	if ("<? echo '$var:FonDeviceKind' ?>" == "Faxgerät") {
+	if (jslGetChecked("uiViewFax0")) {
 		jslSetValue("uiPostFax0", "1");
 		jslSetValue("uiPostRundruf0", "0");
 		jslSetValue("uiPostWaiting0", "1");
-	} else if ("<? echo '$var:FonDeviceKind' ?>" == "Anrufbeantworter") {
+	} else if (jslGetChecked("uiViewAB0")) {
 		jslSetValue("uiPostFax0", "0");
 		jslSetValue("uiPostRundruf0", "0");
 		jslSetValue("uiPostWaiting0", "0");
 	} else {
 		jslSetValue("uiPostFax0", "0");
 		jslSetValue("uiPostRundruf0", "1");
-		jslSetValue("uiPostWaiting0", jslGetChecked("uiViewAnklopfen") ? "0":"1");
+		GetChecked("uiPostWaiting0", "uiViewSchutz0");
 	}
 	jslSubmitFormEx("fon", jslGetValue("uiPostPageMaster"));
 }
@@ -118,17 +120,20 @@
 	element.options[element.length]=eintrag;
 }
 function OnChangeTyp (typ) {
+	jslSetChecked("uiViewFon0", typ=="Fon");
+	jslSetChecked("uiViewAB0", typ=="AB");
+	jslSetChecked("uiViewFax0", typ=="Fax");
 	switch (typ) {
 		case "Fon":
-			jslSetEnabled("uiViewAnklopfen", true);
+			jslSetEnabled("uiViewSchutz0", true);
 			break;
 		case "AB":
-			jslSetChecked("uiViewAnklopfen", true);
-			jslSetEnabled("uiViewAnklopfen", false);
+			jslSetChecked("uiViewSchutz0", false);
+			jslSetEnabled("uiViewSchutz0", false);
 			break;
 		case "Fax":
-			jslSetChecked("uiViewAnklopfen", false);
-			jslSetEnabled("uiViewAnklopfen", false);
+			jslSetChecked("uiViewSchutz0", true);
+			jslSetEnabled("uiViewSchutz0", false);
 			break;
 	}
 }
@@ -167,6 +172,6 @@
 	jslSetEnabled("uiViewMwiMail",on);
 }
 function uiTitelDisplay (n) {
-	return g_txt_Titel+(Number(n)+1)+ "\"";
+	return g_txt_Titel+(Number(n)+1);
 }
 </script>
--- usr/www/all/html/de/fon/msn.frm.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/msn.frm	2007-07-26 15:15:54.000000000 +0200
@@ -9,22 +9,3 @@
 <input type="hidden" name="telcfg:settings/MSN/MSN8" value="<? query telcfg:settings/MSN/MSN8 ?>" id="uiPostMsn8">
 <input type="hidden" name="telcfg:settings/MSN/MSN9" value="<? query telcfg:settings/MSN/MSN9 ?>" id="uiPostMsn9">
 <input type="hidden" name="telcfg:settings/MSN/POTS" value="<? query telcfg:settings/MSN/POTS ?>" id="uiPostPots">
-<? if eq $var:ShowUsePstn 1 `
-<input type="hidden" name="telcfg:command/RestoreFactorySettings" value="1" id="uiPostTelDef" disabled="disabled" />
-<input type="hidden" name="telcfg:settings/UsePSTN" value="<? query telcfg:settings/UsePSTN ?>" id="uiPostPstn" />
-<input type="hidden" name="telcfg:command/Routing/RestoreFactorySettings" value="1" id="uiPostRouteDef" disabled="disabled" />
-<input type="hidden" name="connection_voip:settings/use_seperate_vcc" value="<? query connection_voip:settings/use_seperate_vcc ?>" id="uiPostUseSepVcc" disabled="disabled" />
-<? multiquery telcfg:settings/Routing/Group/list `
-<input type="hidden" name="telcfg:command/Routing/Group0" value="delete" id="uiPostRoute$10" disabled="disabled" />` ?>
-<? multiquery sip:settings/sip/list `
-<? if gt `$10` 1 `
- <input type="hidden" name="sip:command/sip2" value="delete" id="uiPostsip$10Del" disabled="disabled" />
-` `
- <input type="hidden" name="sip:settings/$11/displayname" value="" id="uiPost$11Display" disabled="disabled" />
- <input type="hidden" name="sip:settings/$11/username" value="" id="uiPost$11User" disabled="disabled" />
- <input type="hidden" name="sip:settings/$11/password" value="" id="uiPost$11Pass" disabled="disabled" />
- <input type="hidden" name="sip:settings/$11/registrar" value="" id="uiPost$11Reg" disabled="disabled" />
- <input type="hidden" name="sip:settings/$11/stunserver" value="" id="uiPost$11Stun" disabled="disabled" />
- <input type="hidden" name="sip:settings/$11/activated" value="0" id="uiPost$11Active" disabled="disabled" />
-` ?>` ?>
-` ?>
--- usr/www/all/html/de/fon/msn.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/msn.html	2007-07-26 15:15:54.000000000 +0200
@@ -1,7 +1,11 @@
 <? include ../html/$var:lang/fon/msn.inc ?>
 <div id="content">
  	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo '$var:Text26' ?>
+<? if eq '$var:pagename' 'dectmsn' `
+		<? echo '$var:Text25' ?>
+` `
+		<? if eq '$var:pagemaster' 'isdn' `<? echo '$var:Text23' ?>` `<? echo '$var:Text24' ?>` ?>
+` ?>
 	</div></div></div></div></div></div>
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 <? if eq '$var:pagename' 'dectmsn' `
@@ -13,13 +17,14 @@
 ` ?>
 	</ul>
 ` `
-<? if eq '$var:pagemaster' 'fondevices' `
+<? if eq '$var:pagemaster' 'isdn' `
 	<ul class="tabs">
 		<li><a href="javascript:uiDoIsdn()"><? echo '$var:Text20' ?></a></li>
 		<li class="tabs_on"><a href="javascript:uiDoCancel()"><? echo '$var:Text1' ?></a></li>
-<? if eq '$var:pagemaster' 'isdn' `
-		<li><a href="javascript:uiDoOptionen()"><? echo '$var:Text22' ?></a></li>
+<? if eq '<? query box:settings/expertmode/activated ?>' '1' `
+ 		<li><a href="javascript:uiDoListIsdn()"><? echo '$var:Text21' ?></a></li>
 ` ?>
+ 		<li><a href="javascript:uiDoOptionen()"><? echo '$var:Text22' ?></a></li>
 	</ul>
 ` `
 	<ul class="tabs">
@@ -28,52 +33,41 @@
 	</ul>
 ` ?> 	
 ` ?> 	
-<? if eq $var:ShowUsePstn 1 `
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p class="pCheck25"><input type="checkbox" id="uiViewPstn">&nbsp;<label for="uiViewPstn"><? echo `$var:Text27` ?></label></p>
-		<p class="pText25"><? echo `$var:Text28` ?></p>
-		<? include ../html/$var:lang/home/error.html ?>
+		<p class="mb10" style="font-weight: bold"><? echo $var:Text14 ?></p>
+		<p class="mb5"><? echo $var:Text15 ?></p>
+		<p class="ml25"><input type=radio name="Art" onclick="uiOnArt(0)" id="uiViewIsdn">&nbsp;<label for="uiViewIsdn"><? echo $var:Text16 ?></label></p>
+		<p class="ml25"><input type=radio name="Art" onclick="uiOnArt(1)" id="uiViewAnalog">&nbsp;<label for="uiViewAnalog"><? echo $var:Text17 ?></label></p>
 	</div></div></div></div></div></div>
-` ?>
-<? if eq '$var:usePSTN' 1 `
-	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p class="mb10" style="font-weight: bold"><? echo '$var:Text14' ?></p>
-		<p class="mb5"><? echo '$var:Text15' ?></p>
-		<p class="ml25"><input type=radio name="Art" onclick="uiOnArt(0)" id="uiViewIsdn">&nbsp;<label for="uiViewIsdn"><? echo '$var:Text16' ?></label></p>
-		<p class="ml25"><input type=radio name="Art" onclick="uiOnArt(1)" id="uiViewAnalog">&nbsp;<label for="uiViewAnalog"><? echo '$var:Text17' ?></label></p>
-	</div></div></div></div></div></div>
-` ?>
-<? if eq '$var:usePSTN' 1 `
 	<div class="backdialog" id="uiIsdn" style="display:none"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p class="mb5"><? echo '$var:Text2' ?></p>
+		<p class="mb5"><? echo $var:Text2 ?></p>
 		<table style="margin: auto;">
 			<tr>
 				<td style="width: 240px;">
 				<table style="margin: auto;">
-					<tr><td class="ar" nowrap><? 'echo $var:Text4' ?><input type="text" id="uiViewMsn0" size="21" maxlength=20 class="Eingabefeld"></td></tr>
-					<tr><td class="ar" nowrap><? 'echo $var:Text5' ?><input type="text" id="uiViewMsn1" size="21" maxlength=20 class="Eingabefeld"></td></tr>
-					<tr><td class="ar" nowrap><? 'echo $var:Text6' ?><input type="text" id="uiViewMsn2" size="21" maxlength=20 class="Eingabefeld"></td></tr>
-					<tr><td class="ar" nowrap><? 'echo $var:Text7' ?><input type="text" id="uiViewMsn3" size="21" maxlength=20 class="Eingabefeld"></td></tr>
-					<tr><td class="ar" nowrap><? 'echo $var:Text8' ?><input type="text" id="uiViewMsn4" size="21" maxlength=20 class="Eingabefeld"></td></tr>
+					<tr><td class="ar" nowrap><? echo $var:Text4 ?><input type="text" id="uiViewMsn0" size="21" maxlength=20 class="Eingabefeld"></td></tr>
+					<tr><td class="ar" nowrap><? echo $var:Text5 ?><input type="text" id="uiViewMsn1" size="21" maxlength=20 class="Eingabefeld"></td></tr>
+					<tr><td class="ar" nowrap><? echo $var:Text6 ?><input type="text" id="uiViewMsn2" size="21" maxlength=20 class="Eingabefeld"></td></tr>
+					<tr><td class="ar" nowrap><? echo $var:Text7 ?><input type="text" id="uiViewMsn3" size="21" maxlength=20 class="Eingabefeld"></td></tr>
+					<tr><td class="ar" nowrap><? echo $var:Text8 ?><input type="text" id="uiViewMsn4" size="21" maxlength=20 class="Eingabefeld"></td></tr>
 				</table>
 				</td>
 				<td style="width: 240px;">
 				<table style="margin: auto;">
-					<tr><td class="ar" nowrap><? echo '$var:Text9' ?><input type="text" id="uiViewMsn5" size="21" maxlength=20 class="Eingabefeld"></td></tr>
-					<tr><td class="ar" nowrap><? echo '$var:Text10' ?><input type="text" id="uiViewMsn6" size="21" maxlength=20 class="Eingabefeld"></td></tr>
-					<tr><td class="ar" nowrap><? echo '$var:Text11' ?><input type="text" id="uiViewMsn7" size="21" maxlength=20 class="Eingabefeld"></td></tr>
-					<tr><td class="ar" nowrap><? echo '$var:Text12' ?><input type="text" id="uiViewMsn8" size="21" maxlength=20 class="Eingabefeld"></td></tr>
-					<tr><td class="ar" nowrap><? echo '$var:Text13' ?><input type="text" id="uiViewMsn9" size="21" maxlength=20 class="Eingabefeld"></td></tr>
+					<tr><td class="ar" nowrap><? echo $var:Text9 ?><input type="text" id="uiViewMsn5" size="21" maxlength=20 class="Eingabefeld"></td></tr>
+					<tr><td class="ar" nowrap><? echo $var:Text10 ?><input type="text" id="uiViewMsn6" size="21" maxlength=20 class="Eingabefeld"></td></tr>
+					<tr><td class="ar" nowrap><? echo $var:Text11 ?><input type="text" id="uiViewMsn7" size="21" maxlength=20 class="Eingabefeld"></td></tr>
+					<tr><td class="ar" nowrap><? echo $var:Text12 ?><input type="text" id="uiViewMsn8" size="21" maxlength=20 class="Eingabefeld"></td></tr>
+					<tr><td class="ar" nowrap><? echo $var:Text13 ?><input type="text" id="uiViewMsn9" size="21" maxlength=20 class="Eingabefeld"></td></tr>
 				</table>
 				</td>
 			</tr>
 		</table>
 	</div></div></div></div></div></div>
-` ?>
-<? if eq '$var:usePSTN' 1 `
 	<div class="backdialog" id="uiAnalog" style="display:none"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p class="mb10"><? echo '$var:Text18' ?></p>
-		<p class="ml25"><label for="uiViewPots"><? echo '$var:Text19' ?></label>&nbsp;<input type="text" id="uiViewPots" size="21" maxlength="20" class="Eingabefeld"></p>
+		<p class="mb10"><? echo $var:Text18 ?></p>
+		<p class="ml25"><label for="uiViewPots"><? echo $var:Text19 ?></label>&nbsp;<input type="text" id="uiViewPots" size="21" maxlength="20" class="Eingabefeld"></p>
 	</div></div></div></div></div></div>
-` ?>
-	<? include ../html/$var:lang/home/rbb_applycancel.html ?></div></div></div></div></div></div></div></div>
+	<? include ../html/$var:lang/home/rbb_applycancel.html ?>
+	</div></div></div></div></div></div></div>
+</div>
--- usr/www/all/html/de/fon/msn.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/msn.inc	2007-07-26 15:15:54.000000000 +0200
@@ -1,5 +1,5 @@
 <? include ../html/$var:lang/global.inc ?>
-<? setvariable var:Text1 'Festnetz' ?>
+<? setvariable var:Text1 'Festnetzrufnummern' ?>
 <? setvariable var:Text2 'Geben Sie hier Ihre ISDN-Rufnummern ein:' ?>
 <? setvariable var:Text4 '1. ' ?>
 <? setvariable var:Text5 '2. ' ?>
@@ -23,6 +23,3 @@
 <? setvariable var:Text23 'ISDN-Endgeräte' ?>
 <? setvariable var:Text24 'Nebenstellen' ?>
 <? setvariable var:Text25 'DECT-Endgeräte' ?>
-<? setvariable var:Text26 'Telefoniegeräte' ?>
-<? setvariable var:Text27 'Festnetz aktiv' ?>
-<? setvariable var:Text28 'Das Festnetz kann deaktiviert werden, wenn die FRITZ!Box nur mit dem DSL-Anschluss und nicht mit einem Festnetz verbunden ist. Alle Telefonate werden dann über das Internet geführt. Der Internettelefonie-Anbieter muss in diesem Fall alle Anrufe weiterleiten.' ?>
--- usr/www/all/html/de/fon/msn.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/msn.js	2007-07-26 15:15:54.000000000 +0200
@@ -4,28 +4,14 @@
 #content {width: 580px; margin: auto;}
 .ml25 {margin-left: 25px;}
 .ar {text-align: right;}
-.pText25 {padding-left: 25px;}
-.pCheck25 {text-indent: -25px; padding-left: 25px; margin-bottom: 10px;}
 -->
 </style>
 <script type="text/javascript">
 <? include ../html/$var:lang/js/val.js ?>
 <? include ../html/$var:lang/js/jsl.js ?>
-<? setvariable var:ShowUsePstn 0 ?>
-<? if eq $var:OEM avm `<? setvariable var:ShowUsePstn 1 ?>` ?>
-<? if eq $var:OEM freenet `<? setvariable var:ShowUsePstn 1 ?>` ?>
-<? if eq $var:OEM 1und1 `<? setvariable var:ShowUsePstn 1 ?>` ?>
 var g_mldDigit			= "Eine Rufnummer darf nur aus Ziffern bestehen.";
 var g_mldPotsDigit		= "Die Rufnummer für den Festnetzanschluss darf nur aus Ziffern bestehen.";
-var g_mldWarningAus = "Wichtiger Hinweis: Die FRITZ!Box wird auf den gewählten Anschlussmodus umgestellt. Die Telefonie-Einstellungen werden dafür in den Grundzustand zurückgesetzt. Alle Wahlregeln werden entfernt. Notrufe werden jetzt über das Internet geführt. Erkundigen Sie sich, ob Ihr Internettelefonie-Anbieter Notrufe weiterleiten kann.\x0d\x0aDieser Vorgang kann einen Moment dauern. Führen Sie die Einrichtung der Telefonie anschließend noch einmal durch.";
-var g_mldWarningAn = "Wichtiger Hinweis: Die FRITZ!Box wird auf den gewählten Anschlussmodus umgestellt. Die Telefonie-Einstellungen werden dafür in den Grundzustand zurückgesetzt.\x0d\x0aDieser Vorgang kann einen Moment dauern. Führen Sie die Einrichtung der Telefonie anschließend noch einmal durch.";
-var g_oldmode;
 function uiDoOnLoad() {
-<? if eq $var:ShowUsePstn 1 `
-	jslSetChecked("uiViewPstn", jslGetValue("uiPostPstn") == "1");
-	g_oldmode = jslGetValue("uiPostPstn");
-` ?>
-<? if eq '$var:usePSTN' 1 `
 	var n = 0;
 	jslCopyValue("uiViewPots", "uiPostPots");
 	if (jslGetValue("uiPostPots") != "") n = 1;
@@ -34,39 +20,8 @@
 		if (jslGetValue("uiViewMsn"+i) != "") n = 0;
 	}
 	uiOnArt(n);
-` ?>
 }
 function uiDoSave() {
-<? if eq $var:ShowUsePstn 1 `
-	jslSetValue("uiPostPstn", jslGetChecked("uiViewPstn") ? "1" : "0");
-	if (jslGetValue("uiPostPstn") != g_oldmode) {
-		var meldung = g_mldWarningAus;
-		if (jslGetValue("uiPostPstn") == "1")
-			meldung = g_mldWarningAn;
-		if (!confirm(meldung)) return;
-		jslEnable("uiPostTelDef");
-		if (jslGetValue("uiPostPstn") == "0") {
-			<? multiquery telcfg:settings/Routing/Group/list `
-				jslEnable("uiPostRoute$10"); ` ?>
-		} else {
-			jslEnable("uiPostRouteDef");
-		}
-		<? multiquery sip:settings/sip/list `
-		<? if gt `$10` 1 `
-			jslEnable("uiPostsip$10Del");
-		` `
-			jslEnable("uiPost$11Display");
-			jslEnable("uiPost$11User");
-			jslEnable("uiPost$11Pass");
-			jslEnable("uiPost$11Reg");
-			jslEnable("uiPost$11Stun");
-			jslEnable("uiPost$11Active");
-		` ?>` ?>
-		jslSetValue("uiPostUseSepVcc", "0");
-		jslEnable("uiPostUseSepVcc");
-	}
-` ?>
-<? if eq '$var:usePSTN' 1 `
 	var i;
 	for (i=0; i<=9; i++) {
 		if (!valIsZahl(jslGetValue("uiViewMsn"+i))) {alert(g_mldDigit); return;}
@@ -74,8 +29,7 @@
 	}
 	if (!valIsZahl(jslGetValue("uiViewPots"))) {alert(g_mldPotsDigit); return;}
 	jslCopyValue("uiPostPots", "uiViewPots");
-` ?>
-	jslFormSubmitEx("", "msn");
+	jslFormSubmitEx("", "");
 }
 function uiDoCancel() {
 	jslGoTo("", "");
@@ -84,7 +38,7 @@
 	jslGoTo("fon", "fonlist");
 }
 function uiDoIsdn() {
-	jslGoTo("fon", jslGetValue("uiPostPageMaster"));
+	jslGoTo("fon", "isdn");
 }
 function uiDoOptionen() {
 	jslGoTo("fon", "isdnoptionen");
@@ -105,12 +59,10 @@
 	jslPopHelp("hilfe_fon_festnetz");
 ` ?>	
 }
-<? if eq '$var:usePSTN' 1 `
 function uiOnArt(n) {
 	jslSetChecked("uiViewIsdn", n==0);
 	jslSetChecked("uiViewAnalog", n==1);
 	jslDisplay("uiAnalog", n==1);
 	jslDisplay("uiIsdn", n==0);
 }
-` ?>
 </script>
--- usr/www/all/html/de/fon/ppFonbuch.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/ppFonbuch.html	2007-07-26 15:15:54.000000000 +0200
@@ -22,7 +22,7 @@
 <? setvariable var:txt18 "#881**" ?>
 <? setvariable var:txt19 "Wecker mit den letzten Einstellungen aktivieren" ?>
 <? setvariable var:txt20 "#881*<Uhrzeit>3*<Telefon>*" ?>
-<? setvariable var:txt21 "Wecker für einmaliges Klingeln zu einer bestimmten Zeit (StdMin) und für ein bestimmtes Telefon (Fon1 = 1, Fon2 = 2, Fon3 = 3, ISDN = 4) aktivieren" ?>
+<? setvariable var:txt21 "Wecker für einmaliges Klingeln zu einer bestimmten Zeit (StdMin) und für ein bestimmtes Telefon (Fon1 = 1, Fon2 = 2) aktivieren" ?>
 <? setvariable var:txt22 "Auswahl der Verbindungsart" ?>
 <? setvariable var:txt23 "*111# <Rufnummer>" ?>
 <? setvariable var:txt24 "Wählen üder das Festnetz" ?>
--- usr/www/all/html/de/fon/route.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/route.html	2007-07-26 15:15:54.000000000 +0200
@@ -4,32 +4,18 @@
 		<? echo $var:Text1 ?>
 	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p class="mb10"><? echo $var:Text12 ?></p>
 		<table id="tRule">
 			<tr>
-				<td><label for="uiViewDescription"><? echo $var:Text5 ?></label></td>
-				<td><select size="1" id="uiViewBereich" class="Eingabefeld" onchange="OnChangeBereich(value)">
-					<option value=""><? echo $var:Text2 ?></option>
-					<option value="mobile"><? echo $var:Text6 ?></option>
-					<option value="ortsnetz"><? echo $var:Text7 ?></option>
-					<option value="national"><? echo $var:Text8 ?></option>
-					<option value="international"><? echo $var:Text9 ?></option>
-					<option value="sonderrufnrn"><? echo $var:Text10 ?></option>
-					<option value="auskunft"><? echo $var:Text11 ?></option>
-				</select></td>
-			</tr>
-			<tr>
 				<td><label for="uiViewDescription"><? echo $var:Text2 ?></label></td>
 				<td><input type="text" size="21" value id="uiViewNumber" maxlength="20" class="Eingabefeld"></td>
 			</tr>
 			<tr>
-				<td style="padding-top: 10px;"><label for="uiViewRoute"><? echo $var:Text3 ?></label></td>
-				<td style="padding-top: 10px;"><select size="1" id="uiViewRoute" class="Eingabefeld">
+				<td><label for="uiViewRoute"><? echo $var:Text3 ?></label></td>
+				<td><select size="1" id="uiViewRoute" class="Eingabefeld">
 					</select>
 				</td>
 			</tr>
 		</table>
-		<? include ../html/$var:lang/home/error.html ?>
 	</div></div></div></div></div></div>
 	<? include ../html/$var:lang/home/rbb_applycancel.html ?>
 </div>
--- usr/www/all/html/de/fon/route.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/route.inc	2007-07-26 15:15:54.000000000 +0200
@@ -1,17 +1,5 @@
 <? include ../html/$var:lang/global.inc ?>
-<? if eq $var:isnew 1 `
 <? setvariable var:Text1 'Neue Wahlregel' ?>
-` `
-<? setvariable var:Text1 'Wahlregel' ?>
-` ?>
-<? setvariable var:Text2 'Rufnummer' ?>
-<? setvariable var:Text3 'verbinden über' ?>
+<? setvariable var:Text2 'Rufnummer/Bereich' ?>
+<? setvariable var:Text3 'Verbindung' ?>
 <? setvariable var:Text4 'Festnetz' ?>
-<? setvariable var:Text5 'Bereich' ?>
-<? setvariable var:Text6 'Mobilfunk' ?>
-<? setvariable var:Text7 'Ortsnetz' ?>
-<? setvariable var:Text8 'Ferngespräch' ?>
-<? setvariable var:Text9 'Ausland' ?>
-<? setvariable var:Text10 'Sonderrufnummern' ?>
-<? setvariable var:Text11 'Auskunft' ?>
-<? setvariable var:Text12 'Anwahlen der Rufnummern/Bereiche' ?>
--- usr/www/all/html/de/fon/route.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/route.js	2007-07-26 15:15:54.000000000 +0200
@@ -17,25 +17,11 @@
 var g_txtFestnetzvia = "Festnetz via ";
 function uiDoOnLoad() {
 	var nr = jslGetValue( "uiPostNumber");
-	switch (nr) {
-		case "mobile":
-		case "ortsnetz":
-		case "national":
-		case "international":
-		case "sonderrufnrn":
-		case "auskunft":
-			jslSetSelection("uiViewBereich", nr);
-			OnChangeBereich(nr);
-			break;
-		default:
-			jslSetSelection("uiViewBereich", "");
-			OnChangeBereich("");
-			jslSetValue("uiViewNumber", nr);
-			break;
-	}
+	jslCopyValue("uiViewNumber", "uiPostNumber");
 	var route = jslGetValue("uiPostRoute");
 	var provider = jslGetValue("uiPostProvider");
 	var froute = "";
+	
 <? if eq '$var:usePSTN' 1 ` 
 	var i;
 	var empty_route = -1;
@@ -44,7 +30,7 @@
 			jslAddOption("uiViewRoute", "f"+i, g_txtFestnetzvia+jslGetValue("uiPostProvider"+i), false);
 			if (Number(provider) == i) froute = "f"+i;
 		} else {
-			if (empty_route == -1) empty_route = i;
+			if (empty_route==-1) empty_route = i;
 		}
 	}
 	if (empty_route != -1) {
@@ -53,34 +39,22 @@
 		if (jslGetValue("uiPostProvider"+provider) == "") froute = "f"+empty_route;
 	}
 ` ?>
-	jslAddOption("uiViewRoute", "v", "Internet Automatisch", false);
 <? multiquery sip:settings/sip/list(ID,displayname) '
 	if ("$3" != "") jslAddOption("uiViewRoute", "$2", g_txtInternetprefix+jslGetValue("ui$1"), false);
 ' ?>
 	if (isNotruf(nr)) {
-		jslDisable("uiViewBereich");
-		jslDisable("uiViewNumber");
+		jslDisable( "uiViewNumber");
+//	} else {
+//		jslAddOption( "uiViewRoute", "s", g_txtSperren, false);
 	}
 	if (route == "f" && froute != "") route = froute;
 	jslSetSelection("uiViewRoute", route);
 }
 function uiDoValidate() {
-	var nr = jslGetValue("uiPostNumber");
-	switch (nr) {
-		case "mobile":
-		case "ortsnetz":
-		case "national":
-		case "international":
-		case "sonderrufnrn":
-		case "auskunft":
-			break;
-		default:
-			if (!valIsZahlVorhanden(nr)) {
+	if (!valIsZahlVorhanden(jslGetValue("uiPostNumber"))) {
 				alert(g_route_mldOnlyDigit);
 				return false;
 			}
-			break;
-	}
 	return true;
 }
 function isNotruf (nr) {
@@ -114,10 +88,10 @@
 function uiDoSave() {
 	var ret = true;
 	var route = jslGetValue( "uiViewRoute");
-	var bereich = jslGetValue( "uiViewBereich");
 	var nr = jslGetValue( "uiViewNumber");
 	var provider = "0";
-	if (bereich=="" && isNotruf(nr) && isInternetroute(route)) {
+	
+	if (isNotruf(nr) && isInternetroute(route)) {
 		ret = confirm(g_routing_confirmMsgText);
 	}
 	if (route.substr(0, 1) == "f" && route.length == 2) {
@@ -125,11 +99,7 @@
 		route = "f";
 	}
 	if (ret == true) {
-		if (bereich == "") {
 			jslSetValue("uiPostNumber", nr);
-		} else {
-			jslSetValue("uiPostNumber", bereich);
-		}
 		jslSetValue("uiPostRoute", route)
 		jslSetValue("uiPostProvider", provider)
 		if (uiDoValidate() == true) {
@@ -143,7 +113,4 @@
 function uiDoHelp() {
 	jslPopHelp("hilfe_fon_neuewahlregel");
 }
-function OnChangeBereich (value) {
-	jslSetEnabled("uiViewNumber", value=="");
-}
 </script>
--- usr/www/all/html/de/fon/routing.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/routing.html	2007-07-26 15:15:54.000000000 +0200
@@ -2,11 +2,6 @@
 <? setvariable var:lcrext `1` ?>
 <? if eq <? query telcfg:settings/Routing/Version ?> 3 `<? setvariable var:lcrext `0` ?>` ?>
 <? if eq <? query telcfg:settings/Routing/Version ?> 0 `<? setvariable var:lcrext `0` ?>` ?>
-<? setvariable var:showvorwahlen `1` ?>
-<? if neq '$var:usePSTN' 1 '<? setvariable var:showvorwahlen `0` ?>' ?>
-<? if neq $var:OEM freenet `
-<? if neq '<? query box:settings/expertmode/activated ?>' '1' '<? setvariable var:showvorwahlen `0` ?>' ?>
-`?>
 <!-- Version ist "<? query telcfg:settings/Routing/Version ?>" -->
 <!-- lcrext: <? echo `$var:lcrext` ?> -->
 <!-- showLCRdata: <? echo `$var:showLCRdata` ?> -->
@@ -39,13 +34,13 @@
 ` ?> 
 <? if eq $var:lcrext 0 `
 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo `$var:Text1` ?>
+		Telefonie
 	</div></div></div></div></div></div>
-<? if eq $var:showvorwahlen 1 `
+<? if eq '$var:usePSTN' 1 ` 
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 	<ul class="tabs">
 		<li class="tabs_on"><a href="javascript:uiDoCancel()"><? echo `$var:Text1` ?></a></li>
-		<li><a href="javascript:uiDoVorwahlen()"><? echo `$var:Text20` ?></a></li>
+ 		<li><a href="javascript:uiDoVorwahlen()">Anbietervorwahlen</a></li>
 	</ul>
 ` ?>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
--- usr/www/all/html/de/fon/routing.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/routing.inc	2007-07-26 15:15:54.000000000 +0200
@@ -18,4 +18,3 @@
 <? setvariable var:Text17 'Zurücksetzen' ?>
 <? setvariable var:Text18 'Die dem Auslieferungszustand entsprechenden Wahlregeln lassen sich über die Schaltfläche "Zurücksetzen" wieder herstellen.' ?>
 <? setvariable var:Text19 'Zurücksetzen' ?>
-<? setvariable var:Text20 'Anbietervorwahlen' ?>
--- usr/www/all/html/de/fon/routing.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/routing.js	2007-07-26 15:15:54.000000000 +0200
@@ -14,20 +14,17 @@
 <script type="text/javascript">
 <? setvariable var:showLCRdata 0 ?>
 <? if eq $var:OEM avm `<? setvariable var:showLCRdata 1 ?>` ?>
+<? if eq $var:OEM tcom `<? setvariable var:showLCRdata 1 ?>` ?>
 <? if eq $var:OEM avme `<? setvariable var:showLCRdata 1 ?>` ?>
 <? if eq $var:OEM freenet `<? setvariable var:showLCRdata 1 ?>` ?>
 <? include ../html/$var:lang/js/val.js ?>
 <? include ../html/$var:lang/js/jsl.js ?>
 var g_mldDelete		= "Wollen Sie diesen Eintrag löschen ?";
 var g_mldReset		= "Wollen Sie die ursprünglichen Wahlregeln wiederherstellen ?";
-var g_txtNichts		= "Es sind keine Wahlregeln eingerichtet.";
 var g_txtFestnetz		= "Festnetz";
 var g_txtFestnetzvia	= "Festnetz via ";
 var g_txtBlock			= "Sperren";
-var g_txtVoIP = "Internet Automatisch"
 var g_txtInternet		= "Internet: ";
-var g_txtBtnEdit = "Bearbeiten";
-var g_txtBtnDelete = "Löschen";
 var g_CanDoIt = true;
 var g_foundRul = false;
 //---- nicht Löschen! Notwendig für korrekte Anzeige --------------------------
@@ -84,24 +81,12 @@
 	switch (wert) {
 		case "f": return FestnetzDisplay(provider);
 		case "s": return g_txtBlock;
-		case "v": return g_txtVoIP;
 <? multiquery sip:settings/sip/list(ID,displayname) '
 		case "$2": return g_txtInternet+"$3";
 ' ?>
 	}
 	return "";
 }
-function NumberDisplay(number) {
-	switch (number) {
-		case "mobile": return "Mobilfunk";
-		case "ortsnetz": return "Ortsnetz";
-		case "national": return "Ferngespräch";
-		case "international": return "Ausland";
-		case "sonderrufnrn": return "Sonderrufnummern";
-		case "auskunft": return "Auskunft";
-	}
-	return number;
-}
 function FestnetzDisplay(provider) {
 	var vorwahl="";
 	switch (provider) {
@@ -121,10 +106,10 @@
 	jslFormSubmitEx("fon", "routing", "routing");
 }
 function EditBtn(id, click) {
-	return BmpBtn(id, click, g_txtBtnEdit, "../html/<? echo $var:lang ?>/images/bearbeiten.gif");
+	return BmpBtn(id, click, "Ändern", "../html/<? echo $var:lang ?>/images/bearbeiten.gif");
 }
 function DeleteBtn(id, click) {
-	return BmpBtn(id, click, g_txtBtnDelete, "../html/<? echo $var:lang ?>/images/loeschen.gif");
+	return BmpBtn(id, click, "Löschen", "../html/<? echo $var:lang ?>/images/loeschen.gif");
 }
 function BmpBtn(id, click, value, bmp) {
 	return "<button type=\"button\" id=\""+id+"\" onClick=\""+click+"\" value=\""+value+"\" title=\""+value+"\" style=\"width: 30px\"><img src=\""+bmp+"\" align=bottom width=16 height=16 hspace=4></button></td>";
@@ -132,7 +117,7 @@
 function TrRoute(id, number, route, provider) {
 	if (route == "s") return "";
 	var str = "<tr>";
-	str += "<td class=\"c1\">"+ NumberDisplay(number)+"</td>";
+	str += "<td class=\"c1\">"+ number+"</td>";
 	str += "<td class=\"c3\">"+ RouteDisplay(route, provider)+"</td>";
 	str += "<td class=\"c2\">"+ EditBtn("uiViewEdit"+id, "uiDoEdit('"+id+"', '"+number+"')") +"</td>";
 	str += "<td class=\"c2\">"+ DeleteBtn("uiViewDelete"+id, "uiDoDelete('"+id+"')") +"</td>";
@@ -142,6 +127,6 @@
 }
 function TrNichts() {
 	if (g_foundRul) return "";
-	return "<tr><td colspan=4 class=\"ac\">"+g_txtNichts+"</td></tr>";
+	return "<tr><td colspan=4 class=\"ac\">Es sind keine Wahlregeln eingerichtet.</td></tr>";
 }
 </script>
--- usr/www/all/html/de/fon/rub1.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/rub1.html	2007-07-26 15:15:54.000000000 +0200
@@ -1,34 +1,36 @@
 <? include ../html/$var:lang/fon/rub1.inc ?>
 <div id="content">
 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo $var:Text1 ?>
+		Anrufer
 	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<table id="tRule">
 			<tr>
-				<td><label for="uiViewNummer"><? echo $var:Text2 ?></label></td>
-				<td><input type="text" size="21" value="" id="uiViewNummer" maxlength="20" class="Eingabefeld"></td>
+				<td><label for="uiViewNummer">Rufnummer des Anrufers</label></td>
+				<td><input type="text" size="21" value id="uiViewNummer" maxlength="20" class="Eingabefeld"></td>
 			</tr>
 			<tr>
-				<td><label for="uiViewOption"><? echo $var:Text3 ?></label></td>
+				<td><label for="uiViewOption">Art der Umleitung</label></td>
 				<td><select size="1" id="uiViewOption" onchange="OnOption(value)" class="Eingabefeld">
-						<option value="0"><? echo $var:Text4 ?></option>
-						<option value="1"><? echo $var:Text5 ?></option>
-						<option value="2"><? echo $var:Text6 ?></option>
+					<option value="0">umleiten</option>
+					<option value="1">keine Annahme</option>
+					<option value="2">wichtiger Anrufer</option>
 					</select>
 				</td>
 			</tr>
 			<tr id="uiViewRul1" style="display:none">
-				<td style="padding: 10px 10px 1px 10px"><label for="uiViewRoute"><? echo $var:Text7 ?></label></td>
-				<td style="padding: 10px 10px 1px 10px"><select size="1" id="uiViewRoute" class="Eingabefeld"></select></td>
+				<td style="padding: 10px 10px 1px 10px"><label for="uiViewRoute">umleiten über</label></td>
+				<td style="padding: 10px 10px 1px 10px"><select size="1" id="uiViewRoute" class="Eingabefeld">
+					</select>
+				</td>
 			</tr>
 			<tr id="uiViewRul2" style="display:none">
-				<td><label for="uiViewZiel"><? echo $var:Text8 ?></label></td>
-				<td><input type="text" size="21" value="" id="uiViewZiel" maxlength="20" class="Eingabefeld"></td>
+				<td><label for="uiViewZiel">zur Zielrufnummer</label></td>
+				<td><input type="text" size="21" value id="uiViewZiel" maxlength="20" class="Eingabefeld"></td>
 			</tr>
 		</table>
-		<p class="mt10" id="uiViewNo" style="display:none"><? echo $var:Text9 ?></p>
-		<p class="mt10" id="uiViewVip" style="display:none"><? echo $var:Text10 ?></p>
+		<p class="mt10" id="uiViewNo" style="display:none">Anrufe von diesem Anrufer werden nicht angenommen.</p>
+		<p class="mt10" id="uiViewVip" style="display:none">Anrufe von diesem Anrufer werden trotz Klingelsperre an den Telefonen signalisiert.</p>
 	</div></div></div></div></div></div>
 	<? include ../html/$var:lang/home/rbb_applycancel.html ?>
 </div>
--- usr/www/all/html/de/fon/rub1.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/rub1.js	2007-07-26 15:15:54.000000000 +0200
@@ -11,8 +11,6 @@
 <? include ../html/$var:lang/js/jsl.js ?>
 var g_preInternet	= "Internet: ";
 var g_preFestnetz	= "Festnetz: ";
-var g_txtAlert_1 = "Die Rufnummer darf nur aus Ziffern und '#' bestehen.";
-var g_txtAlert_2 = "Die Zielrufnummer muss angegeben werden und darf nur aus Ziffern und '#' bestehen.";
 var g_msn0 = "<? query telcfg:settings/MSN/MSN0 ?>";
 var g_msn1 = "<? query telcfg:settings/MSN/MSN1 ?>";
 var g_msn2 = "<? query telcfg:settings/MSN/MSN2 ?>";
@@ -34,11 +32,11 @@
 	OnOption(action);
 }
 function uiDoSave() {
-	if (!IsZiel(jslGetValue("uiViewNummer"))) {alert(g_txtAlert_1); return;}
+	if (!IsZiel(jslGetValue("uiViewNummer"))) {alert("Die Rufnummer darf nur aus Ziffern und '#' bestehen."); return;}
 	jslCopyValue("uiPostRufnr", "uiViewNummer");
 	jslCopyValue("uiPostAction", "uiViewOption")
 	if (jslGetValue("uiViewOption") == "0") {
-		if (!IsZielVorhanden(jslGetValue("uiViewZiel"))) {alert(g_txtAlert_2); return;}
+		if (!IsZielVorhanden(jslGetValue("uiViewZiel"))) {alert("Die Zielrufnummer muss angegeben werden und darf nur aus Ziffern und '#' bestehen."); return;}
 		jslCopyValue("uiPostDestination", "uiViewZiel");
 		jslCopyValue("uiPostOutgoing", "uiViewRoute");
 		jslEnable("uiPostDestination");
@@ -73,6 +71,7 @@
 	addMsX(id, "9", g_msn9);
 	addOption(id, "POTS", g_preFestnetz+g_Pots);
 ` ?>
+	
 	// Sip Zugänge anfügen
 <? multiquery sip:settings/sip/list(ID,displayname) '
 	if ("$3" != "") addOption(id, "SIP"+"$2", g_preInternet+jslGetValue("ui$1"));
--- usr/www/all/html/de/fon/rublist.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/rublist.html	2007-07-26 15:15:54.000000000 +0200
@@ -1,15 +1,15 @@
 <? include ../html/$var:lang/fon/rublist.inc ?>
 <div id="content">
 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo $var:Text1 ?>
+		Ausgewählte Anrufer
 	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p class="mb10"><? echo $var:Text2 ?></p>
+		<p class="mb10">Liste der ausgewählten Anrufer</p>
 		<table id="tList" class="tborder" style="margin:auto; width:100%; table-layout: fixed">
 			<tr>
-				<th class="c0"><? echo $var:Text3 ?></th>
-				<th class="c2"><? echo $var:Text4 ?></th>
-				<th class="c3"><? echo $var:Text5 ?></th>
+				<th class="c0">Aktiv</th>
+				<th class="c2">Rufnummer des Anrufers</th>
+				<th class="c3">Option</th>
 				<th class="c4">&nbsp;</th>
 				<th class="c5">&nbsp;</th>
 			</tr>
@@ -19,23 +19,19 @@
 				<td class="c0"><input type=checkbox id="uiViewActiv$1" onclick="OnChangeActiv('uiViewActiv$1','uiPostActiv$1'); return true;"></td>
 				<td class="c2"><nobr><span title="$2">$2</span></nobr></td>
 				<td class="c3"><script type="text/javascript">document.write(ActionDisplay("$3", "$4"));</script></td>
-				<td class="c4">
-					<button type="button" id="uiViewEdit$1" onClick="uiDoEdit('$1')" value="<? echo '$var:Text8' ?>" title="<? echo $var:txtIconBtnEdit ?>" style="width: 30px">
-						<img src="../html/$var:lang/images/bearbeiten.gif" align="bottom" width="16" height="16" hspace="4">
-					</button>
-				</td>
-				<td class="c5">
-					<button type="button" id="uiViewDelete$1" onClick="uiDoDelete('$1')" value="<? echo '$var:Text9' ?>" title="<? echo $var:txtIconBtnDelete ?>" style="width: 30px">
-						<img src="../html/$var:lang/images/loeschen.gif" align="bottom" width="16" height="16" hspace="4">
-					</button>
-				</td>
+				<td class="c4"><button type="button" id="uiViewEdit$1" onClick="uiDoEdit('$1')" value="Ändern" title="Ändern" style="width: 30px">
+					<img src="../html/$var:lang/images/bearbeiten.gif" align=bottom width=16 height=16 hspace=4>
+				</button></td>
+				<td class="c5"><button type="button" id="uiViewDelete$1" onClick="uiDoDelete('$1')" value="Löschen" title="Löschen" style="width: 30px">
+					<img src="../html/$var:lang/images/loeschen.gif" align=bottom width=16 height=16 hspace=4>
+				</button></td>
 			</tr>
 ` ?>
-<? if eq <? querytelcfg:settings/CallerIDActions/count ?> 0 `
-			<tr class="Dialoglist"><td colspan="5" class="ac"><? echo '$var:Text6' ?></td></tr>
+<? if eq <? multiquerycount telcfg:settings/CallerIDActions/list ?> 0 `
+			<tr class="Dialoglist"><td colspan=5 class="ac">Es sind keine Anrufer eingerichtet.</td></tr>
 ` ?>
 		</table>
-		<p class="ar mt10"><input type="button" id="uiViewNewButton" onclick="uiDoNew('<? query telcfg:settings/CallerIDActions/newid ?>')" value="<? echo '$var:Text7' ?>" class="Pushbutton" style="width: 180px;"></p>
+		<p class="ar mt10"><input type="button" id="uiViewNewButton" onclick="uiDoNew('<? query telcfg:settings/CallerIDActions/newid ?>')" value="Neuer Anrufer" class="Pushbutton" style="width: 180px;"></p>
 		<? include ../html/$var:lang/home/error.html ?>
 	</div></div></div></div></div></div>
 	<? include ../html/$var:lang/home/rbb_applycancel.html ?>
--- usr/www/all/html/de/fon/rublist.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/rublist.js	2007-07-26 15:15:54.000000000 +0200
@@ -16,9 +16,6 @@
 <script type="text/javascript">
 <? include ../html/$var:lang/js/jsl.js ?>
 var g_mldDelete = "Wollen Sie diesen Eintrag löschen ?";
-var g_txtDisplay_1 = "umleiten nach ";
-var g_txtDisplay_2 = "keine Annahme";
-var g_txtDisplay_3 = "wichtige Person";
 function uiDoOnLoad() {
 	// "<? query telcfg:settings/RefreshDiversity ?>"
 <? multiquery telcfg:settings/CallerIDActions/list `
@@ -29,9 +26,9 @@
 function ActionDisplay (action, destination) {
 	var rc = "";
 	switch (action) {
-		case "0": rc = g_txtDisplay_1+ destination; 	break;
-		case "1": rc = g_txtDisplay_2; break;
-		case "2": rc = g_txtDisplay_3; break;
+		case "0": rc = "umleiten nach "+ destination; 	break;
+		case "1": rc = "keine Annahme"; break;
+		case "2": rc = "wichtige Person"; break;
 	}
 	return '<nobr><span title="'+rc+'">'+rc+'</span></nobr>';
 }
--- usr/www/all/html/de/fon/rul1.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/rul1.html	2007-07-26 15:15:54.000000000 +0200
@@ -1,26 +1,35 @@
 <? include ../html/$var:lang/fon/rul1.inc ?>
 <div id="content">
 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo $var:Text1 ?>
+		Rufumleitung
 	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p class="fett"><? echo $var:Text2 ?></p>
-		<p class="ml25 mb5"><? echo $var:Text3 ?></p>
-		<p class="ml25 mb10"><select size="1" id="uiViewAn" class="Eingabefeld"></select></p>
-		<p class="fett" id="Ueber1"><? echo $var:Text4 ?></p>
-		<p class="ml25 mb5" id="Ueber2"><? echo $var:Text5 ?></p>
-		<p class="ml25 mb10"><select size="1" id="uiViewUeber" class="Eingabefeld"></select></p>
-		<p class="fett"><? echo $var:Text6 ?></p>
-		<p class="ml25 mb5"><? echo $var:Text7 ?></p>
+		<p class="fett">Rufeingang</p>
+		<p class="ml25 mb5">Wählen Sie die Rufnummer aus, für die ein eingehender Ruf umgeleitet werden soll.</p>
+		<p class="ml25 mb10">
+			<select size="1" id="uiViewAn" class="Eingabefeld">
+			</select>
+		</p>
+	
+		<p class="fett" id="Ueber1">Umleiten über</p>
+		<p class="ml25 mb5" id="Ueber2">Wählen Sie die Rufnummer aus, über die der Anruf umgeleitet werden soll.</p>
+		<p class="ml25 mb10">
+			<select size="1" id="uiViewUeber" class="Eingabefeld">
+			</select>
+		</p>
+	
+		<p class="fett">Zielrufnummer</p>
+		<p class="ml25 mb5">Geben Sie die Rufnummer an, an die der Anruf weitergeleitet werden soll.</p>
 		<p class="ml25 mb10"><input type="text" size="21" id="uiViewZiel" maxlength="20" class="Eingabefeld"></p>
-		<p class="fett"><? echo $var:Text8 ?></p>
-		<p class="ml25 mb5"><? echo $var:Text9 ?></p>
+	
+		<p class="fett">Art der Umleitung</p>
+		<p class="ml25 mb5">Wie soll der Anruf umgeleitet werden.</p>
 		<p class="ml25">
 			<select size="1" id="uiViewOption" class="Eingabefeld">
-				<option value="0"><? echo $var:Text10 ?></option>
-				<option value="1"><? echo $var:Text11 ?></option>
-				<option value="2"><? echo $var:Text12 ?></option>
-				<option value="3"><? echo $var:Text13 ?></option>
+				<option value="0">Sofort</option>
+				<option value="1">Verzögert</option>
+				<option value="2">Verzögert lang</option>
+				<option value="3">bei Besetzt</option>
 			</select>
 		</p>
 	</div></div></div></div></div></div>
--- usr/www/all/html/de/fon/rul1.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/rul1.js	2007-07-26 15:15:54.000000000 +0200
@@ -12,7 +12,6 @@
 <? include ../html/$var:lang/js/jsl.js ?>
 var g_preInternet	= "Internet: ";
 var g_preFestnetz	= "Festnetz: ";
-var g_txtMld_1 = "Die Zielrufnummer muss angegeben werden und darf nur aus Ziffern bestehen.";
 var g_msn0 = "<? query telcfg:settings/MSN/MSN0 ?>";
 var g_msn1 = "<? query telcfg:settings/MSN/MSN1 ?>";
 var g_msn2 = "<? query telcfg:settings/MSN/MSN2 ?>";
@@ -33,7 +32,7 @@
 	jslCopyValue("uiViewZiel", "uiPostZiel");
 }
 function uiDoSave() {
-	if (!IsZielVorhanden(jslGetValue("uiViewZiel"))) {alert(g_txtMld_1); return;}
+	if (!IsZielVorhanden(jslGetValue("uiViewZiel"))) {alert("Die Zielrufnummer muss angegeben werden und darf nur aus Ziffern bestehen."); return;}
 	jslCopyValue("uiPostMSN", "uiViewAn");
 	jslCopyValue("uiPostOutgoing", "uiViewUeber");
 	jslCopyValue("uiPostAction", "uiViewOption")
@@ -51,6 +50,7 @@
 <? repeat [ 0 9 ] `
 	if (g_msn$0 != "") addOption(id, "$0", g_preFestnetz+g_msn$0);` ?>
 	addOption(id, "POTS", g_preFestnetz+g_Pots);
+	
 	// Sip Zugänge anfügen
 <? multiquery sip:settings/sip/list(ID,displayname) '
 	if ("$3" != "") addOption(id, "SIP"+"$2", g_preInternet+jslGetValue("ui$1"));
--- usr/www/all/html/de/fon/rulall1.frm.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/rulall1.frm	2007-07-26 15:15:54.000000000 +0200
@@ -33,8 +33,6 @@
 <input type="hidden" name="telcfg:settings/MSN/Port0/DiversionNumber" value="<? query telcfg:settings/MSN/Port0/DiversionNumber ?>" id="uiPostNsNr1" disabled>
 <input type="hidden" name="telcfg:settings/MSN/Port1/Diversion" value="<? query telcfg:settings/MSN/Port1/Diversion ?>" id="uiPostNsArt2" disabled>
 <input type="hidden" name="telcfg:settings/MSN/Port1/DiversionNumber" value="<? query telcfg:settings/MSN/Port1/DiversionNumber ?>" id="uiPostNsNr2" disabled>
-<input type="hidden" name="telcfg:settings/MSN/Port2/Diversion" value="<? query telcfg:settings/MSN/Port2/Diversion ?>" id="uiPostNsArt3" disabled>
-<input type="hidden" name="telcfg:settings/MSN/Port2/DiversionNumber" value="<? query telcfg:settings/MSN/Port2/DiversionNumber ?>" id="uiPostNsNr3" disabled>
 <? multiquery telcfg:settings/CallerIDActions/list `
 <input type="hidden" name="telcfg:settings/$1/CallerID" value="<? query telcfg:settings/$1/CallerID ?>" id="uiPostRubRufnr$1" disabled>
 <input type="hidden" name="telcfg:settings/$1/Action" value="<? query telcfg:settings/$1/Action ?>" id="uiPostRubAction$1" disabled>
--- usr/www/all/html/de/fon/rulall1.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/rulall1.html	2007-07-26 15:15:54.000000000 +0200
@@ -1,76 +1,75 @@
-<? include ../html/$var:lang/fon/rulall1.inc ?>
+<? include ../html/$var:lang/fon/rul1.inc ?>
 <div id="content">
 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo $var:Text1 ?>
+		Rufumleitung
 	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<table id="t1">
 			<tr id="uiAn" style="display:none">
 				<td class="c1"><span id="uiModeAnAuswahl" style="display:none"><input type="radio" name="OnMode" id="uiModeAn" onclick="OnChangeMode(0)"></span></td>
-				<td colspan="2"><label for="uiModeAn"><? echo $var:Text2 ?></label></td>
+				<td colspan=2><label for="uiModeAn">Alle Anrufe an</label></td>
 				<td><select size="1" id="uiViewAn" class="Eingabefeld" onchange="OnChangeAn(value)"></select></td>
 			</tr>
 			<tr id="uiAnFon" style="display:none">
 				<td class="c1"></td>
-				<td colspan="2"><? echo $var:Text2 ?></td>
+				<td colspan=2>Alle Anrufe an</td>
 				<td><script type="text/javascript">document.write(FonDisplay());</script></td>
 			</tr>
 			<tr id="uiBuch" style="display:none">
 				<td class="c1"><span id="uiModeBuchAuswahl" style="display:none"><input type="radio" name="OnMode" id="uiModeBuch" onclick="OnChangeMode(1)"></span></td>
-				<td><label for="uiModeBuch"><? echo $var:Text3 ?></label></td>
-				<td><? echo $var:Text4 ?></td>
+				<td><label for="uiModeBuch">Anrufe von</label></td>
+				<td>Telefonbuch</td>
 				<td><select size="1" id="uiViewFonbuch" class="Eingabefeld" onchange="OnChangeBuch(value)"></select></td>
 			</tr>
 			<tr id="uiRufnr" style="display:none">
 				<td class="c1"></td>
 				<td></td>
-				<td><? echo $var:Text5 ?></td>
+				<td>Rufnummer</td>
 				<td><input type="text" size="25" id="uiViewRufnr" maxlength="20" class="Eingabefeld"></td>
 			</tr>
-			<tr><td colspan="4">&nbsp;</td></tr>
+			<tr><td colspan=4>&nbsp;</td></tr>
 			<tr id="uiUeber" style="display:none">
 				<td class="c1"></td>
-				<td id="uiUeber1" colspan="2"><? echo $var:Text6 ?></td>
+				<td id="uiUeber1" colspan=2>umleiten über</td>
 				<td><select size="1" id="uiViewUeber" class="Eingabefeld"></select></td>
 			</tr>
 			<tr>
 				<td class="c1"></td>
-				<td colspan="2"><? echo $var:Text7 ?></td>
+				<td colspan=2>Zielrufnummer</td>
 				<td><input type="text" size="25" id="uiViewZiel" maxlength="20" class="Eingabefeld"></td>
 			</tr>
 			<tr id="uiArtFon" style="display:none">
 				<td class="c1"></td>
-				<td colspan="2"><? echo $var:Text8 ?></td>
+				<td colspan=2>Art der Umleitung</td>
 				<td>
 					<select size="1" id="uiViewOptionFon" class="Eingabefeld">
-						<option value="1"><? echo $var:Text9 ?></option>
-						<option value="2"><? echo $var:Text10 ?></option>
-						<option value="3"><? echo $var:Text11 ?></option>
-						<option value="4"><? echo $var:Text12 ?></option>
-						<option value="5"><? echo $var:Text13 ?></option>
-						<option value="6"><? echo $var:Text14 ?></option>
-						<option value="7"><? echo $var:Text15 ?></option>
-						<option value="0"><? echo $var:Text16 ?></option>
+						<option value="1">Sofort</option>
+						<option value="2">Verzögert</option>
+						<option value="3">bei Besetzt</option>
+						<option value="4">Verzögert/bei Besetzt</option>
+						<option value="5">Parallelruf</option>
+						<option value="6">bei Klingelsperre</option>
+						<option value="7">Direktruf</option>
+						<option value="0">Aus</option>
 					</select>
 				</td>
 			</tr>
 			<tr id="uiArtMsn" style="display:none">
 				<td class="c1"></td>
-				<td colspan="2"><? echo $var:Text8 ?></td>
+				<td colspan=2>Art der Umleitung</td>
 				<td>
 					<select size="1" id="uiViewOption" class="Eingabefeld">
-						<option value="0"><? echo $var:Text9 ?></option>
-						<option value="1"><? echo $var:Text10 ?></option>
-						<option value="2"><? echo $var:Text17 ?></option>
-						<option value="3"><? echo $var:Text11 ?></option>
-						<option value="4"><? echo $var:Text13 ?></option>
+						<option value="0">Sofort</option>
+						<option value="1">Verzögert</option>
+						<option value="2">Verzögert lang</option>
+						<option value="3">bei Besetzt</option>
 					</select>
 				</td>
 			</tr>
 			<tr id="uiArtBuch" style="display:none">
 				<td class="c1"></td>
-				<td colspan="2"><? echo $var:Text8 ?></td>
-				<td><? echo $var:Text9 ?></td>
+				<td colspan=2>Art der Umleitung</td>
+				<td>Sofort</td>
 			</tr>
 		</table>
 	</div></div></div></div></div></div>
--- usr/www/all/html/de/fon/rulall1.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/rulall1.js	2007-07-26 15:15:54.000000000 +0200
@@ -13,10 +13,6 @@
 <? include ../html/$var:lang/js/jsl.js ?>
 var g_preInternet	= "Internet: ";
 var g_preFestnetz	= "Festnetz: ";
-var g_txtOp_Unbekannt = "Unbekannt";
-var g_txtAlert_1 = "Die Zielrufnummer muss angegeben werden und darf nur aus Ziffern bestehen.";
-var g_txtAlert_2 = "Eine Rufumleitung für diese einkommende Rufnummer ist bereits vorhanden.";
-var g_txtAlert_3 = "Für diese einkommende Rufnummer ist bereits eine Rufsperre eingerichtet. Diese Rufsperre wird automatisch gelöscht. Fortfahren?";
 var g_msn0 = "<? query telcfg:settings/MSN/MSN0 ?>";
 var g_msn1 = "<? query telcfg:settings/MSN/MSN1 ?>";
 var g_msn2 = "<? query telcfg:settings/MSN/MSN2 ?>";
@@ -91,7 +87,7 @@
 			jslEnable("uiPostNsArt"+rul);
 			break;
 		case "MSN": {
-			if (!IsZielVorhanden(jslGetValue("uiViewZiel"))) {alert(g_txtAlert_1); return;}
+			if (!IsZielVorhanden(jslGetValue("uiViewZiel"))) {alert("Die Zielrufnummer muss angegeben werden und darf nur aus Ziffern bestehen."); return;}
 			jslCopyValue("uiPostMSN", "uiViewAn");
 			jslCopyValue("uiPostOutgoing", "uiViewUeber");
 			jslCopyValue("uiPostAction", "uiViewOption")
@@ -104,11 +100,11 @@
 			break;
 		}
 		case "Buch":
-			if (!IsZielVorhanden(jslGetValue("uiViewZiel"))) {alert(g_txtAlert_1); return;}
+			if (!IsZielVorhanden(jslGetValue("uiViewZiel"))) {alert("Die Zielrufnummer muss angegeben werden und darf nur aus Ziffern bestehen."); return;}
 			var x = IstActionVorhanden(jslGetValue("uiViewRufnr"));
 			if (x != "") {
 				if (jslGetValue("uiPostRubAction"+x) == "0") {
-					if (x != jslGetValue("uiPostRulId")) {alert(g_txtAlert_2); return;}
+					if (x != jslGetValue("uiPostRulId")) {alert("Eine Rufumleitung für diese einkommende Rufnummer ist bereits vorhanden."); return;}
 					jslCopyValue("uiPostRubRufnr", "uiViewRufnr");
 					jslCopyValue("uiPostRubOutgoing", "uiViewUeber");
 					jslCopyValue("uiPostRubDestination", "uiViewZiel")
@@ -118,7 +114,7 @@
 					jslEnable("uiPostRubActive");
 					jslEnable("uiPostRubDestination");
 				} else {
-					if (!confirm(g_txtAlert_3)) return;
+					if (!confirm("Für diese einkommende Rufnummer ist bereits eine Rufsperre eingerichtet. Diese Rufsperre wird automatisch gelöscht. Fortfahren?")) return;
 					jslCopyValue("uiPostRubRufnr"+x, "uiViewRufnr");
 					jslCopyValue("uiPostRubOutgoing"+x, "uiViewUeber");
 					jslSetValue("uiPostRubAction"+x, "0");
@@ -161,7 +157,7 @@
 					jslEnable(idNr);
 					jslEnable(idArt);
 				} else {
-					if (!IsZielVorhanden(jslGetValue("uiViewZiel"))) {alert(g_txtAlert_1); return;}
+					if (!IsZielVorhanden(jslGetValue("uiViewZiel"))) {alert("Die Zielrufnummer muss angegeben werden und darf nur aus Ziffern bestehen."); return;}
 					jslCopyValue("uiPostMSN", "uiViewAn");
 					jslCopyValue("uiPostOutgoing", "uiViewUeber");
 					jslCopyValue("uiPostAction", "uiViewOption")
@@ -173,11 +169,11 @@
 					jslEnable("uiPostActive");
 				}
 			} else {
-				if (!IsZielVorhanden(jslGetValue("uiViewZiel"))) {alert(g_txtAlert_1); return;}
+				if (!IsZielVorhanden(jslGetValue("uiViewZiel"))) {alert("Die Zielrufnummer muss angegeben werden und darf nur aus Ziffern bestehen."); return;}
 				var x = IstActionVorhanden(jslGetValue("uiViewRufnr"));
 				if (x != "") {
-					if (jslGetValue("uiPostRubAction"+x) == "0") {alert(g_txtAlert_2); return;}
-					if (!confirm(g_txtAlert_3)) return;
+					if (jslGetValue("uiPostRubAction"+x) == "0") {alert("Eine Rufumleitung Sperre für diese einkommende Rufnummer ist bereits vorhanden."); return;}
+					if (!confirm("Für diese einkommende Rufnummer ist bereits eine Rufsperre eingerichtet. Diese Rufsperre wird automatisch gelöscht. Fortfahren?")) return;
 					jslCopyValue("uiPostRubRufnr"+x, "uiViewRufnr");
 					jslCopyValue("uiPostRubOutgoing"+x, "uiViewUeber");
 					jslSetValue("uiPostRubAction"+x, "0");
@@ -214,7 +210,6 @@
 	if (Fon) {
 		addOption(id, "FON1", "FON 1");
 		addOption(id, "FON2", "FON 2");
-		addOption(id, "FON3", "FON 3");
 	}
 	fillId(id, false);
 }
@@ -225,6 +220,7 @@
 	if (g_msn$10 != "") addOption(id, "$10", g_preFestnetz+g_msn$10);` ?>
 	addOption(id, "POTS", g_preFestnetz+g_Pots);
 ` ?> 
+	
 	// Sip Zugänge anfügen
 <? multiquery sip:settings/sip/list(ID,displayname) '
 	if ("$3" != "") addOption(id, "SIP"+"$2", g_preInternet+jslGetValue("ui$1"));
@@ -236,7 +232,7 @@
 <? multiquery telcfg:settings/HotDialEntry/list `
 	addOption(id, jslGetValue("uiNr$1"), GetBuchName(jslGetValue("uiName$1")));
 ` ?>
-	addOption(id, "", g_txtOp_Unbekannt);
+	addOption(id, "", "unbekannt");
 	addOption(id, "leer", "");
 }
 function addOption (id, val, text) {
@@ -295,7 +291,7 @@
 	jslSetEnabled("uiViewRufnr", nr!="");
 }
 function IstActionVorhanden (number) {
-	var n = Number("<? query telcfg:settings/CallerIDActions/count ?>");
+	var n = Number("<? multiquerycount telcfg:settings/CallerIDActions/list ?>");
 	for (var i = 0; i<n; i++) {
 		if (jslGetValue("uiPostRubRufnrCallerIDActions"+i) == number) return "CallerIDActions"+i;
 	}
--- usr/www/all/html/de/fon/rulall.frm.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/rulall.frm	2007-07-26 15:15:54.000000000 +0200
@@ -2,8 +2,6 @@
 <input type="hidden" name="telcfg:settings/MSN/Port0/DiversionNumber" value="<? query telcfg:settings/MSN/Port0/DiversionNumber ?>" id="uiPostRulNr1" disabled>
 <input type="hidden" name="telcfg:settings/MSN/Port1/Diversion" value="<? query telcfg:settings/MSN/Port1/Diversion ?>" id="uiPostRulArt2" disabled>
 <input type="hidden" name="telcfg:settings/MSN/Port1/DiversionNumber" value="<? query telcfg:settings/MSN/Port1/DiversionNumber ?>" id="uiPostRulNr2" disabled>
-<input type="hidden" name="telcfg:settings/MSN/Port2/Diversion" value="<? query telcfg:settings/MSN/Port2/Diversion ?>" id="uiPostRulArt3" disabled>
-<input type="hidden" name="telcfg:settings/MSN/Port2/DiversionNumber" value="<? query telcfg:settings/MSN/Port2/DiversionNumber ?>" id="uiPostRulNr3" disabled>
 <? multiquery sip:settings/sip/list(displayname) '<input type="hidden" name="sip:settings/$1/displayname" value="$2" id="ui$1" disabled>
 ' ?>
 <? multiquery telcfg:settings/Diversity/list '<input type="hidden" name="telcfg:settings/$1/Active" value="<? query telcfg:settings/$1/Active ?>" id="uiPostActiv$1">
--- usr/www/all/html/de/fon/rulall.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/rulall.html	2007-07-26 15:15:54.000000000 +0200
@@ -3,28 +3,28 @@
 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
 		<? echo $var:Text1 ?>
 	</div></div></div></div></div></div>
-<? if eq `<? query box:settings/expertmode/activated ?>` `1` `
+	
+<? if eq '$var:usePSTN' 1 ` 
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 	<ul class="tabs">
-		<li class="tabs_on"><a href="javascript:uiDoCancel()"><? echo '$var:Text1' ?></a></li>
-		<li><a href="javascript:jslGoTo('fon', 'durchwahl')"><? echo '$var:Text50' ?></a></li>
+ 		<li class="tabs_on"><a href="javascript:uiDoCancel()">Rufumleitung</a></li>
+<? if eq `<? query box:settings/expertmode/activated ?>` `1` `<li><a href="javascript:jslGoTo('fon', 'durchwahl')">Durchwahl (Call Through)</a></li>` ?>
 	</ul>
 ` ?>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<p class="mb10"><? echo $var:Text2 ?></p>
 		<table id="tMsnRul" class="tborder">
 			<tr>
-				<th class="c1"><? echo '$var:Text51' ?></th>
-				<th class="c2"><? echo '$var:Text52' ?></th>
-				<th class="c3"><? echo '$var:Text53' ?></th>
-				<th class="c4"><? echo '$var:Text54' ?></th>
-				<th class="c5"><? echo '$var:Text55' ?></th>
+				<th class="c1">Aktiv</th>
+				<th class="c2">Anrufe</th>
+				<th class="c3">Umleiten über</th>
+				<th class="c4">Zielrufnummer</th>
+				<th class="c5">Art der Umleitung</th>
 				<th class="c7">&nbsp;</th>
 				<th class="c8">&nbsp;</th>
 			</tr>
 			<script type="text/javascript">document.write(TrNs("1", "<? query telcfg:settings/MSN/Port0/DiversionNumber ?>", "<? query telcfg:settings/MSN/Port0/Diversion ?>"));</script>
 			<script type="text/javascript">document.write(TrNs("2", "<? query telcfg:settings/MSN/Port1/DiversionNumber ?>", "<? query telcfg:settings/MSN/Port1/Diversion ?>"));</script>
-			<script type="text/javascript">document.write(TrNs("3", "<? query telcfg:settings/MSN/Port2/DiversionNumber ?>", "<? query telcfg:settings/MSN/Port2/Diversion ?>"));</script>
 <? multiquery telcfg:settings/Diversity/list(MSN,Outgoing,Destination,Action) `
 			<script type="text/javascript">document.write(TrRul("$1", "$2", "$3", "$4", "$5"));</script><!-- "$0" / "$1" -->
 ` ?>
@@ -33,7 +33,7 @@
 ` ?>
 			<script type="text/javascript">document.write(TrNichts());</script>
 		</table>
-		<p class="ar mt10"><input type="button" id="uiViewNewButton" onclick="uiDoNewRul('<? query telcfg:settings/Diversity/newid ?>')" value="<? echo '$var:Text56' ?>" class="Pushbutton" style="width: 140px;"></p>
+		<p class="ar mt10"><input type="button" id="uiViewNewButton" onclick="uiDoNewRul('<? query telcfg:settings/Diversity/newid ?>')" value="Neue Rufumleitung" class="Pushbutton" style="width: 140px;"></p>
 		<? include ../html/$var:lang/home/error.html ?>
 	</div></div></div></div></div></div>
 	<? include ../html/$var:lang/home/rbb_applycancel.html ?>
--- usr/www/all/html/de/fon/rulall.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/rulall.inc	2007-07-26 15:15:54.000000000 +0200
@@ -1,11 +1,49 @@
 <? include ../html/$var:lang/global.inc ?>
 <? setvariable var:Text1 'Rufumleitung' ?>
-<? setvariable var:Text2 'Hier können Sie ankommende Anrufe an eine andere Rufnummer umleiten. Mit Art der Rufumleitung legen sie fest, wann bzw. unter welcher Bedingung dir Rufumleitung durchgeführt werden soll.' ?>
-<? setvariable var:Text50 'Durchwahl (Call Through)' ?>
-<? setvariable var:Text51 'Aktiv' ?>
-<? setvariable var:Text52 'Anrufe' ?>
-<? setvariable var:Text53 'Umleiten über' ?>
-<? setvariable var:Text54 'Zielrufnummer' ?>
-<? setvariable var:Text55 'Umleitung' ?>
-<? setvariable var:Text56 'Neue Rufumleitung' ?>
-	
+<? setvariable var:Text2 'Hier können Sie einkommende Anrufe an eine andere Rufnummer umleiten. Mit der "Art der Umleitung" legen Sie fest, wann die Rufumleitung durchgeführt werden soll.' ?>
+<? setvariable var:Text3 'Liste der Rufumleitungen' ?>
+<? setvariable var:Text4 'Nebenstelle' ?>
+<? setvariable var:Text5 'Umleitung zur Zielrufnummer' ?>
+<? setvariable var:Text6 'Art der Umleitung' ?>
+<? setvariable var:Text7 'FON 1' ?>
+<? setvariable var:Text8 'Aus' ?>
+<? setvariable var:Text9 'Sofort' ?>
+<? setvariable var:Text10 'Verzögert' ?>
+<? setvariable var:Text11 'bei Besetzt' ?>
+<? setvariable var:Text12 'Verzögert/bei Besetzt' ?>
+<? setvariable var:Text13 'Parallelruf' ?>
+<? setvariable var:Text14 'bei Klingelsperre' ?>
+<? setvariable var:Text15 'Direktruf' ?>
+<? setvariable var:Text16 'FON 2' ?>
+<? setvariable var:Text17 'Durchwahl (Call Through)' ?>
+<? setvariable var:Text18 'Mit der Durchwahlfunktion können ankommende Rufe durch die weitere Eingabe einer Zielrufnummer über die $var:BoxName weitervermittelt werden.' ?>
+<? setvariable var:Text20 'Durchwahl (Call Through) aktiv' ?>
+<? setvariable var:Text21 'definierte Durchwahl' ?>
+<? setvariable var:Text22 'Anlagenkopplung' ?>
+<? setvariable var:Text23 'Durchwahl für Anrufe an der Rufnummer' ?>
+<? setvariable var:Text24 'Berechtigung für die Durchwahl (Call Through)' ?>
+<? setvariable var:Text25 'nach der Eingabe einer PIN' ?>
+<? setvariable var:Text26 'PIN' ?>
+<? setvariable var:Text27 'durch die Anschlussnummer des Anrufers (CallerID)' ?>
+<? setvariable var:Text28 'Anschlussnummer' ?>
+<? setvariable var:Text29 'Anrufe weiterverbinden über die Rufnummer' ?>
+<? setvariable var:Text30 'Mit der Anlagenkopplung kann die $var:BoxName mit einer vorhandenen Telefonanlage verbunden werden. Das ermöglicht es, mit den Telefonen an der angekoppelten Telefonanlage über das Internet zu telefonieren.' ?>
+<? setvariable var:Text31 'Anschluss an die angekoppelte Anlage' ?>
+<? setvariable var:Text32 'Verbinden Sie den Festnetzanschluss der $var:BoxName ("ISDN/analog") mit einer Nebenstelle der vorhandenen Telefonanlage.' ?>
+<? setvariable var:Text33 'Art der Nebenstelle der angekoppelten Anlage' ?>
+<? setvariable var:Text34 'Anrufe aus dem Internet' ?>
+<? setvariable var:Text35 'nicht an die angekoppelte Telefonanlage weiterleiten' ?>
+<? setvariable var:Text36 'weiterleiten an die angekoppelte Telefonanlage' ?>
+<? setvariable var:Text37 ' mit der' ?>
+<? setvariable var:Text38 'Rufnummer' ?>
+<? setvariable var:Text39 'Anrufe von der angekoppelten Telefonanlage' ?>
+<? setvariable var:Text40 'Weiterverbinden über die Internetrufnummer' ?>
+<? setvariable var:Text41 'Spontane Amtsholung verwenden' ?>
+<? setvariable var:Text42 'Anrufe ins Festnetz von den Nebenstellen der $var:BoxName' ?>
+<? setvariable var:Text43 'Ziffern für die Amtsholung in der angekoppelten Telefonanlage' ?>
+<? setvariable var:Text44 'Amtsholung' ?>
+<? setvariable var:Text45 'analoge Nebenstelle' ?>
+<? setvariable var:Text46 'ISDN-S0-Nebenstelle' ?>
+<? setvariable var:Text47 'Rufnummer für die Kopplung (MSN)' ?>
+<? setvariable var:Text48 'FON 3' ?>
+<? setvariable var:Text49 'FON 4' ?>
--- usr/www/all/html/de/fon/rulall.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/rulall.js	2007-07-26 15:15:54.000000000 +0200
@@ -9,12 +9,22 @@
 #tMsnRul td {padding: 1px 2px; overflow:hidden;}
 #tMsnRul th {padding: 1px 2px; overflow:hidden;}
 #tMsnRul .c1 {text-align: center; width: 30px}
-#tMsnRul .c2 {text-align: left; width: 120px;}
+#tMsnRul .c2 {text-align: left; width: 95px;}
 #tMsnRul .c3 {text-align: left; width: 95px;}
 #tMsnRul .c4 {text-align: left; width: 105px;}
-#tMsnRul .c5 {text-align: left; width: 75px;}
+#tMsnRul .c5 {text-align: left; width: 100px;}
 #tMsnRul .c7 {text-align: right; width: 30px;}
 #tMsnRul .c8 {text-align: right; width: 30px;}
+#tRub {margin: auto; width: 100%; table-layout: fixed; height: 12px; font-size: 11px; white-space:nowrap; }
+#tRub td {padding: 1px 2px; overflow:hidden;}
+#tRub th {padding: 1px 2px; overflow:hidden;}
+#tRub .c1 {text-align: center; width: 30px}
+#tRub .c2 {text-align: left; width: 95px;}
+#tRub .c3 {text-align: left; width: 95px;}
+#tRub .c4 {text-align: left; width: 105px;}
+#tRub .c5 {text-align: left; width: 100px;}
+#tRub .c7 {text-align: right; width: 30px;}
+#tRub .c8 {text-align: right; width: 30px;}
 .mb15 {margin-bottom: 15px;}
 .mt15 {margin-top: 15px;}
 .left25 {padding-left: 25px;}
@@ -102,7 +112,6 @@
 function uiDoSave() {
 	SetFonActiv("1");
 	SetFonActiv("2");
-	SetFonActiv("3");
 	jslFormSubmitEx("fon", "rulall", "rulall");
 }
 function SetFonActiv (n) {
--- usr/www/all/html/de/fon/rul.frm.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/rul.frm	2007-07-26 15:15:54.000000000 +0200
@@ -2,8 +2,6 @@
 <input type="hidden" name="telcfg:settings/MSN/Port0/DiversionNumber" value="<? query telcfg:settings/MSN/Port0/DiversionNumber ?>" id="uiPostRulNr1">
 <input type="hidden" name="telcfg:settings/MSN/Port1/Diversion" value="<? query telcfg:settings/MSN/Port1/Diversion ?>" id="uiPostRulArt2">
 <input type="hidden" name="telcfg:settings/MSN/Port1/DiversionNumber" value="<? query telcfg:settings/MSN/Port1/DiversionNumber ?>" id="uiPostRulNr2">
-<input type="hidden" name="telcfg:settings/MSN/Port2/Diversion" value="<? query telcfg:settings/MSN/Port2/Diversion ?>" id="uiPostRulArt3">
-<input type="hidden" name="telcfg:settings/MSN/Port2/DiversionNumber" value="<? query telcfg:settings/MSN/Port2/DiversionNumber ?>" id="uiPostRulNr3">
 <input type="hidden" name="telcfg:settings/CallThrough/Active" value="<? query telcfg:settings/CallThrough/Active ?>" id="uiPostCtAktiv">
 <input type="hidden" name="telcfg:settings/CallThrough/MSN" value="<? query telcfg:settings/CallThrough/MSN ?>" id="uiPostCtMsn">
 <input type="hidden" name="telcfg:settings/CallThrough/PIN" value="<? query telcfg:settings/CallThrough/PIN ?>" id="uiPostCtPin">
--- usr/www/all/html/de/fon/rul.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/rul.html	2007-07-26 15:15:54.000000000 +0200
@@ -48,22 +48,6 @@
 					</select>
 				</td>
 			</tr>
-			<tr>
-				<td class="c1"><? echo $var:Text48 ?></td>
-				<td class="c2"><input type="text" size="21" maxlength="20" id="uiViewRulNr3" class="Eingabefeld"></td>
-				<td class="c3">
-					<select size="1" id="uiViewRulArt3" class="Eingabefeld">
-						<option value="0"><? echo $var:Text8 ?></option>
-						<option value="1"><? echo $var:Text9 ?></option>
-						<option value="2"><? echo $var:Text10 ?></option>
-						<option value="3"><? echo $var:Text11 ?></option>
-						<option value="4"><? echo $var:Text12 ?></option>
-						<option value="5"><? echo $var:Text13 ?></option>
-						<option value="6"><? echo $var:Text14 ?></option>
-						<option value="7"><? echo $var:Text15 ?></option>
-					</select>
-				</td>
-			</tr>
 		</table>
 	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
@@ -85,16 +69,16 @@
 				<td class="c3"><script type="text/javascript">document.write(IndexDisplay("$3"));</script></td>
 				<td class="c4"><nobr><span title="$4">$4</span></nobr></td>
 				<td class="c5"><nobr><script type="text/javascript">document.write(ActionDisplay("$5"));</script></nobr></td>
-				<td class="c7"><button type="button" id="uiViewEdit$1" onClick="uiDoEditRul('$1')" value="<? echo '$var:Text50' ?>" title="<? echo '$var:Text50' ?>" style="width: 30px">
+				<td class="c7"><button type="button" id="uiViewEdit$1" onClick="uiDoEditRul('$1')" value="Ändern" title="Ändern" style="width: 30px">
 					<img src="../html/$var:lang/images/bearbeiten.gif" align=bottom width=16 height=16 hspace=4>
 				</button></td>
-				<td class="c8"><button type="button" id="uiViewDelete$1" onClick="uiDoDeleteRul('$1')" value="<? echo '$var:Text51' ?>" title="<? echo '$var:Text51' ?>" style="width: 30px">
+				<td class="c8"><button type="button" id="uiViewDelete$1" onClick="uiDoDeleteRul('$1')" value="Löschen" title="Löschen" style="width: 30px">
 					<img src="../html/$var:lang/images/loeschen.gif" align=bottom width=16 height=16 hspace=4>
 				</button></td>
 			</tr>
 ` ?>
-<? if eq <? query telcfg:settings/Diversity/count ?> 0 `
-			<tr><td colspan=7 class="ac" style="font-size: 13px"><? echo '$var:Text52' ?></td></tr>
+<? if eq <? multiquerycount telcfg:settings/Diversity/list ?> 0 `
+			<tr><td colspan=7 class="ac" style="font-size: 13px">Es sind keine Rufumleitungen eingerichtet.</td></tr>
 ` ?>
 		</table>
 		<p class="ar mt10"><input type="button" id="uiViewNewButton" onclick="uiDoNewRul('<? query telcfg:settings/Diversity/newid ?>')" value="Neue Rufumleitung" class="Pushbutton" style="width: 140px;"></p>
--- usr/www/all/html/de/fon/rul.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/rul.js	2007-07-26 15:15:54.000000000 +0200
@@ -39,10 +39,6 @@
 var g_mldDeleteRul = "Wollen Sie diese Rufumleitung löschen ?";
 var g_preInternet	= "Internet: ";
 var g_preFestnetz	= "Festnetz: ";
-var g_txtDisplay_1 = "Sofort";
-var g_txtDisplay_2 = "Verzögert kurz";
-var g_txtDisplay_3 = "Verzögert lang";
-var g_txtDisplay_4 = "bei Besetzt";
 var g_expertMode = "<? query box:settings/expertmode/activated ?>";
 var g_msn0 = "<? query telcfg:settings/MSN/MSN0 ?>";
 var g_msn1 = "<? query telcfg:settings/MSN/MSN1 ?>";
@@ -62,9 +58,6 @@
 	jslCopyValue("uiViewRulNr2", "uiPostRulNr2");
 	jslSetSelection("uiViewRulArt2", "0");
 	jslSetSelection("uiViewRulArt2", jslGetValue("uiPostRulArt2"));
-	jslCopyValue("uiViewRulNr3", "uiPostRulNr3");
-	jslSetSelection("uiViewRulArt3", "0");
-	jslSetSelection("uiViewRulArt3", jslGetValue("uiPostRulArt3"));
 	// "<? query telcfg:settings/RefreshDiversity ?>"
 <? multiquery telcfg:settings/Diversity/list '
 	uiSetViewActiv("uiViewActiv$1", "uiPostActiv$1");
@@ -73,12 +66,14 @@
 		jslDisplay("uiExperte", true);
 		var aktiv = jslGetValue("uiPostCtAktiv");
 		jslSetChecked("uiViewAktiv", aktiv != "0");
+	
 		jslCopyValue("uiViewPin", "uiPostCtPin");
 		var CallerID = "";
 		for (i=0; i<8; i++)
 		{
 			var cid = jslGetValue("uiPostCtCaller"+i);
-			if (cid!="") {
+		 if (cid!="")
+		 {
 				if (CallerID!="") CallerID+=";";
 				CallerID+=cid;
 			}
@@ -94,6 +89,7 @@
 			OnChangeOnArt(1);
 		}
 		OnClickAktiv();
+		
 		OnChangeMode(aktiv == "2" ? 1:0);
 		var str = jslGetValue("uiPostExtension");
 		jslSetValue("uiViewDispatchNummer", str);
@@ -116,6 +112,7 @@
 	addMsn(id, g_msn8);
 	addMsn(id, g_msn9);
 	addOption(id, "POTS", g_preFestnetz+g_Pots);
+	
 	// Sip Zugänge anfügen
 <? multiquery sip:settings/sip/list(ID,displayname) '
 	if ("$3" != "") addOption(id, "SIP"+"$2", g_preInternet+jslGetValue("ui$1"));
@@ -125,13 +122,11 @@
 function uiDoSave() {
 	if (!valIsZahl(jslGetValue("uiViewRulNr1"))) {alert(g_mldDigit); return;}
 	if (!valIsZahl(jslGetValue("uiViewRulNr2"))) {alert(g_mldDigit); return;}
-	if (!valIsZahl(jslGetValue("uiViewRulNr3"))) {alert(g_mldDigit); return;}
+		
 	jslCopyValue("uiPostRulNr1", "uiViewRulNr1");
 	jslCopyValue("uiPostRulArt1", "uiViewRulArt1");
 	jslCopyValue("uiPostRulNr2", "uiViewRulNr2");
 	jslCopyValue("uiPostRulArt2", "uiViewRulArt2");
-	jslCopyValue("uiPostRulNr3", "uiViewRulNr3");
-	jslCopyValue("uiPostRulArt3", "uiViewRulArt3");
 	if (g_expertMode == "1") {
 		if (jslGetChecked("uiViewAktiv")) {
 			if (jslGetChecked("uiViewDurchwahl")) {
@@ -174,6 +169,7 @@
 			jslSetValue("uiPostCtAktiv", "0");
 		}
 	}
+	
 	jslSetValue("uiPostMenu", "fon");
 	jslSetValue("uiPostPageName", "rul");
 	jslSetValue("uiPostErrorPageName", "rul");
@@ -242,6 +238,7 @@
 				g_InitMode0 = true;
 				fillId("uiViewCalls");
 				jslSetSelection("uiViewCalls", jslGetValue("uiPostCtMsn"));
+		
 				fillId("uiViewWeiterleiten");
 				jslSetSelection("uiViewWeiterleiten", jslGetValue("uiPostWeiterleiten"));
 			}
@@ -297,10 +294,10 @@
 }
 function ActionDisplay(n) {
 	switch (n) {
-		case "0": return g_txtDisplay_1;
-		case "1": return g_txtDisplay_2;
-		case "2": return g_txtDisplay_3;
-		case "3": return g_txtDisplay_4;
+		case "0": return "Sofort";
+		case "1": return "Verzögert kurz";
+		case "2": return "Verzögert lang";
+		case "3": return "bei Besetzt";
 	}
 	return n;
 }
--- usr/www/all/html/de/fon/sip1.frm.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/sip1.frm	2007-07-26 15:15:54.000000000 +0200
@@ -10,11 +10,6 @@
 <input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/stunserver" value="" id="uiPostStun">
 <input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/authname_needed" value="0" id="uiPostSipUri">
 <input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/outboundproxy" value="" id="uiPostProxy">
-<input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/dditype" value="0" id="uiPostDditype">
-<input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/only_call_from_registrar" value="0" id="uiPostSpit" disabled>
-<? if eq $var:Annex A `
-<input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/Trunk" value="" id="uiPostTrunk" disabled>
-` ?>
 <input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/sipping_enabled" value="<? query sip:settings/sip0/sipping_enabled ?>" id="uiSipPing">
 <input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/sipping_interval" value="<? query sip:settings/sip0/sipping_interval ?>" id="uiSipPingTimer">
 <input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/tx_packetsize_in_ms" value="<? if eq $var:OEM avme `20` `30` ?>" id="uiPostPacketsize" disabled>
@@ -27,11 +22,6 @@
 <input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/stunserver" value="<? query sip:settings/<? echo $var:sipnr ?>/stunserver ?>" id="uiPostStun">
 <input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/authname_needed" value="<? query sip:settings/<? echo $var:sipnr ?>/authname_needed ?>" id="uiPostSipUri">
 <input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/outboundproxy" value="<? query sip:settings/<? echo $var:sipnr ?>/outboundproxy ?>" id="uiPostProxy">
-<input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/dditype" value="<? query sip:settings/<? echo $var:sipnr ?>/dditype ?>" id="uiPostDditype">
-<input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/only_call_from_registrar" value="<? query sip:settings/<? echo $var:sipnr ?>/only_call_from_registrar ?>" id="uiPostSpit" disabled>
-<? if eq $var:Annex A `
-<input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/Trunk" value="<? query sip:settings/<? echo $var:sipnr ?>/Trunk ?>" id="uiPostTrunk" disabled>
-` ?>
 <input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/sipping_enabled" value="<? query sip:settings/<? echo $var:sipnr ?>/sipping_enabled ?>" id="uiSipPing">
 <input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/sipping_interval" value="<? query sip:settings/<? echo $var:sipnr ?>/sipping_interval ?>" id="uiSipPingTimer">
 <input type="hidden" name="sip:settings/<? echo $var:sipnr ?>/tx_packetsize_in_ms" value="<? query sip:settings/<? echo $var:sipnr ?>/tx_packetsize_in_ms ?>" id="uiPostPacketsize" disabled>
@@ -39,29 +29,36 @@
 <? if eq $var:isnew 1 `
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/AKN" value="1" id="uiPostAKN">
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/RegistryType" value="other" id="uiPostType">
+<input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/OKZ" value="" id="uiPostOKZ">
+<? if eq $var:OEM arcor `
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/UseOKZ" value="1" id="uiPostUseOKZ">
+` `
+<input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/UseOKZ" value="0" id="uiPostUseOKZ">
+`?>
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/MSN" value="" id="uiPostMsn">
+<input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/LKZ" value="" id="uiPostLKZ">
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/UseLKZ" value="0" id="uiPostUseLKZ">
+<input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/OKZPrefix" value="0" id="uiPostOKZPrefix">
+<input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/LKZPrefix" value="" id="uiPostLKZPrefix">
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/KeepOKZPrefix" value="1" id="uiPostKeepOKZPrefix">
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/KeepLKZPrefix" value="1" id="uiPostKeepLKZPrefix">
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/Suffix" value="" id="uiPostSuffix">
-<input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/AlternatePrefix" value="" id="uiPostAlternatePrefix">
 ` `
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/AKN" value="<? query telcfg:settings/$var:telnr/AKN ?>" id="uiPostAKN">
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/RegistryType" value="<? query telcfg:settings/<? echo $var:telnr ?>/RegistryType ?>" id="uiPostType">
+<input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/OKZ" value="<? query telcfg:settings/<? echo $var:telnr ?>/OKZ ?>" id="uiPostOKZ">
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/UseOKZ" value="<? query telcfg:settings/<? echo $var:telnr ?>/UseOKZ ?>" id="uiPostUseOKZ">
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/MSN" value="<? query telcfg:settings/<? echo $var:telnr ?>/MSN ?>" id="uiPostMsn">
+<input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/LKZ" value="<? query telcfg:settings/$var:telnr/LKZ ?>" id="uiPostLKZ">
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/UseLKZ" value="<? query telcfg:settings/$var:telnr/UseLKZ ?>" id="uiPostUseLKZ">
+<input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/OKZPrefix" value="<? query telcfg:settings/$var:telnr/OKZPrefix ?>" id="uiPostOKZPrefix">
+<input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/LKZPrefix" value="<? query telcfg:settings/$var:telnr/LKZPrefix ?>" id="uiPostLKZPrefix">
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/KeepOKZPrefix" value="<? query telcfg:settings/$var:telnr/KeepOKZPrefix ?>" id="uiPostKeepOKZPrefix">
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/KeepLKZPrefix" value="<? query telcfg:settings/$var:telnr/KeepLKZPrefix ?>" id="uiPostKeepLKZPrefix">
 <input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/Suffix" value="<? query telcfg:settings/$var:telnr/Suffix ?>" id="uiPostSuffix">
-<input type="hidden" name="telcfg:settings/<? echo $var:telnr ?>/AlternatePrefix" value="<? query telcfg:settings/$var:telnr/AlternatePrefix ?>" id="uiPostAlternatePrefix">
 ` ?>
-<input type="hidden" name="telcfg:settings/Location/OKZ" value="<? query telcfg:settings/Location/OKZ ?>" id="uiPostOKZ" disabled>
 <input type="hidden" name="telcfg:settings/MSN/Port0/MSN0" value="<? query telcfg:settings/MSN/Port0/MSN0 ?>" id="uiPostNr00" disabled>
 <input type="hidden" name="telcfg:settings/MSN/Port1/MSN0" value="<? query telcfg:settings/MSN/Port1/MSN0 ?>" id="uiPostNr10" disabled>
-<input type="hidden" name="telcfg:settings/MSN/Port2/MSN0" value="<? query telcfg:settings/MSN/Port2/MSN0 ?>" id="uiPostNr20" disabled>
-<input type="hidden" name="telcfg:settings/MSN/NTDefault" value="<? query telcfg:settings/MSN/NTDefault ?>" id="uiPostNTDefault" disabled>
 <input type="hidden" name="connection0:pppoe:settings/username" value="<? query connection0:pppoe:settings/username ?>" id="uiPostPppUsername" disabled>
 <? multiquery telcfg:settings/SIP/list '
 <input type="hidden" name="telcfg:settings/$1/Fallback" value="<? query telcfg:settings/$1/Fallback ?>" id="uiPostFallback$0" disabled>
--- usr/www/all/html/de/fon/sip1.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/sip1.html	2007-07-26 15:15:54.000000000 +0200
@@ -28,9 +28,20 @@
 						<option value="Freenet">$var:Text8</option>
 						<option value="GMX">$var:Text5</option>
 						<option value="Inode">$var:Text55</option>
-<? if eq $var:Annex A `
-						<option value="InodeIsdn">$var:Text101</option>
+						<option value="SuP">$var:Text6</option>
+						<option value="Sipgate">$var:Text10</option>
+						<option value="Strato">$var:Text44</option>
+						<option value="TOnline">$var:Text12</option>
+						<option value="Webde">$var:Text11</option>
 ` ?>
+<? if eq $var:OEM tcom 	`
+						<option value="1u1">$var:Text4</option>
+						<option value="AOL">$var:Text9</option>
+						<option value="Arcor">$var:Text7</option>
+						<option value="Dus">$var:Text13</option>
+						<option value="Freenet">$var:Text8</option>
+						<option value="GMX">$var:Text5</option>
+						<option value="Inode">$var:Text55</option>
 						<option value="SuP">$var:Text6</option>
 						<option value="Sipgate">$var:Text10</option>
 						<option value="Strato">$var:Text44</option>
@@ -45,9 +56,6 @@
 						<option value="Freenet">$var:Text8</option>
 						<option value="GMX">$var:Text5</option>
 						<option value="Inode">$var:Text55</option>
-<? if eq $var:Annex A `
-						<option value="InodeIsdn">$var:Text101</option>
-` ?>
 						<option value="SuP">$var:Text6</option>
 						<option value="Sipgate">$var:Text10</option>
 						<option value="Strato">$var:Text44</option>
@@ -58,15 +66,10 @@
 						<option value="1u1">$var:Text4</option>
 						<option value="AOL">$var:Text9</option>
 						<option value="Arcor">$var:Text7</option>
-						<option value="DBD">$var:Text98</option>
-						<option value="DBD-DSL">$var:Text99</option>
 						<option value="Dus">$var:Text13</option>
 						<option value="Freenet">$var:Text8</option>
 						<option value="GMX">$var:Text5</option>
 						<option value="Inode">$var:Text55</option>
-<? if eq $var:Annex A `
-						<option value="InodeIsdn">$var:Text101</option>
-` ?>
 						<option value="SuP">$var:Text6</option>
 						<option value="Sipgate">$var:Text10</option>
 						<option value="Strato">$var:Text44</option>
@@ -99,31 +102,17 @@
 			<table>
 				<tr>
 					<td class="c1"></td>
-					<td colspan=3 style="font-size:12px"><? echo $var:Text56 ?></td>
+					<td colspan=3 style="font-size:12px">Ortsvorwahl</td>
 				</tr>
 				<tr>
-					<td><? echo $var:Text57 ?></td>
+					<td>Rufnummer</td>
 					<td><input type="text" size="6" maxlength="12" class="Eingabefeld" id="uiViewArcorOKZ"></td>
-					<td><? echo $var:Text58 ?></td>
+					<td>-</td>
 					<td><input type="text" size="12" maxlength="128" class="Eingabefeld" id="uiViewArcorUsername"></td>
 				</tr>
 				<tr>
 					<td class="c1"></td>
-					<td colspan=3 style="font-size:12px; padding: 0px 1px 5px 1px"><? echo $var:Text59 ?></td>
-				</tr>
-			</table>
-		</div>
-		<div id="DbdRufnummer" class="left20 mb10" style="display:none">
-			<table>
-				<tr>
-					<td class="c1"></td>
-					<td colspan=3 style="font-size:12px"><? echo $var:Text56 ?></td>
-				</tr>
-				<tr>
-					<td><? echo $var:Text57 ?></td>
-					<td><input type="text" size="6" maxlength="12" class="Eingabefeld" id="uiViewDbdOKZ"></td>
-					<td><? echo $var:Text58 ?></td>
-					<td><input type="text" size="12" maxlength="128" class="Eingabefeld" id="uiViewDbdRufnummer"></td>
+					<td colspan=3 style="font-size:12px; padding: 0px 1px 5px 1px">z.B. 069</td>
 				</tr>
 			</table>
 		</div>
@@ -152,15 +141,9 @@
 					<td class="c1"><label for="uiViewPassword2"><span id="LabelKennwort2"><? echo $var:Text23 ?></span></label></td>
 					<td><input type="password" size="14" maxlength="128" class="Eingabefeld" id="uiViewPassword2" onfocus="uiSelect(id);"></td>
 				</tr>
-<? if eq $var:Annex A `
-				<tr id="Trunk" style="display:none">
-					<td class="c1"><label for="uiViewTrunk"><? echo '$var:Text102' ?></label></td>
-					<td><input type="text" size="40" maxlength="48" class="Eingabefeld" id="uiViewTrunk"></td>
-				</tr>
-` ?>
 				<tr id="Registrar" style="display:none">
-					<td class="c1" style="padding-top:10px"><label for="uiViewRegistrar"><? echo $var:Text24 ?></label></td>
-					<td style="padding-top:10px"><input type="text" size="45" maxlength="48" class="Eingabefeld" id="uiViewRegistrar"></td>
+					<td class="c1"><label for="uiViewRegistrar"><? echo $var:Text24 ?></label></td>
+					<td><input type="text" size="45" maxlength="48" class="Eingabefeld" id="uiViewRegistrar"></td>
 				</tr>
 				<tr id="Proxy" style="display:none">
 					<td class="c1"><label for="uiViewProxy"><? echo $var:Text45 ?></label></td>
@@ -178,73 +161,59 @@
 			</table>
 		</div>
 		<div id="ArcorUseOKZ" class="left20" style="display:none">
-			<p><input type="checkbox" id="uiViewArcorUseOKZ">&nbsp;<label for="uiViewArcorUseOKZ"><? echo $var:Text26 ?></label></p>
+			<p><input type="checkbox" id="uiViewArcorUseOKZ">&nbsp;<label for="uiViewArcorUseOKZ">Ortsvorwahl für ausgehende Gespräche einfügen</label></p>
 		</div>
 		<div id="UseOKZ" style="display:none">
-			<p id="OKZProvider"style="display:none"><input type="checkbox" id="uiViewUseOKZProvider">&nbsp;<label for="uiViewUseOKZProvider"><? echo $var:Text26 ?></label></p>
-			<div id="uiOKZ" style="display:none">
-				<p class="mt10 mb5"><? echo $var:Text94 ?></p>
-				<div class="left25">
-					<table>
-						<tr>
-							<td class="c1"><label for="uiViewOKZ"><? echo $var:Text56 ?></label></td>
-							<td><input type="text" size="5" maxlength="32" class="Eingabefeld" id="uiViewOKZ"></td>
-						</tr>
-					</table>
-				</div>
-			</div>
+			<p><input type="checkbox" id="uiViewUseOKZ" onclick="OnChangeOKZ()">&nbsp;<label for="uiViewUseOKZ"><? echo $var:Text26 ?></label></p>
+			<p class="left20"><label for="uiViewOKZ"><? echo $var:Text27 ?></label>&nbsp;<input type="text" size="6" maxlength="32" class="Eingabefeld" id="uiViewOKZ"></p>
 		</div>
+<? if eq $var:showLKZ 1 '
 		<div id="ExpUseOKZ" style="display:none">
-			<div id="uiExpOKZ" style="display:none">
-				<p class="mt10"><? echo $var:Text94 ?></p>
-				<div class="left25"> 
+			<p class="mb10">$var:Text28</p>
+			<p><input type="checkbox" id="uiViewExpUseOKZ">&nbsp;<label for="uiViewExpUseOKZ">$var:Text33</label></p>
+			<div class="left25 mb10">
 					<table>
 						<tr>
-							<td class="c1"><label for="uiViewExpOKZ"><? echo $var:Text56 ?></label></td>
-							<td><input type="text" size="5" maxlength="32" class="Eingabefeld" id="uiViewExpOKZ"></td>
+						<td class="c0"><label for="uiViewExpOKZ">$var:Text34</label></td>
+						<td><input type="text" size="6" maxlength="32" class="Eingabefeld" id="uiViewExpOKZ"></td>
+					</tr>
+					<tr>
+						<td class="c0"><label for="uiViewExpOKZPrefix">$var:Text35</label></td>
+						<td><input type="text" size="6" maxlength="32" class="Eingabefeld" id="uiViewExpOKZPrefix"></td>
+					</tr>
+					<tr>
+						<td colspan=2><input type="checkbox" id="uiViewExpKeepOKZPrefix">&nbsp;<label for="uiViewExpKeepOKZPrefix">$var:Text36</label></td>
 						</tr>
 					</table>
 				</div>
-			</div>
-			<p class="mt10 mb5"><? echo $var:Text92 ?></p>
-			<div class="left25">
+			<p><input type="checkbox" id="uiViewExpUseLKZ">&nbsp;<label for="uiViewExpUseLKZ">$var:Text37</label></p>
+			<div class="left25 mb10">
 				<table>
 					<tr>
-						<td class="c1"><? echo $var:Text93 ?></td>
-						<td class="c3"><input type="checkbox" id="uiViewExpKeepLKZPrefix"></td>
-						<td class="c3"><input type="checkbox" id="uiViewExpUseLKZ" onclick="OnExpLkz()"></td>
-						<td class="c3"><input type="checkbox" id="uiViewExpKeepOKZPrefix"></td>
-						<td class="c3"><input type="checkbox" id="uiViewExpUseOKZ" onclick="OnExpOkz()"></td>
+						<td class="c0"><label for="uiViewExpLKZ">$var:Text38</label></td>
+						<td><input type="text" size="6" maxlength="32" class="Eingabefeld" id="uiViewExpLKZ"></td>
 					</tr>
 					<tr>
-						<td class="c1">&nbsp;</td>
-						<td class="c3"><? query telcfg:settings/Location/LKZPrefix ?></td>
-						<td class="c3"><? query telcfg:settings/Location/LKZ ?></td>
-						<td class="c3"><? query telcfg:settings/Location/OKZPrefix ?></td>
-						<td class="c3"><? query telcfg:settings/Location/OKZ ?></td>
+						<td class="c0"><label for="uiViewExpLKZPrefix">$var:Text39</label></td>
+						<td><input type="text" size="6" maxlength="32" class="Eingabefeld" id="uiViewExpLKZPrefix"></td>
+					</tr>
+					<tr>
+						<td colspan=2><input type="checkbox" id="uiViewExpKeepLKZPrefix">&nbsp;<label for="uiViewExpKeepLKZPrefix">$var:Text40</label></td>
 					</tr>
 				</table>
-				<p class="pCheck25 mb10" id="uiShowAlternatePrefix_USA" style="display:none">
-					<input type="checkbox" name="AlternatePrefix" id="uiViewAlternatePrefix_USA">&nbsp;<label for="uiViewAlternatePrefix_USA"><? echo $var:Text95 ?></label><br /><? echo $var:Text96 ?>
-				</p>
 			</div>
 <? if neq $var:OEM avme '
-			<div class="left25"> 
+			<div>
 				<table>
 					<tr>
-						<td class="c1"><label for="uiViewExpSuffix">$var:Text46</label></td>
+						<td class="c00"><label for="uiViewExpSuffix">$var:Text46</label></td>
 						<td><input type="text" size="10" maxlength="32" class="Eingabefeld" id="uiViewExpSuffix"></td>
 					</tr>
 				</table>
 			</div>
 ' ?>
-			<div id="SpitSchutz" style="display:none">
-				<p class="mt10 mb5"><? echo $var:Text103 ?></p>
-				<div class="left50">
-					<input class="left25 pCheck25" type="checkbox" id="uiViewSpit">&nbsp;<label for="uiViewSpit"><? echo $var:Text104 ?></label>
-				</div>
-			</div>
 		</div>
+' ?>
 		<? include ../html/$var:lang/home/error.html ?>
 	</div></div></div></div></div></div>
 <? if eq $var:showtcom 1 '
--- usr/www/all/html/de/fon/sip1.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/sip1.inc	2007-07-26 15:15:54.000000000 +0200
@@ -24,11 +24,16 @@
 <? setvariable var:Text23 'Kennwortbestätigung' ?>
 <? setvariable var:Text24 'Registrar' ?>
 <? setvariable var:Text25 'STUN-Server' ?>
-<? setvariable var:Text26 'Ortsvorwahl für ausgehende Gespräche einfügen' ?>
+<? setvariable var:Text26 'Ortsvorwahl ergänzen' ?>
+<? setvariable var:Text27 'Geben Sie hier Ihre Ortsvorwahl ein' ?>
 <? setvariable var:Text28 'Stellen Sie Ortskennzahl und Landeskennzahl gemäß Ihren Anforderungen ein oder richten Sie sich nach den Vorgaben Ihres Telefonieanbieters.' ?>
 <? setvariable var:Text33 'Ortskennzahl verwenden' ?>
+<? setvariable var:Text34 'Geben Sie hier Ihre Ortskennzahl ein' ?>
+<? setvariable var:Text35 'Geben Sie hier Ihren Ortskennzahl-Prefix ein' ?>
 <? setvariable var:Text36 'Ortskennzahl-Prefix beibehalten' ?>
 <? setvariable var:Text37 'Landeskennzahl verwenden' ?>
+<? setvariable var:Text38 'Geben Sie hier Ihre Landeskennzahl ein' ?>
+<? setvariable var:Text39 'Geben Sie hier Ihren Landeskennzahl-Prefix ein' ?>
 <? setvariable var:Text40 'Landeskennzahl-Prefix beibehalten' ?>
 <? setvariable var:Text41 'Der Anbieter unterstützt die Online-Liste' ?>
 <? setvariable var:Text42 'Internetrufnummer für die Anmeldung verwenden' ?>
--- usr/www/all/html/de/fon/sip1.js.orig	2007-07-26 15:15:54.000000000 +0200
+++ usr/www/all/html/de/fon/sip1.js	2007-07-26 15:15:54.000000000 +0200
@@ -2,6 +2,7 @@
 <? if eq $var:OEM avm '<? setvariable var:showtcom 1 ?>' ?>
 <? if eq $var:OEM aol '<? setvariable var:showtcom 1 ?>' ?>
 <? if eq $var:OEM tcom '<? setvariable var:showtcom 1 ?>' ?>
+<? setvariable var:showLKZ 1 ?>
 <!--		../fon/sip.js		-->
 <style type="text/css">
 <!--
@@ -12,11 +13,9 @@
 .c0 {padding: 1px 15px 1px 0px; width: 300px;}
 .c00 {padding: 1px 15px 1px 0px; width: 325px;}
 .c1 {width: 180px;}
-.c3 {padding-right: 4px; text-align:center; vertical-align:bottom;}
 #tLinks td {padding: 2px 0px;}
 #tLinks .c1 {width: 330px;}
 #tLinks .c2 {width: 190px; text-align: right;}
-.pCheck25 {text-indent: -25px; padding-left: 25px;}
 -->
 </style>
 <script type="text/javascript">
@@ -32,7 +31,6 @@
 var g_mldRegChar = "Bitte überprüfen Sie die Eingabe des Registrar und entfernen Sie Leerzeichen und andere ungültige Zeichen.";
 var g_mldEMailChar = "Bitte überprüfen Sie die Eingabe der eMail-Adresse und entfernen Sie Leerzeichen und andere ungültige Zeichen.";
 var g_mldRufnrChar = "Bitte überprüfen Sie die Eingabe der Internettelefonnummer und entfernen Sie Leerzeichen, Klammern und andere Sonderzeichen.";
-var g_mldNoRufnrIsdn = "Bitte geben Sie Ihre %1 an.\x0A\x0AFalls Sie von Ihrem Anbieter keine Rufnummer bekommen haben, können Sie eine beliebige Nummer angeben. Die %1 wird für die Rufnummernzuweisung an die angeschlossenen Telefonie-Endgeräte benötigt.";
 var g_mldNoRufnr = "Bitte geben Sie Ihre %1 an.";
 var g_mldRufnrDigit = "Die %1 darf nur aus Ziffern bestehen.";
 var g_mldNoPppoe = "FRITZ!Box verfügt momentan nicht über Zugangsdaten für eine Internetverbindung. Der eingerichtete Internettelefoniezugang ist jedoch nur nutzbar, wenn FRITZ!Box über Zugangsdaten verfügt. Geben Sie unter Internet/Zugangsdaten die erforderlichen Daten ein.";
@@ -40,7 +38,7 @@
 var g_mldPasswortEnterNew	= "Sie haben Ihre Zugangsdaten geändert.\x0d\x0aBitte geben Sie Ihr %1 erneut ein.";
 var g_txt1u1Kennwort		= "VoIP-Passwort";
 var g_txt1u1Confirmation	= "Passwortbestätigung";
-var g_txtFreenetRufnr			= "freenet-Rufnummer";
+var g_txtFreenetRufnr			= "iPhone-Rufnummer";
 var g_txtFreenetVoIPName		= "Login-Name";
 var g_txtFreenetKennwort		= "VoIP-Passwort";
 var g_txtFreenetConfirmation	= "Passwortbestätigung";
@@ -77,16 +75,6 @@
 var g_txtInodeVoIPName		= "Rufnummer";
 var g_txtInodeKennwort		= "Kennwort";
 var g_txtInodeConfirmation	= "Kennwortbestätigung";
-<? if eq $var:Annex A `
-var g_txtInodeIsdnRufnr			= "Internetrufnummer";
-var g_txtInodeIsdnVoIPName		= "Rufnummer";
-var g_txtInodeIsdnKennwort		= "Kennwort";
-var g_txtInodeIsdnConfirmation	= "Kennwortbestätigung";
-` ?>
-var g_txtDbdRufnr				= "Rufnummer";
-var g_txtDbdVoIPName		= "SIP-Kennung";
-var g_txtDbdKennwort			= "SIP-Passwort";
-var g_txtDbdConfirmation		= "Passwort-Bestätigung";
 var g_txtSonstRufnr			= "Internetrufnummer";
 var g_txtSonstVoIPName		= "Benutzername";
 var g_txtSonstKennwort		= "Kennwort";
@@ -99,9 +87,7 @@
 var g_isDsl = "<? echo $var:isDsl ?>";
 var g_isAta = "<? echo $var:isAta ?>";
 var g_AtaMode = "<? query box:settings/ata_mode ?>";
-var g_ShowOKZ = false;
 function uiDoOnLoad() {
-	if (jslGetValue("uiPostOKZ") == "") g_ShowOKZ = true;
 	jslGetCheckValue("uiViewUseSip", "uiPostUseSip");
 	jslCopyValue("uiViewRufnr","uiPostRufnr");
 	jslCopyValue("uiViewUsername","uiPostUsername");
@@ -111,33 +97,29 @@
 	jslCopyValue("uiViewProxy","uiPostProxy");
 	jslCopyValue("uiViewStun","uiPostStun");
 	jslSetChecked("uiViewSipUri", jslGetValue("uiPostSipUri") == "1");
-<? if eq $var:Annex A `
-	jslCopyValue("uiViewTrunk", "uiPostTrunk");
-`?>
+	
+<? if eq $var:showLKZ 1 '
 	if (g_expertMode == "1") {
-		jslDisplay("uiExpOKZ", g_ShowOKZ);
 		jslGetCheckValue("uiViewExpUseOKZ", "uiPostUseOKZ");
+		jslCopyValue("uiViewExpOKZ", "uiPostOKZ");
 		jslGetCheckValue("uiViewExpKeepOKZPrefix", "uiPostKeepOKZPrefix");
+		jslCopyValue("uiViewExpOKZPrefix", "uiPostOKZPrefix");
 		jslGetCheckValue("uiViewExpUseLKZ", "uiPostUseLKZ");
+		jslCopyValue("uiViewExpLKZ", "uiPostLKZ");
 		jslGetCheckValue("uiViewExpKeepLKZPrefix", "uiPostKeepLKZPrefix");
-		g_okzprestate = jslGetChecked("uiViewExpKeepOKZPrefix");
-		g_lkzprestate = jslGetChecked("uiViewExpKeepLKZPrefix");
+		jslCopyValue("uiViewExpLKZPrefix", "uiPostLKZPrefix");
 <? if neq $var:OEM avme '
 		jslCopyValue("uiViewExpSuffix", "uiPostSuffix");
 ' ?>
-		jslSetChecked("uiViewAlternatePrefix_USA", jslGetValue("uiPostAlternatePrefix") == "011");
-		jslSetChecked("uiViewSpit", jslGetValue("uiPostSpit") == "1");
-	} else {
-		jslDisplay("uiOKZ", g_ShowOKZ);
 	}
+' ?>
 	jslCopyValue("uiView1u1Username","uiPostRufnr");
 	jslSetValue("uiViewArcorUsername", ArcorUsername());
-	jslGetCheckValue("uiViewUseOKZProvider", "uiPostUseOKZ");
+	jslGetCheckValue("uiViewUseOKZ", "uiPostUseOKZ");
 	jslGetCheckValue("uiViewArcorUseOKZ", "uiPostUseOKZ");
-	jslSetValue("uiViewArcorOKZ", ArcorOKZ());
-	jslSetValue("uiView1u1OKZ", UnitedInternetOKZ());
-	jslSetValue("uiViewDbdRufnummer", DbdUsername());
-	jslSetValue("uiViewDbdOKZ", DbdOKZ());
+	jslSetValue("uiViewOKZ", GetOKZDisplay("uiPostOKZ"));
+	jslSetValue("uiViewArcorOKZ", GetOKZDisplay("uiPostOKZ"));
+	jslCopyValue("uiView1u1OKZ", "uiPostOKZ");
 	OnChangeSip();
 	if (g_Variante == "arcor") {
 		if ((jslGetValue("uiPostRegistrar") != "") && (jslGetValue("uiPostRegistrar") != "arcor.de")) {
@@ -210,67 +192,21 @@
 			jslSetSelection("uiViewProvider", "Dus");
 			OnChangeProvider("Dus");
 		} else if (registrar == "voip.inode.at") {
-<? if eq $var:Annex A `
-			if (jslGetValue("uiPostDditype") == "0") {
-				jslSetSelection("uiViewProvider", "Inode");
-				OnChangeProvider("Inode");
-			} else {
-				jslSetSelection("uiViewProvider", "InodeIsdn");
-				OnChangeProvider("InodeIsdn");
-			}
-` `
 			jslSetSelection("uiViewProvider", "Inode");
 			OnChangeProvider("Inode");
-` ?>			
-		} else if (registrar.indexOf("dbd-") >= 0) {
-			if (registrar.indexOf("dsl") >= 0) {
-				jslSetSelection("uiViewProvider", "DBD-DSL");
-				OnDbd();
-			} else {
-				jslSetSelection("uiViewProvider", "DBD");
-				OnDbd();
-			}
 		} else {
 			jslSetSelection("uiViewProvider", "Sonst");
 			OnChangeProvider("Sonst");
 		}
 ' ?>
 	}
-	if (g_expertMode == "1") {
-		OnExpLkz();
-		OnExpOkz();
-	}
 }
 function ArcorUsername () {
-	return jslGetValue("uiPostMsn");
-}
-function ArcorOKZ() {
-	var rufnr = jslGetValue("uiPostMsn");
-	var username = jslGetValue("uiPostUsername");
-	if (username.length <= rufnr.length) return "";
-	if (username.substr(username.length-rufnr.length) != rufnr) return "";
-	return username.substr(0, username.length-rufnr.length);
-}
-function UnitedInternetUsername() {
-	return jslGetValue("uiPostRufnr");
-}
-function UnitedInternetOKZ() {
+	// Die eventuell vorhandene OKZ muss entfernt werden
 	var rufnr = jslGetValue("uiPostRufnr");
-	var username = jslGetValue("uiPostUsername");
-	if (username.substr(0,2) != "49") return "";
-	if (username.length <= rufnr.length+2) return "";
-	if (username.substr(username.length-rufnr.length) != rufnr) return "";
-	return username.substr(2, username.length-rufnr.length-2);
-}
-function DbdUsername () {
-	return jslGetValue("uiPostMsn");
-}
-function DbdOKZ() {
-	var rufnr = jslGetValue("uiPostMsn");
-	var username = jslGetValue("uiPostRufnr");
-	if (username.length <= rufnr.length) return "";
-	if (username.substr(username.length-rufnr.length) != rufnr) return "";
-	return username.substr(0, username.length-rufnr.length);
+	var okz = GetOKZDisplay("uiPostOKZ");
+	if (rufnr.indexOf(okz) != 0) return rufnr;
+	return rufnr.substr(okz.length);
 }
 function uiDoValidate() {
 	var provider = jslGetValue("uiViewProvider");
@@ -319,8 +255,7 @@
 <? if eq $var:OEM avme `
 function SaveAvme() {
 	var rufnr = jslGetValue("uiViewRufnr");
-	if (rufnr.length == 0) {alert1(g_mldNoRufnrIsdn, g_LabelRufnr); return false;}
-	if (!valIsZahl(rufnr)) {alert1(g_mldRufnrDigit, g_LabelRufnr); return false;}
+	if (rufnr.length == 0) {alert1(g_mldNoRufnr, g_LabelRufnr); return false;}
 	jslCopyValue("uiPostRufnr","uiViewRufnr");
 	jslCopyValue("uiPostMsn","uiViewRufnr");
 	if (!valIsAtSipname(jslGetValue("uiViewUsername"))) {alert(g_mldNameChar); return false;}
@@ -333,30 +268,19 @@
 	if (ShowStun()) jslCopyValue("uiPostStun", "uiViewStun");
 	SetRegType("other");
 	if (g_expertMode == "1") {
-		if (g_ShowOKZ) {
-			if (!valIsZahl(jslGetValue("uiViewExpOKZ"))) {alert(g_mldOkzDigit); return false;}
-			jslSetValue("uiPostOKZ", GetOKZohneNull("uiViewExpOKZ"));
-			jslEnable("uiPostOKZ");
-		}
 		jslSetCheckValue("uiPostUseOKZ", "uiViewExpUseOKZ");
-		if (jslGetChecked("uiViewExpUseOKZ"))
+		if (!valIsZahl(jslGetValue("uiViewExpOKZ"))) {alert(g_mldOkzDigit); return false;}
+		jslCopyValue("uiPostOKZ", "uiViewExpOKZ");
 			jslSetCheckValue("uiPostKeepOKZPrefix", "uiViewExpKeepOKZPrefix");
-		else
-			jslSetValue("uiPostKeepOKZPrefix", "1");
+		jslCopyValue("uiPostOKZPrefix", "uiViewExpOKZPrefix");
 		jslSetCheckValue("uiPostUseLKZ", "uiViewExpUseLKZ");
-		if (jslGetChecked("uiViewExpUseLKZ"))
+		if (!valIsZahl(jslGetValue("uiViewExpLKZ"))) {alert(g_mldLkzDigit); return false;}
+		jslCopyValue("uiPostLKZ", "uiViewExpLKZ");
 			jslSetCheckValue("uiPostKeepLKZPrefix", "uiViewExpKeepLKZPrefix");
-		else
-			jslSetValue("uiPostKeepLKZPrefix", "1");
+		jslCopyValue("uiPostLKZPrefix", "uiViewExpLKZPrefix");
 <? if neq $var:OEM avme '
 		jslCopyValue("uiPostSuffix", "uiViewExpSuffix");
 ' ?>
-	} else {
-		if (g_ShowOKZ) {
-			if (!valIsZahl(jslGetValue("uiViewOKZ"))) {alert(g_mldOkzDigit); return false;}
-			jslSetValue("uiPostOKZ", GetOKZohneNull("uiViewOKZ"));
-			jslEnable("uiPostOKZ");
-		}
 	}
 	return true;
 }
@@ -367,8 +291,6 @@
 	jslSetValue("uiPostProxy","");
 	jslSetValue("uiPostSipUri", "0");
 	jslSetValue("uiPostStun","");
-	jslSetValue("uiPostDditype", "0");
-	jslDisable("uiPostSpit");
 	var type= jslGetValue("uiViewProvider");
 	if (type == "1u1") {
 		if (!SaveUnitedInternet("1und1", "1und1.de", "1und1.de")) return false;
@@ -395,18 +317,22 @@
 		jslSetValue("uiPostRufnr", name);
 		jslCopyValue("uiPostMsn","uiViewArcorUsername");
 		jslSetCheckValue("uiPostUseOKZ", "uiViewArcorUseOKZ");
-		if (g_ShowOKZ) {
 			jslSetValue("uiPostOKZ", GetOKZohneNull("uiViewArcorOKZ"));
-			jslEnable("uiPostOKZ");
-		}
-	} else if (type == "DBD" || type== "DBD-DSL") {
-		if (!SaveDbd()) return false;
 	} else {
-		if (type != "Inode" && type != "InodeIsdn") {
+		if (type != "Inode") {
 			var rufnr = jslGetValue("uiViewRufnr");
-			if (rufnr.length == 0) {alert1(g_mldNoRufnrIsdn, g_LabelRufnr); return false;}
-			if (!valIsZahl(rufnr)) {alert1(g_mldRufnrDigit, g_LabelRufnr); return false;}
+			if (rufnr.length == 0) {alert1(g_mldNoRufnr, g_LabelRufnr); return false;}
+		}
+<? if eq $var:showLKZ 1 `
+		if (g_expertMode == "1") {
+			if (!valIsZahl(jslGetValue("uiViewExpOKZ"))) {alert(g_mldOkzDigit); return false;}
+			if (!valIsZahl(jslGetValue("uiViewExpLKZ"))) {alert(g_mldLkzDigit); return false;}
+		} else {
+			if (jslGetChecked("uiViewUseOKZ") && !valOKZ(jslGetValue("uiViewOKZ"))) return false;
 		}
+` `
+		if (jslGetChecked("uiViewUseOKZ") && !valOKZ(jslGetValue("uiViewOKZ"))) return false;
+` ?>
 		if (type == "Sipgate") {
 			if (!valIsSipname(jslGetValue("uiViewUsername"))) {alert(g_mldNameChar); return false;}
 			jslSetValue("uiPostRegistrar", "sipgate.de");
@@ -424,10 +350,6 @@
 			// Bei freenet den STUN-Server immer eintragen
 			jslSetValue("uiPostStun", "freenet.de");
 			SetRegType("freenet");
-			if (g_expertMode == "1") {
-				jslSetValue("uiPostSpit", jslGetChecked("uiViewSpit") ? "1":"0");
-				jslEnable("uiPostSpit");
-			}
 		} else if (type == "Strato") {
 			if (!SaveStrato()) return false;
 <? if eq $var:showtcom 1 '
@@ -442,11 +364,7 @@
 		} else if (type == "Webde") {
 			if (!SaveWebde()) return false;
 		} else if (type == "Inode") {
-			if (!SaveInode(false)) return false;
-<? if eq $var:Annex A `
-		} else if (type == "InodeIsdn") {
-			if (!SaveInode(true)) return false;
-` ?>
+			if (!SaveInode()) return false;
 		} else if (type == "Dus") {
 			if (!SaveDus()) return false;
 		} else {
@@ -461,36 +379,30 @@
 		if (type == "Sipgate" || type=="AOL") {
 			jslSetValue("uiPostUseOKZ", "0");
 		} else {
+<? if eq $var:showLKZ 1 `
 			if (g_expertMode == "1") {
-				if (g_ShowOKZ) {
-					if (!valIsZahl(jslGetValue("uiViewExpOKZ"))) {alert(g_mldOkzDigit); return false;}
-					jslSetValue("uiPostOKZ", GetOKZohneNull("uiViewExpOKZ"));
-					jslEnable("uiPostOKZ");
-				}
 				jslSetCheckValue("uiPostUseOKZ", "uiViewExpUseOKZ");
-				if (jslGetChecked("uiViewExpUseOKZ"))
+				jslCopyValue("uiPostOKZ", "uiViewExpOKZ");
 					jslSetCheckValue("uiPostKeepOKZPrefix", "uiViewExpKeepOKZPrefix");
-				else
-					jslSetValue("uiPostKeepOKZPrefix", "1");
+				jslCopyValue("uiPostOKZPrefix", "uiViewExpOKZPrefix");
 				jslSetCheckValue("uiPostUseLKZ", "uiViewExpUseLKZ");
-				if (jslGetChecked("uiViewExpUseLKZ"))
+				jslCopyValue("uiPostLKZ", "uiViewExpLKZ");
 					jslSetCheckValue("uiPostKeepLKZPrefix", "uiViewExpKeepLKZPrefix");
-				else
-					jslSetValue("uiPostKeepLKZPrefix", "1");
+				jslCopyValue("uiPostLKZPrefix", "uiViewExpLKZPrefix");
 				jslCopyValue("uiPostSuffix", "uiViewExpSuffix");
 			} else {
-				if (g_ShowOKZ) {
-					if (!valIsZahl(jslGetValue("uiViewOKZ"))) {alert(g_mldOkzDigit); return false;}
+				jslSetCheckValue("uiPostUseOKZ", "uiViewUseOKZ");
 					jslSetValue("uiPostOKZ", GetOKZohneNull("uiViewOKZ"));
-					jslEnable("uiPostOKZ");
-				}
-				jslSetCheckValue("uiPostUseOKZ", "uiViewUseOKZProvider");
 			}
+` `
+			jslSetCheckValue("uiPostUseOKZ", "uiViewUseOKZ");
+			jslSetValue("uiPostOKZ", GetOKZohneNull("uiViewOKZ"));
+` ?>
 		}
 		if (type != "Dus") jslCopyValue("uiPostUsername","uiViewUsername");
 		jslCopyValue("uiPostPassword","uiViewPassword");
 		jslCopyValue("uiPostRufnr","uiViewRufnr");
-		if (type != "InodeIsdn") jslCopyValue("uiPostMsn","uiViewRufnr");
+		jslCopyValue("uiPostMsn","uiViewRufnr");
 	}
 	return true;
 }
@@ -511,20 +423,17 @@
 	jslCopyValue("uiPostPassword","uiViewPassword");
 	jslSetValue("uiPostRegistrar", registrar);
 	jslSetValue("uiPostStun", stun);
-	jslCopyValue("uiPostRufnr", "uiView1u1Username");
-	jslCopyValue("uiPostMsn", "uiView1u1Username");
-	jslSetValue("uiPostUseOKZ", "1");
-	if (g_ShowOKZ) {
+	jslCopyValue("uiPostRufnr","uiView1u1Username");
+	jslCopyValue("uiPostMsn","uiView1u1Username");
+	jslSetValue("uiPostUseOKZ","1");
 		jslSetValue("uiPostOKZ", GetOKZohneNull("uiView1u1OKZ"));
-		jslEnable("uiPostOKZ");
-	}
 	return true;
 }
 ` ?>
 <? if neq $var:OEM avme `
 function SaveStrato () {
 	if (!valIsSipname(jslGetValue("uiViewUsername"))) {alert(g_mldNameChar); return false;}
-	jslSetValue("uiPostRegistrar", "strato-iphone.de");
+	jslSetValue("uiPostRegistrar","strato-iphone.de");
 	jslSetValue("uiPostStun", "iphone-stun.strato-iphone.de");
 	jslEnable("uiPostStun");
 	SetRegType("other");
@@ -532,35 +441,15 @@
 }
 ` ?>
 <? if neq $var:OEM avme `
-function SaveInode (isdn) {
-	if (isdn) {
-		var rufnr = jslGetValue("uiViewUsername");
-		if (rufnr.length == 0) {alert1(g_mldNoRufnrIsdn, g_LabelUsername); return false;}
-		if (!valIsZahl(rufnr)) {alert1(g_mldRufnrDigit, g_LabelUsername); return false;}
-		var trunk = jslGetValue("uiViewTrunk");
-		if (!valIsZahl(rufnr)) {alert1(g_mldRufnrDigit, "Kopfnummer"); return false;}
-	} else {
+function SaveInode () {
 		if (!valIsSipname(jslGetValue("uiViewUsername"))) {alert(g_mldNameChar); return false;}
-	}
 	jslSetValue("uiPostRegistrar","voip.inode.at");
 	jslSetValue("uiPostProxy","voip.inode.at");
 	SetRegType("other");
 	jslCopyValue("uiViewRufnr","uiViewUsername");
-	if (isdn) {
-		jslSetValue("uiPostDditype", "2");
-		var username = jslGetValue("uiViewUsername");
-		jslCopyValue("uiPostTrunk", "uiViewTrunk");
-		jslEnable("uiPostTrunk");
-		jslSetValue("uiPostMsn", jslGetValue("uiViewTrunk")+"0");
-		jslSetValue("uiPostNTDefault", "<? echo $var:telnr ?>"+"#"+jslGetValue("uiViewTrunk")); 
-		jslEnable("uiPostNTDefault");
-	} else {
-		jslSetValue("uiPostDditype", "0");
-	}
-	
 	// Erweiterte Einstellungen fest setzen, ohne Rücksichtauf andere Zugänge
 	// Keine Festnetzersatzverbindung
-	for (var i=0; i < <? query telcfg:settings/SIP/count ?>; i++) {
+	for (var i=0; i<10; i++) {
 		jslSetValue("uiPostFallback"+i, "0");
 		jslEnable("uiPostFallback"+i);
 	}
@@ -569,6 +458,7 @@
 	jslSetValue("uiPostLowCodecs", "0");
 	jslEnable("uiPostDynCodec");
 	jslEnable("uiPostLowCodecs");
+	
 	return true;
 }
 ` ?>
@@ -592,44 +482,19 @@
 	return true;
 }
 ` ?>
-<? if neq $var:OEM avme `
-function SaveDbd() {
-	if (!valOKZ(jslGetValue("uiViewDbdOKZ"))) return false;
-	var rufnr = jslGetValue("uiViewDbdRufnummer");
-	if (rufnr.length == 0) {alert1(g_mldNoRufnr, g_LabelRufnr); return false;}
-	if (!valIsZahl(rufnr)) {alert(g_mldUsernameDigit); return false;}
-	jslCopyValue("uiPostUsername", "uiViewUsername");
-	jslCopyValue("uiPostPassword", "uiViewPassword");
-	jslCopyValue("uiPostRegistrar", "uiViewRegistrar");
-	SetRegType("other");
-	jslSetValue("uiPostRufnr", GetOKZDisplay("uiViewDbdOKZ")+rufnr);
-	jslCopyValue("uiPostMsn","uiViewDbdRufnummer");
-	jslSetValue("uiPostUseOKZ", "1");
-	if (g_ShowOKZ) {
-		jslSetValue("uiPostOKZ", GetOKZohneNull("uiViewDbdOKZ"));
-		jslEnable("uiPostOKZ");
-	}
-	return true;
-}		
-` ?>
 function SetRegType (t) {
 	jslSetValue("uiPostType", t);
 <? if neq $var:OEM avme '
 	if (g_expertMode != "1") {
+		jslSetValue("uiPostLKZ", "");
 		jslSetValue("uiPostUseLKZ", "0");
+		jslSetValue("uiPostOKZPrefix", "0");
+		jslSetValue("uiPostLKZPrefix", "");
 		jslSetValue("uiPostKeepOKZPrefix", "1");
 		jslSetValue("uiPostKeepLKZPrefix", "1");
 		jslSetValue("uiPostSuffix", "");
 	}
 ' ?>
-	if (g_expertMode == "1") {
-		if ( t == "other") {
-			jslSetValue( "uiPostAlternatePrefix", "");
-			if ( (jslGetValue("uiViewProvider") == "Sonst") && (jslGetChecked( "uiViewAlternatePrefix_USA") == true)) {
-				jslSetValue( "uiPostAlternatePrefix", "011");
-			}
-		}
-	}
 	switch (t) {
 		case "aol":
 		case "avm":
@@ -655,15 +520,11 @@
 	jslPopHelp("hilfe_fon_internet");
 }
 function OnChangeProvider (id) {
-	jslDisplay("SpitSchutz", false);
 	if (id == "GMX") On1u1();
 	else if (id == "1u1") On1u1();
 	else if (id == "SuP") On1u1();
 	else if (id == "Freenet") OnFreenet();
 	else if (id == "Inode") OnInode();
-<? if eq $var:Annex A `
-	else if (id == "InodeIsdn") OnInodeIsdn();
-` ?>	
 	else if (id == "AOL") OnAOL();
 	else if (id == "Arcor") OnArcor();
 	else if (id == "Sipgate") OnSipgate();
@@ -673,19 +534,13 @@
 ' ?>
 	else if (id == "Webde") OnWebde();
 	else if (id == "Dus") OnDus();
-	else if (id == "DBD") {OnDbd(); jslSetValue("uiViewRegistrar", "sip.dbd-breitband.de");}
-	else if (id == "DBD-DSL") {OnDbd(); jslSetValue("uiViewRegistrar", "sip-dsl.dbd-breitband.de");}
 	else OnSonst();
-<? if eq $var:Annex A `
-	jslDisplay("Trunk", id=="InodeIsdn");
-` ?>
 }
 function On1u1() {
 	g_LabelRufnr = "VoIP-Rufnummer";
 	g_LabelKennwort = g_txt1u1Kennwort;
 	jslDisplay("1u1Username", true);
 	jslDisplay("ArcorUsername", false);
-	jslDisplay("DbdRufnummer", false);
 	jslDisplay("Username", false);
 	jslDisplay("Rufnummer", false);
 	jslDisplay("Label", false);
@@ -696,8 +551,8 @@
 	jslDisplay("Proxy", false);
 	jslDisplay("Stun", false);
 	jslDisplay("SipUri", false);
-	DisplayOKZ("off");
-	jslDisplay("uiShowAlternatePrefix_USA", false);
+	DisplayOKZ(false);
+	jslDisplay("ArcorUseOKZ", false);
 <? if eq $var:showtcom 1 '
 	jslDisplay("uiTComLinks", false);
 ' ?>
@@ -708,7 +563,6 @@
 	g_LabelKennwort = g_txtAOLKennwort;
 	jslDisplay("1u1Username", false);
 	jslDisplay("ArcorUsername", false);
-	jslDisplay("DbdRufnummer", false);
 	jslDisplay("Username", true);
 	jslDisplay("Rufnummer", true);
 	jslDisplay("Label", true);
@@ -721,8 +575,8 @@
 	jslDisplay("Proxy", false);
 	jslDisplay("Stun", false);
 	jslDisplay("SipUri", false);
-	DisplayOKZ("off");
-	jslDisplay("uiShowAlternatePrefix_USA", false);
+	DisplayOKZ(false);
+	jslDisplay("ArcorUseOKZ", false);
 <? if eq $var:showtcom 1 '
 	jslDisplay("uiTComLinks", false);
 ' ?>
@@ -732,7 +586,6 @@
 	g_LabelKennwort = g_txtArcorKennwort;
 	jslDisplay("1u1Username", false);
 	jslDisplay("ArcorUsername", true);
-	jslDisplay("DbdRufnummer", false);
 	jslDisplay("Username", false);
 	jslDisplay("Rufnummer", false);
 	jslDisplay("Label", false);
@@ -743,8 +596,8 @@
 	jslDisplay("Proxy", false);
 	jslDisplay("Stun", ShowStun());
 	jslDisplay("SipUri", false);
-	DisplayOKZ("arcor");
-	jslDisplay("uiShowAlternatePrefix_USA", false);
+	DisplayOKZ(false);
+	jslDisplay("ArcorUseOKZ", true);
 <? if eq $var:showtcom 1 '
 	jslDisplay("uiTComLinks", false);
 ' ?>
@@ -768,7 +621,6 @@
 	g_LabelKennwort = g_txtFreenetKennwort;
 	jslDisplay("1u1Username", false);
 	jslDisplay("ArcorUsername", false);
-	jslDisplay("DbdRufnummer", false);
 	jslDisplay("Username", true);
 	jslDisplay("Rufnummer", true);
 	jslDisplay("Label", true);
@@ -781,9 +633,8 @@
 	jslDisplay("Proxy", false);
 	jslDisplay("Stun", false);
 	jslDisplay("SipUri", false);
-	DisplayOKZ("on");
-	jslDisplay("SpitSchutz", g_expertMode == "1");
-	jslDisplay("uiShowAlternatePrefix_USA", false);
+	DisplayOKZ(true);
+	jslDisplay("ArcorUseOKZ", false);
 <? if eq $var:showtcom 1 '
 	jslDisplay("uiTComLinks", false);
 ' ?>
@@ -794,7 +645,6 @@
 	g_LabelKennwort = g_txtSipgateKennwort;
 	jslDisplay("1u1Username", false);
 	jslDisplay("ArcorUsername", false);
-	jslDisplay("DbdRufnummer", false);
 	jslDisplay("Username", true);
 	jslDisplay("Rufnummer", true);
 	jslDisplay("Label", true);
@@ -807,8 +657,8 @@
 	jslDisplay("Proxy", false);
 	jslDisplay("Stun", ShowStun());
 	jslDisplay("SipUri", false);
-	DisplayOKZ("off");
-	jslDisplay("uiShowAlternatePrefix_USA", false);
+	DisplayOKZ(false);
+	jslDisplay("ArcorUseOKZ", false);
 <? if eq $var:showtcom 1 '
 	jslDisplay("uiTComLinks", false);
 ' ?>
@@ -819,7 +669,6 @@
 	g_LabelKennwort = g_txtStratoKennwort;
 	jslDisplay("1u1Username", false);
 	jslDisplay("ArcorUsername", false);
-	jslDisplay("DbdRufnummer", false);
 	jslDisplay("Username", true);
 	jslDisplay("Rufnummer", true);
 	jslDisplay("Label", true);
@@ -832,8 +681,8 @@
 	jslDisplay("Proxy", false);
 	jslDisplay("Stun", false);
 	jslDisplay("SipUri", false);
-	DisplayOKZ("on");
-	jslDisplay("uiShowAlternatePrefix_USA", false);
+	DisplayOKZ(true);
+	jslDisplay("ArcorUseOKZ", false);
 <? if eq $var:showtcom 1 '
 	jslDisplay("uiTComLinks", false);
 ' ?>
@@ -846,7 +695,6 @@
 	jslSetValue("uiViewRegistrar","tel.t-online.de");
 	jslDisplay("1u1Username", false);
 	jslDisplay("ArcorUsername", false);
-	jslDisplay("DbdRufnummer", false);
 	jslDisplay("Username", true);
 	jslDisplay("Rufnummer", true);
 	jslDisplay("Label", true);
@@ -860,8 +708,8 @@
 	jslDisplay("Proxy", false);
 	jslDisplay("Stun", ShowStun());
 	jslDisplay("SipUri", false);
-	DisplayOKZ("on");
-	jslDisplay("uiShowAlternatePrefix_USA", false);
+	DisplayOKZ(true);
+	jslDisplay("ArcorUseOKZ", false);
 	jslDisplay("uiTComLinks", true);
 }
 ' ?>
@@ -872,7 +720,6 @@
 	jslSetValue("uiViewRegistrar","sip.web.de");
 	jslDisplay("1u1Username", false);
 	jslDisplay("ArcorUsername", false);
-	jslDisplay("DbdRufnummer", false);
 	jslDisplay("Username", true);
 	jslDisplay("Rufnummer", true);
 	jslDisplay("Label", true);
@@ -885,8 +732,8 @@
 	jslDisplay("Proxy", false);
 	jslDisplay("Stun", ShowStun());
 	jslDisplay("SipUri", false);
-	DisplayOKZ("on");
-	jslDisplay("uiShowAlternatePrefix_USA", false);
+	DisplayOKZ(true);
+	jslDisplay("ArcorUseOKZ", false);
 <? if eq $var:showtcom 1 '
 	jslDisplay("uiTComLinks", false);
 ' ?>
@@ -897,7 +744,6 @@
 	g_LabelKennwort = g_txtDusKennwort;
 	jslDisplay("1u1Username", false);
 	jslDisplay("ArcorUsername", false);
-	jslDisplay("DbdRufnummer", false);
 	jslDisplay("Username", true);
 	jslDisplay("Rufnummer", true);
 	jslDisplay("Label", true);
@@ -911,33 +757,8 @@
 	jslDisplay("Proxy", false);
 	jslDisplay("Stun", false);
 	jslDisplay("SipUri", false);
-	DisplayOKZ("on");
-	jslDisplay("uiShowAlternatePrefix_USA", false);
-<? if eq $var:showtcom 1 '
-	jslDisplay("uiTComLinks", false);
-' ?>
-}
-function OnDbd() {
-	g_LabelRufnr = g_txtDbdRufnr;
-	g_LabelUsername = g_txtDbdVoIPName;
-	g_LabelKennwort = g_txtDbdKennwort;
-	jslDisplay("1u1Username", false);
-	jslDisplay("ArcorUsername", false);
-	jslDisplay("DbdRufnummer", true);
-	jslDisplay("Username", true);
-	jslDisplay("Rufnummer", false);
-	jslDisplay("Label", false);
-	SetSpanText("LabelRufnr", g_txtDbdRufnr);
-	SetSpanText("LabelUsername", g_txtDbdVoIPName);
-	SetSpanText("LabelKennwort", g_txtDbdKennwort);
-	SetSpanText("LabelKennwort2", g_txtDbdConfirmation);
-	jslDisplay("uiUserprefix", false);
-	jslDisplay("Registrar", true);
-	jslDisplay("Proxy", false);
-	jslDisplay("Stun", false);
-	jslDisplay("SipUri", false);
-	DisplayOKZ("off");
-	jslDisplay("uiShowAlternatePrefix_USA", false);
+	DisplayOKZ(true);
+	jslDisplay("ArcorUseOKZ", false);
 <? if eq $var:showtcom 1 '
 	jslDisplay("uiTComLinks", false);
 ' ?>
@@ -948,7 +769,6 @@
 	g_LabelKennwort = g_txtInodeKennwort;
 	jslDisplay("1u1Username", false);
 	jslDisplay("ArcorUsername", false);
-	jslDisplay("DbdRufnummer", false);
 	jslDisplay("Username", true);
 	jslDisplay("Rufnummer", false);
 	jslDisplay("Label", false);
@@ -961,46 +781,18 @@
 	jslDisplay("Proxy", false);
 	jslDisplay("Stun", false);
 	jslDisplay("SipUri",false);
-	DisplayOKZ("on");
-	jslDisplay("uiShowAlternatePrefix_USA", false);
+	DisplayOKZ(true);
+	jslDisplay("ArcorUseOKZ", false);
 <? if eq $var:showtcom 1 '
 	jslDisplay("uiTComLinks", false);
 ' ?>
 }
-<? if eq $var:Annex A `
-function OnInodeIsdn() {
-	g_LabelRufnr = g_txtInodeIsdnRufnr;
-	g_LabelUsername = g_txtInodeIsdnVoIPName;
-	g_LabelKennwort = g_txtInodeIsdnKennwort;
-	jslDisplay("1u1Username", false);
-	jslDisplay("ArcorUsername", false);
-	jslDisplay("DbdRufnummer", false);
-	jslDisplay("Username", true);
-	jslDisplay("Rufnummer", false);
-	jslDisplay("Label", false);
-	SetSpanText("LabelRufnr", g_txtInodeIsdnRufnr);
-	SetSpanText("LabelUsername", g_txtInodeIsdnVoIPName);
-	SetSpanText("LabelKennwort", g_txtInodeIsdnKennwort);
-	SetSpanText("LabelKennwort2", g_txtInodeIsdnConfirmation);
-	jslDisplay("uiUserprefix", false);
-	jslDisplay("Registrar", false);
-	jslDisplay("Proxy", false);
-	jslDisplay("Stun", false);
-	jslDisplay("SipUri",false);
-	DisplayOKZ("on");
-	jslDisplay("uiShowAlternatePrefix_USA", false);
-<? if eq $var:showtcom 1 '
-	jslDisplay("uiTComLinks", false);
-' ?>
-}
-` ?>
 function OnSonst() {
 	g_LabelRufnr = g_txtSonstRufnr;
 	g_LabelUsername = g_txtSonstVoIPName;
 	g_LabelKennwort = g_txtSonstKennwort;
 	jslDisplay("1u1Username", false);
 	jslDisplay("ArcorUsername", false);
-	jslDisplay("DbdRufnummer", false);
 	jslDisplay("Username", true);
 	jslDisplay("Rufnummer", true);
 	jslDisplay("Label", true);
@@ -1013,40 +805,35 @@
 	jslDisplay("Proxy", g_expertMode == "1");
 	jslDisplay("Stun", ShowStun());
 	jslDisplay("SipUri", g_expertMode == "1");
-	DisplayOKZ("other");
-	jslDisplay("uiShowAlternatePrefix_USA", g_expertMode == "1");
+	DisplayOKZ(true);
+	jslDisplay("ArcorUseOKZ", false);
 <? if eq $var:showtcom 1 '
 	jslDisplay("uiTComLinks", false);
 ' ?>
 }
-// mode: off, on, arcor, other
-function DisplayOKZ (mode) {
-	jslDisplay("ArcorUseOKZ", mode == "arcor");
-<? if eq $var:OEM avme `	
-	jslDisplay("UseOKZ", false);
+function DisplayOKZ(b) {
+<? if eq $var:showLKZ 1 `
+	if (g_expertMode == "1") {
+		jslDisplay("ExpUseOKZ", b);
+	} else {
+		<? if eq $var:OEM avme 'jslDisplay("UseOKZ", false);' 'jslDisplay("UseOKZ", b);' ?>
+	}
 ` `
-	jslDisplay("UseOKZ", (mode == "other" || mode == "on") && g_expertMode == "0");
+	jslDisplay("UseOKZ", b);
 ` ?>	
-	jslDisplay("OKZProvider", (mode == "other" || mode == "on") && g_expertMode == "0");
-	jslDisplay("ExpUseOKZ", (mode == "other" || mode == "on") && g_expertMode == "1");
 }
 // nummer = SIP0 oder SIP1
 function SetNst (nummer) {
 	if (jslGetValue("uiPostNr00") == "") {jslSetValue("uiPostNr00", nummer); jslEnable("uiPostNr00");}
 	if (jslGetValue("uiPostNr10") == "") {jslSetValue("uiPostNr10", nummer); jslEnable("uiPostNr10");}
-	if (jslGetValue("uiPostNr20") == "") {jslSetValue("uiPostNr20", nummer); jslEnable("uiPostNr20");}
-	if (jslGetValue("uiPostNTDefault") == "") {jslSetValue("uiPostNTDefault", nummer); jslEnable("uiPostNTDefault");}
 }
 // führende Null bei Ortsvorwahl abschneiden
 function GetOKZohneNull (id) {
 	var h = document.getElementById(id);
 	if (h == null) return "";
 	var nr = jslDoEliminateBlanks(h.value);
-	return OhneNull(nr);
-}
-function OhneNull (str) {
-	if (str.substr(0,1) != "0") return str;
-	return str.substr(1, str.length-1);
+	if (nr.substr(0,1) != "0") return nr;
+	return nr.substr(1, nr.length-1);
 }
 // Ortsvorwahl mit führender Null anzeigen
 function GetOKZDisplay (id) {
@@ -1067,60 +854,54 @@
 	jslSetEnabled("uiViewArcorOKZ", b);
 	jslSetEnabled("uiViewArcorUsername", b);
 	jslSetEnabled("uiViewArcorUseOKZ", b);
-	jslSetEnabled("uiViewDbdOKZ", b);
-	jslSetEnabled("uiViewDbdRufnummer", b);
 	jslSetEnabled("uiViewRufnr", b);
 	jslSetEnabled("uiViewUsername", b);
 	jslSetEnabled("uiViewPassword", b);
 	jslSetEnabled("uiViewPassword2", b);
 	jslSetEnabled("uiViewRegistrar", b);
-	jslSetEnabled("uiViewUseOKZProvider", b);
+	jslSetEnabled("uiViewUseOKZ", b);
 	jslSetEnabled("uiViewProxy", b);
 	jslSetEnabled("uiViewStun", b);
 	jslSetEnabled("uiViewSipUri", b);
-	jslSetEnabled("uiViewOKZ", b);
-	jslSetEnabled("uiViewExpOKZ", b);
-	jslSetEnabled("uiViewExpUseOKZ", b);
-	jslSetEnabled("uiViewExpKeepOKZPrefix", b);
-	jslSetEnabled("uiViewExpUseLKZ", b);
-	jslSetEnabled("uiViewExpKeepLKZPrefix", b);
+	if (b) {
+<? if neq $var:showLKZ 1 '
+		OnChangeOKZ();
+' ' 
+		jslEnable("uiViewExpUseOKZ");
+		jslEnable("uiViewExpOKZ");
+		jslEnable("uiViewExpOKZPrefix");
+		jslEnable("uiViewExpKeepOKZPrefix");
+		jslEnable("uiViewExpUseLKZ");
+		jslEnable("uiViewExpLKZ");
+		jslEnable("uiViewExpLKZPrefix");
+		jslEnable("uiViewExpKeepLKZPrefix");
+<? if neq $var:OEM avme '
+		jslEnable("uiViewExpSuffix");
+' ?>
+' ?>
+	} else {
+		jslDisable("uiViewOKZ");
+<? if eq $var:showLKZ 1 '
+		jslDisable("uiViewExpUseOKZ");
+		jslDisable("uiViewExpOKZ");
+		jslDisable("uiViewExpOKZPrefix");
+		jslDisable("uiViewExpKeepOKZPrefix");
+		jslDisable("uiViewExpUseLKZ");
+		jslDisable("uiViewExpLKZ");
+		jslDisable("uiViewExpLKZPrefix");
+		jslDisable("uiViewExpKeepLKZPrefix");
 <? if neq $var:OEM avme '
-	jslSetEnabled("uiViewExpSuffix", b);
+		jslDisable("uiViewExpSuffix");
 ' ?>
+' ?>
+	}
+}
+function OnChangeOKZ() {
+	jslSetEnabled("uiViewOKZ", jslGetChecked("uiViewUseOKZ"));
 }
 function ShowStun () {
 	return (g_isDsl == "0") || (g_isAta == "1" && g_AtaMode == "1");
 }
-var g_lkzprestate;
-function OnExpLkz()
-{
-	if (jslGetChecked('uiViewExpUseLKZ'))
-	{
-		jslEnable('uiViewExpKeepLKZPrefix');
-		jslSetChecked('uiViewExpKeepLKZPrefix',g_lkzprestate);
-	}
-	else
-	{
-		g_lkzprestate = jslGetChecked('uiViewExpKeepLKZPrefix');
-		jslSetChecked('uiViewExpKeepLKZPrefix',false);
-		jslDisable('uiViewExpKeepLKZPrefix');
-	}
-}
-var g_okzprestate;
-function OnExpOkz()
-{
-	if (jslGetChecked('uiViewExpUseOKZ'))
-	{
-		jslEnable('uiViewExpKeepOKZPrefix');
-		jslSetChecked('uiViewExpKeepOKZPrefix',g_okzprestate);
-	}
-	else
-	{
-		g_okzprestate = jslGetChecked('uiViewExpKeepOKZPrefix');
-		jslSetChecked('uiViewExpKeepOKZPrefix',false);
-		jslDisable('uiViewExpKeepOKZPrefix');
-	}
-}
 <? if eq $var:showtcom 1 '
 function OnEMailAdresse() {
 	var pp = window.open("http://www.t-online.de/service/redir/ata_emailadresse.htm", "_blank");
--- usr/www/all/html/de/fon/siplist.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/siplist.html	2007-07-26 15:15:54.000000000 +0200
@@ -5,11 +5,8 @@
 	</div></div></div></div></div></div>
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 		<ul class="tabs">
-			<li class="tabs_on"><a href="javascript:uiDoCancel()"><? echo $var:Text23 ?></a></li>
-			<li><a href="javascript:uiDoOptionen()"><? echo $var:Text19 ?></a></li>
-<? if eq <? query box:settings/expertmode/activated ?> 1 `
-			<li><a href="javascript:uiDoQuality()"><? echo `$var:Text27` ?></a></li>
-` ?>
+ 		<li class="tabs_on"><a href="javascript:uiDoCancel()">Internetrufnummern</a></li>
+ 		<li><a href="javascript:uiDoOptionen()">Erweiterte Einstellungen</a></li>
 		</ul>
 		<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 			<p class="mb10"><? echo $var:Text2 ?><b><? echo $var:Text14 ?></b><? echo $var:Text15 ?></p>
@@ -31,16 +28,12 @@
 					<td class="c2">$2</td>
 					<td class="c3"><script type="text/javascript">document.write(ProviderDisplay("$3"));</script></td>
 					<td class="c6"><script type="text/javascript">document.write(AuswahlDisplay("$4"));</script></td>
-					<td class="Iconbutton">
-						<button type="button" id="uiViewEdit$1" onClick="uiDoEdit('$1')" value="$var:txtIconBtnEdit" title="$var:txtIconBtnEdit" style="width: 30px">
-							<img src="../html/$var:lang/images/bearbeiten.gif" align="bottom" width="16" height="16" hspace="4">
-						</button>
-					</td>
-					<td class="Iconbutton">
-						<button type="button" id="uiViewDelete$1" onClick="uiDoDelete('$1')" value="$var:txtIconBtnDelete" title="$var:txtIconBtnDelete" style="width: 30px">
-							<img src="../html/$var:lang/images/loeschen.gif" align="bottom" width="16" height="16" hspace="4">
-						</button>
-					</td>
+				<td class="Iconbutton"><button type="button" id="uiViewEdit$1" onClick="uiDoEdit('$1')" value="$var:Text11" title="$var:Text11" style="width: 30px">
+					<img src="../html/$var:lang/images/bearbeiten.gif" align=bottom width=16 height=16 hspace=4>
+				</button></td>
+				<td class="Iconbutton"><button type="button" id="uiViewDelete$1" onClick="uiDoDelete('$1')" value="$var:Text12" title="$var:Text12" style="width: 30px">
+					<img src="../html/$var:lang/images/loeschen.gif" align=bottom width=16 height=16 hspace=4>
+				</button></td>
 				</tr>
 ` ?>
 				<tr id="uiViewNoRow" style="display:none"><td colspan="6" class="ac"><? echo $var:Text18 ?></td></tr>
--- usr/www/all/html/de/fon/siplist.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/siplist.js	2007-07-26 15:15:54.000000000 +0200
@@ -5,7 +5,7 @@
 <!--		../fon/siplist.js		-->
 <style type="text/css">
 <!--
-#content {width: 580px; margin: auto;}
+#content {width: 560px; margin: auto;}
 #tSips {width: 100%;}
 #tSips td {padding: 2px 3px;}
 #tSips th {padding: 2px 3px;}
@@ -40,7 +40,7 @@
 		empty_found = true;
 	}
 ' ?>
-	var n = Number("<? query sip:settings/sip/count ?>");
+	var n = Number("<? multiquerycount sip:settings/sip/list ?>");
 	if ((n >= 10) && (!empty_found)) jslDisable("uiViewNewButton");
 	if (!some_found) jslDisplay("uiViewNoRow", true);
 	jslZebrastreifen("tSips");
@@ -55,7 +55,6 @@
 		case "sipgate.de": 	return "Sipgate";
 		case "sip.web.de": 	return "WEB.DE";
 		case "1und1.de": 		return "1&amp;1 Internet";
-		case "sip.1und1.de": 	return "1&amp;1 Internet";
 		case "gmx.de": 		return "GMX";
 		case "schlund.de": 	return "Schlund + Partner";
 		case "reg.aolphone.aol.de":	return "AOL";
@@ -67,9 +66,6 @@
 		case "tel.t-online.de":	return "T-Online";
 ' ?>
 	}
-	if (registrar.indexOf("dbd-") >= 0) {
-		return registrar.indexOf("dsl") >= 0 ? "DBD (DSL)" : "DBD";
-	}
 	return registrar;
 }
 function AuswahlDisplay (nr) {
--- usr/www/all/html/de/fon/sipoptionen.frm.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/sipoptionen.frm	2007-07-26 15:15:54.000000000 +0200
@@ -5,8 +5,6 @@
 <input type="hidden" name="sipextra:settings/sip/sip_prio" value="<? query sipextra:settings/sip/sip_prio ?>" id="uiPostSipPrio">
 <input type="hidden" name="sipextra:settings/sip/rtp_prio" value="<? query sipextra:settings/sip/rtp_prio ?>" id="uiPostRtpPrio">
 <input type="hidden" name="sipextra:settings/sip/blacklist" value="<? query sipextra:settings/sip/blacklist ?>" id="uiPostBlacklist">
-<input type="hidden" name="sipextra:settings/sip/sip_srcport" value="<? query sipextra:settings/sip/sip_srcport ?>" id="uiPostSourcePort">
-<input type="hidden" name="sipextra:settings/sip/t38_support_enabled" value="<? query sipextra:settings/sip/t38_support_enabled ?>" id="uiPostT38" disabled>
 <? multiquery telcfg:settings/SIP/list '
 <input type="hidden" name="telcfg:settings/$1/Fallback" value="<? query telcfg:settings/$1/Fallback ?>" id="uiPostFallback$0" disabled>
 ' ?>
@@ -27,7 +25,3 @@
 <input type="hidden" name="connection_voip:settings/dns_first" value="<? query connection_voip:settings/dns_first ?>" id="uiPostDns0" disabled />
 <input type="hidden" name="connection_voip:settings/dns_second" value="<? query connection_voip:settings/dns_second ?>" id="uiPostDns1" disabled />
 <input type="hidden" name="sar:settings/autodetect" value="<? query sar:settings/autodetect ?>" id="uiPostSarAuto" disabled />
-<input type="hidden" name="telcfg:settings/Location/OKZ" value="<? query telcfg:settings/Location/OKZ ?>" id="uiPostOKZ">
-<input type="hidden" name="telcfg:settings/Location/LKZ" value="<? query telcfg:settings/Location/LKZ ?>" id="uiPostLKZ">
-<input type="hidden" name="telcfg:settings/Location/OKZPrefix" value="<? query telcfg:settings/Location/OKZPrefix ?>" id="uiPostOKZPrefix">
-<input type="hidden" name="telcfg:settings/Location/LKZPrefix" value="<? query telcfg:settings/Location/LKZPrefix ?>" id="uiPostLKZPrefix">
--- usr/www/all/html/de/fon/sipoptionen.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/sipoptionen.html	2007-07-26 15:15:54.000000000 +0200
@@ -1,15 +1,12 @@
 <? include ../html/$var:lang/fon/sipoptionen.inc ?>
 <div id="content">
  	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo $var:Text60 ?>
+		Internettelefonie
 	</div></div></div></div></div></div>
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
  	<ul class="tabs">
- 		<li><a href="javascript:uiDoSiplist()"><? echo $var:Text59 ?></a></li>
- 		<li class="tabs_on"><a href="javascript:uiDoCancel()"><? echo $var:Text1 ?></a></li>
-<? if eq <? query box:settings/expertmode/activated ?> 1 `
- 		<li><a href="javascript:uiDoQuality()"><? echo `$var:Text61` ?></a></li>
-` ?>
+ 		<li><a href="javascript:uiDoSiplist()">Internetrufnummern</a></li>
+ 		<li class="tabs_on"><a href="javascript:uiDoCancel()">Erweiterte Einstellungen</a></li>
  	</ul>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<? echo $var:Text43 ?>
@@ -32,27 +29,6 @@
 			<option value="30"><? echo $var:Text58 ?></option>
 		</select></p>
 	</div></div></div></div></div></div>
-	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p class="mb10"><? echo $var:Text64 ?></p>
-		<div class="ml25">
-			<select size="1" id="uiViewLand" class="Eingabefeld mb10" onchange="OnLand(value)">
-				<option value="49"><? echo $var:Text67 ?></option>
-				<option value="43"><? echo $var:Text68 ?></option>
-				<option value="41"><? echo $var:Text69 ?></option>
-				<option value=""><? echo $var:Text70 ?></option>
-			</select>
-			<table>
-				<tr>
-					<td><label for="uiViewLKZ"><? echo $var:Text65 ?></label></td>
-					<td><input type="text" size="3" maxlength="32" class="Eingabefeld" id="uiViewLKZPrefix">&nbsp;<input type="text" size="4" maxlength="32" class="Eingabefeld" id="uiViewLKZ"></td>
-				</tr>
-				<tr>
-					<td><label for="uiViewOKZ"><? echo $var:Text66 ?></label></td>
-					<td><input type="text" size="3" maxlength="32" class="Eingabefeld" id="uiViewOKZPrefix">&nbsp;<input type="text" size="4" maxlength="32" class="Eingabefeld" id="uiViewOKZ"></td>
-				</tr>
-			</table>
-		</div>
-	</div></div></div></div></div></div>
 	<div id="uiExpert" style="display:none">
 		<div class="backdialog" id="uiEnum" style="display:none"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 			<p class="pCheck25"><input type="checkbox" id="uiViewEnum">&nbsp;<label for="uiViewEnum"><? echo $var:Text4 ?></label></p>
@@ -68,7 +44,7 @@
 			<p class="pCheck25"><input type="radio" name="Kompress" onclick="OnKompress(0)" id="uiViewNoCodec">&nbsp;<label for="uiViewNoCodec"><? echo $var:Text47 ?></label><br><? echo $var:Text50 ?></p>
 			<p class="pCheck25"><input type="radio" name="Kompress" onclick="OnKompress(2)" id="uiViewDynLowCodec">&nbsp;<label for="uiViewDynLowCodec"><? echo $var:Text48 ?></label><br><? echo $var:Text51 ?></p>
 		</div></div></div></div></div></div>
-		<div class="backdialog" id="uiTos" style="display:none"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 			<p class="mb10"><? echo $var:Text12 ?></p>
 			<p class="mb10"><? echo $var:Text13 ?></p>
 			<table class="ml25">
@@ -111,11 +87,11 @@
 			<table class="ml50 mb10">
 				<tr>
 					<td><label for="uiViewVPI"><? echo $var:Text25 ?></label></td>
-					<td><input type="text" size="5" maxlength="3" class="Eingabefeld" id="uiViewVPI"></td>
+					<td><input type="text" size="3" maxlength="4" class="Eingabefeld" id="uiViewVPI"></td>
 				</tr>
 				<tr>
 					<td><label for="uiViewVCI"><? echo $var:Text26 ?></label></td>
-					<td><input type="text" size="5" maxlength="5" class="Eingabefeld" id="uiViewVCI"></td>
+					<td><input type="text" size="3" maxlength="4" class="Eingabefeld" id="uiViewVCI"></td>
 				</tr>
 			</table>
 			<table class="ml50" id="uiViewPppEncaps">
@@ -159,10 +135,6 @@
 				</div>
 			</div>
 		</div></div></div></div></div></div>
-		<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-			<p class="pCheck25"><input type="checkbox" id="uiViewT38">&nbsp;<label for="uiViewT38"><? echo $var:Text74 ?></label></p>
-			<p class="pText25"><? echo $var:Text75 ?></p>
-		</div></div></div></div></div></div>
 	</div>
 	<? include ../html/$var:lang/home/rbb_applycancel.html ?>
 	</div></div></div></div></div></div></div>
--- usr/www/all/html/de/fon/sipoptionen.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/sipoptionen.js	2007-07-26 15:15:54.000000000 +0200
@@ -1,7 +1,7 @@
 <!--		../fon/sipoptionen.js		-->
 <style type="text/css">
 <!--
-#content {width: 580px; margin: auto;}
+#content {width: 560px; margin: auto;}
 .pText25 {margin-left: 25px;}
 .pCheck25 {text-indent: -25px; margin-left: 25px; margin-bottom: 5px;}
 .pRadio50 {text-indent: -25px; margin-left: 50px;}
@@ -19,23 +19,20 @@
 var g_expertMode = "<? query box:settings/expertmode/activated ?>";
 var g_usePstn = "<? echo $var:usePSTN ?>";
 var g_mldVad		= "Durch die Aktivierung der Sprechpausen-Erkennung kann auf der Gegenseite die Sprachqualität beeinträchtigt werden.";
-var g_mldSipPrio	= "Geben Sie im Feld SIP-Wert eine Zahl zwischen 0 und 63 ein.";
-var g_mldRtpPrio	= "Geben Sie im Feld RTP-Wert eine Zahl zwischen 0 und 63 ein.";
+var g_mldSipPrio	= "Geben Sie im Feld SIP-Wert eine Zahl zwischen 0 und 255 ein.";
+var g_mldRtpPrio	= "Geben Sie im Feld RTP-Wert eine Zahl zwischen 0 und 255 ein.";
 var g_mldUserLeer			= "Der Benutzername darf nicht leer sein.";
 var g_mldKennwortDiff		= "Das Passwort/Kennwort stimmt nicht mit der Bestätigung überein.";
 var g_VPIMustNumber		= "VPI: Ungültige Eingabe, es sind nur Ziffern erlaubt.";
 var g_VCIMustNumber		= "VCI: Ungültige Eingabe, es sind nur Ziffern erlaubt.";
 var g_VPIOutOfRange		= "VPI: Ungültige Eingabe, es sind Eingaben zwischen 0 und 255 erlaubt.";
-var g_VCIOutOfRange		= "VCI: Ungültige Eingabe, es sind Eingaben zwischen 32 und 65535 erlaubt.";
+var g_VCIOutOfRange		= "VCI: Ungültige Eingabe, es sind Eingaben zwischen 0 und 255 erlaubt.";
 var g_mldIpaddrFormatPre	= "Fehler im Feld ";
 var g_mldIpaddrFormatPost	= ": die Eingabe ist keine gültige IP-Adresse.";
 var g_mldNetmaskPost		= ": die eingegebene Subnetzmaske ist ungültig.";
 var g_mldIpaddrTheNet		= ": dieser Wert stellt das Subnetz an sich dar und kann nicht verwendet werden.";
 var g_mldIpaddrBroadcast		= ": dieser Wert stellt die Broadcast-Adresse in Ihrem Subnetz dar und kann nicht verwendet werden.";
 var g_mldIpaddrDiffNet		= ": diese Adresse befindet sich in einem anderen Subnetz, als das durch die IP-Adresse und Netzmaske definierte.";
-var g_mldOkzDigit = "Die Ortsvorwahl darf nur aus Ziffern bestehen.";
-var g_mldOkz0 = "Geben Sie bei der Ortsvorwahl einen gültigen Wert ein.";
-var g_mldLkzDigit = "Die Landesvorwahl darf nur aus Ziffern bestehen.";
 var g_txtIpAdr		= "IP-Adresse";
 var g_txtNetmask	= "Subnetzmaske";
 var g_txtGateway	= "Standard-Gateway";
@@ -66,24 +63,11 @@
 		jslSetSelection("uiViewSippingTimer", jslGetValue("uiPostSipPingTimersip0"));
 		OnSipping();
 	}
-	var lkz = jslGetValue("uiPostLKZ");
-	switch (lkz) {
-		case "49":
-		case "43":
-		case "41": jslSetSelection("uiViewLand", lkz); break;
-		default: jslSetSelection("uiViewLand", ""); break;
-	}
-	jslCopyValue("uiViewLKZPrefix", "uiPostLKZPrefix");
-	jslCopyValue("uiViewLKZ", "uiPostLKZ");
-	jslCopyValue("uiViewOKZPrefix", "uiPostOKZPrefix");
-	jslCopyValue("uiViewOKZ", "uiPostOKZ");
 	if (g_expertMode == "1") {
 		jslDisplay("uiExpert", true);
 		jslSetChecked("uiViewVad", jslGetValue("uiPostVad") == "1");
 		jslCopyValue("uiViewSipPrio", "uiPostSipPrio");
 		jslCopyValue("uiViewRtpPrio", "uiPostRtpPrio");
-		jslSetChecked("uiViewT38", jslGetValue("uiPostT38") == "1");
-		if (g_Oem != "freenet" || g_usePstn != "0") jslDisplay("uiTos", true);
 		var kompress = 0;
 		if (jslGetValue("uiPostDynCodec") == "1") {
 			kompress = jslGetValue("uiPostLowCodecs")=="1" ? 2 : 1;
@@ -120,6 +104,7 @@
 			jslCopyValue("uiViewGateway", "uiPostGateway");
 			jslCopyValue("uiViewDns0", "uiPostDns0");
 			jslCopyValue("uiViewDns1", "uiPostDns1");
+			
 			OnClickUseVcc();
 			ShowParams(ppp);
 			uiDoUseDhcp();
@@ -132,12 +117,6 @@
 	}
 }
 function uiDoSave() {
-	if (!valIsZahl(jslGetValue("uiViewLKZ")) || !valIsZahl(jslGetValue("uiViewLKZPrefix"))) {alert(g_mldLkzDigit); return;}
-	if (!valIsZahl(jslGetValue("uiViewOKZ")) || !valIsZahl(jslGetValue("uiViewOKZPrefix"))) {alert(g_mldOkzDigit); return;}
-	jslCopyValue("uiPostOKZ", "uiViewOKZ");
-	jslCopyValue("uiPostOKZPrefix", "uiViewOKZPrefix");
-	jslCopyValue("uiPostLKZ", "uiViewLKZ");
-	jslCopyValue("uiPostLKZPrefix", "uiViewLKZPrefix");
 	if (g_usePstn == "1") {
 		var b = jslGetChecked("uiViewFallback") ? "1":"0";
 		for (var i=0; i<10; i++) {
@@ -157,15 +136,15 @@
 	if (g_expertMode == "1") {
 		var n = jslGetValue("uiViewSipPrio");
 		if (!valIsZahlVorhanden(n)) {alert(g_mldSipPrio); return;}
-		if (Number(n)<0 || Number(n)>63) {alert(g_mldSipPrio); return;}
+		if (Number(n)<0 || Number(n)>255) {alert(g_mldSipPrio); return;}
 		n = jslGetValue("uiViewRtpPrio");
 		if (!valIsZahlVorhanden(n)) {alert(g_mldRtpPrio); return;}
-		if (Number(n)<0 || Number(n)>63) {alert(g_mldRtpPrio); return;}
+		if (Number(n)<0 || Number(n)>255) {alert(g_mldRtpPrio); return;}
+		
 		jslSetValue("uiPostVad", jslGetChecked("uiViewVad") ? "1" : "0");
 		jslCopyValue("uiPostSipPrio", "uiViewSipPrio");
 		jslCopyValue("uiPostRtpPrio", "uiViewRtpPrio");
-		jslSetValue("uiPostT38", jslGetChecked("uiViewT38") ? "1" : "0");
-		jslEnable("uiPostT38");
+	
 		jslSetValue("uiPostDynCodec", jslGetChecked("uiViewNoCodec") ? "0" : "1");
 		jslSetValue("uiPostLowCodecs", jslGetChecked("uiViewDynLowCodec") ? "1" : "0");
 		jslEnable("uiPostDynCodec");
@@ -210,6 +189,7 @@
 						jslSetValue("uiPostEncaps", "dslencap_ether");
 						jslEnable("uiPostDhcp");
 						jslEnable("uiPostEncaps");
+		
 					} else if (jslGetChecked("uiViewIpEncaps2")) {
 						if (!ValidateIpForm("uiView")) return;
 						jslSetValue("uiPostEncaps", "dslencap_ipnlpid");
@@ -220,6 +200,7 @@
 						jslEnable("uiPostGateway");
 						jslEnable("uiPostDns0");
 						jslEnable("uiPostDns1");
+	
 					} else if (jslGetChecked("uiViewIpEncaps3")) {
 						if (!ValidateIpForm("uiView")) return false;
 						jslSetValue("uiPostEncaps", "dslencap_ipsnap");
@@ -230,6 +211,7 @@
 						jslEnable("uiPostGateway");
 						jslEnable("uiPostDns0");
 						jslEnable("uiPostDns1");
+	
 					} else if (jslGetChecked("uiViewIpEncaps4")) {
 						if (!ValidateIpForm("uiView")) return false;
 						jslSetValue("uiPostEncaps", "dslencap_ipraw");
@@ -257,7 +239,7 @@
 	if (!valIsZahlVorhanden(vpi)) {alert(g_VPIMustNumber); return false;}
 	if ((vpi < 0) || (vpi > 255)) {alert(g_VPIOutOfRange); return false;}
 	if (!valIsZahlVorhanden(vci)) {alert(g_VCIMustNumber); return false;}
-	if ((vci < 32) || (vci > 65535)) {alert(g_VCIOutOfRange); return false;}
+	if ((vci < 0) || (vci > 255)) {alert(g_VCIOutOfRange); return false;}
 	jslSetValue("uiPostVpi", vpi);
 	jslSetValue("uiPostVci", vci);
 	return true;
@@ -395,12 +377,15 @@
 }
 function pppDoValidateIpaddrFormat(addr) {
 	var pattern = /^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/;
+	
 	if (addr.match(pattern) == null) return false;
+	
 	pattern.exec(addr);
 	if (RegExp.$1>255) return false;
 	if (RegExp.$2>255) return false;
 	if (RegExp.$3>255) return false;
 	if (RegExp.$4>255) return false;
+	
 	return true;
 }
 function DecToBin(num) {
@@ -414,15 +399,18 @@
 function IpToBitstring(mask) {
 	var pattern = /^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/;
 	var str = '';
+	
 	pattern.exec(mask);
 	str+=DecToBin(RegExp.$1);
 	str+=DecToBin(RegExp.$2);
 	str+=DecToBin(RegExp.$3);
 	str+=DecToBin(RegExp.$4);
+	
 	return str;
 }
 function pppDoValidateNetmask(mask) {
 	var str = IpToBitstring(mask);
+	
 	if (str.match(/^1+0+0$/) == null) return false;
 	return true;
 }
@@ -444,38 +432,4 @@
 function isAtamode () {
 	return (g_isDsl == "0") || (g_isAta == "1" && g_AtaMode == "1");
 }
-function uiDoQuality() {
-	jslGoTo("fon", "quality");
-}
-// Ortsvorwahl mit führender Null anzeigen
-function GetOKZDisplay (id) {
-	var h = document.getElementById(id);
-	if (h == null) return "";
-	var nr = h.value;
-	if (nr.length == 0) return nr;
-	if (nr.substr(0,1) == "0") return nr;
-	return "0"+nr;
-}
-// führende Null bei Ortsvorwahl abschneiden
-function GetOKZohneNull (id) {
-	var h = document.getElementById(id);
-	if (h == null) return "";
-	var nr = jslDoEliminateBlanks(h.value);
-	if (nr.substr(0,1) != "0") return nr;
-	return nr.substr(1, nr.length-1);
-}
-function valOKZ (okz) {
-	var nr = jslDoEliminateBlanks(okz);
-	if (nr.length == 0) {alert(g_mldOkz0); return false;}
-	if (!valIsZahlVorhanden(nr)) {alert(g_mldOkzDigit); return false;}
-	if (nr == "0") {alert(g_mldOkz0); return false;}
-	return true;
-}
-function OnLand (n) {
-	switch (n) {
-		case "49": jslSetValue("uiViewLKZPrefix", "00"); jslSetValue("uiViewLKZ", "49"); jslSetValue("uiViewOKZPrefix", "0"); break;
-		case "43": jslSetValue("uiViewLKZPrefix", "00"); jslSetValue("uiViewLKZ", "43"); jslSetValue("uiViewOKZPrefix", "0"); break;
-		case "41": jslSetValue("uiViewLKZPrefix", "00"); jslSetValue("uiViewLKZ", "41"); jslSetValue("uiViewOKZPrefix", "0"); break;
-	}
-}
 </script>
--- usr/www/all/html/de/fon/sperre1.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/sperre1.html	2007-07-26 15:15:54.000000000 +0200
@@ -1,39 +1,27 @@
 <? include ../html/$var:lang/fon/sperre1.inc ?>
 <div id="content">
 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo $var:Text1 ?>
+		Rufsperre
 	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<table id="t1">
 			<tr id="uiArtAll" style="display:none">
-				<td style="vertical-align:top"><? echo $var:Text2 ?></td>
-				<td>
-					<p><input type=radio name="Art" onclick="OnArt(0)" id="uiViewAusgehend">&nbsp<label for="uiViewAusgehend"><? echo $var:Text3 ?></label></p>
-					<p><input type=radio name="Art" onclick="OnArt(1)" id="uiViewEinkommend">&nbsp<label for="uiViewEinkommend"><? echo $var:Text4 ?></label></p>
-				</td>
+				<td><label for="uiMode">Rufart</label></td>
+				<td><select size="1" id="uiViewArt" class="Eingabefeld">
+					<option value="out">ausgehende Rufe</option>
+					<option value="in">einkommende Rufe</option>
+				</select></td>
 			</tr>
 			<tr id="uiArtOut" style="display:none">
-				<td><? echo $var:Text2 ?></td>
-				<td><? echo $var:Text3 ?></td>
+				<td>Rufart</td>
+				<td>ausgehende Rufe</td>
 			</tr>
 			<tr id="uiArtIn" style="display:none">
-				<td><? echo $var:Text2 ?></td>
-				<td><? echo $var:Text4 ?></td>
-			</tr>
-			<tr id="uiBereich" style="display:none">
-				<td><? echo $var:Text6 ?></td>
-				<td><select size="1" id="uiViewBereich" class="Eingabefeld" onchange="OnChangeBereich(value)">
-					<option value=""><? echo $var:Text5 ?></option>
-					<option value="mobile"><? echo $var:Text7 ?></option>
-					<option value="ortsnetz"><? echo $var:Text8 ?></option>
-					<option value="national"><? echo $var:Text9 ?></option>
-					<option value="international"><? echo $var:Text10 ?></option>
-					<option value="sonderrufnrn"><? echo $var:Text11 ?></option>
-					<option value="auskunft"><? echo $var:Text12 ?></option>
-				</select></td>
+				<td>Rufart</td>
+				<td>einkommende Rufe</td>
 			</tr>
 			<tr>
-				<td><? echo $var:Text5 ?></td>
+				<td>Rufnummer / Bereich</td>
 				<td><input type="text" size="25" id="uiViewNummer" maxlength="20" class="Eingabefeld"></td>
 			</tr>
 		</table>
--- usr/www/all/html/de/fon/sperre1.js.orig	2007-07-26 15:15:54.000000000 +0200
+++ usr/www/all/html/de/fon/sperre1.js	2007-07-26 15:15:54.000000000 +0200
@@ -1,5 +1,4 @@
 <!--		../fon/sperre1.js		-->
-<? include ../html/$var:lang/fon/sperre1.inc ?>
 <? setvariable var:lcrext `1` ?>
 <? if eq <? query telcfg:settings/Routing/Version ?> 3 `<? setvariable var:lcrext `0` ?>` ?>
 <? if eq <? query telcfg:settings/Routing/Version ?> 0 `<? setvariable var:lcrext `0` ?>` ?>
@@ -14,15 +13,7 @@
 </style>
 <script type="text/javascript">
 <? include ../html/$var:lang/js/jsl.js ?>
-<? include ../html/$var:lang/js/val.js ?>
-var g_mldLCR = "<? print $var:jstr0 ?>";
-var g_txtAlert_1 = "<? print $var:jstr1 ?>";
-var g_txtAlert_2 = "<? print $var:jstr2 ?>";
-var g_txtAlert_3 = "<? print $var:jstr3 ?>";
-var g_txtAlert_4 = "<? print $var:jstr4 ?>";
-var g_mldNoNummer = "<? print $var:jstr5 ?>";
-var g_mldNonDigits = "<? print $var:jstr6 ?>";
-var g_mldNoNotrufsperre = "<? print $var:jstr7 ?>";
+var g_mldLCR = "Bei Verwendung einer Wahltabelle können keine Sperren für ausgehenden Rufe eingerichtet werden.";
 function uiDoOnLoad() {
 	var mode = jslGetValue("uiPostMode");
 	jslDisplay("uiArtAll", mode!="In" && mode!="Out");
@@ -30,16 +21,12 @@
 	jslDisplay("uiArtOut", mode=="Out");
 	switch (mode) {
 		case "In":
-			OnArt(1);
 			jslCopyValue("uiViewNummer", "uiPostInRufnr");
 			break;
 		case "Out":
-			OnArt(0);
 			jslCopyValue("uiViewNummer", "uiPostOutRufnr");
 			break;
 		default:
-			jslSetChecked("uiViewAusgehend", true);
-			OnArt(0);
 			jslSetValue("uiViewNummer", "");
 			break;
 	}
@@ -48,18 +35,16 @@
 	var mode = jslGetValue("uiPostMode");
 	switch (mode) {
 		case "In": {
-			var nummer = jslGetValue("uiViewNummer");
-			//if (!isZahlRaute(nummer)) {alert(g_mldNonDigits); return;}
-			var x = IstActionVorhanden(nummer);
+			var x = IstActionVorhanden(jslGetValue("uiViewNummer"));
 			if (x != "") {
 				if (jslGetValue("uiPostInAction"+x) == "1") {
-					if (x != jslGetValue("uiPostRulId")) {alert(g_txtAlert_1); return;}
+					if (x != jslGetValue("uiPostRulId")) {alert("Eine Sperre für diese einkommende Rufnummer ist bereits vorhanden."); return;}
 					jslCopyValue("uiPostInRufnr", "uiViewNummer");
 					jslEnable("uiPostInRufnr");
 					jslEnable("uiPostInAction");
 					jslEnable("uiPostInActive");
 				} else {
-					if (!confirm(g_txtAlert_2)) return;
+					if (!confirm("Für diese einkommende Rufnummer ist bereits eine Rufumleitung eingerichtet. Diese Rufumleitung wird automatisch gelöscht. Fortfahren?")) return;
 					jslCopyValue("uiPostInRufnr"+x, "uiViewNummer");
 					jslSetValue("uiPostInAction"+x, "1");
 					jslSetValue("uiPostInActive"+x, "1");
@@ -79,24 +64,17 @@
 			break;
 		}
 		case "Out": {
-			var nummer = jslGetValue("uiViewBereich");
-			if (nummer=="") {
-				nummer = jslGetValue("uiViewNummer");
-				if (nummer=="") {alert(g_mldNoNummer); return;}
-				if (!valIsZahl(nummer)) {alert(g_mldNonDigits); return;}
-				if (IstNotruf(nummer)) {alert(g_mldNoNotrufsperre); return;}
-			}
-			var x = IstRouteVorhanden(nummer);
+			var x = IstRouteVorhanden(jslGetValue("uiViewNummer"));
 			if (x != "") {
 				if (jslGetValue("uiPostOutRoute"+x) == "s") {
-					if (x != jslGetValue("uiPostRulId")) {alert(g_txtAlert_3); return;}
-					jslSetValue("uiPostOutRufnr", nummer);
+					if (x != jslGetValue("uiPostRulId")) {alert("Eine Sperre für diese ausgehende Rufnummer ist bereits vorhanden."); return;}
+					jslCopyValue("uiPostOutRufnr", "uiViewNummer");
 					jslEnable("uiPostOutRufnr");
 					jslEnable("uiPostOutRoute");
 					jslEnable("uiPostOutProvider");
 				} else {
-					if (!confirm(g_txtAlert_4)) return;
-					jslSetValue("uiPostOutRufnr"+x, nummer);
+					if (!confirm("Für diese ausgehende Rufnummer ist bereits eine Wahlregel eingerichtet. Diese Wahlregel wird automatisch gelöscht. Fortfahren?")) return;
+					jslCopyValue("uiPostOutRufnr"+x, "uiViewNummer");
 					jslSetValue("uiPostOutRoute"+x, "s");
 					jslSetValue("uiPostOutProvider"+x, "0");
 					jslEnable("uiPostOutRufnr"+x);
@@ -107,7 +85,7 @@
 					jslSetEnabled("uiPostDelete", true);
 				}
 			} else {
-				jslSetValue("uiPostOutRufnr", nummer);
+				jslCopyValue("uiPostOutRufnr", "uiViewNummer");
 				jslEnable("uiPostOutRufnr");
 				jslEnable("uiPostOutRoute");
 				jslEnable("uiPostOutProvider");
@@ -115,38 +93,29 @@
 			break;
 		}
 		default:
-			if (jslGetChecked("uiViewAusgehend")) {
+			if (jslGetValue("uiViewArt") == "out") {
 				if ("<? echo $var:lcrext ?>" == "1") {alert(g_mldLCR); return;}
-				var nummer = jslGetValue("uiViewBereich");
-				if (nummer=="") {
-					nummer = jslGetValue("uiViewNummer");
-					if (nummer=="") {alert(g_mldNoNummer); return;}
-					if (!valIsZahl(nummer)) {alert(g_mldNonDigits); return;}
-					if (IstNotruf(nummer)) {alert(g_mldNoNotrufsperre); return;}
-				}
-				var x = IstRouteVorhanden(nummer);
+				var x = IstRouteVorhanden(jslGetValue("uiViewNummer"));
 				if (x != "") {
-					if (jslGetValue("uiPostOutRoute"+x) == "s") {alert(g_txtAlert_3); return;}
-					if (!confirm(g_txtAlert_4)) return;
-					jslSetValue("uiPostOutRufnr"+x, nummer);
+					if (jslGetValue("uiPostOutRoute"+x) == "s") {alert("Eine Sperre für diese ausgehende Rufnummer ist bereits vorhanden."); return;}
+					if (!confirm("Für diese ausgehende Rufnummer ist bereits eine Wahlregel eingerichtet. Diese Wahlregel wird automatisch gelöscht. Fortfahren?")) return;
+					jslCopyValue("uiPostOutRufnr"+x, "uiViewNummer");
 					jslSetValue("uiPostOutRoute"+x, "s");
 					jslSetValue("uiPostOutProvider"+x, "0");
 					jslEnable("uiPostOutRufnr"+x);
 					jslEnable("uiPostOutRoute"+x);
 					jslEnable("uiPostOutProvider"+x);
 				} else {
-					jslSetValue("uiPostOutRufnr", nummer);
+					jslCopyValue("uiPostOutRufnr", "uiViewNummer");
 					jslEnable("uiPostOutRufnr");
 					jslEnable("uiPostOutRoute");
 					jslEnable("uiPostOutProvider");
 				}
 			} else {
-				var nummer = jslGetValue("uiViewNummer");
-				//if (!isZahlRaute(nummer)) {alert(g_mldNonDigits); return;}
-				var x = IstActionVorhanden(nummer);
+				var x = IstActionVorhanden(jslGetValue("uiViewNummer"));
 				if (x != "") {
-					if (jslGetValue("uiPostInAction"+x) == "1") {alert(g_txtAlert_1); return;}
-					if (!confirm(g_txtAlert_2)) return;
+					if (jslGetValue("uiPostInAction"+x) == "1") {alert("Eine Sperre für diese einkommende Rufnummer ist bereits vorhanden."); return;}
+					if (!confirm("Für diese einkommende Rufnummer ist bereits eine Rufumleitung eingerichtet. Diese Rufumleitung wird automatisch gelöscht. Fortfahren?")) return;
 					jslCopyValue("uiPostInRufnr"+x, "uiViewNummer");
 					jslSetValue("uiPostInAction"+x, "1");
 					jslSetValue("uiPostInActive"+x, "1");
@@ -165,54 +134,23 @@
 	jslSubmitFormEx("fon", "sperre", "sperre1");
 }
 function uiDoHelp() {
-	jslPopHelp("hilfe_fon_sperre_neu");
+	jslPopHelp("hilfe_fon_sperre");
 }
 function uiDoCancel() {
 	jslGoTo("fon", "sperre");
 }
 function IstRouteVorhanden (number) {
-	var n = Number("<? query telcfg:settings/Routing/Group/count ?>");
+	var n = Number("<? multiquerycount telcfg:settings/Routing/Group/list ?>");
 	for (var i = 0; i<n; i++) {
 		if (jslGetValue("uiPostOutRufnrGroup"+i) == number) return "Group"+i;
 	}
 	return "";
 }
 function IstActionVorhanden (number) {
-	var n = Number("<? query telcfg:settings/CallerIDActions/count ?>");
+	var n = Number("<? multiquerycount telcfg:settings/CallerIDActions/list ?>");
 	for (var i = 0; i<n; i++) {
 		if (jslGetValue("uiPostInRufnrCallerIDActions"+i) == number) return "CallerIDActions"+i;
 	}
 	return "";
 }
-function IstNotruf (nr) {
-	switch (nr) {
-<? if eq $var:lang en '
-		case "999":
-		case "112": return true;
-' '
-		case "19222":
-		case "110":
-		case "112": return true;
-' ?>
-	}
-	return false;
-}
-function OnArt(n) {
-	jslDisplay("uiBereich", n==0);
-	switch (n) {
-		case 0:
-			jslSetEnabled("uiViewNummer", jslGetValue("uiViewBereich")=="");
-			break;
-		case 1:
-			jslSetEnabled("uiViewNummer", true);
-			break;
-	}
-}
-function OnChangeBereich (value) {
-	jslSetEnabled("uiViewNummer", value=="");
-}
-function isZahlRaute (nummer) {
-	if (nummer.match("[^0-9\#]") != null) return false;
-	return true;
-}
 </script>
--- usr/www/all/html/de/fon/sperre.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/sperre.html	2007-07-26 15:15:54.000000000 +0200
@@ -1,14 +1,14 @@
 <? include ../html/$var:lang/fon/sperre.inc ?>
 <div id="content">
 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo $var:Text1 ?>
+		Rufsperre
 	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p class="mb10"><? echo $var:Text2 ?></p>
+		<p class="mb10">Hier können Sie Rufnummern angeben, die für ausgehende oder einkommende Anrufe gesperrt werden sollen.</p>
 		<table id="tList" class="tborder">
 			<tr>
-				<th><? echo $var:Text3 ?></th>
-				<th><? echo $var:Text4 ?></th>
+				<th>Rufart</th>
+				<th>Rufnummer / Bereich</th>
 				<th></th>
 				<th></th>
 			</tr>
@@ -20,10 +20,10 @@
 ` ?>
 			<script type="text/javascript">document.write(TrNichts());</script>
 		</table>
-		<p class="mt10 ar"><input type="button" onclick="uiDoNew()" value="<? echo $var:Text5 ?>" class="Pushbutton" style="width:120px"></p>
+		<p class="mt10 ar"><input type="button" onclick="uiDoNew()" value="Neue Rufsperre" class="Pushbutton" style="width:120px"></p>
 		<? include ../html/$var:lang/home/error.html ?>
 	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
-		<input type="button" onclick="uiDoHelp()" value="<? echo $var:Text6 ?>" class="Pushbutton" id="buttonHilfe">
+		<input type="button" onclick="uiDoHelp()" value="Hilfe" class="Pushbutton" id="buttonHilfe">
 	</div></div></div></div></div></div>
 </div>
--- usr/www/all/html/de/fon/sperre.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/sperre.js	2007-07-26 15:15:54.000000000 +0200
@@ -12,11 +12,6 @@
 <script type="text/javascript">
 <? include ../html/$var:lang/js/jsl.js ?>
 var g_mldDelete = "Wollen Sie diesen Eintrag löschen ?";
-var g_txtBtnEdit = "Bearbeiten";
-var g_txtBtnDelete = "Löschen";
-var g_txtSpan_1 = "Ausgehende Rufe";
-var g_txtSpan_2 = "Einkommende Rufe";
-var g_txtSpan_3 = "<tr><td colspan=4 class=\"ac\" style=\"font-size: 13px\">Es sind keine Rufsperren eingerichtet.</td></tr>";
 var g_foundSperre = false;
 //---- nicht Löschen! Notwendig für korrekte Anzeige --------------------------
 <? multiquery telcfg:settings/Routing/Group/list(Number) ' ' ?>
@@ -58,10 +53,10 @@
 	return "<nobr><span title=\""+ str + "\">" + str + "</span></nobr>";
 }
 function EditBtn(id, click) {
-	return BmpBtn(id, click, g_txtBtnEdit, "../html/<? echo $var:lang ?>/images/bearbeiten.gif");
+	return BmpBtn(id, click, "Ändern", "../html/<? echo $var:lang ?>/images/bearbeiten.gif");
 }
 function DeleteBtn(id, click) {
-	return BmpBtn(id, click, g_txtBtnDelete, "../html/<? echo $var:lang ?>/images/loeschen.gif");
+	return BmpBtn(id, click, "Löschen", "../html/<? echo $var:lang ?>/images/loeschen.gif");
 }
 function BmpBtn(id, click, value, bmp) {
 	return "<button type=\"button\" id=\""+id+"\" onClick=\""+click+"\" value=\""+value+"\" title=\""+value+"\" style=\"width: 30px\"><img src=\""+bmp+"\" align=bottom width=16 height=16 hspace=4></button></td>";
@@ -69,8 +64,8 @@
 function TrOut(id, nummer, mode) {
 	if (mode != "s") return "";
 	var str = "<tr>";
-	str += "<td class=\"c2\">"+ span(g_txtSpan_1)+"</td>";
-	str += "<td class=\"c3\">"+ span(NumberDisplay(nummer))+"</td>";
+	str += "<td class=\"c2\">"+ span("Ausgehende Rufe")+"</td>";
+	str += "<td class=\"c3\">"+ span(nummer)+"</td>";
 	str += "<td class=\"Iconbutton\">"+ EditBtn("uiViewEditOut"+id, "uiDoEditOut('"+id+"')") +"</td>";
 	str += "<td class=\"Iconbutton\">"+ DeleteBtn("uiViewDeleteOut"+id, "uiDoDeleteOut('"+id+"')") +"</td>";
 	str += "</tr>";
@@ -80,7 +75,7 @@
 function TrIn(id, nummer, mode) {
 	if (mode != "1") return "";
 	var str = "<tr>";
-	str += "<td class=\"c2\">"+ span(g_txtSpan_2)+"</td>";
+	str += "<td class=\"c2\">"+ span("Einkommende Rufe")+"</td>";
 	str += "<td class=\"c3\">"+ span(nummer)+"</td>";
 	str += "<td class=\"Iconbutton\">"+ EditBtn("uiViewEditIn"+id, "uiDoEditIn('"+id+"')") +"</td>";
 	str += "<td class=\"Iconbutton\">"+ DeleteBtn("uiViewDeleteIn"+id, "uiDoDeleteIn('"+id+"')") +"</td>";
@@ -90,17 +85,6 @@
 }
 function TrNichts() {
 	if (g_foundSperre) return "";
-	return g_txtSpan_3;
-}
-function NumberDisplay(number) {
-	switch (number) {
-		case "mobile": return "Mobilfunk";
-		case "ortsnetz": return "Ortsnetz";
-		case "national": return "Ferngespräch";
-		case "international": return "Ausland";
-		case "sonderrufnrn": return "Sonderrufnummern";
-		case "auskunft": return "Auskunft";
-	}
-	return number;
+	return "<tr><td colspan=4 class=\"ac\" style=\"font-size: 13px\">Es sind keine Rufsperren eingerichtet.</td></tr>";
 }
 </script>
--- usr/www/all/html/de/fon/vorwahl.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/vorwahl.html	2007-07-26 15:15:54.000000000 +0200
@@ -1,25 +1,20 @@
 <? include ../html/$var:lang/fon/vorwahl.inc ?>
 <div id="content">
 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo $var:Text8 ?>
+		Telefonie
 	</div></div></div></div></div></div>
-	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog">
-		<div class="ie_b10">
+	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 			<ul class="tabs">
-				<li><a href="javascript:uiDoRouting()"><? echo $var:Text8 ?></a></li>
-				<li class="tabs_on"><a href="javascript:uiDoCancel()"><? echo $var:Text9 ?></a></li>
+ 		<li><a href="javascript:uiDoRouting()">Wahlregeln</a></li>
+ 		<li class="tabs_on"><a href="javascript:uiDoCancel()">Anbietervorwahlen</a></li>
 			</ul>
 			<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-				<p><? echo $var:Text10 ?></p>
+		<p>Hier können Sie Anbietervorwahlen angeben, die anschließend in den Wahlregeln Rufnummernbereichen zugewiesen werden können.</p>
 			</div></div></div></div></div></div>
 			<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 				<p class="mb5"><b><? echo $var:Text2 ?></b></p>
 				<p class="mb10"><? echo $var:Text3 ?></p>
-				<p class="ac"><input type="text" id="uiViewVorwahl0" size="21" maxlength="20" class="Eingabefeld">
-<? if eq $var:OEM arcor `
-					$var:Text6
-` ?>
-				</p>
+		<p class="ac"><input type="text" id="uiViewVorwahl0" size="21" maxlength="20" class="Eingabefeld"><? if eq $var:OEM arcor `$var:Text6` ?></p>
 			</div></div></div></div></div></div>
 			<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 				<p class="mb5"><b><? echo $var:Text4 ?></b></p>
@@ -31,6 +26,5 @@
 				</table>
 			</div></div></div></div></div></div>
 			<? include ../html/$var:lang/home/rbb_applycancel.html ?>
-		</div>
-	</div></div></div></div></div></div>
+	</div></div></div></div></div></div></div>
 </div>
--- usr/www/all/html/de/fon/wecker.frm.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/wecker.frm	2007-07-26 15:15:54.000000000 +0200
@@ -1,14 +1,8 @@
-<? if eq '$var:weckernr' '' `<? setvariable var:weckernr '0' ?>` ?>
-<input type="hidden" name="var:weckernr" value="<? echo $var:weckernr ?>" id="uiPostWeckernr">
-<input type="hidden" name="telcfg:settings/AlarmClock<? echo $var:weckernr ?>/Active" value="<? query telcfg:settings/AlarmClock<? echo $var:weckernr ?>/Active ?>" id="uiPostActive">
-<input type="hidden" name="telcfg:settings/AlarmClock<? echo $var:weckernr ?>/Time" value="<? query telcfg:settings/AlarmClock<? echo $var:weckernr ?>/Time ?>" id="uiPostZeit" disabled>
-<input type="hidden" name="telcfg:settings/AlarmClock<? echo $var:weckernr ?>/Number" value="<? query telcfg:settings/AlarmClock<? echo $var:weckernr ?>/Number ?>" id="uiPostNummer" disabled>
-<input type="hidden" name="telcfg:settings/AlarmClock<? echo $var:weckernr ?>/Weekdays" value="<? query telcfg:settings/AlarmClock<? echo $var:weckernr ?>/Weekdays ?>" id="uiPostAlarmOption" disabled>
+<input type="hidden" name="telcfg:settings/AlarmClock0/Active" value="<? query telcfg:settings/AlarmClock0/Active ?>" id="uiPostActive">
+<input type="hidden" name="telcfg:settings/AlarmClock0/Time" value="<? query telcfg:settings/AlarmClock0/Time ?>" id="uiPostZeit" disabled>
+<input type="hidden" name="telcfg:settings/AlarmClock0/Number" value="<? query telcfg:settings/AlarmClock0/Number ?>" id="uiPostNummer" disabled>
+<input type="hidden" name="telcfg:settings/AlarmClock0/Weekdays" value="<? query telcfg:settings/AlarmClock0/Weekdays ?>" id="uiPostAlarmOption" disabled>
 <? repeat [ 0 2 ] `
 <input type="hidden" name="telcfg:settings/MSN/Port$0/Name" value="<? query telcfg:settings/MSN/Port$0/Name ?>" id="uiPostFon$0" disabled>
 ` ?>
-<? repeat [ 1 8 ] `
-<input type="hidden" name="telcfg:settings/NTHotDialList/Name$0" value="<? query telcfg:settings/NTHotDialList/Name$0 ?>" id="uiPostIsdn$0" disabled>
-<input type="hidden" name="telcfg:settings/NTHotDialList/Number$0" value="<? query telcfg:settings/NTHotDialList/Number$0 ?>" id="uiPostIsdnNumber$0" disabled>
-` ?>
 </form>
--- usr/www/all/html/de/fon/wecker.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/wecker.html	2007-07-26 15:15:54.000000000 +0200
@@ -3,17 +3,7 @@
  	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
 		<? echo $var:Text1 ?>
 	</div></div></div></div></div></div>
-	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
-	 	<ul class="tabs" id="uiView0">
-	 		<li class="tabs_on"><a href="javascript:DoTabs(0)"><? echo $var:Text12 ?></a></li>
-	 		<li><a href="javascript:DoTabs(1)"><? echo $var:Text13 ?></a></li>
-	 	</ul>
-	 	<ul class="tabs" id="uiView1" style="display:none">
-	 		<li><a href="javascript:DoTabs(0)"><? echo $var:Text12 ?></a></li>
-	 		<li class="tabs_on"><a href="javascript:DoTabs(1)"><? echo $var:Text13 ?></a></li>
-	 	</ul>
 		<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-			<p class="mb10"><? echo $var:Text21 ?></p>
 			<p class="mb5"><input type="checkbox" id="uiViewActive" onclick="OnActiv()">&nbsp;<label for="uiViewActive"><? echo $var:Text2 ?></label></p>
 			<table class="ml25">
 				<tr>
@@ -27,24 +17,10 @@
 			</table>
 			<p class="mt10 mb5"><? echo $var:Text7 ?></p>
 			<p class="ml25"><input type="radio" onclick="uiSetOption(0)" name="AlarmOption" id="uiViewAlarmOption1">&nbsp;<label for="uiViewAlarmOption1"><? echo $var:Text8 ?></label></p>
-			<p class="ml25"><input type="radio" onclick="uiSetOption(1)" name="AlarmOption" id="uiViewAlarmOption2">&nbsp;<label for="uiViewAlarmOption2"><? echo $var:Text9 ?></label></p>
-			<p class="ml25"><input type="radio" onclick="uiSetOption(2)" name="AlarmOption" id="uiViewAlarmOption3">&nbsp;<label for="uiViewAlarmOption3"><? echo $var:Text10 ?></label></p>
-			<table style="margin-left:50px;">
-				<tr>
-					<td style="vertical-align:top;">
-						<p><input type="checkbox" id="uiViewMontag">&nbsp;<label for="uiViewMontag"><? echo $var:Text14 ?></label></p>
-						<p><input type="checkbox" id="uiViewDienstag">&nbsp;<label for="uiViewDienstag"><? echo $var:Text15 ?></label></p>
-						<p><input type="checkbox" id="uiViewMittwoch">&nbsp;<label for="uiViewMittwoch"><? echo $var:Text16 ?></label></p>
-						<p><input type="checkbox" id="uiViewDonnerstag">&nbsp;<label for="uiViewDonnerstag"><? echo $var:Text17 ?></label></p>
-					</td>
-					<td style="vertical-align:top;">
-						<p><input type="checkbox" id="uiViewFreitag">&nbsp;<label for="uiViewFreitag"><? echo $var:Text18 ?></label></p>
-						<p><input type="checkbox" id="uiViewSamstag">&nbsp;<label for="uiViewSamstag"><? echo $var:Text19 ?></label></p>
-						<p><input type="checkbox" id="uiViewSonntag">&nbsp;<label for="uiViewSonntag"><? echo $var:Text20 ?></label></p>
-					</td>
-				</tr>
-			</table>
+		<p class="ml25"><input type="radio" onclick="uiSetOption(127)" name="AlarmOption" id="uiViewAlarmOption2">&nbsp;<label for="uiViewAlarmOption2"><? echo $var:Text9 ?></label></p>
+		<p class="ml25"><input type="radio" onclick="uiSetOption(31)" name="AlarmOption" id="uiViewAlarmOption3">&nbsp;<label for="uiViewAlarmOption3"><? echo $var:Text10 ?></label></p>
+		<p class="ml25"><input type="radio" onclick="uiSetOption(96)" name="AlarmOption" id="uiViewAlarmOption4">&nbsp;<label for="uiViewAlarmOption4"><? echo $var:Text11 ?></label></p>
+		<p class="mt10"><? echo $var:Text6 ?></p>
 		</div></div></div></div></div></div>
 		<? include ../html/$var:lang/home/rbb_applycancel.html ?>
-	</div></div></div></div></div></div></div>
 </div>
--- usr/www/all/html/de/fon/wecker.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/wecker.inc	2007-07-26 15:15:54.000000000 +0200
@@ -4,24 +4,9 @@
 <? setvariable var:Text3 'Uhrzeit' ?>
 <? setvariable var:Text4 ' : ' ?>
 <? setvariable var:Text5 'Telefon' ?>
+<? setvariable var:Text6 'Nach dem Aktivieren des Weckers wird das ausgewählte Telefon zu der angegebenen Uhrzeit klingeln.' ?>
 <? setvariable var:Text7 'Wählen Sie hier aus, wie der Wecker aktiviert werden soll' ?>
 <? setvariable var:Text8 'nur einmal' ?>
 <? setvariable var:Text9 'an jedem Tag' ?>
-<? setvariable var:Text10 'an den folgenden Tagen' ?>
-<? setvariable var:Text12 'Wecker 1' ?>
-<? setvariable var:Text13 'Wecker 2' ?>
-<? setvariable var:Text14 'Montag' ?>
-<? setvariable var:Text15 'Dienstag' ?>
-<? setvariable var:Text16 'Mittwoch' ?>
-<? setvariable var:Text17 'Donnerstag' ?>
-<? setvariable var:Text18 'Freitag' ?>
-<? setvariable var:Text19 'Samstag' ?>
-<? setvariable var:Text20 'Sonntag' ?>
-<? setvariable var:Text21 'Hier können Sie ein Telefon auswählen, das zu der angegebenen Weckzeit klingelt.' ?>
-<? setvariable var:jstr0 'Geben Sie bitte bei den Stunden einen gültigen Wert ein.' ?>
-<? setvariable var:jstr1 'Geben Sie bitte bei den Minuten einen gültigen Wert ein.' ?>
-<? setvariable var:jstr2 'Nebenstelle FON 1' ?>
-<? setvariable var:jstr3 'Nebenstelle FON 2' ?>
-<? setvariable var:jstr4 'Nebenstelle FON 3' ?>
-<? setvariable var:jstr5 'ISDN-Telefone' ?>
-<? setvariable var:jstr6 'alle Telefone' ?>
+<? setvariable var:Text10 'Montag bis Freitag' ?>
+<? setvariable var:Text11 'Samstag und Sonntag' ?>
--- usr/www/all/html/de/fon/wecker.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/fon/wecker.js	2007-07-26 15:15:54.000000000 +0200
@@ -1,5 +1,4 @@
 <!--		../fon/wecker.js		-->
-<? include ../html/$var:lang/fon/wecker.inc ?>
 <style type="text/css">
 <!--
 #content {width: 540px; margin: auto;}
@@ -10,18 +9,15 @@
 <script type="text/javascript">
 <? include ../html/$var:lang/js/val.js ?>
 <? include ../html/$var:lang/js/jsl.js ?>
-var g_mldStunden	= "<? print $var:jstr0 ?>";
-var g_mldMinuten 	= "<? print $var:jstr1 ?>";
-var g_Fon1 = "<? print $var:jstr2 ?>";
-var g_Fon2 = "<? print $var:jstr3 ?>";
-var g_Fon3 = "<? print $var:jstr4 ?>";
-var g_txtIsdn = "<? print $var:jstr5 ?>";
-var g_alleTelefone = "<? print $var:jstr6 ?>";
+var g_mldStunden	= "Geben Sie bitte bei den Stunden einen gültigen Wert ein.";
+var g_mldMinuten 	= "Geben Sie bitte bei den Minuten einen gültigen Wert ein.";
+var g_Fon1 = "Nebenstelle FON 1";
+var g_Fon2 = "Nebenstelle FON 2";
+var g_Fon3 = "Nebenstelle FON 3";
+var g_txtIsdn = "DECT-Telefone";
+var g_alleTelefone = "alle Telefone";
 var g_AlarmOptionValue = 0;
 function uiDoOnLoad() {
-	var nr = jslGetValue("uiPostWeckernr");
-	jslDisplay("uiView0", nr != "1");
-	jslDisplay("uiView1", nr == "1");
 	jslSetChecked("uiViewActive", jslGetValue("uiPostActive") == "1");
 	var zeit = jslGetValue("uiPostZeit");
 	if (zeit.length == 4) {
@@ -29,21 +25,7 @@
 		jslSetValue("uiViewMin", zeit.substr(2,2));
 	}
 	FillId("uiViewNr", jslGetValue("uiPostNummer"));
-	var option = Number(jslGetValue( "uiPostAlarmOption")) & 127;
-	switch (option) {
-		case 0: uiSetOption(0); break;
-		case 127: uiSetOption(1); break;
-		default: 
-			uiSetOption(2);
-			jslSetChecked("uiViewMontag", option & 1);
-			jslSetChecked("uiViewDienstag", option & 2);
-			jslSetChecked("uiViewMittwoch", option & 4);
-			jslSetChecked("uiViewDonnerstag", option & 8);
-			jslSetChecked("uiViewFreitag", option & 16);
-			jslSetChecked("uiViewSamstag", option & 32);
-			jslSetChecked("uiViewSonntag", option & 64);
-			break;	
-	}
+	uiSetOption( jslGetValue( "uiPostAlarmOption"));
 	OnActiv();
 }
 function uiDoSave() {
@@ -57,21 +39,7 @@
 		if (Number(m)<0 || Number(m)>59) {alert(g_mldMinuten); return;}
 		jslSetValue("uiPostZeit", ZweistelligeNummer(Number(h))+ZweistelligeNummer(Number(m)));
 		jslCopyValue("uiPostNummer", "uiViewNr");
-		var option = 0;
-		if (jslGetChecked("uiViewAlarmOption1")) {
-			option = 0;
-		} else if (jslGetChecked("uiViewAlarmOption2")) {
-			option = 127;
-		} else {
-			if (jslGetChecked("uiViewMontag")) option += 1;
-			if (jslGetChecked("uiViewDienstag")) option += 2;
-			if (jslGetChecked("uiViewMittwoch")) option += 4;
-			if (jslGetChecked("uiViewDonnerstag")) option += 8;
-			if (jslGetChecked("uiViewFreitag")) option += 16;
-			if (jslGetChecked("uiViewSamstag")) option += 32;
-			if (jslGetChecked("uiViewSonntag")) option += 64;
-		}
-		jslSetValue( "uiPostAlarmOption", option);
+		jslSetValue( "uiPostAlarmOption", g_AlarmOptionValue);
 		jslEnable("uiPostZeit");
 		jslEnable("uiPostNummer");
 		jslEnable( "uiPostAlarmOption");
@@ -88,20 +56,13 @@
 }
 function OnActiv() {
 	var b = jslGetChecked("uiViewActive");
-	var c = jslGetChecked("uiViewAlarmOption3");
 	jslSetEnabled("uiViewHour", b);
 	jslSetEnabled("uiViewMin", b);
 	jslSetEnabled("uiViewNr", b);
 	jslSetEnabled("uiViewAlarmOption1", b);
 	jslSetEnabled("uiViewAlarmOption2", b);
 	jslSetEnabled("uiViewAlarmOption3", b);
-	jslSetEnabled("uiViewMontag", b && c);
-	jslSetEnabled("uiViewDienstag", b && c);
-	jslSetEnabled("uiViewMittwoch", b && c);
-	jslSetEnabled("uiViewDonnerstag", b && c);
-	jslSetEnabled("uiViewFreitag", b && c);
-	jslSetEnabled("uiViewSamstag", b && c);
-	jslSetEnabled("uiViewSonntag", b && c);
+	jslSetEnabled("uiViewAlarmOption4", b);
 }
 function FillId (id, wert) {
 	var name = jslGetValue("uiPostFon0");
@@ -110,14 +71,6 @@
 	name = jslGetValue("uiPostFon1");
 	if (name.length == 0) name = g_Fon2;
 	jslAddOption(id, "2", name, false);
-	name = jslGetValue("uiPostFon2");
-	if (name.length == 0) name = g_Fon3;
-	jslAddOption(id, "3", name, false);
-	jslAddOption(id, "50", g_txtIsdn, false);
-	for (var i=1; i<9; i++) {
-		name = jslGetValue("uiPostIsdnNumber"+i);
-		if (name.length > 0) jslAddOption(id, "5"+i, jslGetValue("uiPostIsdn"+i), false);
-	}
 	jslAddOption(id, "9", g_alleTelefone, false);
 	jslSetSelection(id, "9");
 	jslSetSelection(id, wert);
@@ -127,19 +80,12 @@
 	return "0"+n.toString();
 }
 function uiSetOption(n) {
-	jslSetChecked("uiViewAlarmOption1", n==0);
-	jslSetChecked("uiViewAlarmOption2", n==1);
-	jslSetChecked("uiViewAlarmOption3", n==2);
-	jslSetEnabled("uiViewMontag", n==2);
-	jslSetEnabled("uiViewDienstag", n==2);
-	jslSetEnabled("uiViewMittwoch", n==2);
-	jslSetEnabled("uiViewDonnerstag", n==2);
-	jslSetEnabled("uiViewFreitag", n==2);
-	jslSetEnabled("uiViewSamstag", n==2);
-	jslSetEnabled("uiViewSonntag", n==2);
-}
-function DoTabs(n) {
-	jslSetValue("uiPostWeckernr", n);
-	jslGoTo("", "wecker");
+	n = n & 127;
+	if ((n!=0) && (n!=127) && (n!=31) && (n!=96)) n = 0;
+	jslSetChecked("uiViewAlarmOption1", (n==0));
+	jslSetChecked("uiViewAlarmOption2", (n==127));
+	jslSetChecked("uiViewAlarmOption3", (n==31));
+	jslSetChecked("uiViewAlarmOption4", (n==96));
+	g_AlarmOptionValue = n;
 }
 </script>
--- usr.orig/www/all/html/de/FRITZ!Box_Anrufliste.csv	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/FRITZ!Box_Anrufliste.csv	2006-12-13 17:02:26.000000000 +0100
@@ -1,4 +1,3 @@
-sep=;
 Typ;Datum;Name;Rufnummer;Nebenstelle;Eigene Rufnummer;Dauer
-<? multiquerytext telcfg:settings/Journal/list(Type,Date,Number,Port,Duration,Route,RouteType,Name) `$2;$3;$9;$4;<? if eq $5 0 `<? querytext telcfg:settings/MSN/Port0/Name ?>` `<? if eq $5 1 `<? querytext telcfg:settings/MSN/Port1/Name ?>` `<? if eq $5 2 `<? querytext telcfg:settings/MSN/Port2/Name ?>` `<? if eq $5 3 `Durchwahl` `<? if eq $5 4 `FON S0` `<? if eq $5 5 `Fon/Fax PC` `<? if eq $5 6 `Anrufbeantworter` `<? if eq $5 36 `DATA S0` `<? if eq $5 37 `DATA PC` ?>` ?>` ?>` ?>` ?>` ?>` ?>` ?>` ?>;<? if eq $8 1 `Internet: <? multiquery sip:settings/sip/list(displayname,ID) `<? if eq $7 $23 `$22` ?>` ?>` `<? if eq `$7` `` `Festnetz` `$7` ?>` ?>;$6
+<? multiquerytext telcfg:settings/Journal/list(Type,Date,Number,Port,Duration,Route,RouteType,Name) `$2;$3;$9;$4;<? if eq $5 0 `<? querytext telcfg:settings/MSN/Port0/Name ?>` `<? if eq $5 1 `<? querytext telcfg:settings/MSN/Port1/Name ?>` `<? if eq $5 2 `<? querytext telcfg:settings/MSN/Port2/Name ?>` `<? if eq $5 3 `Durchwahl` `<? if eq $5 4 `FON S0` `<? if eq $5 36 `DATA S0` ?>` ?>` ?>` ?>` ?>` ?>;<? if eq $8 1 `Internet: <? multiquery sip:settings/sip/list(displayname,ID) `<? if eq $7 $23 `$22` ?>` ?>` `<? if eq `$7` `` `Festnetz` `$7` ?>` ?>;$6
 ` ?>
--- usr/www/all/html/de/home/home.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/home/home.html	2007-07-26 15:15:54.000000000 +0200
@@ -32,11 +32,6 @@
 							<td><? echo $var:txt008 ?></td>
 							<td><script type="text/javascript">document.write(WlanStateDisplay());</script></td>
 						</tr>
-						<tr>
-							<td><script type="text/javascript">document.write(UsbHostLed());</script></td>
-							<td><? echo $var:txt036 ?></td>
-							<td><script type="text/javascript">document.write(uiUsbDisplay());</script></td>
-						</tr>
 					</table>
 				</td>
 				<td>
@@ -100,5 +95,5 @@
 <? if eq `<? query box:status/hint_telefon_message_waiting ?>` `1` `<p class="info">$var:txt046</p>` ?>
 		<p id="uiViewEventlink" class="mt10" style="display:none"><a href="javascript:jslGoTo('', 'syslog');"><? echo $var:txt052 ?></a></p>
 	</div></div></div></div></div></div>
-	<? include ../html/$var:lang/home/rbb_refresh.html ?>
+	<? include ../html/$var:lang/home/rbb_refresh1.html ?>
 </div>
--- usr/www/all/html/de/home/home.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/home/home.js	2007-07-26 15:15:54.000000000 +0200
@@ -5,13 +5,11 @@
 #t1					{margin: auto; width: 100%;}
 #t1 td				{padding: 0; vertical-align: top;}
 #tAnsch, #tLan	{width: 100%;}
-#tAnsch td, #tLan td, #tPpp td, #tVpn td
+#tAnsch td, #tLan td, #tPpp td
 			 		{padding: 2px 4px; vertical-align: top;}
 .info 				{margin-top: 5px; color: #CC0000; }
 #nsLink:link, #nsLink:visited, #nsLink:active, #nsLink:hover
 					{ color: #cc0000; text-decoration: underline; }
-#labLink:link, #labLink:visited, #labLink:active, #labLink:hover
-					{ color: #cc0000; text-decoration: underline; }
 .ac					{ text-align: center; }
 .fett				{ font-weight: bold; }
 -->
@@ -35,17 +33,13 @@
 var g_ataRouter = "Zugang über Router";
 var g_ataModem = "Zugang über Modem";
 var g_wlanDeaktiviert = "Deaktiviert";
-var g_wlanUnverschluesselt = "Unverschlüsselt";
-var g_wlanVerschluesselt = "Verschlüsselt";
-var g_pppIpAdr = " IP-Adresse ";
+var g_wlanUnverschluesselt = "unverschlüsselt";
+var g_wlanVerschluesselt = "verschlüsselt";
+var g_pppIpAdr = "IP-Adresse ";
 var g_pppBridge = "FRITZ!Box benutzt eine direkte IP-Verbindung zu einem Internetanbieter.";
 var g_pppIpClient = "Eine bestehende Internetverbindung im Netzwerk wird mitbenutzt.";
 var g_pppNoData = "FRITZ!Box verfügt nicht über Zugangsdaten zu einem Internetanbieter.";
 var g_pppSeit = "verbunden seit ";
-var g_vpnNotActive = "nicht aufgebaut";
-var g_vpnWaiting = "wird aufgebaut";
-var g_vpnInProgress = "wird aufgebaut";
-var g_vpnReady = "hergestellt";
 var g_showEventlink = 0;
 var g_fonNoData = "FRITZ!Box verfügt nicht über Anmeldedaten zu einem Internettelefonieanbieter";
 function uiDoOnLoad() {
@@ -109,7 +105,7 @@
 	return "<img src=\"../html/<? echo $var:lang ?>/images/led_gray.gif\">";
 }
 function AtamodeDisplay (type){
-	if (type != "pppoe") return g_ataRouter;
+	if (type == "pppoe") return g_ataRouter;
 	return g_ataModem;
 }
 function uiDoCancel() {
@@ -143,12 +142,15 @@
 	}
 	return rc;
 }
-var nUsb = Number("<? query ctlusb:settings/device/count ?>");
 function uiUsbDisplay () {
-	return (nUsb )>0 ? g_txtVerbunden:g_txtGetrennt;
+	var n1 = <? multiquerycount ctlusb:settings/storage-part/list ?>;
+	var n2 = "<? query ctlusb:settings/printer-avail ?>" == "1" ? 1:0;
+	return (n1+n2)>0 ? g_txtVerbunden:g_txtGetrennt;
 }
 function UsbHostLed () {
-	return (nUsb )>0 ? "<img src=\"../html/<? echo $var:lang ?>/images/led_green.gif\">":"<img src=\"../html/<? echo $var:lang ?>/images/led_gray.gif\">";
+	var n1 = <? multiquerycount ctlusb:settings/storage-part/list ?>;
+	var n2 = "<? query ctlusb:settings/printer-avail ?>" == "1" ? 1:0;
+	return (n1+n2)>0 ? "<img src=\"../html/<? echo $var:lang ?>/images/led_green.gif\">":"<img src=\"../html/<? echo $var:lang ?>/images/led_gray.gif\">";
 }
 function WlanStateLed (state){
 	return StateLed("<? query wlan:settings/ap_enabled ?>");
@@ -177,17 +179,15 @@
 	var caps = "<? query sar:settings/encapsulation ?>";
 	var status = "<? query connection0:status/connect ?>";
 	var connection = "<? query connection0:settings/type ?>";
-	if (isIpClient()) return "";
-	
 	if (atamode != "1") {
-		if (caps == "dslencap_ether" || caps == "dslencap_ipnlpid" || caps == "dslencap_ipsnap" || caps == "dslencap_ipraw") return "";
+		if (caps == "dslencap_ether" || caps == "dslencap_ipnlpid" || caps == "dslencap_ipsnap" || caps == "dslencap_ipraw") return StateLed("0");
 		switch (status) {
 			case "5": return StateLed("1");
 			case "3": return StateLed("0");
 			default: return StateLed("0");
 		}
 	} else {
-		if (connection == "pppoe" && (caps == "dslencap_pppoe" || caps == "dslencap_ether")) {
+		if (connection == "pppoe" && caps == "dslencap_pppoe") {
 			switch (status) {
 				case "5": return StateLed("1");
 				case "3": return StateLed("0");
@@ -211,17 +211,17 @@
 		case "dslencap_pppoa_llc":
 			if (connection == "bridge") {
 				if (!isIpClient()) {
-					str = g_pppBridge+mldIpAdr;
+					str = g_pppBridge;
 				} else {
-					str = g_pppIpClient+mldIpAdr;
+					str = g_pppIpClient;
 				}
 			}
 			break;
 		default:
 			if (!isIpClient()) {
-				str = g_pppBridge+mldIpAdr;
+				str = g_pppBridge;
 			} else {
-				str = g_pppIpClient+mldIpAdr;
+				str = g_pppIpClient;
 			}
 			break;
 	}
@@ -284,25 +284,4 @@
 	}
 	return StateLed("0");
 }
-function VpnLed (status) {
-	return StateLed(status=="ready" ? 1:0);
-}
-function VpnDisplay(status){
-	var vpnDisplay = "";
-	switch (status) {
-		case "not active": return g_vpnNotActive;
-		case "waiting": return g_vpnWaiting;
-		case "in progress": return g_vpnInProgress;
-		case "ready": return g_vpnReady;
-	}
-	return "";
-}
-function TrVpn(status, name) {
-	var str = "<tr>";
-	str += "<td style==\"width:13px\">"+ VpnLed(status) +"</td>";
-	str += "<td style==\"width:300px\">"+ name +"</td>";
-	str += "<td>"+ VpnDisplay(status) +"</td>";
-	str += "</tr>";
-	return str;
-}
 </script>
--- usr.orig/www/all/html/de/home/rbb_refresh1.html	1970-01-01 01:00:00.000000000 +0100
+++ usr/www/all/html/de/home/rbb_refresh1.html	2007-03-22 14:30:14.000000000 +0100
@@ -0,0 +1,4 @@
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
+		<input type="button" onclick="uiDoRefresh()" value="<? echo $var:txtRefresh ?>" class=Pushbutton>
+		<input type="button" onclick="uiDoHelp()" value="<? echo $var:txtHelp ?>" class="Pushbutton" id="buttonHilfe">
+	</div></div></div></div></div></div>
--- usr/www/all/html/de/internet/authform.frm.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/internet/authform.frm	2007-07-26 15:15:54.000000000 +0200
@@ -26,7 +26,5 @@
 <input type="hidden" name="connection_voip:settings/VCI" value="<? query connection_voip:settings/VCI ?>" id="uiPostVciSepVcc" disabled />
 <input type="hidden" name="connection_voip:settings/encapsulation" value="<? query connection_voip:settings/encapsulation ?>" id="uiPostEncapsSepVcc" disabled />
 <input type="hidden" name="connection_voip:settings/use_dhcp" value="<? query connection_voip:settings/use_dhcp ?>" id="uiPostDhcpSepVcc" disabled />
-<input type="hidden" name="connection_voip:settings/username" value="<? query connection_voip:settings/username ?>" id="uiPostVoipUsername" disabled />
-<input type="hidden" name="connection_voip:settings/password" value="<? query connection_voip:settings/password ?>" id="uiPostVoipPassword" disabled />
 <input type="hidden" name="sipextra:settings/sip/sip_prio" value="<? query sipextra:settings/sip/sip_prio ?>" id="uiPostSipPrio" disabled>
 <input type="hidden" name="sipextra:settings/sip/rtp_prio" value="<? query sipextra:settings/sip/rtp_prio ?>" id="uiPostRtpPrio" disabled>
--- usr/www/all/html/de/internet/authform.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/internet/authform.html	2007-07-26 15:15:54.000000000 +0200
@@ -13,12 +13,11 @@
 <? if eq $var:OEM freenet `<? setvariable var:allprovider 1 ?>` ?>
 <? if eq $var:OEM aol `<? setvariable var:allprovider 1 ?>` ?>
 <? if eq $var:OEM avm `<? setvariable var:allprovider 1 ?>` ?>
+<? if eq $var:OEM tcom `<? setvariable var:allprovider 1 ?>` ?>
 <? if eq $var:allprovider 1 `
 		<option value="1u1">$var:afTxt02</option>
 		<option value="AOL">$var:afTxt06</option>
 		<option value="Arcor">$var:afTxt05</option>
-		<option value="DBD">$var:afTxt41</option>
-		<option value="DBD-DSL">$var:afTxt42</option>
 		<option value="Debitel">$var:afTxt07</option>
 		<option value="Freenet">$var:afTxt08</option>
 		<option value="GMX">$var:afTxt03</option>
@@ -28,7 +27,6 @@
 		<option value="TisFlat">$var:afTxt10</option>
 		<option value="TisVol">$var:afTxt11</option>
 		<option value="TOnline">$var:afTxt12</option>
-		<option value="Versatel">$var:afTxt47</option>
 		<option value="Webde">$var:afTxt13</option>
 ` ?>
 		<option value="Sonst"><? echo $var:afTxt14 ?></option>
@@ -38,7 +36,7 @@
 	<table id="tPpp">
 		<tr id="UserName">
 			<td class="Label"><label for="uiViewUsername"><span id="LabelName"><? echo $var:afTxt15 ?></span></label></td>
-			<td style="width: 320px;">
+			<td style="width: 300px;">
 				<table id="tUser">
 					<tr>
 						<td id="UserPrefix" style="padding-right: 3px; display:none"><span id="spanPrefix"><? echo $var:afTxt16 ?></span></td>
@@ -50,7 +48,7 @@
 		</tr>
 		<tr id="WebdeUserName" style="display:none">
 			<td class="Label"><label for="uiViewWebPrefix"><? echo $var:afTxt18 ?></label></td>
-			<td style="width: 320px;">
+			<td style="width: 300px;">
 				<table id="tWebdeUser">
 					<tr>
 						<td style="padding-right: 3px;"><? echo $var:afTxt19 ?></td>
@@ -93,25 +91,6 @@
 			<td class="Label" id="LabelRealm"><label for="uiViewRealm"><? echo $var:afTxt28 ?></label></td>
 			<td><input type="text" value size="9" maxlength="15" class id="uiViewRealm"></td>
 		</tr>
-		<tr id="DbdDslName" style="display:none">
-			<td class="Label" style="padding-top: 10px"><label for="uiViewVoipUsername"><? echo $var:afTxt43 ?></label></td>
-			<td style="width: 320px;">
-				<table id="tDbd" >
-					<tr>
-						<td style="padding-top: 10px"><input type="text" value size="24" maxlength="128" class id="uiViewVoipUsername"></td>
-						<td id="UserPostfix" style="padding-left: 3px; padding-top: 10px"><? echo $var:afTxt44 ?></td>
-					</tr>
-				</table>
-			</td>
-		</tr>
-		<tr id="DbdDslPass1" style="display:none">
-			<td class="Label"><label for="uiViewVoipPassword"><? echo $var:afTxt45 ?></label></td>
-			<td style="width: 300px;"><input type="password" value size="14" maxlength="128" class id="uiViewVoipPassword" onfocus="uiSelect(id);"></td>
-		</tr>
-		<tr id="DbdDslPass2" style="display:none">
-			<td class="Label"><label for="uiViewVoipPassword2"><? echo $var:afTxt46 ?></label></td>
-			<td><input type="password" value size="14" maxlength="128" class="Eingabeldfeld" id="uiViewVoipPassword2" onfocus="uiSelect(id);"></td>
-		</tr>
 	</table>
 </div>
 <div id="IdleTimer" style="display:none">
--- usr/www/all/html/de/internet/authform.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/internet/authform.js	2007-07-26 15:15:54.000000000 +0200
@@ -13,7 +13,6 @@
 var g_mldEWEKennwort		= "Das Kennwort darf nur aus Buchstaben und Ziffern bestehen.";
 var g_mldUserLeer			= "Der Benutzername darf nicht leer sein.";
 var g_mldKennwortDiff		= "Das Passwort/Kennwort stimmt nicht mit der Bestätigung überein.";
-var g_mldVoipKennwortDiff		= "Das Telefonie-Zugangspasswort stimmt nicht mit der Bestätigung überein.";
 var g_mldPinDiff			= "Die PIN stimmt nicht mit der Bestätigung überein.";
 var g_mldEnterPin			= "Das Passwort wurde geändert. Bitte die PIN mit eingeben.";
 var g_mldEnterKennwort		= "Die PIN wurde geändert. Bitte das Passwort mit eingeben.";
@@ -63,19 +62,12 @@
 var g_txtDebitelName			= "Benutzername";
 var g_txtDebitelKennwort		= "Passwort";
 var g_txtDebitelConfirmation	= "Passwortbestätigung";
-var g_txtDBDName				= "Internetzugangs-Kennung";
-var g_txtDBDKennwort		= "Internetzugangs-Passwort";
-var g_txtDBDConfirmation		= "Passwort-Bestätigung";
-var g_txtVersatelName		= "Benutzername ";
-var g_txtVersatelKennwort	= "Kennwort";
-var g_txtVersatelConfirmation	= "Kennwortbestätigung";
 var g_txtSonstName			= "Benutzername ";
 var g_txtSonstKennwort		= "Kennwort";
 var g_txtSonstConfirmation	= "Kennwortbestätigung";
 var g_Variante 	= "<? echo $var:OEM ?>";
 var g_expertMode = "<? query box:settings/expertmode/activated ?>";
 var g_WebdeOn	= true;
-var g_usePstn = "<? echo $var:usePSTN ?>";
 function afDoOnLoad() {
 	jslCopyValue("uiViewIdleTime", "uiPostPppIdleTimeout");
 	jslDisplay("uiShowProvider", "<? echo $var:OEM ?>" != "avme");
@@ -162,8 +154,6 @@
 	var username = jslGetValue("uiViewUsername");
 	var kennwort1 = jslGetValue("uiViewPassword");
 	var provider = jslGetValue("uiViewProvider");
-	jslSetValue("uiPostEncaps", "dslencap_pppoe");
-	jslEnable("uiPostEncaps");
 	if (provider == "AOL") {
 		if (username.length < 3) {alert(g_mldAolNameToShort); return false;}
 		if (username.length > 16) {alert(g_mldAolNameToLong); return false;}
@@ -177,30 +167,6 @@
 		username = username+"@de.aol.com";
 	} else if (provider == "Arcor") {
 		//username = username;
-	} else if (provider == "DBD") {
-		username = username+"@dbd-breitband.de";
-		if (kennwort1 != jslGetValue("uiViewPassword2")) {alert(g_mldKennwortDiff); return false;}
-		jslSetValue("uiPostEncapsSepVcc", "dslencap_ether");
-		jslSetValue("uiPostUseSepVcc", "1");
-		jslEnable("uiPostEncapsSepVcc");
-		jslEnable("uiPostUseSepVcc");
-	} else if (provider == "DBD-DSL") {
-		username = username+"@dbd-breitband.de";
-		if (kennwort1 != jslGetValue("uiViewPassword2")) {alert(g_mldKennwortDiff); return false;}
-		if (jslGetValue("uiViewVoipPassword") != jslGetValue("uiViewVoipPassword2")) {alert(g_mldVoipKennwortDiff); return false;}
-		jslSetValue("uiPostVoipUsername", jslGetValue("uiViewVoipUsername")+"@voice.dbd-breitband.de");
-		jslSetValue("uiPostVoipPassword", jslGetValue("uiViewVoipPassword"));
-		jslSetValue("uiPostUseSepVcc", "1");
-		jslSetValue("uiPostEncapsSepVcc", "dslencap_pppoe");
-		jslSetValue("uiPostVpiSepVcc", "1");
-		jslSetValue("uiPostVciSepVcc", "35");
-		jslEnable("uiPostVoipUsername");
-		jslEnable("uiPostVoipPassword");
-		jslEnable("uiPostUseSepVcc");
-		jslEnable("uiPostEncapsSepVcc");
-		jslEnable("uiPostVpiSepVcc");
-		jslEnable("uiPostVciSepVcc");
-		
 	} else if (provider == "Debitel") {
 		username = "debitel/"+username+"%debitel.net";
 	} else if (provider == "TOnline") {
@@ -256,26 +222,6 @@
 ` ?>
 			}
 		}
-		if (g_usePstn == "0") {
-			jslSetValue("uiPostSipPrio", "5");
-			jslSetValue("uiPostRtpPrio", "5");
-			jslEnable("uiPostSipPrio");
-			jslEnable("uiPostRtpPrio");
-		
-			jslSetValue("uiPostUseSepVcc", "1");
-			jslSetValue("uiPostVoipUsername", realm+"voice%"+username);
-			jslSetValue("uiPostVoipPassword", pin1+kennwort1);
-			jslSetValue("uiPostVpiSepVcc", "1");
-			jslSetValue("uiPostVciSepVcc", "35");
-			jslSetValue("uiPostEncapsSepVcc", "dslencap_pppoe");
-			
-			jslEnable("uiPostUseSepVcc");
-			jslEnable("uiPostVoipUsername");
-			jslEnable("uiPostVoipPassword");
-			jslEnable("uiPostVpiSepVcc");
-			jslEnable("uiPostVciSepVcc");
-			jslEnable("uiPostEncapsSepVcc");
-		}
 		jslSetValue("uiPostPppPassword", pin1+kennwort1);
 		username = realm+username;
 	} else if (provider == "Strato") {
@@ -317,7 +263,6 @@
 	jslSetValue("uiPostPppUsername",username);
 	if (provider != "Freenet")
 		jslSetValue("uiPostPppPassword", kennwort1);
-		
 	return true;
 }
 function Load1und1User () {
@@ -387,21 +332,6 @@
 		jslSetValue("uiViewUsername", username.slice(8));
 		jslSetSelection("uiViewProvider", "TisVol");
 		OnTisVol();
-	} else if (username.indexOf("@dbd-breitband.de")>=0) {
-		jslSetValue("uiViewUsername", username.substr(0, username.indexOf("@dbd-breitband.de")));
-		var str = jslGetValue("uiPostVoipUsername");
-		var n = str.indexOf("@voice.dbd-breitband.de");
-		if (n>=0) str = str.substr(0, n);
-		jslSetValue("uiViewVoipUsername", str);
-		jslCopyValue("uiViewVoipPassword", "uiPostVoipPassword");
-		jslCopyValue("uiViewVoipPassword2", "uiPostVoipPassword");
-		if (jslGetValue("uiPostEncapsSepVcc") == "dslencap_ether") {
-			jslSetSelection("uiViewProvider", "DBD");
-			OnDbd();
-		} else {
-			jslSetSelection("uiViewProvider", "DBD-DSL");
-			OnDbdDsl();
-		}
 	} else if (username.indexOf("debitel/")==0 && username.indexOf("%debitel.net")>=8) {
 		jslSetValue("uiViewUsername", username.substr(8, username.indexOf("%debitel.net")-8));
 		jslSetSelection("uiViewProvider", "Debitel");
@@ -473,10 +403,6 @@
 		}
 		jslSetSelection("uiViewProvider", "Webde");
 		OnWebde();
-	} else if (username.indexOf("@versatel")>=0) {
-		jslSetValue("uiViewUsername", username);
-		jslSetSelection("uiViewProvider", "Versatel");
-		OnVersatel();
 	} else if (username.indexOf("ar")==0) {
 		// Usernamen bei arcor fangen mit "ar" an
 		jslSetValue("uiViewUsername", username);
@@ -534,8 +460,6 @@
 	if (id == "TOnline") OnTOnline();
 	else if (id == "AOL") OnAol();
 	else if (id == "Arcor") OnArcor();
-	else if (id == "DBD") OnDbd();
-	else if (id == "DBD-DSL") OnDbdDsl();
 	else if (id == "Debitel") OnDebitel();
 	else if (id == "Freenet") OnFreenet();
 	else if (id == "GMX") On1u1("GMX/");
@@ -546,7 +470,6 @@
 	else if (id == "TisFlat") OnTisFlat();
 	else if (id == "TisVol") OnTisVol();
 	else if (id == "Webde") OnWebde();
-	else if (id == "Versatel") OnVersatel();
 	else OnSonst();
 	OnChangeProviderEx(id);
 }
@@ -566,7 +489,6 @@
 	jslDisplay("Pin", false);
 	jslDisplay("Pin2", false);
 	jslDisplay("Realm", false);
-	ShowVoipZugang(false);
 	ShowIdleTimer(true);
 	jslDisplay("WebdeIdleTimer", false);
 }
@@ -585,7 +507,6 @@
 	jslDisplay("Pin", false);
 	jslDisplay("Pin2", false);
 	jslDisplay("Realm", false);
-	ShowVoipZugang(false);
 	ShowIdleTimer(true);
 	jslDisplay("WebdeIdleTimer", false);
 }
@@ -603,45 +524,6 @@
 	jslDisplay("Pin", false);
 	jslDisplay("Pin2", false);
 	jslDisplay("Realm", false);
-	ShowVoipZugang(false);
-	ShowIdleTimer(true);
-	jslDisplay("WebdeIdleTimer", false);
-}
-function OnDbd() {
-	jslDisplay("UserName", true);
-	jslDisplay("WebdeUserName", false);
-	jslDisplay("TAnschlusskennung", false);
-	jslDisplay("TOnlineNummer", false);
-	jslDisplay("TMitbenutzer", false);
-	jslDisplay("UserPrefix", false);
-	SetSpanText("spanPostfix", "@dbd-breitband.de");
-	jslDisplay("UserPostfix", true);
-	SetSpanText("LabelName", g_txtDBDName);
-	SetSpanText("LabelKennwort", g_txtDBDKennwort);
-	SetSpanText("LabelKennwort2", g_txtDBDConfirmation);
-	jslDisplay("Pin", false);
-	jslDisplay("Pin2", false);
-	jslDisplay("Realm", false);
-	ShowVoipZugang(false);
-	ShowIdleTimer(true);
-	jslDisplay("WebdeIdleTimer", false);
-}
-function OnDbdDsl() {
-	jslDisplay("UserName", true);
-	jslDisplay("WebdeUserName", false);
-	jslDisplay("TAnschlusskennung", false);
-	jslDisplay("TOnlineNummer", false);
-	jslDisplay("TMitbenutzer", false);
-	jslDisplay("UserPrefix", false);
-	SetSpanText("spanPostfix", "@dbd-breitband.de");
-	jslDisplay("UserPostfix", true);
-	SetSpanText("LabelName", g_txtDBDName);
-	SetSpanText("LabelKennwort", g_txtDBDKennwort);
-	SetSpanText("LabelKennwort2", g_txtDBDConfirmation);
-	jslDisplay("Pin", false);
-	jslDisplay("Pin2", false);
-	jslDisplay("Realm", false);
-	ShowVoipZugang(true);
 	ShowIdleTimer(true);
 	jslDisplay("WebdeIdleTimer", false);
 }
@@ -661,7 +543,6 @@
 	jslDisplay("Pin", false);
 	jslDisplay("Pin2", false);
 	jslDisplay("Realm", false);
-	ShowVoipZugang(false);
 	ShowIdleTimer(true);
 	jslDisplay("WebdeIdleTimer", false);
 }
@@ -680,7 +561,6 @@
 	jslDisplay("Pin", true);
 	jslDisplay("Pin2", true);
 	jslDisplay("Realm", true);
-	ShowVoipZugang(false);
 	ShowIdleTimer(true);
 	jslDisplay("WebdeIdleTimer", false);
 }
@@ -699,7 +579,6 @@
 	jslDisplay("Pin", false);
 	jslDisplay("Pin2", false);
 	jslDisplay("Realm", true);
-	ShowVoipZugang(false);
 	ShowIdleTimer(true);
 	jslDisplay("WebdeIdleTimer", false);
 }
@@ -717,7 +596,6 @@
 	jslDisplay("Pin", false);
 	jslDisplay("Pin2", false);
 	jslDisplay("Realm", false);
-	ShowVoipZugang(false);
 	ShowIdleTimer(false);
 	jslDisplay("WebdeIdleTimer", false);
 }
@@ -736,7 +614,6 @@
 	jslDisplay("Pin", false);
 	jslDisplay("Pin2", false);
 	jslDisplay("Realm", false);
-	ShowVoipZugang(false);
 	ShowIdleTimer(true);
 	jslDisplay("WebdeIdleTimer", false);
 }
@@ -755,7 +632,6 @@
 	jslDisplay("Pin", false);
 	jslDisplay("Pin2", false);
 	jslDisplay("Realm", false);
-	ShowVoipZugang(false);
 	ShowIdleTimer(true);
 	jslDisplay("WebdeIdleTimer", false);
 }
@@ -772,7 +648,6 @@
 	jslDisplay("Pin", false);
 	jslDisplay("Pin2", false);
 	jslDisplay("Realm", false);
-	ShowVoipZugang(false);
 	ShowIdleTimer(true);
 	jslDisplay("WebdeIdleTimer", false);
 }
@@ -789,7 +664,6 @@
 	jslDisplay("Pin", false);
 	jslDisplay("Pin2", false);
 	jslDisplay("Realm", false);
-	ShowVoipZugang(false);
 	if (g_WebdeOn) {
 		ShowIdleTimer(false);
 		jslDisplay("WebdeIdleTimer", true);
@@ -798,24 +672,6 @@
 		jslDisplay("WebdeIdleTimer", false);
 	}
 }
-function OnVersatel() {
-	jslDisplay("UserName", true);
-	jslDisplay("WebdeUserName", false);
-	jslDisplay("TAnschlusskennung", false);
-	jslDisplay("TOnlineNummer", false);
-	jslDisplay("TMitbenutzer", false);
-	jslDisplay("UserPrefix", false);
-	jslDisplay("UserPostfix", false);
-	SetSpanText("LabelName", g_txtVersatelName);
-	SetSpanText("LabelKennwort", g_txtVersatelKennwort);
-	SetSpanText("LabelKennwort2", g_txtVersatelConfirmation);
-	jslDisplay("Pin", false);
-	jslDisplay("Pin2", false);
-	jslDisplay("Realm", false);
-	ShowVoipZugang(false);
-	ShowIdleTimer(true);
-	jslDisplay("WebdeIdleTimer", false);
-}
 function OnSonst() {
 	jslDisplay("UserName", true);
 	jslDisplay("WebdeUserName", false);
@@ -830,15 +686,9 @@
 	jslDisplay("Pin", false);
 	jslDisplay("Pin2", false);
 	jslDisplay("Realm", false);
-	ShowVoipZugang(false);
 	ShowIdleTimer(true);
 	jslDisplay("WebdeIdleTimer", false);
 }
-function ShowVoipZugang (b) {
-	jslDisplay("DbdDslName", b);
-	jslDisplay("DbdDslPass1", b);
-	jslDisplay("DbdDslPass2", b);
-}
 var g_InitIdleTimer = false;
 function ShowIdleTimer (b) {
 	if (b) {
--- usr/www/all/html/de/internet/budget.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/internet/budget.inc	2007-07-26 15:15:54.000000000 +0200
@@ -1,5 +1,5 @@
 <? include ../html/$var:lang/global.inc ?>
-<? setvariable var:Text1 'Tarif eintragen' ?>
+<? setvariable var:Text1 'Tarif festlegen' ?>
 <? setvariable var:Text2 'Geben Sie hier das enthaltene Datenvolumen oder die Freistunden Ihres Tarifs an.' ?>
 <? setvariable var:Text4 'Tarif-Informationen verwenden' ?>
 <? setvariable var:Text5 'Volumentarif' ?>
--- usr/www/all/html/de/internet/budget.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/internet/budget.js	2007-07-26 15:15:54.000000000 +0200
@@ -46,6 +46,7 @@
 	// Budget
 	jslGetCheckValue("uiViewBudgetOn","uiPostBudgetOn");
 	OnToggleBudget();
+	
 	if (!isDslIp() && !isWanIp()) {
 		jslDisplay("uiViewDisconnectText", true);
 		jslDisplay("uiDisconnect", true);
--- usr/www/all/html/de/internet/dyndns.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/internet/dyndns.inc	2007-07-26 15:15:54.000000000 +0200
@@ -1,6 +1,6 @@
 <? include ../html/$var:lang/global.inc ?>
 <? setvariable var:Text1 'Dynamic DNS' ?>
-<? setvariable var:Text2 'Über Dynamic DNS können Anwendungen und Dienste, für die in der $var:BoxName-Firewall Portfreigaben eingerichtet wurden, unter einem festen Domainnamen aus dem Internet erreicht werden, obwohl sich die öffentliche IP-Adresse der $var:BoxName mit jeder Interneteinwahl ändert.' ?>
+<? setvariable var:Text2 'Dynamic DNS ermöglicht es, dass $var:BoxName immer unter einem festen Domainnamen aus dem Internet erreichbar ist, obwohl sich die öffentliche IP-Adresse von $var:BoxName mit jeder Interneteinwahl ändert.' ?>
 <? setvariable var:Text5 'Dynamic DNS benutzen' ?>
 <? setvariable var:Text6 'Geben Sie die Anmeldedaten für Ihren Dynamic DNS-Anbieter an.' ?>
 <? setvariable var:Text7 'Dynamic DNS-Anbieter' ?>
@@ -10,5 +10,3 @@
 <? setvariable var:Text12 'Kennwort' ?>
 <? setvariable var:Text13 'Kennwortbestätigung' ?>
 <? setvariable var:Text14 'Neuen Domainnamen anmelden' ?>
-<? setvariable var:Text15 'VPN' ?>
-<? setvariable var:Text16 'Dynamic DNS' ?>
--- usr/www/all/html/de/internet/inetstat.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/internet/inetstat.html	2007-07-26 15:15:54.000000000 +0200
@@ -1,13 +1,13 @@
 <? include ../html/$var:lang/internet/inetstat.inc ?>
 <? setvariable var:showBalken 0 ?>
-<? if eq $var:settimeknown 1 `
+<? if eq <? query inetstat:status/timeknown ?> 1 `
 <? if eq <? query connection0:settings/Budget/Enabled ?> 1 `
 <? setvariable var:showBalken 1 ?>
 ` ?>
 ` ?>
 <div id="content">
  	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo $var:Text40 ?>
+		Online-Zähler
 	</div></div></div></div></div></div>
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 	<div id="uiBudget" style="display:none">
@@ -31,18 +31,18 @@
 <? if eq $var:showBalken 1 `
 				 <table id="tBalken">
 					<tr>
-						<td colspan="2">$var:Text28</td>
+						<td colspan="2">$var:Text26</td>
 					</tr>
 					<tr>
-						<td class="bar"><img src="/html/<? echo $var:lang ?>/images/gruen.gif" height="8" width="20" name="valuebar" id="uiViewImageValue" style="padding-left:3px;"></td>
-						<td><label id="uiViewLabelValue">$var:Text29</label></td>
+						<td class="bar"><img src="/html/<? echo $var:lang ?>/images/blau.gif" height="8" width="30" id="uiViewImageTime" style="padding-left:3px;"></td>
+						<td><label id="uiViewLabelTime">$var:Text27</label></td>
 					</tr>
 					<tr>
-						<td colspan="2">$var:Text26</td>
+						<td colspan="2">$var:Text28</td>
 					</tr>
 					<tr>
-						<td class="bar"><img src="/html/<? echo $var:lang ?>/images/blau.gif" height="8" width="30" id="uiViewImageTime" style="padding-left:3px;"></td>
-						<td><label id="uiViewLabelTime">$var:Text27</label></td>
+						<td class="bar"><img src="/html/<? echo $var:lang ?>/images/gruen.gif" height="8" width="20" name="valuebar" id="uiViewImageValue" style="padding-left:3px;"></td>
+						<td><label id="uiViewLabelValue">$var:Text29</label></td>
 					</tr>
 				</table>
 				<p style="display:none;" id="uiViewWarning">
@@ -63,60 +63,80 @@
 		</ul>
 		<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 			<p class="mb5"><? echo $var:Text2 ?></p>
-<? if neq $var:settimeknown 1 `
+<? if neq <? query inetstat:status/timeknown ?> 1 `
 			 <p>$var:Text3</p>
 ` ?>
 <? setvariable var:nSpan 2 ?>
-<? if eq $var:settimeknown 1 `
+<? if eq $var:OEM avm `
+	<? setvariable var:nSpan 3 ?>
+` ?>
+<? if eq <? query inetstat:status/timeknown ?> 1 `
 			<table id="tStat" class="tborder">
 				<tr>
 					<th></th>
-					<th style="width: 65px; text-align: left;">$var:Text6</th>
-					<th></th>
-					<th style="width: 130px; text-align: center; padding-left: 5px;">$var:Text7</th>
-					<th class="c23">$var:Text8</th>
+					<th style="text-align: right;">$var:Text6</th>
+					<th colspan="$var:nSpan" style="text-align: center;">$var:Text7</th>
+					<th style="text-align: right;">$var:Text8</th>
 				</tr>
 				<tr>
 					<th class="c1">$var:Text9</th>
-					<td class="c211">$var:Text10</td>
-					<td class="c212">$var:Text11</td>
-					<td class="c22">$var:Text12</td>
-					<td class="c23">$var:Text14</td>
+					<td class="c2">$var:Text10</td>
+					<td class="c2">$var:Text11</td>
+					<td class="c2">$var:Text12</td>
+<? if eq $var:OEM avm `
+					<td class="c2">$var:Text13</td>
+` ?>
+					<td class="c2">$var:Text14</td>
 				</tr>
 				<tr>
 					<th class="c1">$var:Text15</th>
-					<td class="c211"><span id="spanTodayTime">$var:Text16</span></td>
-					<td class="c212"><span id="spanTodaySum">$var:Text17</span></td>
-					<td class="c22"><span id="spanTodayOut">$var:Text17</span>$var:Text18<span id="spanTodayIn">$var:Text17</span></td>
-					<td class="c23"><? query inetstat:status/Today/OutgoingCalls ?></td>
+					<td class="c2"><span id="spanTodayTime">$var:Text16</span></td>
+					<td class="c2"><span id="spanTodaySum">$var:Text17</span></td>
+					<td class="c2"><span id="spanTodayOut">$var:Text17</span>$var:Text18<span id="spanTodayIn">$var:Text17</span></td>
+<? if eq $var:OEM avm `
+					<td class="c2"><span id="spanTodayVoIP">$var:Text17</span></td>
+` ?>
+					<td class="c2"><? query inetstat:status/Today/OutgoingCalls ?></td>
 				</tr>
 				<tr>
 					<th class="c1">$var:Text19</th>
-					<td class="c211"><span id="spanYesterdayTime">$var:Text16</span></td>
-					<td class="c212"><span id="spanYesterdaySum">$var:Text17</span></td>
-					<td class="c22"><span id="spanYesterdayOut">$var:Text17</span>$var:Text18<span id="spanYesterdayIn">$var:Text17</span></td>
-					<td class="c23"><? query inetstat:status/Yesterday/OutgoingCalls ?></td>
+					<td class="c2"><span id="spanYesterdayTime">$var:Text16</span></td>
+					<td class="c2"><span id="spanYesterdaySum">$var:Text17</span></td>
+					<td class="c2"><span id="spanYesterdayOut">$var:Text17</span>$var:Text18<span id="spanYesterdayIn">$var:Text17</span></td>
+<? if eq $var:OEM avm `
+					<td class="c2"><span id="spanYesterdayVoIP">$var:Text17</span></td>
+` ?>
+					<td class="c2"><? query inetstat:status/Yesterday/OutgoingCalls ?></td>
 				</tr>
 				<tr>
 					<th class="c1">$var:Text20</th>
-					<td class="c211"><span id="spanThisWeekTime">$var:Text16</span></td>
-					<td class="c212"><span id="spanThisWeekSum">$var:Text17</span></td>
-					<td class="c22"><span id="spanThisWeekOut">$var:Text17</span>$var:Text18<span id="spanThisWeekIn">$var:Text17</span></td>
-					<td class="c23"><? query inetstat:status/ThisWeek/OutgoingCalls ?></td>
+					<td class="c2"><span id="spanThisWeekTime">$var:Text16</span></td>
+					<td class="c2"><span id="spanThisWeekSum">$var:Text17</span></td>
+					<td class="c2"><span id="spanThisWeekOut">$var:Text17</span>$var:Text18<span id="spanThisWeekIn">$var:Text17</span></td>
+<? if eq $var:OEM avm `
+					<td class="c2"><span id="spanThisWeekVoIP">$var:Text17</span></td>
+` ?>
+					<td class="c2"><? query inetstat:status/ThisWeek/OutgoingCalls ?></td>
 				</tr>
 				<tr>
 					<th class="c1">$var:Text21</th>
-					<td class="c211"><span id="spanThisMonthTime">$var:Text16</span></td>
-					<td class="c212"><span id="spanThisMonthSum">$var:Text17</span></td>
-					<td class="c22"><span id="spanThisMonthOut">$var:Text17</span>$var:Text18<span id="spanThisMonthIn">$var:Text17</span></td>
-					<td class="c23"><? query inetstat:status/ThisMonth/OutgoingCalls ?></td>
+					<td class="c2"><span id="spanThisMonthTime">$var:Text16</span></td>
+					<td class="c2"><span id="spanThisMonthSum">$var:Text17</span></td>
+					<td class="c2"><span id="spanThisMonthOut">$var:Text17</span>$var:Text18<span id="spanThisMonthIn">$var:Text17</span></td>
+<? if eq $var:OEM avm `
+					<td class="c2"><span id="spanThisMonthVoIP">$var:Text17</span></td>
+` ?>
+					<td class="c2"><? query inetstat:status/ThisMonth/OutgoingCalls ?></td>
 				</tr>
 				<tr>
 					<th class="c1">$var:Text22</th>
-					<td class="c211"><span id="spanLastMonthTime">$var:Text16</span></td>
-					<td class="c212"><span id="spanLastMonthSum">$var:Text17</span></td>
-					<td class="c22"><span id="spanLastMonthOut">$var:Text17</span>$var:Text18<span id="spanLastMonthIn">$var:Text17</span></td>
-					<td class="c23"><? query inetstat:status/LastMonth/OutgoingCalls ?></td>
+					<td class="c2"><span id="spanLastMonthTime">$var:Text16</span></td>
+					<td class="c2"><span id="spanLastMonthSum">$var:Text17</span></td>
+					<td class="c2"><span id="spanLastMonthOut">$var:Text17</span>$var:Text18<span id="spanLastMonthIn">$var:Text17</span></td>
+<? if eq $var:OEM avm `
+					<td class="c2"><span id="spanLastMonthVoIP">$var:Text17</span></td>
+` ?>
+					<td class="c2"><? query inetstat:status/LastMonth/OutgoingCalls ?></td>
 				</tr>
 			</table>
 ` ?>
--- usr/www/all/html/de/internet/inetstat.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/internet/inetstat.inc	2007-07-26 15:15:54.000000000 +0200
@@ -34,5 +34,4 @@
 <? setvariable var:Text35 '$var:BoxName verfügt über keine gültige Uhrzeit. Die Tarifübersicht ist daher nicht verfügbar. $var:BoxName muss mindestens einmal mit dem Internet verbunden werden, damit eine gültige Uhrzeit vorliegt.' ?>
 <? setvariable var:Text36 'Hier können Sie eintragen, welches Tarifangebot Sie für Ihren Internetzugang nutzen.' ?>
 <? setvariable var:Text37 'Online-Zähler zurücksetzen' ?>
-<? setvariable var:Text38 'Tarif eintragen' ?>
-<? setvariable var:Text40 'Online-Zähler' ?>
+<? setvariable var:Text38 'Tarif festlegen' ?>
--- usr/www/all/html/de/internet/inetstat.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/internet/inetstat.js	2007-07-26 15:15:54.000000000 +0200
@@ -2,13 +2,10 @@
 <style type="text/css">
 <!--
 #content {width: 560px; margin: auto;}
-#tStat {margin: 1px; width: 100%; font-size: 12px;}
-#tStat td, #tStat th {padding: 0px 1px;}
-#tStat .c1 {width: 180px; text-align: left;}
-#tStat .c211 {width: 65px; text-align: right; padding-right: 10px;}
-#tStat .c212 {width: 70px; text-align: right; padding-right: 5px;}
-#tStat .c22 {width: 130px; text-align: right; padding-left: 2px;}
-#tStat .c23 {width: 90px; text-align: right; padding-right: 15px;}
+#tStat {margin: auto; width: 100%; font-size: 12px;}
+#tStat td, #tStat th {padding: 1px 5px;}
+#tStat .c1 {text-align: left;}
+#tStat .c2 {text-align: right;}
 #tBalken {margin: auto;}
 #tBalken td {padding: 4px;}
 .bar {
@@ -44,7 +41,7 @@
 function uiDoOnLoad() {
 	var timeknown = "<? query inetstat:status/timeknown ?>";
 	var budget = "<? query connection0:settings/Budget/Enabled ?>";
-<? setvariable var:settimeknown <? query inetstat:status/timeknown ?> ?>
+	
 	if (timeknown != "1") {
 		jslDisplay("BudgetNoTime", true);
 	} else {
@@ -54,7 +51,7 @@
 			jslDisplay("BudgetTarif", true);
 		}
 	}
-<? if eq $var:settimeknown 1 `
+<? if eq <? query inetstat:status/timeknown ?> 1 `
 	GetBoxDate();
 	var time = <? query inetstat:status/Today/PhyConnTimeOutgoing ?>;
 	var inh = <? query inetstat:status/Today/BytesReceivedHigh ?>;
@@ -185,14 +182,10 @@
 		var istTage = heuteTag - startTag + 1;
 	else
 		var istTage = heuteTag + ( DaysInMonth(startMonat,startJahr) - startTag ) + 1;
-<? if eq $var:settimeknown 1 `
+<? if eq <? query inetstat:status/timeknown ?> 1 `
 	// Balken für den Abrechnungszeitraum setzen
 	document.getElementById("uiViewImageTime").width = Math.ceil(Math.min(maxw,(istTage/maxTage)*maxw));
-<? if eq $var:lang 'en' `
-	SetSpanText("uiViewLabelTime", g_txt_isTage+istTage);
-` `
 	SetSpanText("uiViewLabelTime", istTage+g_txt_isTage);
-` ?>
 	// Zeitbalken
 	var max = Math.ceil(<? query connection0:settings/Budget/ConnectionTime ?>/60);
 	var maxh = Math.ceil(max/60);
@@ -264,11 +257,7 @@
 		if (cur<max) tipp = tipp.replace(/%2/,kritTag+"."+kritMonat+"."+kritJahr);
 		// Texte setzen
 		jslSetSpanText("uiViewTipp",tipp);
-<? if eq $var:lang 'en' `
-		jslSetSpanText("uiViewEndDate",endTag+"/"+endMonat+"/"+endJahr);
-` `
 		jslSetSpanText("uiViewEndDate",endTag+"."+endMonat+"."+endJahr);
-` ?>
 	}
 ` ?>
 ` ?>
@@ -284,9 +273,12 @@
 	SetSpanText("span"+name+"In",MakeVolStr(inh,inl));
 	SetSpanText("span"+name+"Out",MakeVolStr(outh,outl));
 	SetSpanText("span"+name+"Sum",MakeVolSumStr(inh,outh,inl,outl));
+<? if eq $var:OEM avm '
+	SetSpanText("span"+name+"VoIP",MakeVolSumStr(vinh,vouth,vinl,voutl));
+' ?>
 }
 function uiDoRefresh() {
-	jslGoTo("","inetstat");
+	jslGoTo(jslGetValue("uiPostMenu"),"inetstat");
 }
 function uiDoHelp() {
 	if (jslGetValue("uiPostTab") == "1") {
@@ -356,11 +348,11 @@
 function uiDoReset() {
 	if (confirm(g_mldReset) == true) {
 		jslSetValue("uiPostStatReset","1");
-		jslFormSubmitEx("", "inetstat", "inetstat");
+		jslFormSubmitEx(jslGetValue("uiPostMenu"), "inetstat", "inetstat");
 	}
 }
 function uiDoBudget() {
-	jslFormSubmitEx("", "budget", "inetstat");
+	jslFormSubmitEx(jslGetValue("uiPostMenu"), "budget", "inetstat");
 }
 function DaysInMonth(month,year) {
 	var ret = 31;
@@ -386,7 +378,4 @@
 	jslDisplay("uiCounter", n==1);
 	jslSetValue("uiPostTab", n);
 }
-function uiDoNutzung() {
-	jslGoTo("", "userlist");
-}
 </script>
--- usr/www/all/html/de/internet/internet_expert.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/internet/internet_expert.html	2007-07-26 15:15:54.000000000 +0200
@@ -77,11 +77,11 @@
 				<table id="tDslModem">
 					<tr>
 						<td><label for="uiViewDslModemVPI"><? echo $var:Text68 ?></label></td>
-						<td><input type="text" size="5" maxlength="3" class="Eingabefeld" id="uiViewDslModemVPI"></td>
+						<td><input type="text" size="4" maxlength="3" class="Eingabefeld" id="uiViewDslModemVPI"></td>
 					</tr>
 					<tr>
 						<td><label for="uiViewDslModemVCI"><? echo $var:Text69 ?></label></td>
-						<td><input type="text" size="5" maxlength="5" class="Eingabefeld" id="uiViewDslModemVCI"></td>
+						<td><input type="text" size="4" maxlength="3" class="Eingabefeld" id="uiViewDslModemVCI"></td>
 					</tr>
 				</table>
 			</div>
@@ -93,11 +93,11 @@
 			<table id="tDslIp">
 				<tr>
 					<td><label for="uiViewDslIpVPI"><? echo $var:Text68 ?></label></td>
-					<td><input type="text" size="5" maxlength="3" class="Eingabefeld" id="uiViewDslIpVPI"></td>
+					<td><input type="text" size="4" maxlength="3" class="Eingabefeld" id="uiViewDslIpVPI"></td>
 				</tr>
 				<tr>
 					<td><label for="uiViewDslIpVCI"><? echo $var:Text69 ?></label></td>
-					<td><input type="text" size="5" maxlength="5" class="Eingabefeld" id="uiViewDslIpVCI"></td>
+					<td><input type="text" size="4" maxlength="3" class="Eingabefeld" id="uiViewDslIpVCI"></td>
 				</tr>
 			</table>
 		</div>
@@ -204,12 +204,12 @@
 			<table id="tTraffic" class="ml25">
 				<tr>
 					<td><label for="uiViewDslSpeedUpstream"><? echo $var:Text92 ?></label></td>
-					<td><input type="text" size="6" maxlength="5" id="uiViewDslSpeedUpstream"></td>
+					<td><input type="text" size="10" maxlength="10" id="uiViewDslSpeedUpstream"></td>
 					<td><? echo $var:Text106 ?></td>
 				</tr>
 				<tr>
 					<td><label for="uiViewDslSpeedDownstream"><? echo $var:Text93 ?></label></td>
-					<td><input type="text" size="6" maxlength="5" id="uiViewDslSpeedDownstream"></td>
+					<td><input type="text" size="10" maxlength="10" id="uiViewDslSpeedDownstream"></td>
 					<td><? echo $var:Text106 ?></td>
 				</tr>
 			</table>
@@ -220,12 +220,12 @@
 		<table id="tStream" class="ml25">
 			<tr>
 				<td><label for="uiViewUpstream"><? echo $var:Text92 ?></label></td>
-				<td><input type="text" size="6" maxlength="5" class="Eingabefeld" id="uiViewUpstream"></td>
+				<td><input type="text" size="10" maxlength="10" class="Eingabefeld" id="uiViewUpstream"></td>
 				<td><? echo $var:Text106 ?></td>
 			</tr>
 			<tr>
 				<td><label for="uiViewDownstream"><? echo $var:Text93 ?></label></td>
-				<td><input type="text" size="6" maxlength="5" class="Eingabefeld" id="uiViewDownstream"></td>
+				<td><input type="text" size="10" maxlength="10" class="Eingabefeld" id="uiViewDownstream"></td>
 				<td><? echo $var:Text106 ?></td>
 			</tr>
 		</table>
@@ -239,11 +239,11 @@
 			<table id="tDslPpp">
 				<tr>
 					<td><label for="uiViewDslPppVPI"><? echo $var:Text68 ?></label></td>
-					<td><input type="text" size="5" maxlength="3" class="Eingabefeld" id="uiViewDslPppVPI"></td>
+					<td><input type="text" size="4" maxlength="3" class="Eingabefeld" id="uiViewDslPppVPI"></td>
 				</tr>
 				<tr>
 					<td><label for="uiViewDslPppVCI"><? echo $var:Text69 ?></label></td>
-					<td><input type="text" size="5" maxlength="5" class="Eingabefeld" id="uiViewDslPppVCI"></td>
+					<td><input type="text" size="4" maxlength="3" class="Eingabefeld" id="uiViewDslPppVCI"></td>
 				</tr>
 				<tr>
 					<td><? echo $var:Text71 ?></td>
--- usr/www/all/html/de/internet/internet_expert.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/internet/internet_expert.inc	2007-07-26 15:15:54.000000000 +0200
@@ -1,8 +1,8 @@
 <? include ../html/$var:lang/global.inc ?>
 <? setvariable var:Text1 'Anschluss' ?>
-<? setvariable var:Text2 'Wählen Sie, ob Ihre Internetverbindung über DSL oder LAN hergestellt wird.' ?>
+<? setvariable var:Text2 'Wählen Sie, ob ihre Internetverbindung über DSL oder LAN hergestellt wird.' ?>
 <? setvariable var:Text3 'Internetzugang über DSL' ?>
-<? setvariable var:Text4 'Wählen Sie diese Zugangsart, wenn FRITZ!Box direkt mit Ihrem DSL-Anschluss verbunden ist.' ?>
+<? setvariable var:Text4 'Wählen Sie diese Zugangsart, wenn FRITZ!Box direkt mit ihrem DSL-Anschluss verbunden ist.' ?>
 <? setvariable var:Text5 'Internetzugang über LAN 1' ?>
 <? if eq $var:OEM 1und1 `
 <? setvariable var:Text6 'Wählen Sie diesen Zugang, wenn Sie FRITZ!Box an ein bereits vorhandenes Netzwerk (LAN) oder einen DSL-Router anschließen möchten.' ?>
@@ -34,7 +34,7 @@
 <? setvariable var:Text67 'ATM-Einstellungen manuell festlegen' ?>
 <? setvariable var:Text68 'VPI' ?>
 <? setvariable var:Text69 'VCI' ?>
-<? setvariable var:Text70 'Die Werte für die folgenden ATM-Einstellungen erhalten Sie von Ihrem DSL-Anbieter.' ?>
+<? setvariable var:Text70 'Die Werte für die folgenden ATM-Einstellungen erhalten Sie von ihrem DSL-Anbieter.' ?>
 <? setvariable var:Text71 'Kapselung' ?>
 <? setvariable var:Text72 'Bridged (Routed Bridge Encapsulation)' ?>
 <? setvariable var:Text73 'IP-Adresse automatisch über DHCP beziehen' ?>
@@ -47,17 +47,17 @@
 <? setvariable var:Text80 'Primärer DNS-Server' ?>
 <? setvariable var:Text81 'Sekundärer DNS-Server' ?>
 <? setvariable var:Text82 'Mac-Adresse der FRITZ!Box: ' ?>
-<? setvariable var:Text84 'Geben Sie die IP-Einstellungen, die Sie in Ihrem Netzwerk verwenden wollen, hier an.' ?>
+<? setvariable var:Text84 'Geben Sie die IP-Einstellungen, die Sie in ihrem Netzwerk verwenden wollen, hier an.' ?>
 <? setvariable var:Text85 'Vorsicht: Die Oberfläche der FRITZ!Box ist nach dem Übernehmen der Änderungen nur noch über die eingestellte oder automatisch über DHCP vergebene IP-Adresse erreichbar.' ?>
 <? setvariable var:Text86 'Geben Sie die IP-Einstellungen hier an.' ?>
 <? setvariable var:Text87 'Angeschlossene Netzwerkgeräte dürfen zusätzlich ihre eigene Internetverbindung aufbauen (PPPoE-Passthrough)' ?>
 <? setvariable var:Text88 'Traffic-Shaping benutzen' ?>
-<? setvariable var:Text89 'Traffic Shaping optimiert die DSL-Übertragung und ermöglicht auch bei gleichzeitigem Up- und Download das Ausschöpfen der vollen Geschwindigkeit Ihrer DSL-Verbindung.' ?>
-<? setvariable var:Text90 'Stellen Sie die Geschwindigkeit Ihrer Internetverbindung ein. Diese Werte werden zur Sicherung der Internettelefonie-Sprachqualität benötigt.' ?>
+<? setvariable var:Text89 'Traffic Shaping optimiert die DSL-Übertragung und ermöglicht auch bei gleichzeitigem Up- und Download das Ausschöpfen der vollen Geschwindigkeit ihrer DSL-Verbindung.' ?>
+<? setvariable var:Text90 'Stellen Sie die Geschwindigkeit ihrer Internetverbindung ein. Diese Werte werden zur Sicherung der Internettelefonie-Sprachqualität benötigt.' ?>
 <? setvariable var:Text91 'Diese Werte werden zur Sicherung der Internettelefonie-Sprachqualität benötigt.' ?>
 <? setvariable var:Text92 'Upstream' ?>
 <? setvariable var:Text93 'Downstream' ?>
-<? setvariable var:Text94 'Bitte beachten Sie, dass nur in seltenen Fällen eine manuelle Einstellung erforderlich ist. Die erforderlichen Werte erhalten Sie von Ihrem DSL-Anbieter.' ?>
+<? setvariable var:Text94 'Bitte beachten Sie, dass nur in seltenen Fällen eine manuelle Einstellung erforderlich ist. Die erforderlichen Werte erhalten Sie von ihrem DSL-Anbieter.' ?>
 <? setvariable var:Text95 'PPPoE' ?>
 <? setvariable var:Text96 'PPPoA/LLC' ?>
 <? setvariable var:Text97 'PPPoA/VC-Mux' ?>
@@ -65,11 +65,10 @@
 <? setvariable var:Text99 'Falls Ihr Internetanbieter eine spezielle MAC-Adresse erwartet, geben Sie diese hier an' ?>
 <? setvariable var:Text100 'Mac-Adresse: ' ?>
 <? setvariable var:Text101 ' :' ?>
-<? setvariable var:Text102 'Traffic Shaping benötigt Angaben zur Geschwindigkeit Ihres DSL-Anschlusses:' ?>
+<? setvariable var:Text102 'Traffic Shaping benötigt Angaben zur Geschwindigkeit ihres DSL-Anschlusses:' ?>
 <? setvariable var:Text103 'Geschwindigkeiten des DSL-Anschlusses automatisch einstellen' ?>
 <? setvariable var:Text104 'Geschwindigkeiten des DSL-Anschlusses manuell angeben' ?>
 <? setvariable var:Text105 'Momentan verwendet FRITZ!Box an jeder Schnittstelle unterschiedliche IP-Einstellungen. In diesem Modus ist die Option "Internetzugang über LAN A" nicht verfügbar. Aktivieren Sie zunächst unter System/Netzwerkeinstellungen/IP-Adressen die Option "Alle Computer befinden sich im selben Netzwerk", wenn Sie diesen Modus nutzen wollen.' ?>
-<? setvariable var:Text105 'Momentan verwendet FRITZ!Box an jeder Schnittstelle unterschiedliche IP-Einstellungen. In diesem Modus ist die Option "Internetzugang über LAN 1" nicht verfügbar. Aktivieren Sie zunächst unter System/Netzwerkeinstellungen/IP-Adressen die Option "Alle Computer befinden sich im selben Netzwerk", wenn Sie diesen Modus nutzen wollen.' ?>
 <? setvariable var:Text106 'kBit/s' ?>
 <? setvariable var:Text107 'DHCP-Hostname' ?>
 <? setvariable var:Text108 'IP-Adresse manuell festlegen' ?>
--- usr/www/all/html/de/internet/internet_expert.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/internet/internet_expert.js	2007-07-26 15:15:54.000000000 +0200
@@ -2,11 +2,10 @@
 <? setvariable var:contype pppoe ?>
 <style type="text/css">
 <!--
-#content {width: 540px; margin: auto;}
+#content {width: 520px; margin: auto;}
 #tStream td {padding: 1px 15px 1px 0px;}
 #tTraffic td {padding: 1px 15px 1px 0px;}
 #tUser td {padding: 0px;}
-#tDbd td {padding: 0px;}
 #tDslModem td {padding: 1px 15px 1px 0px;}
 #tDslPpp td {padding: 1px 15px 1px 0px; vertical-align: top;}
 #tDslIp td {padding: 1px 15px 1px 0px;}
@@ -30,7 +29,7 @@
 var g_VPIMustNumber			= "VPI: Ungültige Eingabe, es sind nur Ziffern erlaubt.";
 var g_VCIMustNumber			= "VCI: Ungültige Eingabe, es sind nur Ziffern erlaubt.";
 var g_VPIOutOfRange			= "VPI: Ungültige Eingabe, es sind Eingaben zwischen 0 und 255 erlaubt.";
-var g_VCIOutOfRange			= "VCI: Ungültige Eingabe, es sind Eingaben zwischen 32 und 65535 erlaubt.";
+var g_VCIOutOfRange			= "VCI: Ungültige Eingabe, es sind Eingaben zwischen 0 und 255 erlaubt.";
 var g_NoEncapsModeDefined	= "Keine Kapselung festgelegt.";
 var g_mldStreamPre			= "Warnung! Der Wert ";
 var g_mldUpstreamPost		= " im Feld Upstream ist sehr klein. Sind Sie sich sicher, dass dieser Wert korrekt ist?";
@@ -42,7 +41,6 @@
 var g_mldWanRouter1 = "Mit Übernahme der Einstellungen wird die \"";
 var g_mldWanRouter2 = "\"-Buchse Ihrer FRITZ!Box zur WAN-Schnittstelle (Verbindung zum Internet).\x0a\x0aAchtung:\x0aDie Oberfläche Ihrer FRITZ!Box ist danach nur noch über ";
 var g_mldWanRouter3 = " erreichbar.";
-var g_txtAlert_1 = "Die VLAN-ID muss einen Wert zwischen 6 und 4095 haben.";
 var g_mldLan1			= "LAN 1";
 var g_mldLan2			= "LAN 2, LAN 3, LAN 4";
 var g_mldWLAN		= "WLAN";
@@ -303,6 +301,7 @@
 	jslSetChecked("uiViewWanType10", n==1 || n==2);
 	jslSetChecked("uiViewWanType1", n==1);
 	jslSetChecked("uiViewWanType2", n==2);
+	
 	switch (n) {
 		case 0:
 			g_WanType = n;
@@ -349,16 +348,19 @@
 		if (!valIsZahlVorhanden(vpi)) {alert(g_VPIMustNumber); return false;}
 		if ((vpi < 0) || (vpi > 255)) {alert(g_VPIOutOfRange); return false;}
 		if (!valIsZahlVorhanden(vci)) {alert(g_VCIMustNumber); return false;}
-		if ((vci < 32) || (vci > 65535)) {alert(g_VCIOutOfRange); return false;}
+		if ((vci < 0) || (vci > 255)) {alert(g_VCIOutOfRange); return false;}
+		
 		jslSetValue("uiPostAutodetect", "0");
 		jslSetValue("uiPostVPI", vpi);
 		jslSetValue("uiPostVCI", vci);
 	}
 	jslSetValue("uiPostFullBridge", jslGetChecked("uiViewFullBridge") ? "0":"1");
 	jslEnable("uiPostFullBridge");
+	
 	jslEnable("uiPostAutodetect");
 	jslEnable("uiPostVPI");
 	jslEnable("uiPostVCI");
+	
 	jslSetValue("uiPostAta", "0");
 	jslSetValue("uiPostType", "bridge");
 	jslSetValue("uiPostActivType", "bridge");
@@ -384,7 +386,8 @@
 			if (!valIsZahlVorhanden(vpi)) {alert(g_VPIMustNumber); return false;}
 			if ((vpi < 0) || (vpi > 255)) {alert(g_VPIOutOfRange); return false;}
 			if (!valIsZahlVorhanden(vci)) {alert(g_VCIMustNumber); return false;}
-			if ((vci < 32) || (vci > 65535)) {alert(g_VCIOutOfRange); return false;}
+			if ((vci < 0) || (vci > 255)) {alert(g_VCIOutOfRange); return false;}
+	
 			if (jslGetChecked("uiViewDslPppPPPoA1")) jslSetValue("uiPostEncaps", "dslencap_pppoa_llc");
 			else if (jslGetChecked("uiViewDslPppPPPoA2")) jslSetValue("uiPostEncaps", "dslencap_pppoa");
 			else if (jslGetChecked("uiViewDslPppPPPoE")) jslSetValue("uiPostEncaps", "dslencap_pppoe");
@@ -425,7 +428,7 @@
 	if (!valIsZahlVorhanden(vpi)) {alert(g_VPIMustNumber); return false;}
 	if ((vpi < 0) || (vpi > 255)) {alert(g_VPIOutOfRange); return false;}
 	if (!valIsZahlVorhanden(vci)) {alert(g_VCIMustNumber); return false;}
-	if ((vci < 32) || (vci > 65535)) {alert(g_VCIOutOfRange); return false;}
+	if ((vci < 0) || (vci > 255)) {alert(g_VCIOutOfRange); return false;}
 	var SpeedManu = jslGetChecked("uiViewDslSpeedManu");
 	if (SpeedManu && !ValidateSpeed(jslGetValue("uiViewDslSpeedUpstream"), jslGetValue("uiViewDslSpeedDownstream"))) return false;
 	jslSetValue("uiPostAutodetect", "0");
@@ -443,18 +446,22 @@
 		}
 		jslEnable("uiPostSarDhcp");
 		jslSetValue("uiPostEncaps", "dslencap_ether");
+		
 	} else if (jslGetChecked("uiViewDslIpEncaps2")) {
 		if (!ValidateDslIpAdr()) return false;
 		jslSetValue("uiPostEncaps", "dslencap_ipnlpid");
 		SaveDslIpAdr();
+		
 	} else if (jslGetChecked("uiViewDslIpEncaps3")) {
 		if (!ValidateDslIpAdr()) return false;
 		jslSetValue("uiPostEncaps", "dslencap_ipsnap");
 		SaveDslIpAdr();
+		
 	} else if (jslGetChecked("uiViewDslIpEncaps4")) {
 		if (!ValidateDslIpAdr()) return false;
 		jslSetValue("uiPostEncaps", "dslencap_ipraw");
 		SaveDslIpAdr();
+		
 	} else {
 		alert(g_NoEncapsModeDefined); return false;
 	}
@@ -509,6 +516,7 @@
 	jslCopyValue("uiPostDownstream", "uiViewDownstream");
 	jslEnable("uiPostUpstream");
 	jslEnable("uiPostDownstream");
+	
 	jslSetValue("uiPostType", "bridge");
 	jslSetValue("uiPostActivType", "bridge");
 	jslSetValue("uiPostAta", "1");
@@ -530,10 +538,12 @@
 	}
 	if (!afDoSave()) return false;
 	if (changed && !WanRouterAlert()) return false;
+	
 	var traffic = jslGetChecked("uiViewTraffic");
 	if (traffic && !ValidateSpeed(jslGetValue("uiViewUpstream"), jslGetValue("uiViewDownstream"))) return false;
 	jslSetValue("uiPostRouterBridge", jslGetChecked("uiViewRouterBridge") ? "1":"0");
 	jslEnable("uiPostRouterBridge");
+	
 	jslSetValue("uiPostTraffic", traffic ? "1":"0");
 	jslEnable("uiPostTraffic");
 	if (traffic) {
@@ -543,6 +553,8 @@
 		jslEnable("uiPostDownstream");
 	}
 	enableAfForm(true);
+	jslSetValue("uiPostEncaps","dslencap_pppoe");
+	jslEnable("uiPostEncaps");
 	jslSetValue("uiPostType", "pppoe");
 	jslSetValue("uiPostActivType", "pppoe");
 	jslSetValue("uiPostAta", "1");
@@ -632,12 +644,13 @@
 function ValidateSpeed (upstream, downstream) {
 	var numberpattern = /^\d+$/;
 	if (upstream.match(numberpattern) == null) {alert(g_mldUpstreamNum); return false;}
-	upstream = parseInt(upstream, 10);
+	upstream = parseInt(upstream);
 	if (upstream < 128) {
 		if (confirm(g_mldStreamPre+upstream+g_mldUpstreamPost) != true) return false;
 	}
+	
 	if (downstream.match(numberpattern) == null) {alert(g_mldDownstreamNum); return false;}
-	downstream = parseInt(downstream, 10);
+	downstream = parseInt(downstream);
 	if (downstream < 128) {
 		if (confirm(g_mldStreamPre+downstream+g_mldDownstreamPost) != true) return false;
 	}
@@ -778,15 +791,15 @@
 	jslSetEnabled("uiPostRegistrar0", b);
 }
 function doPopWindow() {
-	var params = "var:lang=<? echo $var:lang ?>&var:ipa="+jslGetValue("uiPostIpaddr")+"&var:maska="+jslGetValue("uiPostNetmask");
+	var params = "var:ipa="+jslGetValue("uiPostIpaddr")+"&var:maska="+jslGetValue("uiPostNetmask");
 	var url = "../cgi-bin/webcm?getpage=../html/<?echo $var:lang ?>/internet/pp_wanbridge.html&"+params;
-	var ppWindow = window.open(url, g_secondWindow, "width=450,height=250,statusbar,resizable=yes");
+	var ppWindow = window.open(url, g_secondWindow, "width=450,height=200,statusbar,resizable=yes");
 	ppWindow.focus();
 }
 function OnChangeProviderEx (id) {
 	// Bei Inode werden die Parameter automatisch gesetzt
 	jslDisplay("uiRouterBridge", id != "Inode");
 	jslDisplay("uiTraffic", id != "Inode");
-	jslDisplay("uiDslPpp", (id != "Inode") && jslGetChecked( "uiViewAnschlussDsl"));
+	jslDisplay("uiDslPpp", id != "Inode");
 }
 </script>
--- usr/www/all/html/de/internet/internet.frm.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/internet/internet.frm	2007-07-26 15:15:54.000000000 +0200
@@ -1,14 +1,12 @@
 <? setvariable var:name 'pppoe' ?>
 <? if eq $var:isDsl 0 `
-<? if eq $var:isVdsl 0 `
 	<? if eq <? query box:settings/expertmode/activated ?> 1 `
 		<? setvariable var:name 'internet_expert' ?>
 	` `
 		<? setvariable var:name '<? query connection0:settings/type ?>' ?>
 	` ?>
 ` ?>
-` ?>
-<? if eq <? query connection0:settings/type ?> 'pppoe' `<? setvariable var:name 'userlist' ?>` ?>
+<? if eq <? query connection0:settings/type ?> 'pppoe' `<? setvariable var:name 'inetstat' ?>` ?>
 <? if eq '<? query wlan:settings/WDS_enabled ?>' '1' `
 <? if eq '<? query wlan:settings/WDS_hop ?>' '1' `
 <? if eq $var:isAta 0 `<? setvariable var:name 'repeater' ?>` ?>
--- usr/www/all/html/de/internet/internet.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/internet/internet.html	2007-07-26 15:15:54.000000000 +0200
@@ -8,7 +8,7 @@
 	` ?>
 ` ?>
 ` ?>
-<? if eq <? query connection0:settings/type ?> 'pppoe' `<? setvariable var:name 'userlist' ?>` ?>
+<? if eq <? query connection0:settings/type ?> 'pppoe' `<? setvariable var:name 'inetstat' ?>` ?>
 <? if eq '<? query wlan:settings/WDS_enabled ?>' '1' `
 <? if eq '<? query wlan:settings/WDS_hop ?>' '1' `
 <? if eq $var:isAta 0 `<? setvariable var:name 'repeater' ?>` ?>
--- usr/www/all/html/de/internet/internet.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/internet/internet.js	2007-07-26 15:15:54.000000000 +0200
@@ -8,7 +8,7 @@
 	` ?>
 ` ?>
 ` ?>
-<? if eq <? query connection0:settings/type ?> 'pppoe' `<? setvariable var:name 'userlist' ?>` ?>
+<? if eq <? query connection0:settings/type ?> 'pppoe' `<? setvariable var:name 'inetstat' ?>` ?>
 <? if eq '<? query wlan:settings/WDS_enabled ?>' '1' `
 <? if eq '<? query wlan:settings/WDS_hop ?>' '1' `
 <? if eq $var:isAta 0 `<? setvariable var:name 'repeater' ?>` ?>
--- usr/www/all/html/de/internet/portfw.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/internet/portfw.html	2007-07-26 15:15:54.000000000 +0200
@@ -29,10 +29,10 @@
 				<td class="c4"><script type="text/javascript">document.write(PortRange('$5','$8','$5'));</script></td>
 				<td class="c5">$6</td>
 				<td class="c6"><script type="text/javascript">document.write(PortRange('$5','$8','$7'));</script></td>
-				<td class="Iconbutton"><button type="button" id="uiViewEdit$1" onClick="uiDoEdit('$1')" value="<? echo $var:txtIconBtnEdit ?>" title="$var:Text11" style="width: 30px">
+				<td class="Iconbutton"><button type="button" id="uiViewEdit$1" onClick="uiDoEdit('$1')" value="$var:Text11" title="$var:Text11" style="width: 30px">
 					<img src="../html/$var:lang/images/bearbeiten.gif" align=bottom width=16 height=16 hspace=4>
 				</button></td>
-				<td class="Iconbutton"><button type="button" id="uiViewDelete$1" onClick="uiDoDelete('$1')" value="<? echo $var:txtIconBtnDelete ?>" title="$var:Text12" style="width: 30px">
+				<td class="Iconbutton"><button type="button" id="uiViewDelete$1" onClick="uiDoDelete('$1')" value="$var:Text12" title="$var:Text12" style="width: 30px">
 					<img src="../html/$var:lang/images/loeschen.gif" align=bottom width=16 height=16 hspace=4>
 				</button></td>
 			</tr>
@@ -50,7 +50,7 @@
 					<img src="../html/<? echo $var:lang ?>/images/loeschen.gif" align=bottom width=16 height=16 hspace=4>
 				</button></td>
 			</tr>
-<? if eq <? query forwardrules:settings/rule/count ?> 0 `
+<? if eq <? multiquerycount forwardrules:settings/rule/list ?> 0 `
 <? if eq `<? query forwardrules:settings/exposed_host ?>` `` ` 
 			<tr class="bcWeiss"><td colspan=8 class="ac">$var:Text19</td></tr>
 ` ?>
@@ -65,17 +65,18 @@
 		<? include ../html/$var:lang/home/error.html ?>
 	</div></div></div></div></div></div>
 	<div class="backtitel" id="Upnptitel" style="display:none"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo $var:Text20 ?>
+		Über UPnP geöffnete Ports
 	</div></div></div></div></div></div>
 	<div class="backdialog" id="Upnp" style="display:none"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p class="mb10"><? echo $var:Text21 ?></p>
+		<p class="mb10">Die aktuelle Konfiguration Ihrer FRITZ!Box gestattet die Änderung der Sicherheitseinstellungen über UPnP. Anwendungen mit 
+		UPnP-Unterstützung können somit automatisch weitere Ports öffnen.</p>
 		<table id="tUpnp" class="tborder">
 			<tr>
-				<th class="c1"><? echo $var:Text22 ?></th>
-				<th class="c2"><? echo $var:Text23 ?></th>
-				<th class="c3"><? echo $var:Text24 ?></th>
-				<th class="c4"><? echo $var:Text25 ?></th>
-				<th class="c5"><? echo $var:Text26 ?></th>
+				<th class="c1">Protokoll</th>
+				<th class="c2">Port</th>
+				<th class="c3">an Rechnername</th>
+				<th class="c4">an IP-Adresse</th>
+				<th class="c5">an Port</th>
 				<th class="Iconbutton">&nbsp;</th>
 			</tr>
 <? multiquery igdforwardrules:settings/rule/list(protocol,port,fwname,fwip,fwport) `
@@ -85,20 +86,20 @@
 				<td class="c3">$4</td>
 				<td class="c4">$5</td>
 				<td class="c5">$6</td>
-				<td class="Iconbutton"><button type="button" onClick="uiDoDeleteUpnp('$1')" value="$var:Text12" title="<? echo $var:txtIconBtnDelete ?>" style="width: 30px">
+				<td class="Iconbutton"><button type="button" onClick="uiDoDeleteUpnp('$1')" value="$var:Text12" title="$var:Text12" style="width: 30px">
 					<img src="../html/$var:lang/images/loeschen.gif" align=bottom width=16 height=16 hspace=4>
 				</button></td>
 			</tr>
 ` ?>
-<? if eq <? query igdforwardrules:settings/rule/count ?> 0 `
-			<tr><td colspan=6 class="ac"><? echo '$var:Text27' ?></td></tr>
+<? if eq <? multiquerycount igdforwardrules:settings/rule/list ?> 0 `
+			<tr><td colspan=6 class="ac">Es sind keine UPnP-Portfreigaben eingerichtet.</td></tr>
 ` ?>
 		</table>
 	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
+		<input type="button" onclick="uiDoCancel()" value="<? echo $var:txtRefresh ?>" class=Pushbutton>
 		<input type="button" onclick="uiDoSave()" value="<? echo $var:txtApply ?>" class="Pushbutton" id="buttonSave">
 		<input type="button" onclick="uiDoCancel()" value="<? echo $var:txtCancel ?>" class="Pushbutton" id="buttonCancel">
-		<input type="button" onclick="uiDoCancel()" value="<? echo $var:txtRefresh ?>" class=Pushbutton>
 		<input type="button" onclick="uiDoHelp()" value="<? echo $var:txtHelp ?>" class="Pushbutton" id="buttonHilfe">
 	</div></div></div></div></div></div>
 </div>
--- usr/www/all/html/de/internet/portfw.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/internet/portfw.inc	2007-07-26 15:15:54.000000000 +0200
@@ -13,7 +13,7 @@
 <? setvariable var:Text13 'Neue Portfreigabe' ?>
 <? setvariable var:Text14 'Es sind keine Portfreigaben eingerichtet.' ?>
 <? setvariable var:Text15 'Exposed Host' ?>
-<? if eq <? query forwardrules:settings/rule/count ?> 0 `
+<? if eq <? multiquerycount forwardrules:settings/rule/list ?> 0 `
 <? setvariable var:Text16 'alle Ports' ?>
 ` `
 <? setvariable var:Text16 'alle anderen Ports' ?>
@@ -21,11 +21,3 @@
 <? setvariable var:Text17 'Achtung: Die Firewall Ihrer FRITZ!Box ist deaktiviert.' ?>
 <? setvariable var:Text18 'Der als "Exposed Host" angegebene Computer ist ungeschützt im Internet sichtbar und erreichbar. Ausgenommen sind Portfreigaben zu anderen Computern in der Liste der Portfreigaben, welche nur an diese weiter geleitet werden.' ?>
 <? setvariable var:Text19 'Es sind keine Portfreigaben eingerichtet.' ?>
-<? setvariable var:Text20 'Über UPnP geöffnete Ports' ?>
-<? setvariable var:Text21 'Die aktuelle Konfiguration Ihrer FRITZ!Box gestattet die Änderung der Sicherheitseinstellungen über UPnP. Anwendungen mit UPnP-Unterstützung können somit automatisch weitere Ports öffnen.' ?>
-<? setvariable var:Text22 'Protokoll' ?>
-<? setvariable var:Text23 'Port' ?>
-<? setvariable var:Text24 'an Rechnername' ?>
-<? setvariable var:Text25 'an IP-Adresse' ?>
-<? setvariable var:Text26 'an Port' ?>
-<? setvariable var:Text27 'Es sind keine UPnP-Portfreigaben eingerichtet.' ?>
--- usr/www/all/html/de/internet/portfw.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/internet/portfw.js	2007-07-26 15:15:54.000000000 +0200
@@ -34,7 +34,7 @@
 		jslSetChecked("uiViewUseExposed", jslGetValue("uiPostUseExposed") == "1");
 	}
 	jslZebrastreifen("tPorts");
-	if ("<? query box:settings/upnp/activated ?>" == "1" && "<? query box:settings/upnp/control_activated ?>" == "1") {
+	if ("<? query box:settings/upnp/control_activated ?>" == "1") { 
 		jslDisplay("Upnptitel", true);
 		jslDisplay("Upnp", true);
 		jslZebrastreifen("tUpnp");
--- usr/www/all/html/de/internet/portrule.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/internet/portrule.js	2007-07-26 15:15:54.000000000 +0200
@@ -19,13 +19,6 @@
 var g_mldIpAdr0000	= "IP-Adresse 0.0.0.0 ist nicht erlaubt.";
 var g_mldIpAdr0		= "IP-Adresse *.*.*.0 ist nicht erlaubt.";
 var g_mldIpAdr255	= "IP-Adresse *.*.*.255 ist nicht erlaubt.";
-var g_mldIpAdr169254	= "IP-Adresse 169.254.*.* ist nicht erlaubt.";
-var g_txtService_1 = "FTP-Server";
-var g_txtService_2 = "HTTP-Server";
-var g_txtService_3 = "eMule TCP";
-var g_txtService_4 = "eMule UDP";
-var g_txtService_5 = "MS Remotedesktop";
-var g_txtService_6 = "Exposed Host";
 var g_isexp = "<? echo $var:isexp ?>";
 function valDoValidateBoxIp (Address) {
 	var address = Address.match("^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$");
@@ -41,8 +34,6 @@
 	if (Number(digits[3]) == 0) return g_mldIpAdr0;
 	// IP-Adresse *.*.*.255 verbieten
 	if (Number(digits[3]) == 255) return g_mldIpAdr255;
-	// IP-Adresse 169.254.*.* verbieten
-	if ((Number(digits[0]) == 169) && (Number(digits[1]) == 254)) return g_mldIpAdr169254;
 	var error=null;
 	return error;
 }
@@ -55,24 +46,26 @@
 		jslCopyValue("uiViewEndPort","uiPostEndPort");
 	jslCopyValue("uiViewFwIp","uiPostFwIp");
 	jslCopyValue("uiViewFwPort","uiPostFwPort");
+	
 	var dienst = "other";
 	if (g_isexp == "1") {
 		jslSetChecked("uiViewActivate", jslGetValue("uiPostUseExposed") == "1");
 		jslCopyValue("uiViewFwIp","uiPostExposed");
-		jslAddOption("uiViewDienst", "Exposed Host", g_txtService_6, false);
-		dienst = g_txtService_6;
+		jslAddOption("uiViewDienst", "Exposed Host", "Exposed Host", false);
+		dienst = "Exposed Host"; 
 	} else {
 <? if eq <? query box:settings/expertmode/activated ?> 1 `
-		if (jslGetValue("uiPostExposed") == "") jslAddOption("uiViewDienst", "Exposed Host", g_txtService_6, false);
+		if (jslGetValue("uiPostExposed") == "") jslAddOption("uiViewDienst", "Exposed Host", "Exposed Host", false);
 ` ?>
-		if (isDienst(g_txtService_1, 'TCP', 21)) dienst = g_txtService_1; else
-		if (isDienst(g_txtService_2, 'TCP', 80)) dienst = g_txtService_2; else
-		if (isDienst(g_txtService_3, 'TCP', 4662)) dienst = g_txtService_3; else
-		if (isDienst(g_txtService_4, 'UDP', 4672)) dienst = g_txtService_4; else
-		if (isDienst(g_txtService_5, 'TCP', 3389)) dienst = g_txtService_5;
+		if (isDienst("FTP-Server", 'TCP', 21)) dienst = "FTP-Server"; else
+		if (isDienst("HTTP-Server", 'TCP', 80)) dienst = "HTTP-Server"; else
+		if (isDienst("eMule TCP", 'TCP', 4662)) dienst = "eMule TCP"; else
+		if (isDienst("eMule UDP", 'UDP', 4672)) dienst = "eMule UDP"; else
+		if (isDienst("MS Remotedesktop", 'TCP', 3389)) dienst = "MS Remotedesktop";
 	}
 	jslSetSelection("uiViewDienst", dienst);
 	uiOnChangeDienst(dienst);
+	
 	uiOnChangePort();
 	uiOnChangeProtocol(jslGetValue("uiViewProtocol"));
 }
@@ -107,12 +100,14 @@
 			}
 		}
 	}
+	
 	message = valDoValidateBoxIp(jslGetValue("uiViewFwIp"));
 	if (message) {alert(message); return false;}
 	if (protokoll != "GRE" && protokoll != "ESP") {
 		message = valDoValidatePort(jslGetValue("uiViewFwPort"), 1);
 		if (message) {alert(g_mldEntryAtPort+message); return false;}
 	}
+	
 	return true;
 }
 function uiDoSave() {
--- usr/www/all/html/de/internet/pppoe.frm.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/internet/pppoe.frm	2007-07-26 15:15:54.000000000 +0200
@@ -1,2 +1,22 @@
 <!--		../internet/pppoe.frm		-->
-<? include ../html/$var:lang/internet/$var:filename.frm ?>
+<? if eq $var:showdualmode 1 `
+ <? if eq <? query box:settings/expertmode/activated ?> 1 `
+ <? include ../html/$var:lang/internet/internet_expert.frm ?>
+ ` `
+		<? if eq $var:OEM avme `
+			<? include ../html/$var:lang/internet/internet_expert.frm ?>
+		` `
+ <? include ../html/$var:lang/internet/internet_normal.frm ?>
+		` ?>
+ ` ?>
+` `
+	<? if eq $var:isDsl 0 `
+		<? if eq $var:isVdsl 0 `
+			<? include ../html/$var:lang/internet/pppoe_ata.frm ?>
+		` `			
+			<? include ../html/$var:lang/internet/pppoe_national.frm ?>
+		` ?>			
+	` `
+		<? include ../html/$var:lang/internet/pppoe_national.frm ?>
+	` ?>
+` ?>
--- usr/www/all/html/de/internet/pppoe.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/internet/pppoe.html	2007-07-26 15:15:54.000000000 +0200
@@ -1,2 +1,22 @@
 <!--		../internet/pppoe.html		-->
-<? include ../html/$var:lang/internet/$var:filename.html ?>
+<? if eq $var:showdualmode 1 `
+	<? if eq <? query box:settings/expertmode/activated ?> 1 `
+		<? include ../html/$var:lang/internet/internet_expert.html ?>
+	` `
+		<? if eq $var:OEM avme `
+			<? include ../html/$var:lang/internet/internet_expert.html ?>
+		` `
+			<? include ../html/$var:lang/internet/internet_normal.html ?>
+		` ?>
+	` ?>
+` `
+	<? if eq $var:isDsl 0 `
+		<? if eq $var:isVdsl 0 `
+			<? include ../html/$var:lang/internet/pppoe_ata.html ?>
+		` `			
+			<? include ../html/$var:lang/internet/pppoe_national.html ?>
+		` ?>			
+	` `
+		<? include ../html/$var:lang/internet/pppoe_national.html ?>
+	` ?>
+` ?>
--- usr/www/all/html/de/internet/pppoe.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/internet/pppoe.js	2007-07-26 15:15:54.000000000 +0200
@@ -1,6 +1,5 @@
 <!--		../internet/pppoe.js		-->
 <!-- isAta = <? echo $var:isAta ?>, isAtaFull = <? echo $var:isAtaFull ?>, expert = <? query box:settings/expertmode/activated ?> -->
-<!-- Atamode = <? query box:settings/ata_mode ?>, type = <? query connection0:settings/type ?>, encaps = <? query sar:settings/encapsulation ?> -->
 <? setvariable var:showdualmode 0 ?>
 <? if eq <? query box:settings/expertmode/activated ?> 1 `<? setvariable var:showdualmode 1 ?>` ?>
 <? if eq $var:isDsl 1 `
@@ -13,31 +12,23 @@
 	<? if eq $var:isAtaFull 1 `<? setvariable var:showdualmode 1 ?>` ?>
 ` ?>
 <? if eq $var:showdualmode 1 `
-	<? setvariable var:filename internet_normal ?>
 	<? if eq <? query box:settings/expertmode/activated ?> 1 `
-		<? setvariable var:filename internet_expert ?>
-	` ?>
+		<? include ../html/$var:lang/internet/internet_expert.js ?>
+	` `
 	<? if eq $var:OEM avme `
-			<? setvariable var:filename internet_expert ?>
-	` ?>
-` `
-	<? setvariable var:filename pppoe_national ?>
-	<? if eq '<? query box:settings/ata_mode ?>' '1' `
-		<? if eq '<? query connection0:settings/type ?>' 'pppoe' `
-			<? if eq '<? query sar:settings/encapsulation ?>' 'dslencap_pppoe' `
-				<? setvariable var:filename internet_expert ?>
+			<? include ../html/$var:lang/internet/internet_expert.js ?>
+		` `
+			<? include ../html/$var:lang/internet/internet_normal.js ?>
 			` ?>
-			<? if eq '<? query sar:settings/encapsulation ?>' 'dslencap_mixed' `
-				<? setvariable var:filename internet_expert ?>
 			` ?>
-		` ?>
-	` ?>
-	
+` `
 	<? if eq $var:isDsl 0 `
 		<? if eq $var:isVdsl 0 `
-			<? setvariable var:filename pppoe_ata ?>
+			<? include ../html/$var:lang/internet/pppoe_ata.js ?>
+		` `
+			<? include ../html/$var:lang/internet/pppoe_national.js ?>
 		` ?>
+	` `
+		<? include ../html/$var:lang/internet/pppoe_national.js ?>
 	` ?>
 ` ?>
-<!-- filename = <? echo $var:filename ?> -->
-<? include ../html/$var:lang/internet/$var:filename.js ?>
--- usr/www/all/html/de/internet/pppoe_national.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/internet/pppoe_national.js	2007-07-26 15:15:54.000000000 +0200
@@ -2,11 +2,10 @@
 <? setvariable var:contype pppoe ?>
 <style type="text/css">
 <!--
-#content {width: 540px; margin: auto;}
+#content {width: 520px; margin: auto;}
 #tStream {margin: auto;}
 #tStream td {padding: 1px 2px;}
 #tUser td {padding: 0px;}
-#tDbd td {padding: 0px;}
 .left25 {padding-left: 25px;}
 .Label {width: 160px;}
 -->
--- usr/www/all/html/de/login.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/login.html	2007-07-26 15:15:54.000000000 +0200
@@ -49,8 +49,6 @@
 .foretitel		{ text-align: center; font-weight: bold; padding: 5px 10px;}
 .foredialog		{ padding: 10px; }
 .forebuttons	{ text-align: right; padding: 7px 10px;}
-.errorMessage { font-family: Arial, Helvetica, sans-serif; font-size: 13px; font-weight: bold; color: #CC0000; text-align: center;
-				 margin: 5px; padding: 2px; background-color: white; }
 #Menuspalte	{ width: 200px; padding: 0px; vertical-align: top; }
 #Dataspalte	{ width: 606px; height: 400px; vertical-align: top; }
 -->
@@ -104,7 +102,7 @@
 				<table style="margin: auto;">
 					<tr>
 						<td style="width: 80px;"><label for="uiViewPassword">Kennwort</label>&nbsp;</td>
-						<td><input type="password" size="15" maxlength="128" id="uiViewPassword" name="pass"></td>
+						<td><input type="password" size="15" maxlength="128" id="uiViewPassword"></td>
 					</tr>
 				</table>
 			</div>
--- usr/www/all/html/de/menus/menu2_fon.html.orig	2007-07-26 15:15:54.000000000 +0200
+++ usr/www/all/html/de/menus/menu2_fon.html	2007-07-26 15:15:54.000000000 +0200
@@ -13,32 +13,23 @@
 <? if eq $var:pagename siplist `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename sip1 `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename sipoptionen `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename quality `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('fon','siplist')"><? echo $var:txt01 ?></a></li>
 <? setvariable var:classname 'LSubitem' ?>
-<? if eq $var:pagename fondevices `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename isdnmsn `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename fonlistdect `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename fon1isdn `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename isdn `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename isdnoptionen `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename msn `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename fon1 `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
+<? if eq $var:pagename nebenstellen `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename merkmale `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename klingelsperre `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename fon1Dect `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('fon','fondevices')"><? echo '$var:txt15' ?></a></li>
-<? setvariable var:showrouting 1 ?>
-<? if eq $var:OEM 1und1 `
-<? if neq <? query box:settings/expertmode/activated ?> 1 `<? setvariable var:showrouting 0 ?>` ?>
+<? if eq $var:pagename fonlist `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
+<? if eq $var:pagename fon1 `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
+<? if eq $var:pagename foneinfach `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
+<? if eq $var:pagename fonab `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
+<? if gte $var:AbCount 1 `
+	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('fon','<? if lte $var:AbCount 1 `foneinfach` `fonlist` ?>')"><? echo '$var:txt02' ?></a></li>
 ` ?>
 <? setvariable var:classname 'LSubitem' ?>
 <? if eq $var:pagename routing `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename route `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename vorwahl `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-<? if eq $var:showrouting 1 `
-	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('fon','routing')"><? echo '$var:txt03' ?></a></li>
-` ?>
+	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('fon','routing')"><? echo $var:txt03 ?></a></li>
 <? setvariable var:classname 'LSubitem' ?>
 <? if eq $var:pagename fonbuch `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename fonbuch1 `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
@@ -64,10 +55,8 @@
 	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('fon','laender')">$var:txt06</a></li>
 ` ?>
 	<li class="LMenutrenner"></li>
-	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('usb','status')"><? echo $var:menuUSB ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('wlan','wlan')"><? echo $var:menuWLAN ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('system','syslog')"><? echo $var:menuSystem ?></a></li>
-	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('software','extern')"><? echo $var:menuSoftware ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslPopHelp('home')"><? echo $var:menuHilfe ?></a></li>
 <? if eq $var:isWizz 1 `
 	<li class="LMenuitem" style="margin-top:24px"><img src="<? echo '$var:pfeil' ?>"> <a href="javascript:jslGoTo('first','direkt')">$var:menuAssistent</a></li>
--- usr/www/all/html/de/menus/menu2_homehome.html.orig	2007-07-26 15:15:54.000000000 +0200
+++ usr/www/all/html/de/menus/menu2_homehome.html	2007-07-26 15:15:54.000000000 +0200
@@ -7,37 +7,22 @@
 <? setvariable var:classname 'LSubitem' ?>
 <? if eq $var:pagename foncalls `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename dial `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('home','foncalls')"><? echo $var:evtxt01 ?></a></li>
+	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('home','foncalls')">Anrufliste</a></li>
 <? setvariable var:classname 'LSubitem' ?>
 <? if eq $var:pagename fonbuch `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename fonbuch1 `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename dialbuch `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('home','fonbuch')"><? echo $var:evtxt02 ?></a></li>
-<? setvariable var:classname 'LSubitem' ?>
-<? if eq $var:pagename userlist `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename useradd1 `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename useradd2 `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-<? if eq '<? query connection0:settings/type ?>' 'pppoe' `
-	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('home','userlist')"><? echo '$var:evtxt03' ?></a></li>
-` ?>
+	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('home','fonbuch')">Telefonbuch</a></li>
 <? setvariable var:classname 'LSubitem' ?>
 <? if eq $var:pagename inetstat `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename budget `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq '<? query connection0:settings/type ?>' 'pppoe' `
-	<? if eq <? query box:settings/expertmode/activated ?> 1 `
-		<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('home','inetstat')"><? echo '$var:evtxt08' ?></a></li>
-	` ?>
+	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('home','inetstat')">Online-Zähler</a></li>
 ` ?>
 <? setvariable var:classname 'LSubitem' ?>
-<? if eq $var:pagename energy `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename ecosettings `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('home','energy')"><? echo $var:evtxt10 ?></a></li>
-<? setvariable var:classname 'LSubitem' ?>
 <? if eq $var:pagename syslog `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('home','syslog')"><? echo $var:evtxt04 ?></a></li>
+	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('home','syslog')">Ereignisse</a></li>
 <? setvariable var:classname 'LSubitem' ?>
-<? if eq $var:pagename status `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('home','status')"><? echo $var:evtxt05 ?></a></li>
 <? setvariable var:show 1 ?>
 <? if eq <? query box:settings/ata_mode ?> 1 `
 <? if eq '<? query connection0:settings/type ?>' 'bridge' '<? setvariable var:show 0 ?>' ?>
@@ -46,9 +31,9 @@
 <? if eq $var:pagename clients `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename mac `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 <? if eq $var:show 1 `
-	<li class="$var:classname"><img src="<? echo '$var:subpfeil' ?>"> <a href="javascript:jslGoTo('home','clients')"><? echo '$var:evtxt06' ?></a></li>
+	<li class="$var:classname"><img src="<? echo '$var:subpfeil' ?>"> <a href="javascript:jslGoTo('home','clients')">Netzwerkgeräte</a></li>
 ` ?>
-	<li class="LMenuitem"><img src="<? echo '$var:pfeil' ?>"> <a href="javascript:jslSetValue('uiPostKonfig', '1');jslGoTo('home', 'home')"><? echo $var:evtxt07 ?></a></li>
+	<li class="LMenuitem"><img src="<? echo '$var:pfeil' ?>"> <a href="javascript:jslSetValue('uiPostKonfig', '1');jslGoTo('home', 'home')">Einstellungen</a></li>
 <? if eq $var:isWizz 1 `
 	<li class="LMenuitem" style="margin-top:24px"><img src="<? echo '$var:pfeil' ?>"> <a href="javascript:jslGoTo('first','direkt')">$var:menuAssistent</a></li>
 ` ?>
--- usr/www/all/html/de/menus/menu2_homekonfig.html.orig	2007-07-26 15:15:54.000000000 +0200
+++ usr/www/all/html/de/menus/menu2_homekonfig.html	2007-07-26 15:15:54.000000000 +0200
@@ -5,10 +5,8 @@
 <? setvariable var:title $var:menuInternet ?>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="<? echo $var:pagepath ?>var:menu=internet&var:pagename=internet&var:activtype=<? query connection0:settings/type ?>"><? echo $var:title ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('fon','foncalls')"><? echo $var:menuTelefonie ?></a></li>
-	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('usb','status')"><? echo $var:menuUSB ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('wlan','wlan')"><? echo $var:menuWLAN ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('system','syslog')"><? echo $var:menuSystem ?></a></li>
-	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('software','extern')"><? echo $var:menuSoftware ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslPopHelp('home')"><? echo $var:menuHilfe ?></a></li>
 <? if eq $var:isWizz 1 `
 	<li class="LMenuitem" style="margin-top:24px"><img src="<? echo '$var:pfeil' ?>"> <a href="javascript:jslGoTo('first','direkt')">$var:menuAssistent</a></li>
--- usr/www/all/html/de/menus/menu2.inc.orig	2007-07-26 15:15:54.000000000 +0200
+++ usr/www/all/html/de/menus/menu2.inc	2007-07-26 15:15:54.000000000 +0200
@@ -5,19 +5,15 @@
 <? setvariable var:menuInternet "Internet" ?>
 <? setvariable var:menuNetzwerk "Netzwerk" ?>
 <? setvariable var:menuTelefonie "Telefonie" ?>
-<? setvariable var:menuTelefonieConfig "Telefoniegeräte einrichten" ?>
 <? setvariable var:menuWLAN "WLAN" ?>
 <? setvariable var:menuUSB "USB-Zubehör" ?>
 <? setvariable var:menuSystem "System" ?>
-<? setvariable var:menuSoftware "Programme" ?>
 <? setvariable var:menuHilfe "Hilfe" ?>
 <? setvariable var:menuDSMOD "DS-MOD" ?>
 <? setvariable var:evtxt01 "Anrufliste" ?>
 <? setvariable var:evtxt02 "Telefonbuch" ?>
-<? setvariable var:evtxt03 "Kindersicherung" ?>
+<? setvariable var:evtxt03 "Online-Zähler" ?>
 <? setvariable var:evtxt04 "Ereignisse" ?>
 <? setvariable var:evtxt05 "USB-Zubehör" ?>
 <? setvariable var:evtxt06 "Netzwerkgeräte" ?>
 <? setvariable var:evtxt07 "Einstellungen" ?>
-<? setvariable var:evtxt08 "Online-Zähler" ?>
-<? setvariable var:evtxt10 "Energiemonitor" ?>
--- usr/www/all/html/de/menus/menu2_internet.html.orig	2007-07-26 15:15:54.000000000 +0200
+++ usr/www/all/html/de/menus/menu2_internet.html	2007-07-26 15:15:54.000000000 +0200
@@ -7,11 +7,7 @@
 <? setvariable var:showsubmenu 1 ?>
 <? if eq '<? query wlan:settings/WDS_enabled ?>' '1' `
 <? if eq '<? query wlan:settings/WDS_hop ?>' '1' `
-<? if eq $var:isAta 0 `
-	<? setvariable var:class0 "LMenuitemaktiv" ?>
-	<? setvariable var:bild "$var:pfeil" ?>
-	<? setvariable var:showsubmenu 0 ?>
-` ?>
+<? if eq $var:isAta 0 `<? setvariable var:showsubmenu 0 ?>` ?>
 ` ?>
 ` ?>
 	<li class="<? echo '$var:class0' ?>"><img src="<? echo '$var:bild' ?>"> <a href="<? echo '$var:pagepath' ?>var:menu=internet&var:pagename=internet&var:activtype=<? query connection0:settings/type ?>"><? echo $var:title ?></a></li>
@@ -19,9 +15,6 @@
 <? if neq <? query connection0:settings/type ?> pppoe `
 <? if eq $var:pagename internet `<? setvariable var:class1 'LSubitemaktiv' ?>` ?>
 ` ?>
-<? if eq $var:OEM tcom '
-<? if eq $var:pagename internet `<? setvariable var:class1 'LSubitemaktiv' ?>` ?>
-' ?>
 <? if eq $var:pagename pppoe `<? setvariable var:class1 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename bridge `<? setvariable var:class1 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename pppoe_national `<? setvariable var:class1 'LSubitemaktiv' ?>` ?>
@@ -37,16 +26,13 @@
 <? if eq $var:pagename expert `<? setvariable var:class3 'LSubitemaktiv' ?>` ?>
 <? setvariable var:class4 'LSubitem' ?>
 <? if eq $var:pagename budget `<? setvariable var:class4 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename inetstat `<? setvariable var:class4 'LSubitemaktiv' ?>` ?>
 <? setvariable var:class5 'LSubitem' ?>
 <? if eq $var:pagename dslsetting `<? setvariable var:class5 'LSubitemaktiv' ?>` ?>
 <? setvariable var:class6 'LSubitem' ?>
 <? if eq $var:pagename dyndns `<? setvariable var:class6 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename vpn `<? setvariable var:class6 'LSubitemaktiv' ?>` ?>
 <? setvariable var:class7 'LSubitem' ?>
-<? if eq $var:pagename userlist `<? setvariable var:class7 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename useradd1 `<? setvariable var:class7 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename useradd2 `<? setvariable var:class7 'LSubitemaktiv' ?>` ?>
+<? if eq $var:pagename inetstat `<? setvariable var:class7 'LSubitemaktiv' ?>` ?>
+<? if eq $var:pagename budget `<? setvariable var:class7 'LSubitemaktiv' ?>` ?>
 <? if eq <? query connection0:settings/type ?> pppoe `
 <? if eq $var:pagename internet `<? setvariable var:class7 'LSubitemaktiv' ?>` ?>
 ` ?>
@@ -69,12 +57,9 @@
 <? if eq '<? query sar:settings/encapsulation ?>' 'dslencap_ipraw' `<? setvariable var:showPortfreigabe 1 ?>` ?>
 <? if eq $var:showsubmenu 1 `
 	<? if eq '<? query connection0:settings/type ?>' 'pppoe' `
-		<li class="<? echo $var:class7 ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('internet','userlist')">$var:txt06</a></li>
-	<? if eq <? query box:settings/expertmode/activated ?> 1 `
-		<li class="<? echo $var:class4 ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('internet','inetstat')">$var:txt00</a></li>
-	` ?>
+		<li class="<? echo $var:class7 ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('internet','inetstat')">$var:txt00</a></li>
 	` ?>
-<li class="<? echo '$var:class1' ?>"><img src="<? echo '$var:subpfeil' ?>"> <a href="<? echo '$var:pagepath' ?>var:menu=internet&var:pagename=pppoe&var:activtype=<? query connection0:settings/type ?>"><? echo '$var:txt01' ?></a></li>
+<li class="<? echo '$var:class1' ?>"><img src="<? echo '$var:subpfeil' ?>"> <a href="<? echo '$var:pagepath' ?>var:menu=internet&var:pagename=pppoe&var:activtype=<? query connection0:settings/type ?>"><? echo $var:txt01 ?></a></li>
 <!-- TYPE=<? query connection0:settings/type ?>, ENCAPS=<? query sar:settings/encapsulation ?>	-->
 	<? if eq $var:showPortfreigabe 1 `
 		<li class="<? echo $var:class2 ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('internet','portfw')">$var:txt03</a></li>
@@ -87,10 +72,8 @@
 	` ?>
 `?>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('fon','foncalls')"><? echo $var:menuTelefonie ?></a></li>
-	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('usb','status')"><? echo $var:menuUSB ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('wlan','wlan')"><? echo $var:menuWLAN ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('system','syslog')"><? echo $var:menuSystem ?></a></li>
-	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('software','extern')"><? echo $var:menuSoftware ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslPopHelp('home')"><? echo $var:menuHilfe ?></a></li>
 <? if eq $var:isWizz 1 `
 	<li class="LMenuitem" style="margin-top:24px"><img src="<? echo '$var:pfeil' ?>"> <a href="javascript:jslGoTo('first','direkt')">$var:menuAssistent</a></li>
--- usr/www/all/html/de/menus/menu2_system.html.orig	2007-07-26 15:15:54.000000000 +0200
+++ usr/www/all/html/de/menus/menu2_system.html	2007-07-26 15:15:54.000000000 +0200
@@ -5,18 +5,12 @@
 <? setvariable var:title $var:menuInternet ?>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="<? echo $var:pagepath ?>var:menu=internet&var:pagename=internet&var:activtype=<? query connection0:settings/type ?>"><? echo $var:title ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('fon','foncalls')"><? echo $var:menuTelefonie ?></a></li>
-	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('usb','status')"><? echo $var:menuUSB ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('wlan','wlan')"><? echo $var:menuWLAN ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:aktivpfeil ?>"> <a href="javascript:jslGoTo('system','syslog')"><? echo $var:menuSystem ?></a></li>
 <? setvariable var:classname 'LSubitem' ?>
 <? if eq $var:pagename syslog `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('system','syslog')"><? echo $var:txt00 ?></a></li>
-<? setvariable var:classname 'LSubitem' ?>
-<? if eq $var:pagename energy `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-<? if eq $var:pagename ecosettings `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('system','energy')"><? echo `$var:txt13` ?></a></li>
 <? setvariable var:showemail 1 ?>
-<? if neq <? query box:settings/expertmode/activated ?> 1 `<? setvariable var:showemail 0 ?>` ?>
 <? if eq '<? query box:settings/ata_mode ?>' '0' `
 <? if eq '<? query sar:settings/encapsulation ?>' 'dslencap_pppoe' `
 <? if eq '<? query connection0:settings/type ?>' 'bridge' `<? setvariable var:showemail 0 ?>` ?>
@@ -28,9 +22,6 @@
 <? if eq $var:showemail 1 `
 	<li class="$var:classname"><img src="$var:subpfeil"> <a href="javascript:jslGoTo('system','email')">$var:txt09</a></li>
 ` ?>
-<? setvariable var:classname 'LSubitem' ?>
-<? if eq $var:pagename infoled `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('system','infoled')"><? echo `$var:txt11` ?></a></li>
 <? setvariable var:classnacht 'LSubitem' ?>
 <? if eq $var:pagename nacht `<? setvariable var:classnacht 'LSubitemaktiv' ?>` ?>
 <? setvariable var:shownacht 0 ?>
@@ -85,13 +76,7 @@
 <? setvariable var:classname 'LSubitem' ?>
 <? if eq $var:pagename extended `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
 	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('system','extended')"><? echo $var:txt06 ?></a></li>
-<? setvariable var:classname 'LSubitem' ?>
-<? if eq $var:pagename timeZone `<? setvariable var:classname 'LSubitemaktiv' ?>` ?>
-<? if eq $var:OEM avme `
-	<li class="<? echo $var:classname ?>"><img src="<? echo $var:subpfeil ?>"> <a href="javascript:jslGoTo('system','timeZone')"><? echo '$var:txt12' ?></a></li>
-` ?>
 	<li class="LMenutrenner"></li>
-	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('software','extern')"><? echo $var:menuSoftware ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslPopHelp('home')"><? echo $var:menuHilfe ?></a></li>
 <? if eq $var:isWizz 1 `
 	<li class="LMenuitem" style="margin-top:24px"><img src="<? echo '$var:pfeil' ?>"> <a href="javascript:jslGoTo('first','direkt')">$var:menuAssistent</a></li>
--- usr/www/all/html/de/menus/menu2_wlan.html.orig	2007-07-26 15:15:54.000000000 +0200
+++ usr/www/all/html/de/menus/menu2_wlan.html	2007-07-26 15:15:54.000000000 +0200
@@ -5,7 +5,6 @@
 <? setvariable var:title $var:menuInternet ?>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="<? echo $var:pagepath ?>var:menu=internet&var:pagename=internet&var:activtype=<? query connection0:settings/type ?>"><? echo $var:title ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('fon','foncalls')"><? echo $var:menuTelefonie ?></a></li>
-	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('usb','status')"><? echo $var:menuUSB ?></a></li>
 <li class="LMenuitem"><img src="<? echo $var:aktivpfeil ?>"> <a href="javascript:jslGoTo('wlan','wlan')"><? echo $var:menuWLAN ?></a></li>
 <!-- wlan:settings/ap_enabled = '<? query wlan:settings/ap_enabled ?>' -->
 <? setvariable var:showWlan 0 ?>
@@ -25,11 +24,14 @@
 <? if eq $var:pagename encrypt1 `<? setvariable var:classsec 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename encrypt2 `<? setvariable var:classsec 'LSubitemaktiv' ?>` ?>
 <? if eq $var:pagename encrypt3 `<? setvariable var:classsec 'LSubitemaktiv' ?>` ?>
-<? setvariable var:seclevel 'encrypt0' ?>
-<? if eq <? query wlan:settings/encryption ?> 1 `<? setvariable var:seclevel 'encrypt1' ?>` ?>
-<? if eq <? query wlan:settings/encryption ?> 2 `<? setvariable var:seclevel 'encrypt2' ?>` ?>
-<? if eq <? query wlan:settings/encryption ?> 3 `<? setvariable var:seclevel 'encrypt2' ?>` ?>
-<? if eq <? query wlan:settings/encryption ?> 4 `<? setvariable var:seclevel 'encrypt2' ?>` ?>
+<? setvariable var:classsec0 'LSubitem' ?>
+<? if eq $var:pagename encrypt0 `<? setvariable var:classsec0 'LSubitemaktiv' ?>` ?>
+<? setvariable var:classsec1 'LSubitem' ?>
+<? if eq $var:pagename encrypt1 `<? setvariable var:classsec1 'LSubitemaktiv' ?>` ?>
+<? setvariable var:classsec2 'LSubitem' ?>
+<? if eq $var:pagename encrypt2 `<? setvariable var:classsec2 'LSubitemaktiv' ?>` ?>
+<? setvariable var:classsec3 'LSubitem' ?>
+<? if eq $var:pagename encrypt3 `<? setvariable var:classsec3 'LSubitemaktiv' ?>` ?>
 <? setvariable var:classwds 'LSubitem' ?>
 <? if eq $var:pagename wds `<? setvariable var:classwds 'LSubitemaktiv' ?>` ?>
 <? if eq $var:showWlan 0 `
@@ -37,14 +39,13 @@
 ` `
 	<li class="$var:classmonitor"><img src="$var:subpfeil"> <a href="javascript:jslGoTo('wlan','monitor')">$var:txt02</a></li>
 	<li class="$var:classcommon"><img src="$var:subpfeil"> <a href="javascript:jslGoTo('wlan','common')">$var:txt00</a></li>
-	<li class="$var:classsec"><img src="$var:subpfeil"> <a href="javascript:jslGoTo('wlan','$var:seclevel')">$var:txt01</a></li>
+	<li class="$var:classsec"><img src="$var:subpfeil"> <a href="javascript:jslGoTo('wlan','encrypt<? query wlan:settings/encryption ?>')">$var:txt01</a></li>
 <? if eq <? query box:settings/expertmode/activated ?> 1 `
 	<li class="$var:classwds"><img src="$var:subpfeil"> <a href="javascript:jslGoTo('wlan','wds')">$var:txt03</a></li>
 ` ?>
 ` ?>
 	<li class="LMenutrenner"></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('system','syslog')"><? echo $var:menuSystem ?></a></li>
-	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslGoTo('software','extern')"><? echo $var:menuSoftware ?></a></li>
 	<li class="LMenuitem"><img src="<? echo $var:pfeil ?>"> <a href="javascript:jslPopHelp('home')"><? echo $var:menuHilfe ?></a></li>
 <? if eq $var:isWizz 1 `
 	<li class="LMenuitem" style="margin-top:24px"><img src="<? echo '$var:pfeil' ?>"> <a href="javascript:jslGoTo('first','direkt')">$var:menuAssistent</a></li>
--- usr/www/all/html/de/system/clients.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/clients.html	2007-07-26 15:15:54.000000000 +0200
@@ -10,8 +10,7 @@
 				<th class="c2"><? echo $var:txt02 ?></th>
 				<th class="c3"><? echo $var:txt03 ?></th>
 			</tr>
-<? multiquery dhcpd:status/lease/list(name,ip,mac,lan) `
-<? if eq `$5` 1 `
+<? multiquery dhcpd:status/lease/list(name,ip,mac) `
 			<tr>
 				<!-- "$0" / "$1" -->
 				<td class="c1"><script type="text/javascript">document.write(DisplayAsLink("$2"));</script></td>
@@ -19,9 +18,8 @@
 				<td class="c3">$4</td>
 			</tr>
 ` ?>
-` ?>
-<? if eq <? query dhcpd:status/lease/count ?> 0 `
-			<tr class="bcWeiss"><td colspan=3 class="ac fs10">$var:txt24</td></tr>
+<? if eq <? multiquerycount dhcpd:status/lease/list ?> 0 `
+			<tr class="bcWeiss"><td colspan=3 class="ac fs10">Keine Netzwerkgeräte vorhanden.</td></tr>
 ` ?>
 		</table>
 	</div></div></div></div></div></div>
@@ -34,34 +32,30 @@
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<table id="tWlan" class="tborder">
 			<tr>
-				<th class="c1"><? echo '$var:txt20' ?></th>
-				<th class="c2"><? echo '$var:txt21' ?></th>
-				<th class="c3"><p><? echo '$var:txt02' ?></p><p><? echo '$var:txt03' ?></p></th>
-				<th class="c4"><p><? echo '$var:txt06' ?></p><p><? echo '$var:txt13' ?></p></th>
-				<th class="c5"><p><? echo '$var:txt07' ?></p><p><? echo '$var:txt25' ?></p></th>
+				<th class="c1"><? echo $var:txt20 ?></th>
+				<th class="c2"><? echo $var:txt21 ?></th>
+				<th class="c3"><p><? echo $var:txt02 ?></p><p><? echo $var:txt03 ?></p></th>
+				<th class="c4"><p><? echo $var:txt06 ?></p><p><? echo $var:txt13 ?></p></th>
+				<th class="c5"><? echo $var:txt07 ?></th>
 				<th class="c6"></th>
 			</tr>
-<? multiquery wlan:settings/wlanlist/list(hostname,ip,mac,state,speed,is_turbo,quality,cipher,powersave,wmm_active) `
+<? multiquery wlan:settings/wlanlist/list(hostname,ip,mac,state,speed,is_turbo,quality) `
 			<tr>
 				<!-- "$10" / "$11" -->
 				<td class="c1"><script type="text/javascript">document.write(uiAktivLed("$15", "$12"));</script></td>
 				<td class="c2"><span title="$12">$12</span></td>
 				<td class="c3"><p>$13</p><p><script type="text/javascript">document.write(uiMac("$14"));</script></p></td>
 				<td class="c4"><p><script type="text/javascript">document.write(uiSpeed("$16", "$17"));</script></p><p><script type="text/javascript">document.write(uiQuality("$18"));</script></p></td>
-				<td class="c5"><p><script type="text/javascript">document.write(uiEncryptState("$15","$19","$1b"));</script></p><script type="text/javascript">document.write(uiPowerSave("$15","$1a"));</script></p></td>
-				<td class="c6"><button type="button" id="uiViewDelete$11" onClick="uiDoDelete('$11')" value="$var:Text11" title="<? echo $var:txtIconBtnDelete ?>" style="width:30px; display:none"><img src="../html/$var:lang/images/loeschen.gif" align=bottom width=16 height=16 hspace=4></button></td>
+				<td class="c5"><script type="text/javascript">document.write(uiState("$15"));</script></td>
+				<td class="c6"><button type="button" id="uiViewDelete$11" onClick="uiDoDelete('$11')" value="$var:Text11" title="$var:Text11" style="width:30px; display:none"><img src="../html/$var:lang/images/loeschen.gif" align=bottom width=16 height=16 hspace=4></button></td>
 			</tr>
 ` ?>
-` ?>
-<? if eq $var:show 1 `
-<? if eq <? query wlan:settings/wlanlist/count ?> 0 `
-			<tr class="bcWeiss"><td colspan=6 class="ac fs10"><? echo '$var:txt22' ?></td></tr>
+<? if eq <? multiquerycount wlan:settings/wlanlist/list ?> 0 `
+			<tr class="bcWeiss"><td colspan=3 class="ac fs10"><? echo '$var:txt22' ?></td></tr>
 ` ?>
 		</table>
 		<p class="ar mt10" id="uiNewMac" style="display:none"><input type="button" id="uiMac" onclick="uiDoMac()" style="width: 240px" value="<? echo '$var:txt23' ?>"></p>
 	</div></div></div></div></div></div>
-` ?>
-<? if eq $var:show 1 `
 	<div class="backdialog" id="uiFilter" style="display:none"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<p class="mb5" style="font-weight: bold">$var:txt08</p>
 		<p class="ml25"><input type=radio name="macfilter" id="uiViewOpen" onclick="OnChangeMacFilter(0)">&nbsp;<label for="uiViewOpen">$var:txt09</label></p>
--- usr/www/all/html/de/system/clients.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/clients.inc	2007-07-26 15:15:54.000000000 +0200
@@ -9,7 +9,7 @@
 <? setvariable var:txt04 "Bekannte Netzwerkgeräte (WLAN)" ?>
 <? setvariable var:txt05 "Aktiv" ?>
 <? setvariable var:txt06 "Geschwindigkeit" ?>
-<? setvariable var:txt07 "Verbindungs-" ?>
+<? setvariable var:txt07 "Zustand" ?>
 <? setvariable var:txt08 "WLAN-Zugang beschränken (MAC-Address-Filter)" ?>
 <? setvariable var:txt09 "Neue WLAN-Netzwerkgeräte zulassen" ?>
 <? setvariable var:txt10 "Keine neuen WLAN-Netzwerkgeräte zulassen" ?>
@@ -20,5 +20,3 @@
 <? setvariable var:txt21 'Name' ?>
 <? setvariable var:txt22 'Keine WLAN-Netzwerkgeräte vorhanden.' ?>
 <? setvariable var:txt23 'Neues WLAN-Netzwerkgerät' ?>
-<? setvariable var:txt24 'Keine Netzwerkgeräte vorhanden.' ?>
-<? setvariable var:txt25 'eigenschaften' ?>
--- usr/www/all/html/de/system/clients.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/clients.js	2007-07-26 15:15:54.000000000 +0200
@@ -10,12 +10,12 @@
 #tWlan {width: 100%; table-layout: fixed; font-size: 12px; }
 #tWlan td, #tWlan th {padding: 2px 2px; vertical-align:top; overflow: hidden}
 #tWlan p {font-size: 12px;}
-#tWlan .c1 {text-align: center; width:28px;}
+#tWlan .c1 {text-align: center; width:30px;}
 #tWlan .c2 {}
-#tWlan .c3 {width:106px;}
-#tWlan .c4 {text-align: right; width:105px;}
-#tWlan .c5 {text-align: right; width:130px;}
-#tWlan .c6 {text-align: right; width:32px;}
+#tWlan .c3 {width:110px;}
+#tWlan .c4 {text-align: right; width:100px;}
+#tWlan .c5 {text-align: right; width:70px;}
+#tWlan .c6 {text-align: right; width:30px;}
 .ar				{ text-align: right;}
 .ac				{ text-align: center;}
 -->
@@ -37,12 +37,6 @@
 var g_txtState5 = "Verbunden";
 var g_txtState6 = "Abmelden";
 var g_txtMBit = " MBit/s";
-var g_txt_U_APSD_State_0 = " ";
-var g_txt_U_APSD_State_1 = "WMM Power Save";
-var g_txt_Wlan_Cipher_State_0 = "unverschlüsselt";
-var g_txt_Wlan_Cipher_State_1 = "WPA";
-var g_txt_Wlan_Cipher_State_2 = "WEP";
-var g_txt_Wlan_Cipher_State_3 = "WPA2";
 function uiDoOnLoad() {
 	jslZebrastreifen("tLan");
 <? setvariable var:show 0 ?>
@@ -53,10 +47,8 @@
 	jslSetChecked("uiViewClose", n == "1");
 	jslSetEnabled("uiMac", n=="1");
 	if (jslGetChecked("uiViewClose")) {
-<? multiquery wlan:settings/wlanlist/list(is_repeater) `
-		if ( "$12" != "1") {
+<? multiquery wlan:settings/wlanlist/list `
 			jslDisplay("uiViewDelete$11", true);
-		}
 ` ?>
 	}
 	if (g_expertMode == "1") {
@@ -70,14 +62,13 @@
 	jslSetChecked("uiViewOpen", n== 0);
 	jslSetChecked("uiViewClose", n== 1);
 	jslSetEnabled("uiMac", n==1);
-	if (n == 1 && <? query wlan:settings/wlanlist/count ?> <= 0) {
+	if (n == 1 && <? multiquerycount wlan:settings/wlanlist/list ?> <= 0) {
 		alert(g_mldClose);
-		jslSetValue("uiPostPageMaster", "clients");
 		jslFormSubmitEx(jslGetValue("uiPostMenu"), "mac");
 	}
 }
 function uiSpeed (n, turbo) {
-	var str = n + g_txtMBit;
+	var str = n + " MBit/s";
 	if (turbo == "1") str += " (g++)";
 	return str;
 }
@@ -94,26 +85,6 @@
 	}
 	return state;
 }
-function uiEncryptState (state, encrpState, isQoS){
-	if ( state != "5") return "";
-	var l_txtQoS = "";
-	if ( isQoS == "1") l_txtQoS = ", WMM";
-	switch (encrpState) {
-		case "0": return g_txt_Wlan_Cipher_State_0 + l_txtQoS;
-		case "1": return g_txt_Wlan_Cipher_State_1 + l_txtQoS;
-		case "2": return g_txt_Wlan_Cipher_State_2 + l_txtQoS;
-		case "3": return g_txt_Wlan_Cipher_State_3 + l_txtQoS;
-	}
-	return encrpState + l_txtQoS;
-}
-function uiPowerSave (state, powerState){
-	if ( state != "5") return "";
-	switch (powerState) {
-		case "0": return g_txt_U_APSD_State_0;
-		case "1": return g_txt_U_APSD_State_1;
-	}
-	return powerState;
-}
 function DisplayAsLink( name){
 	if ( name == "fritz.fonata.box")
 		return '<a href="http://fritz.fonata.box" target="_blank" title="FRITZ!Box Fon ata"><b>fritz.fonata.box</b></a>';
@@ -147,7 +118,7 @@
 }
 function uiDoDelete (n) {
 <? if eq <? query wlan:settings/ap_enabled ?> 1 `
-	if (<? query wlan:settings/wlanlist/count ?> <= 1) {
+	if (<? multiquerycount wlan:settings/wlanlist/list ?> <= 1) {
 		alert(g_mldLastWlan); return;
 	}
 	alert(g_mldWlan);
@@ -162,7 +133,6 @@
 ` ?>
 }
 function uiDoMac () {
-	jslSetValue("uiPostPageMaster", "clients");
-	jslFormSubmitEx(jslGetValue("uiPostMenu"), "mac");
+	jslGoTo(jslGetValue("uiPostMenu"), "mac");
 }
 </script>
--- usr/www/all/html/de/system/extended.frm.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/extended.frm	2007-07-26 15:15:54.000000000 +0200
@@ -1 +1,10 @@
-<input type="hidden" name="box:settings/expertmode/activated" value="<? query box:settings/expertmode/activated ?>" id="uiPostExpertMode" />
+<input type="hidden" name="box:settings/expertmode/activated" value="<? query box:settings/expertmode/activated ?>" id="uiPostExpertMode">
+<? if eq $var:ShowUsePstn 1 `
+<input type="hidden" name="telcfg:settings/UsePSTN" value="<? query telcfg:settings/UsePSTN ?>" id="uiPostPstn">
+<? multiquery telcfg:settings/SIP/list `
+<input type="hidden" name="telcfg:settings/$11/Fallback" value="0" id="uiPostFallback$10" disabled>
+` ?>
+<? multiquery telcfg:settings/Routing/Group/list `
+<input type="hidden" name="telcfg:command/Routing/Group" value="delete" id="uiPostDelete$10" disabled>
+` ?>
+` ?>
--- usr/www/all/html/de/system/extended.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/extended.html	2007-07-26 15:15:54.000000000 +0200
@@ -7,4 +7,10 @@
 		<p class="pCheck25"><input type="checkbox" id="uiViewExpertMode">&nbsp;<label for="uiViewExpertMode"><? echo $var:tx02 ?></label></p>
 		<p class="pText25"><? echo $var:tx03 ?></p>
 	</div></div></div></div></div></div>
+<? if eq $var:ShowUsePstn 1 `
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<p class="pCheck25"><input type="checkbox" id="uiViewPstn">&nbsp;<label for="uiViewPstn"><? echo `$var:tx04` ?></label></p>
+		<p class="pText25"><? echo `$var:tx05` ?></p>
+	</div></div></div></div></div></div>
+` ?>
 	<? include ../html/$var:lang/home/rbb_applycancel.html ?></div>
--- usr/www/all/html/de/system/extended.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/extended.inc	2007-07-26 15:15:54.000000000 +0200
@@ -2,3 +2,7 @@
 <? setvariable var:tx01 'Ansicht' ?>
 <? setvariable var:tx02 'Expertenansicht aktivieren' ?>
 <? setvariable var:tx03 'Die Expertenansicht ermöglicht den Zugang zu Detail-Einstellungen, die für den normalen Betrieb nicht erforderlich sind. Die Einstellungen werden jeweils am passenden Menüpunkt zusätzlich angezeigt. Die Einstellungen setzen weitergehende Netzwerk-Kenntnisse voraus.' ?>
+<? if eq $var:ShowUsePstn 1 `
+<? setvariable var:tx04 'Festnetz aktiv' ?>
+<? setvariable var:tx05 'Das Festnetz kann deaktiviert werden, wenn die FRITZ!Box nur mit dem DSL-Anschluss und nicht mit einem Festnetz verbunden ist. Alle Telefonate werden dann über das Internet geführt. Der Internettelefonie-Anbieter muss in diesem Fall alle Anrufe weiterleiten.' ?>
+` ?>
--- usr/www/all/html/de/system/extended.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/extended.js	2007-07-26 15:15:54.000000000 +0200
@@ -8,14 +8,38 @@
 </style>
 <script type="text/javascript">
 <? include ../html/$var:lang/js/jsl.js ?>
-var g_mldWarningAus = "Wichtiger Hinweis: Die FRITZ!Box wird auf den gewählten Anschlussmodus umgestellt. Die Telefonie-Einstellungen werden dafür in den Grundzustand zurückgesetzt. Alle Wahlregeln werden entfernt. Notrufe werden jetzt über das Internet geführt. Erkundigen Sie sich, ob Ihr Internettelefonie-Anbieter Notrufe weiterleiten kann.\x0d\x0aDieser Vorgang kann einen Moment dauern. Führen Sie die Einrichtung der Telefonie anschließend noch einmal durch.";
-var g_mldWarningAn = "Wichtiger Hinweis: Die FRITZ!Box wird auf den gewählten Anschlussmodus umgestellt. Die Telefonie-Einstellungen werden dafür in den Grundzustand zurückgesetzt.\x0d\x0aDieser Vorgang kann einen Moment dauern. Führen Sie die Einrichtung der Telefonie anschließend noch einmal durch.";
-var g_oldmode;
+var g_mldWarning = "Achtung! Notrufe werden jetzt über das Internet geführt. Erkundigen Sie sich, ob Ihr Internettelefonie-Anbieter Notrufe weiterleiten kann. Alle Wahlregeln werden entfernt.";
 function uiDoOnLoad() {
 	jslSetChecked("uiViewExpertMode", jslGetValue("uiPostExpertMode") == "1");
+<? setvariable var:ShowUsePstn 0 ?>
+<? if eq $var:OEM avm `<? setvariable var:ShowUsePstn 1 ?>` ?>
+<? if eq $var:OEM tcom `<? setvariable var:ShowUsePstn 1 ?>` ?>
+<? if eq $var:OEM freenet `<? setvariable var:ShowUsePstn 1 ?>` ?>
+<? if eq $var:ShowUsePstn 1 `
+	jslSetChecked("uiViewPstn", jslGetValue("uiPostPstn") == "1");
+` ?>
 }
 function uiDoSave() {
 	jslSetValue("uiPostExpertMode", jslGetChecked("uiViewExpertMode") ? "1" : "0");
+<? if eq $var:ShowUsePstn 1 `
+	jslSetValue("uiPostPstn", jslGetChecked("uiViewPstn") ? "1" : "0");
+	if (!jslGetChecked("uiViewPstn")) {
+		var i=0;
+		var j=0;
+		var bWarning = true;
+		<? multiquery telcfg:settings/Routing/Group/list(Route) `
+		if ("$12"=="f") { 
+			if (bWarning && !confirm(g_mldWarning)) return;
+			bWarning = false;
+			jslEnable("uiPostDelete"+j); 
+			document.getElementById("uiPostDelete"+j).name+=String(i); 
+			j++; 
+		}
+		else i++;` ?>
+		<? multiquery telcfg:settings/SIP/list `
+		jslEnable("uiPostFallback$10"); ` ?>
+	}
+` ?>
 	jslFormSubmitEx("system", "extended");
 }
 function uiDoCancel() {
--- usr/www/all/html/de/system/imexport.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/imexport.html	2007-07-26 15:15:54.000000000 +0200
@@ -6,8 +6,8 @@
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 		<div id="uiSave" style="display:none">
 		 	<ul class="tabs">
-		 		<li class="tabs_on"><a href="javascript:Tabs(0)"><? echo $var:Text10 ?></a></li>
-		 		<li><a href="javascript:Tabs(1)"><? echo $var:Text11 ?></a></li>
+		 		<li class="tabs_on"><a href="javascript:Tabs(0)">Sichern</a></li>
+		 		<li><a href="javascript:Tabs(1)">Wiederherstellen</a></li>
 		 	</ul>
 			<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 				<? echo $var:Text2 ?>
@@ -36,8 +36,8 @@
 		</div>
 		<div id="uiRestore" style="display:none">
 		 	<ul class="tabs">
-		 		<li><a href="javascript:Tabs(0)"><? echo $var:Text10 ?></a></li>
-		 		<li class="tabs_on"><a href="javascript:Tabs(1)"><? echo $var:Text11 ?></a></li>
+		 		<li><a href="javascript:Tabs(0)">Sichern</a></li>
+		 		<li class="tabs_on"><a href="javascript:Tabs(1)">Wiederherstellen</a></li>
 		 	</ul>
 			<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 				<? echo $var:Text2 ?>
--- usr/www/all/html/de/system/iprlist.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/iprlist.html	2007-07-26 15:15:54.000000000 +0200
@@ -32,7 +32,7 @@
 				</button></td>
 			</tr>
 ` ?>
-<? if eq <? query route:settings/route/count ?> 0 `
+<? if eq <? multiquerycount route:settings/route/list ?> 0 `
 			<tr><td colspan=6 class="ac">$var:tx09</td></tr>
 ` ?>
 		</table>
--- usr/www/all/html/de/system/iproute.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/iproute.js	2007-07-26 15:15:54.000000000 +0200
@@ -13,7 +13,6 @@
 var g_mldNetmaskPost		= "Die eingegebene Subnetzmaske ist ungültig.";
 var g_mldDefault		= "Für das Setzen der Default-Route müssen Netz und Netzmaske den Wert 0.0.0.0 haben.";
 var g_mldDefault2		= "Die Default-Route kann nur einmal gesetzt werden. Bitte bearbeiten Sie den bereits vorhandenen Eintrag.";
-var g_mld169254		= "Die IP-Adresse 169.254.*.* darf nicht verwendet werden.";
 var def_exists = false;
 <? multiquery route:settings/route/list(netmask) `
 	<? if neq `$var:route` `$1` `
@@ -33,7 +32,6 @@
 	if (valIpadrFormatId("uiPostNetmask") == false) {alert(g_mldNetmaskPost); return false;}
 	if (valNetmaskId("uiPostNetmask") == false) {alert(g_mldNetmaskPost); return false;}
 	if (jslGetValue("uiPostNetmask")=="0.0.0.0" && def_exists) {alert(g_mldDefault2); return false;}
-	if ((jslGetValue("uiPostIp").substr(0, 7) == "169.254") && (jslGetValue("uiPostNetmask").substr(0, 7) == "255.255")) {alert(g_mld169254); return false;}
 	if ((jslGetValue("uiPostIp")=="0.0.0.0" && jslGetValue("uiPostNetmask")!="0.0.0.0") ||
 		((jslGetValue("uiPostNetmask")=="0.0.0.0") && (jslGetValue("uiPostIp")!="0.0.0.0")))
 	{
@@ -79,7 +77,7 @@
 function valNetmaskId (id) {
 	var mask = jslGetValue(id);
 	var str = IpToBitstring(mask);
-	if (str.match(/^1+0*$/) == null) return false;
+	if (str.match(/^1*0+0$/) == null) return false;
 	return true;
 }
 function DecToBin(num) {
--- usr/www/all/html/de/system/mac.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/mac.html	2007-07-26 15:15:54.000000000 +0200
@@ -1,15 +1,15 @@
 <? include ../html/$var:lang/system/mac.inc ?>
 <div id="content">
 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
-		<? echo $var:Text1 ?>
+		MAC-Adresse manuell hinzufügen
 	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-		<p class="mb5"><? echo $var:Text2 ?></p>
+		<p class="mb5">MAC-Adresse des WLAN-Clients</p>
 		<p class="ac"><input type="text" id="uiViewMac0" class="Eingabefeld" size="3" maxlength="2"> :
-		<input type="text" id="uiViewMac1" class="Eingabefeld" size="3" maxlength="2"><? echo $var:Text3 ?>
-		<input type="text" id="uiViewMac2" class="Eingabefeld" size="3" maxlength="2"><? echo $var:Text3 ?>
-		<input type="text" id="uiViewMac3" class="Eingabefeld" size="3" maxlength="2"><? echo $var:Text3 ?>
-		<input type="text" id="uiViewMac4" class="Eingabefeld" size="3" maxlength="2"><? echo $var:Text3 ?>
+		<input type="text" id="uiViewMac1" class="Eingabefeld" size="3" maxlength="2"> :
+		<input type="text" id="uiViewMac2" class="Eingabefeld" size="3" maxlength="2"> :
+		<input type="text" id="uiViewMac3" class="Eingabefeld" size="3" maxlength="2"> :
+		<input type="text" id="uiViewMac4" class="Eingabefeld" size="3" maxlength="2"> :
 		<input type="text" id="uiViewMac5" class="Eingabefeld" size="3" maxlength="2"></p>
 	</div></div></div></div></div></div>
 	<? include ../html/$var:lang/home/rbb_applycancel.html ?>
--- usr/www/all/html/de/system/mac.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/mac.js	2007-07-26 15:15:54.000000000 +0200
@@ -11,8 +11,6 @@
 // globals
 var g_mldMacPart	= "Alle Felder der Mac-Adresse müssen genau zwei Zeichen (Ziffern oder die Buchstaben A-F) enthalten.";
 var g_mldWlan 	= "Die neuen Einstellungen für die WLAN-Zugangsbeschränkung werden übernommen. Alle aktiven WLAN-Verbindungen werden nun kurz unterbrochen.";
-var g_txtAlert_1 = "Mac-Adresse 00:00:00:00:00:00 ist ungültig.";
-var g_txtAlert_2 = "Mac-Adresse FF:FF:FF:FF:FF:FF ist ungültig.";
 function uiDoOnLoad() {
 	var mac = jslGetValue("uiPostMac");
 	if (mac.length==17) {
@@ -28,15 +26,15 @@
 	for (i=0; i<6; i++) {
 		mac += jslGetValue("uiViewMac"+i)+((i<5) ? ":" : "");
 	}
-	if (mac == "00:00:00:00:00:00") {alert(g_txtAlert_1); return false;}
-	if (mac.toUpperCase() == "FF:FF:FF:FF:FF:FF") {alert(g_txtAlert_2); return false;}
+	if (mac == "00:00:00:00:00:00") {alert("Mac-Adresse 00:00:00:00:00:00 ist ungültig."); return false;}
+	if (mac.toUpperCase() == "FF:FF:FF:FF:FF:FF") {alert("Mac-Adresse FF:FF:FF:FF:FF:FF ist ungültig."); return false;}
 	jslSetValue("uiPostMac", mac);
 	alert(g_mldWlan);
 	jslSetValue("uiPostMacFilter", "1");
-	jslFormSubmitEx(jslGetValue("uiPostMenu"), jslGetValue("uiPostPageMaster"), "mac");
+	jslFormSubmitEx(jslGetValue("uiPostMenu"), "clients", "mac");
 }
 function uiDoCancel() {
-	jslGoTo(jslGetValue("uiPostMenu"),jslGetValue("uiPostPageMaster"));
+	jslGoTo(jslGetValue("uiPostMenu"),"clients");
 }
 function uiDoHelp() {
 	jslPopHelp("hilfe_clients");
--- usr/www/all/html/de/system/nacht.frm.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/nacht.frm	2007-07-26 15:15:54.000000000 +0200
@@ -3,16 +3,9 @@
 <input type="hidden" name="box:settings/night_time_control_on_time" value="<? query box:settings/night_time_control_on_time ?>" id="uiPostNachtEnd">
 <input type="hidden" name="box:settings/night_time_control_ring_blocked" value="<? query box:settings/night_time_control_ring_blocked ?>" id="uiPostNachtFon">
 <input type="hidden" name="wlan:settings/night_time_control_enabled" value="<? query wlan:settings/night_time_control_enabled ?>" id="uiPostNachtWlan">
-<input type="hidden" name="wlan:settings/night_time_control_no_forced_off" value="<? query wlan:settings/night_time_control_no_forced_off ?>" id="uiPostWlanForcedOff" disabled>
 <input type="hidden" name="telcfg:settings/MSN/Port0/RingAllowed" value="<? query telcfg:settings/MSN/Port0/RingAllowed ?>" id="uiPostRingAllowed0" disabled>
 <input type="hidden" name="telcfg:settings/MSN/Port0/NoRingTime" value="<? query telcfg:settings/MSN/Port0/NoRingTime?>" id="uiPostNoRingTime0" disabled>
 <input type="hidden" name="telcfg:settings/MSN/Port0/NoRingWithNightSetting" value="<? query telcfg:settings/MSN/Port0/NoRingWithNightSetting?>" id="uiPostNoRingNS0" disabled>
 <input type="hidden" name="telcfg:settings/MSN/Port1/RingAllowed" value="<? query telcfg:settings/MSN/Port1/RingAllowed ?>" id="uiPostRingAllowed1" disabled>
 <input type="hidden" name="telcfg:settings/MSN/Port1/NoRingTime" value="<? query telcfg:settings/MSN/Port1/NoRingTime?>" id="uiPostNoRingTime1" disabled>
 <input type="hidden" name="telcfg:settings/MSN/Port1/NoRingWithNightSetting" value="<? query telcfg:settings/MSN/Port1/NoRingWithNightSetting?>" id="uiPostNoRingNS1" disabled>
-<input type="hidden" name="telcfg:settings/MSN/Port2/RingAllowed" value="<? query telcfg:settings/MSN/Port2/RingAllowed ?>" id="uiPostRingAllowed2" disabled>
-<input type="hidden" name="telcfg:settings/MSN/Port2/NoRingTime" value="<? query telcfg:settings/MSN/Port2/NoRingTime?>" id="uiPostNoRingTime2" disabled>
-<input type="hidden" name="telcfg:settings/MSN/Port2/NoRingWithNightSetting" value="<? query telcfg:settings/MSN/Port2/NoRingWithNightSetting?>" id="uiPostNoRingNS2" disabled>
-<input type="hidden" name="telcfg:settings/MSN/Port3/RingAllowed" value="<? query telcfg:settings/MSN/Port3/RingAllowed ?>" id="uiPostRingAllowed3" disabled>
-<input type="hidden" name="telcfg:settings/MSN/Port3/NoRingTime" value="<? query telcfg:settings/MSN/Port3/NoRingTime?>" id="uiPostNoRingTime3" disabled>
-<input type="hidden" name="telcfg:settings/MSN/Port3/NoRingWithNightSetting" value="<? query telcfg:settings/MSN/Port3/NoRingWithNightSetting?>" id="uiPostNoRingNS3" disabled>
--- usr/www/all/html/de/system/nacht.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/nacht.html	2007-07-26 15:15:54.000000000 +0200
@@ -14,8 +14,7 @@
 			<p class="mb10"><label for="uiViewStartHH"><? echo $var:Text4 ?></label>&nbsp;<input type="text" id="uiViewStartHH" size="3" maxlength="2" class="Eingabefeld"><? echo $var:Text5 ?><input type="text" id="uiViewStartMM" size="3" maxlength="2" class="Eingabefeld">
 			<label for="uiViewEndHH"><? echo $var:Text6 ?></label>&nbsp;<input type="text" id="uiViewEndHH" size="3" maxlength="2" class="Eingabefeld"><? echo $var:Text5 ?><input type="text" id="uiViewEndMM" size="3" maxlength="2" class="Eingabefeld"></p>
 			<p class="pCheck25"><input type="checkbox" id="uiViewUseNachtWlan" onclick="OnUseWlan()">&nbsp;<label for="uiViewUseNachtWlan"><? echo $var:Text7 ?></label><br><? echo $var:Text9 ?></p>
-			<p class="pCheck50 mb20"><input type="checkbox" id="uiViewUseWlanForcedOff" onclick="OnUseWlanNoForcedOff()">&nbsp;<label for="uiViewUseWlanForcedOff"><? echo $var:Text12 ?></label></p>
-			<p class="pCheck25 mb10"><input type="checkbox" id="uiViewUseNachtFon">&nbsp;<label for="uiViewUseNachtFon"><? echo $var:Text8 ?></label><br><? echo $var:Text10 ?></p>
+			<p class="pCheck25"><input type="checkbox" id="uiViewUseNachtFon">&nbsp;<label for="uiViewUseNachtFon"><? echo $var:Text8 ?></label><br><? echo $var:Text10 ?></p>
 		</div>
 	</div></div></div></div></div></div>
 	<? include ../html/$var:lang/home/rbb_applycancel.html ?>
--- usr/www/all/html/de/system/nacht.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/nacht.inc	2007-07-26 15:15:54.000000000 +0200
@@ -7,7 +7,6 @@
 <? setvariable var:Text6 'bis' ?>
 <? setvariable var:Text7 'Funknetz (WLAN) abschalten' ?>
 <? setvariable var:Text8 'Klingelsperre aktivieren' ?>
-<? setvariable var:Text9 'Das Abschalten des Funknetzes spart Strom. Sie können WLAN jederzeit über Ihr Telefon (Tastencode #96*1*) oder über den WLAN-Taster aktivieren.' ?>
+<? setvariable var:Text9 'Das Abschalten des Funknetzes spart Strom. Das Funknetz wird erst abgeschaltet, wenn keine WLAN-Netzwerkgeräte mehr aktiv sind. Sie können WLAN jederzeit über Ihr Telefon (Tastencode #96*1*) oder über den WLAN-Taster aktivieren.' ?>
 <? setvariable var:Text10 'Die Klingelsperre sorgt für Ruhe vor Telefonanrufen.' ?>
 <? setvariable var:Text11 'FRITZ!Box verfügt über keine gültige Uhrzeit. Die Nachtschaltung ist daher nicht verfügbar. FRITZ!Box muss mindestens einmal mit dem Internet verbunden werden, damit eine gültige Uhrzeit vorliegt.' ?>
-<? setvariable var:Text12 'Das Funknetz wird erst abgeschaltet, wenn kein WLAN-Netzwerkgerät mehr aktiv ist.' ?>
--- usr/www/all/html/de/system/nacht.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/nacht.js	2007-07-26 15:15:54.000000000 +0200
@@ -2,8 +2,7 @@
 <style type="text/css">
 <!--
 #content {width: 540px; margin: auto;}
-.pCheck25 {text-indent: -25px; padding-left: 25px; margin-bottom: 0px;}
-.pCheck50 {text-indent: -25px; padding-left: 50px; margin-bottom: 0px;}
+.pCheck25 {text-indent: -25px; padding-left: 25px; margin-bottom: 10px;}
 -->
 </style>
 <script type="text/javascript">
@@ -21,6 +20,7 @@
 	} else {
 		jslDisplay("ShowNacht", true);
 		jslSetChecked("uiViewUseNacht", jslGetValue("uiPostUseNacht") == "1");
+	
 		var str = jslGetValue("uiPostNachtStart");
 		var n1 = str.indexOf(":");
 		if (n1 != -1) {
@@ -33,8 +33,8 @@
 			jslSetValue("uiViewEndHH", str.slice(0, n1));
 			jslSetValue("uiViewEndMM", str.slice(n1+1));
 		}
+	
 		jslSetChecked("uiViewUseNachtWlan", jslGetValue("uiPostNachtWlan") == "1");
-		jslSetChecked("uiViewUseWlanForcedOff", jslGetValue("uiPostWlanForcedOff") == "1");
 		jslSetChecked("uiViewUseNachtFon", jslGetValue("uiPostNachtFon") == "1");
 		OnUseNacht();
 	}
@@ -46,43 +46,37 @@
 		if (starth.length == 0) starth = "0";
 		if (!valIsZahl(starth)) {alert(g_mldStunden); return;}
 		if (Number(starth)<0 || Number(starth)>23) {alert(g_mldStunden); return;}
+	
 		var startm = jslGetValue("uiViewStartMM");
 		if (startm.length == 0) starthm = "0";
 		if (!valIsZahl(startm)) {alert(g_mldMinuten); return;}
 		if (Number(startm)<0 || Number(startm)>59) {alert(g_mldMinuten); return;}
 		jslSetValue("uiPostNachtStart", ZweistelligeNummer(Number(starth)) + ":" + ZweistelligeNummer(Number(startm)));
+	
 		var endh = jslGetValue("uiViewEndHH");
 		if (endh.length == 0) endh = "0";
 		if (!valIsZahl(endh)) {alert(g_mldStunden); return;}
 		if (Number(endh)<0 || Number(endh)>23) {alert(g_mldStunden); return;}
+	
 		var endm = jslGetValue("uiViewEndMM");
 		if (endm.length == 0) endm = "0";
 		if (!valIsZahl(endm)) {alert(g_mldMinuten); return;}
 		if (Number(endm)<0 || Number(endm)>59) {alert(g_mldMinuten); return;}
 		jslSetValue("uiPostNachtEnd", ZweistelligeNummer(Number(endh)) + ":" + ZweistelligeNummer(Number(endm)));
 		jslSetValue("uiPostNachtWlan", jslGetChecked("uiViewUseNachtWlan") ? "1":"0");
-		jslSetValue("uiPostWlanForcedOff", jslGetChecked("uiViewUseWlanForcedOff") ? "1":"0");
-		jslEnable( "uiPostNachtWlan");
-		jslEnable( "uiPostWlanForcedOff");
 		if (jslGetChecked("uiViewUseNachtFon")) {
 			jslSetValue("uiPostNachtFon", "1");
 			Klingelsperre("0", starth, startm, endh, endm);
 			Klingelsperre("1", starth, startm, endh, endm);
-			Klingelsperre("2", starth, startm, endh, endm);
-			Klingelsperre("3", starth, startm, endh, endm);
 		} else {
 			jslSetValue("uiPostNachtFon", "0");
 			KeineSperre("0");
 			KeineSperre("1");
-			KeineSperre("2");
-			KeineSperre("3");
 		}
 	} else {
 		jslSetValue("uiPostUseNacht", "0");
 		KeineSperre("0");
 		KeineSperre("1");
-		KeineSperre("2");
-		KeineSperre("3");
 	}
 	jslFormSubmitEx("system", "nacht");
 }
@@ -119,22 +113,15 @@
 	jslSetEnabled("uiViewEndHH", b);
 	jslSetEnabled("uiViewEndMM", b);
 	jslSetEnabled("uiViewUseNachtWlan", b);
-	if ( "<? query wlan:settings/WDS_enabled ?>" == "1") {
-		jslSetEnabled("uiViewUseWlanForcedOff", false);
-	} else {
-		jslSetEnabled("uiViewUseWlanForcedOff", b);
-	}
 	jslSetEnabled("uiViewUseNachtFon", b);
 }
 function OnUseWlan () {
 	var wds = "<? query wlan:settings/WDS_enabled ?>";
 	if (jslGetChecked("uiViewUseNachtWlan") && (wds=="1")) {
-//		alert(g_mldWds);
-//		jslSetChecked("uiViewUseNachtWlan", false);
+		alert(g_mldWds); 
+		jslSetChecked("uiViewUseNachtWlan", false);
 	}
 }
-function OnUseWlanNoForcedOff() {
-}
 function ZweistelligeNummer (n) {
 	if (n>9) return n.toString();
 	return "0"+n.toString();
--- usr/www/all/html/de/system/net.frm.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/net.frm	2007-07-26 15:15:54.000000000 +0200
@@ -4,5 +4,4 @@
 <input type="hidden" name="var:ShowPopup" value="<? echo $var:ShowPopup ?>" id="uiShowPopup">
 <? if eq $var:isTr069 1 '
 <input type="hidden" name="tr069:settings/enabled" value="<? query tr069:settings/enabled ?>" id="uiPostSetTr069" disabled>
-<input type="hidden" name="tr069:settings/FWdownload_enable" value="<? query tr069:settings/FWdownload_enable ?>" id="uiPostUpdateTr069" disabled>
 ' ?>
--- usr/www/all/html/de/system/net.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/net.html	2007-07-26 15:15:54.000000000 +0200
@@ -1,5 +1,4 @@
 <? include ../html/$var:lang/system/net.inc ?>
-<? setvariable var:showTr069Switch `1` ?>
 <div id="content">
  	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
 		<? echo $var:tx01 ?>
@@ -15,15 +14,9 @@
 	<div id="uiExpert" style="display:none">
 <? if eq $var:isTr069 1 '
 <? if eq `<? query box:settings/ata_mode ?>` 0 `
-<? if eq '$var:showTr069Switch' 1 `
 		<div class="backdialog" id="uiSetTr069" style="display:none"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-			<p class="pCheck25"><input type="checkbox" id="uiViewSetTr069" onclick="OnChangeSetTr069()">&nbsp;<label for="uiViewSetTr069">$var:tx12</label></p>
-			<p class="ml25">$var:tx13</p>
-		</div></div></div></div></div></div>
-` ?>
-		<div class="backdialog" id="uiUpdateTr069" style="display:none"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-			<p class="pCheck25"><input type="checkbox" id="uiViewUpdateTr069">&nbsp;<label for="uiViewUpdateTr069">$var:tx16</label></p>
-			<p class="ml25">$var:tx17</p>
+			<p class="pCheck25"><input type="checkbox" id="uiViewSetTr069">&nbsp;<label for="uiViewSetTr069">$var:tx12</label></p>
+			<p class="ml25">$var:tx13<br><u>$var:tx14</u>&nbsp;$var:tx15</p>
 		</div></div></div></div></div></div>
 ` ?>
 ' ?>
--- usr/www/all/html/de/system/net.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/net.inc	2007-07-26 15:15:54.000000000 +0200
@@ -16,7 +16,5 @@
 <? setvariable var:tx13 'Diese Einstellung ermöglicht dem DSL-Dienstanbieter die sichere (verschlüsselte) Übertragung der Internetzugangsdaten und Anmeldedaten für Internettelefonie auf diese FRITZ!Box. Diese Funktion wird nicht von allen Internet- und Internettelefonieanbietern unterstützt.' ?>
 <? setvariable var:tx14 'Hinweis:' ?>
 <? setvariable var:tx15 'Wenn Sie diese Einstellung ändern, startet die FRITZ!Box neu und trennt kurzzeitig die Verbindungen.' ?>
-<? setvariable var:tx16 'Automatische Updates zulassen' ?>
-<? setvariable var:tx17 'Ist diese Einstellung ausgewählt, kann der Dienstanbieter die Firmware dieses Gerätes bei Bedarf automatisch aktualisieren, um das Dienstangebot zu verbessern.' ?>
 ` ?>
 ' ?>
--- usr/www/all/html/de/system/netipadr.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/netipadr.js	2007-07-26 15:15:54.000000000 +0200
@@ -19,20 +19,18 @@
 var g_mldIpaddrFormatPost	= ": die Eingabe ist keine gültige IP-Adresse.";
 var g_mldNetmaskPost		= ": die eingegebene Subnetzmaske ist ungültig.";
 var g_mldIpaddrTheNet		= ": dieser Wert stellt das Subnetz an sich dar und kann nicht verwendet werden.";
-var g_mldIpaddrBroadcast		= ": dieser Wert stellt die Broadcast-Adresse dar und kann nicht verwendet werden.";
+var g_mldIpaddrBroadcast		= ": dieser Wert stellt die Broadcast-Adresse in Ihrem Subnetz dar und kann nicht verwendet werden.";
 var g_mldIpaddrDiffNet		= " : diese Adresse befindet sich in einem anderen Subnetz, als das durch die IP-Adresse und Netzmaske definierte.";
 var g_mldNetmask0000		= "0.0.0.0 ist keine zulässige Subnetzmaske.";
 var g_mldNetmask24			= "Die kleinste zulässige Subnetzmaske ist 255.255.255.0.";
 var g_mldNetwork				= "Die Netzwerke dürfen sich nicht überschneiden.";
 var g_mld192168180			= "Bitte verwenden Sie nicht das Subnetz 192.168.180/24. Wählen Sie eine andere IP-Adresse!";
-var g_mld192168178			= "Bitte verwenden Sie im WLAN-Bereich nicht das Subnetz 192.168.178. Wählen Sie eine andere IP-Adresse!";
 var g_mld192168178254		= "Die IP-Adresse 192.168.178.254 darf nicht vom DHCP-Server vergeben werden. Stellen Sie einen anderen Adressbereich ein.";
 var g_mldIllegal				= ": Geben Sie einen gültigen Wert ein."
 var g_mldDhcpSort				= "Die 'von'- Eingabe ist größer als der 'bis'-Wert.";
 var g_mldIpInRange			= "Die IP-Adresse der FRITZ!Box darf nicht im Adressenbereich vom DHCP-Server enthalten sein.";
 var g_mldAtamode			= 'Sie haben "Internetzugang über LAN 1" konfiguriert. In diesem Modus müssen sich alle Computer in einem Netzwerk befinden.';
 var g_mldFullbridge		= "Sie haben den Filter für das DSL-Modem deaktiviert. In diesem Modus müssen sich alle Computer in einem Netzwerk befinden."
-var g_mldWds				= "Sie haben die Unterstützung für WLAN-Repeater (WDS) aktiviert. In diesem Modus müssen sich alle Computer in einem IP-Netzwerk befinden.";
 var g_isFon = "<? echo $var:isFon ?>";
 var g_isWlan = "<? echo $var:isWlan ?>";
 var g_isFBoxSL = "<? echo $var:isFBoxSL ?>";
@@ -96,16 +94,9 @@
 	jslSetSpanText("uiViewPreEndWLAN", HostAdrId("uiPostEndWLAN"));
 	jslSetValue("uiViewEndWLAN", LastByteId("uiPostEndWLAN"));
 	OnDhcp("uiViewDhcpWLAN");
-	UpdateLanBridge();
+	OnChangeLanBridge();
 }
-function OnChangeLanBridge() {
-	if (jslGetChecked("uiViewLanBridge") == false && "<? query wlan:settings/WDS_enabled ?>"=="1") {
-		alert(g_mldWds);
-		jslSetChecked("uiViewLanBridge", true);
-	}
-	UpdateLanBridge();
-}
-function UpdateLanBridge () {
+function OnChangeLanBridge () {
 	var b = <? if eq $var:isDsl 1 'jslGetChecked("uiViewLanBridge")' 'true' ?>;
 	if (!b) {
 		if (isAtamode()) {
@@ -225,18 +216,6 @@
 	pattern.exec(mask);
 	return RegExp.$4 == 0;
 }
-function valIpadrIdTheNet (id) {
-	var addr = jslGetValue(id);
-	var pattern = /^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/;
-	pattern.exec(addr);
-	return RegExp.$4 != 0;
-}
-function valIpadrIdBroadcast (id) {
-	var addr = jslGetValue(id);
-	var pattern = /^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/;
-	pattern.exec(addr);
-	return RegExp.$4 != 255;
-}
 function GetNetBits(addr,mask) {
 	var netstr = IpToBitstring(addr);
 	var maskstr = IpToBitstring(mask);
@@ -275,8 +254,6 @@
 	var AlleImNetz = <? if eq $var:isDsl 1 'jslGetChecked("uiViewLanBridge")' 'true' ?>;
 	if (AlleImNetz == true) {
 		if (valIpadrFormatId("uiViewIpaddr") == false) {alert(g_mldPrefix+g_mldIpAdr+g_mldIpaddrFormatPost); return false;}
-		if (valIpadrIdTheNet("uiViewIpaddr") == false) {alert(g_mldPrefix+g_mldIpAdr+g_mldIpaddrTheNet); return false;}
-		if (valIpadrIdBroadcast("uiViewIpaddr") == false) {alert(g_mldPrefix+g_mldIpAdr+g_mldIpaddrBroadcast); return false;}
 		if (valIpadrFormatId("uiViewNetmask") == false) {alert(g_mldPrefix+g_mldNetMask+g_mldNetmaskPost); return false;}
 		if (valNetmaskId("uiViewNetmask") == false) {alert(jslGetValue("uiViewNetmask")+g_mldNetmaskPost); return false;}
 		if (valNetmaskId_0000("uiViewNetmask") == false) {alert(g_mldNetmask0000); return false;}
@@ -294,8 +271,6 @@
 		}
 	} else {
 		if (valIpadrFormatId("uiViewIpaddrA") == false) {alert(g_mldPrefix+g_mldIpAdr_Lan+g_mldIpaddrFormatPost); return false;}
-		if (valIpadrIdTheNet("uiViewIpaddrA") == false) {alert(g_mldPrefix+g_mldIpAdr_Lan+g_mldIpaddrTheNet); return false;}
-		if (valIpadrIdBroadcast("uiViewIpaddrA") == false) {alert(g_mldPrefix+g_mldIpAdr_Lan+g_mldIpaddrBroadcast); return false;}
 		if (valIpadrFormatId("uiViewNetmaskA") == false) {alert(g_mldPrefix+g_mldNetMask_Lan+g_mldNetmaskPost); return false;}
 		if (valNetmaskId("uiViewNetmaskA") == false) {alert(jslGetValue("uiViewNetmaskA")+g_mldNetmaskPost); return false;}
 		if (valNetmaskId_0000("uiViewNetmaskA") == false) {alert(g_mldNetmask0000); return false;}
@@ -312,14 +287,11 @@
 			if (!valIpRange(adr, start, end)) {alert(g_mldIpInRange); return false;}
 		}
 		if (valIpadrFormatId("uiViewIpaddrWLAN") == false) {alert(g_mldPrefix+g_mldIpAdr_Wlan+g_mldIpaddrFormatPost); return false;}
-		if (valIpadrIdTheNet("uiViewIpaddrWLAN") == false) {alert(g_mldPrefix+g_mldIpAdr_Wlan+g_mldIpaddrTheNet); return false;}
-		if (valIpadrIdBroadcast("uiViewIpaddrWLAN") == false) {alert(g_mldPrefix+g_mldIpAdr_Wlan+g_mldIpaddrBroadcast); return false;}
 		if (valIpadrFormatId("uiViewNetmaskWLAN") == false) {alert(g_mldPrefix+g_mldNetMask_Wlan+g_mldNetmaskPost); return false;}
 		if (valNetmaskId("uiViewNetmaskWLAN") == false) {alert(jslGetValue("uiViewNetmaskWLAN")+g_mldNetmaskPost); return false;}
 		if (valNetmaskId_0000("uiViewNetmaskWLAN") == false) {alert(g_mldNetmask0000); return false;}
 		if (valNetmaskId_24("uiViewNetmaskWLAN") == false) {alert(g_mldNetmask24); return false;}
 		if (jslGetValue("uiViewIpaddrWLAN").substr(0,11)=="192.168.180" && jslGetValue("uiViewNetmaskWLAN")=="255.255.255.0" ) {alert(g_mld192168180); return false;}
-		if (jslGetValue("uiViewIpaddrWLAN").substr(0,11)=="192.168.178") {alert(g_mld192168178); return false;}
 		if (jslGetChecked("uiViewDhcpWLAN")) {
 			var start = jslGetValue("uiViewStartWLAN");
 			var end = jslGetValue("uiViewEndWLAN");
@@ -345,16 +317,7 @@
 	var caps = "<? query sar:settings/encapsulation ?>";
 	return !isAtamode() && caps == "dslencap_pppoe" && type == "bridge";
 }
-function isFullBridge () {
-	var full = "<? query box:settings/fullbridge/activated ?>";
-	return isDslModem() && full == "1";
-}
 function OnDhcp(id) {
-	if (isFullBridge())
-	{
-		jslSetChecked(id, false);
-		jslDisable(id);
-	}
 	var b;
 	switch (id) {
 		case "uiViewDhcp":
--- usr/www/all/html/de/system/net.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/net.js	2007-07-26 15:15:54.000000000 +0200
@@ -22,9 +22,6 @@
 <? if eq `<? query box:settings/ata_mode ?>` 0 `
 		jslSetChecked("uiViewSetTr069", jslGetValue("uiPostSetTr069") == "1");
 		jslDisplay("uiSetTr069", true);
-		jslSetEnabled( "uiViewUpdateTr069", (jslGetValue("uiPostSetTr069") == "1"));
-		jslSetChecked("uiViewUpdateTr069", jslGetValue("uiPostUpdateTr069") == "1");
-		jslDisplay("uiUpdateTr069", true);
 ` ?>
 ' ?>
 		
@@ -41,9 +38,6 @@
 function OnChangeUpnpAktiv() {
 	jslSetEnabled("uiViewUpnpControl", jslGetChecked("uiViewUpnpAktiv"));
 }
-function OnChangeSetTr069() {
-	jslSetEnabled("uiViewUpdateTr069", jslGetChecked("uiViewSetTr069"));
-}
 function uiDoSave() {
 	jslSetValue("uiPostUpnpAktiv", jslGetChecked("uiViewUpnpAktiv") ? "1":"0");
 	if (!isIpClient()) {
@@ -53,10 +47,13 @@
 	
 <? if eq $var:isTr069 1 '
 <? if eq `<? query box:settings/ata_mode ?>` 0 `
-	jslSetValue("uiPostSetTr069", jslGetChecked("uiViewSetTr069") ? "1":"0");
+	var tr069Set = jslGetChecked("uiViewSetTr069") ? "1":"0";
+	if ( tr069Set != jslGetValue("uiPostSetTr069")) {
+		if (!confirm(g_confirmMsgText)) return;
+		jslSetValue("uiPostSetTr069", tr069Set);
 	jslEnable("uiPostSetTr069");
-	jslSetValue("uiPostUpdateTr069", jslGetChecked("uiViewUpdateTr069") ? "1":"0");
-	jslEnable("uiPostUpdateTr069");
+		jslSetValue("uiPostGetPage", "../html/reboot.html");
+	}
 ` ?>
 ' ?>
 	jslFormSubmitEx("system", "net");
@@ -90,8 +87,8 @@
 	} else {
 		params = "var:oneip=0";
 	}
-	var url = "../cgi-bin/webcm?getpage=../html/<?echo $var:lang ?>/system/pp_netipadr.html&var:lang=<?echo $var:lang ?>&"+params;
-	var ppWindow = window.open(url, "zweitfenster", "width=450,height=500,statusbar,resizable=yes");
+	var url = "../cgi-bin/webcm?getpage=../html/<?echo $var:lang ?>/system/pp_netipadr.html&"+params;
+	var ppWindow = window.open(url, "zweitfenster", "width=450,height=400,statusbar,resizable=yes");
 	ppWindow.focus();
 }
 </script>
--- usr/www/all/html/de/system/pp_netipadr.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/pp_netipadr.html	2007-07-26 15:15:54.000000000 +0200
@@ -1,14 +1,28 @@
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"	"http://www.w3.org/TR/html4/loose.dtd">
 <html>
 <? include ../html/config.def ?>
-<? include ../html/$var:lang/system/pp_netipadr.inc ?>
+<? setvariable var:txt00 "IP-Einstellungen" ?>
+<? setvariable var:txt01 "Sie haben die IP-Einstellungen der FRITZ!Box geändert. FRITZ!Box arbeitet jetzt mit der folgenden IP-Adresse:" ?>
+<? setvariable var:txt02 "IP-Adresse:" ?>
+<? setvariable var:txt03 "Subnetzmaske:" ?>
+<? setvariable var:txt04 "DHCP-Server:" ?>
+<? setvariable var:txt05 "Sie haben die IP-Einstellungen der FRITZ!Box geändert. FRITZ!Box arbeitet jetzt mit den folgenden IP-Adressen:" ?>
+<? setvariable var:txt06 "LAN" ?>
+<? setvariable var:txt07 "LAN B" ?>
+<? setvariable var:txt08 "USB" ?>
+<? setvariable var:txt09 "WLAN" ?>
+<? setvariable var:txt10 "Es wird empfohlen, diese Einstellungen auszudrucken." ?>
+<? setvariable var:txt11 "Diese Seite drucken" ?>
+<? setvariable var:txt12 "Fenster schließen" ?>
+<? setvariable var:txt13 "von:" ?>
+<? setvariable var:txt14 "bis:" ?>
 <head>
 <title><? echo $var:txt00 ?></title>
 <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
 <meta http-equiv="expires" content="0">
 <style type="text/css">
 <!-- 
-<? include ../html/$var:lang/css/fb2.css ?>
+<? include ../html/de/css/fb2.css ?>
 .t1 {margin: auto;}
 .t1 td {padding: 2px 5px;}
 .c1 {width: 90px;}
--- usr/www/all/html/de/system/ppSyslog.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/ppSyslog.html	2007-07-26 15:15:54.000000000 +0200
@@ -1,14 +1,17 @@
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"	"http://www.w3.org/TR/html4/loose.dtd">
 <html>
 <? include ../html/config.def ?>
-<? include ../html/$var:lang/system/ppSyslog.inc ?>
+<? setvariable var:txt00 "Ereignisse - Druckansicht" ?>
+<? setvariable var:txt01 "Diese Seite drucken" ?>
+<? setvariable var:txt02 "Fenster schließen" ?>
+<? setvariable var:txt03 "FRITZ!Box Ereignisse, Stand " ?>
 <head>
 <title><? echo $var:txt00 ?></title>
 <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
 <meta http-equiv="expires" content="0">
 <style type="text/css">
 <!--
-<? include ../html/$var:lang/css/fb2.css ?>
+<? include ../html/de/css/fb2.css ?>
 .log {text-indent: -108px; padding-left: 108px; padding-bottom: 5px;}
 @media print {input {display:none;}}
 -->
--- usr/www/all/html/de/system/ppSyslog.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/ppSyslog.inc	1970-01-01 01:00:00.000000000 +0100
@@ -1,5 +0,0 @@
-<? include ../html/$var:lang/global.inc ?>
-<? setvariable var:txt00 "Ereignisse - Druckansicht" ?>
-<? setvariable var:txt01 "Diese Seite drucken" ?>
-<? setvariable var:txt02 "Fenster schließen" ?>
-<? setvariable var:txt03 "FRITZ!Box Ereignisse, Stand " ?>
--- usr/www/all/html/de/system/reset.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/reset.html	2007-07-26 15:15:54.000000000 +0200
@@ -1,4 +1,10 @@
-<? include ../html/$var:lang/system/reset.inc ?>
+<? include ../html/$var:lang/global.inc ?>
+<? setvariable var:txt00 "Zurücksetzen" ?>
+<? setvariable var:txt01 "Klicken Sie hier, wenn Sie $var:BoxName neu starten wollen. Die Ereignisse werden beim Neustart zurückgesetzt. Alle anderen Einstellungen bleiben erhalten." ?>
+<? setvariable var:txt02 "$var:BoxName neu starten" ?>
+<? setvariable var:txt03 "Klicken Sie hier, wenn Sie $var:BoxName neu starten und in den Auslieferungszustand zurücksetzen wollen. Alle individuellen Einstellungen werden gelöscht." ?>
+<? setvariable var:txt04 "Vorsicht! Wenn Sie eine individuelle IP-Konfiguration <? if eq $var:isWlan 1 'oder einen individuellen WLAN-Netzwerkschlüssel ' ?> benutzen, müssen Sie die Netzwerkeinstellungen Ihres Computers anpassen, um nach dem Zurücksetzen wieder auf $var:BoxName zugreifen zu können." ?>
+<? setvariable var:txt05 "$var:BoxName neu starten und Werkseinstellungen laden" ?>
 <div id="content">
  	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
 		<? echo $var:txt00 ?>
@@ -6,8 +12,8 @@
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 		<div id="uiReboot" style="display:none">
 		 	<ul class="tabs">
-		 		<li class="tabs_on"><a href="javascript:Tabs(0)"><? echo $var:txt06 ?></a></li>
-		 		<li><a href="javascript:Tabs(1)"><? echo $var:txt07 ?></a></li>
+		 		<li class="tabs_on"><a href="javascript:Tabs(0)">Neustart</a></li>
+		 		<li><a href="javascript:Tabs(1)">Werkseinstellungen</a></li>
 		 	</ul>
 			<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 				<p class="mb10"><? echo $var:txt01 ?></p>
@@ -19,8 +25,8 @@
 		</div>
 		<div id="uiDefaults" style="display:none">
 		 	<ul class="tabs">
-		 		<li><a href="javascript:Tabs(0)"><? echo $var:txt06 ?></a></li>
-		 		<li class="tabs_on"><a href="javascript:Tabs(1)"><? echo $var:txt07 ?></a></li>
+		 		<li><a href="javascript:Tabs(0)">Neustart</a></li>
+		 		<li class="tabs_on"><a href="javascript:Tabs(1)">Werkseinstellungen</a></li>
 		 	</ul>
 			<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 				<p class="mb5"><? echo $var:txt03 ?></p>
--- usr/www/all/html/de/system/update.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/update.html	2007-07-26 15:15:54.000000000 +0200
@@ -23,7 +23,7 @@
 		<p><? echo $var:txt07 ?></p>
 	</div></div></div></div></div></div>
 	<div class="backdialog" id="uiStatusbar" style="display:none"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog" style="text-align: center; padding: 5px 10px;" >
-		<span id="uiStatus" class="fett">&nbsp;</span>
+		<span id="uiStatus">&nbsp;</span>
 	</div></div></div></div></div></div>
 	<div class="backdialog" id="uiButtonbar"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
 		<input type="button" onclick="uiDoHelp()" value="<? echo $var:txtHelp ?>" class=Pushbutton id="uiHelp">
--- usr/www/all/html/de/system/update.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/update.js	2007-07-26 15:15:54.000000000 +0200
@@ -8,7 +8,6 @@
 	padding: 0px;
 }
 ol li {padding-bottom: 10px;}
-.fett { font-weight:bold; }
 -->
 </style>
 <script type="text/javascript">
@@ -23,10 +22,9 @@
 `?>
 var uiToolsTopLock=false;
 function uiDoOnLoad() {
-	SetSpanText("uiStatus", " ");
+	jslSetValue("uiStatus", "");
 <? if eq $var:OEM freenet `
-	var usePstn = "<? query telcfg:settings/UsePSTN ?>";
-	if (usePstn == "0") alert(g_mldfreenet);
+	alert(g_mldfreenet);
 `?>
 }
 function OnDownload() {
--- usr/www/all/html/de/system/update_OnClick_1.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/update_OnClick_1.html	2007-07-26 15:15:54.000000000 +0200
@@ -36,7 +36,7 @@
 			</form>
 		</div></div></div></div></div></div>
 		<div class="backdialog" id="uiStatusbar" style="display:none"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog" style="text-align: center; padding: 5px 10px;" >
-			<span id="uiStatus" class="fett">&nbsp;</span>
+			<span id="uiStatus">&nbsp;</span>
 		</div></div></div></div></div></div>
 	</div>		
 	<div class="backdialog" id="uiButtonbar"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
--- usr/www/all/html/de/system/update_OnClick_1.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/update_OnClick_1.inc	2007-07-26 15:15:54.000000000 +0200
@@ -6,10 +6,6 @@
 <? setvariable var:txt04 "Hier können Sie eine Firmware-Datei auf die FRITZ!Box übertragen, die sich bereits auf der Festplatte Ihres Computers befindet." ?>
 <? setvariable var:txt05 "Update starten" ?>
 <? setvariable var:txt07 "$var:BoxName wird sich nach dem Firmware-Update neu starten. Alle Verbindungen werden dabei unterbrochen." ?>
-<? setvariable var:txt08 "Die Firmware ist die Software der FRITZ!Box. Sie enthält sämtliche Funktionen für alle Bereiche Ihrer FRITZ!Box." ?>
+<? setvariable var:txt08 "Die Firmware ist die Software der FRITZ!Box. Sie enthält sämtliche Funktionen des DSL-Modems und -Routers, der Telefonie, des WLANs und der Benutzeroberfläche." ?>
 <? setvariable var:txt09 "Automatisches Update" ?>
 <? setvariable var:txt10 "Firmware-Datei" ?>
-<? setvariable var:jstr0 `Die Anlage wird aktualisiert. Bitte warten...` ?>
-<? setvariable var:jstr1 `Keine Datei angegeben !` ?>
-<? setvariable var:jstr2 `Bitte den vollständigen Pfadnamen angeben.` ?>
-<? setvariable var:jstr3 `Wichtiger Hinweis:\x0aSie sind mit einem freenet DSL-Anschluss ohne Verbindung zum Festnetz verbunden. Verwenden Sie für die FRITZ!Box nur Firmware, die von freenet empfohlen wird. Anderenfalls kann die volle Funktionsfähigkeit an diesem Anschluss nicht mehr garantiert werden. Weitere Informationen finden Sie unter www.freenet.de` ?>
--- usr/www/all/html/de/system/update_OnClick_1.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/update_OnClick_1.js	2007-07-26 15:15:54.000000000 +0200
@@ -1,29 +1,26 @@
 <!--		../system/update_OnClick_1.js		-->
-<? include ../html/$var:lang/system/update_OnClick_1.inc ?>
 <style type="text/css">
 <!--
 #content {width: 520px; margin: auto;}
 .ar {text-align: right;}
 .ml20 {margin-left: 20px;}
-.fett { font-weight:bold; }
 -->
 </style>
 <script type="text/javascript">
 <? include ../html/$var:lang/js/jsl.js ?>
-var g_msgTextUpdate		= "<? print $var:jstr0 ?>";
-var g_msgTextNoFile		= "<? print $var:jstr1 ?>";
-var g_ProduktName		= "<? print $var:ProduktName ?>";
-var g_mldPfad			= "<? print $var:jstr2 ?>";
+var g_msgTextUpdate		= "Die Anlage wird aktualisiert. Bitte warten...";
+var g_msgTextNoFile		= "Keine Datei angegeben !";
+var g_ProduktName		= "<? echo $var:ProduktName ?>";
+var g_mldPfad			= "Bitte den vollständigen Pfadnamen angeben.";
 <? if eq $var:OEM freenet `
-var g_mldfreenet			= "Wichtiger Hinweis:\x0aSie sind mit einem freenet DSL-Anschluss ohne Verbindung zum Festnetz verbunden. Verwenden Sie für die FRITZ!Box nur Firmware, die von freenet empfohlen wird. Anderenfalls kann die volle Funktionsfähigkeit an diesem Anschluss nicht mehr garantiert werden. Weitere Informationen finden Sie unter www.freenet.de.";
+var g_mldfreenet			= "Wichtiger Hinweis:\x0aSie sind mit einem freenet DSL-Anschluss ohne Verbindung zum Festnetz verbunden. Verwenden Sie für die FRITZ!Box nur Firmware, die von freenet empfohlen wird. Anderenfalls kann die volle Funktionsfähigkeit an diesem Anschluss nicht mehr garantiert werden. Weitere Informationen finden Sie unter www.freenet.de";
 `?>
-var g_tab = 0;
+var uiToolsTopLock = false;
 function uiDoOnLoad() {
-	SetSpanText("uiStatus", " ");
+	jslSetValue("uiStatus", "");
 	Tabs(0);
 <? if eq $var:OEM freenet `
-	var usePstn = "<? query telcfg:settings/UsePSTN ?>";
-	if (usePstn == "0") alert(g_mldfreenet);
+	alert(g_mldfreenet);
 `?>
 }
 function uiStartFWSearch() {
@@ -46,11 +43,10 @@
 	document.getElementById("uiPostUpdateForm").submit();
 }
 function uiDoHelp() {
-	jslPopHelp(g_tab == 0 ? "hilfe_system_update_automatic":"hilfe_system_update");
+	jslPopHelp("hilfe_system_update");
 }
 function Tabs (n) {
 	jslDisplay("uiUpdate", n==0);
 	jslDisplay("uiManuell", n==1);
-	g_tab = n;
 }
 </script>
--- usr/www/all/html/de/system/update_OnClick_2.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/update_OnClick_2.html	2007-07-26 15:15:54.000000000 +0200
@@ -31,7 +31,7 @@
 		<p class="taR_mt10 mb10"><input id="uiBtn_UpgradeStart" type="button" onclick="uiDoUpdate()" value="<? echo $var:txt07 ?>" class=Pushbutton style="width: 250px"></p>
 	</div></div></div></div></div></div>
 	<div class="backdialog" id="uiStatusbar" style="display:none"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog" style="text-align: center; padding: 5px 10px;" >
-		<span id="uiStatus" class="fett">&nbsp;</span>
+		<span id="uiStatus">&nbsp;</span>
 	</div></div></div></div></div></div>
 	<div class="backdialog" id="uiButtonbar"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
 		&nbsp;<input type="button" onclick="uiDoUpdateManuell()" value="<? echo $var:txt11 ?>" class=Pushbutton id="btnOldUpdate" style="width: 200px; display:none;">
--- usr/www/all/html/de/system/update_OnClick_2.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/system/update_OnClick_2.js	2007-07-26 15:15:54.000000000 +0200
@@ -1,5 +1,4 @@
 <!--		../system/update_OnClick_2.js		-->
-<? include ../html/$var:lang/system/update_OnClick_2.inc ?>
 <style type="text/css">
 <!--
 #content {width: 500px; margin: auto;}
@@ -9,29 +8,28 @@
 #t1 .c2 {width: 270px }
 .mt30 { margin-top: 30px; }
 .mb20 { margin-bottom: 20px; }
-.fett { font-weight:bold; }
 -->
 </style>
 <script type="text/javascript">
 <? include ../html/$var:lang/js/jsl.js ?>
-var g_msgTextUpdate		= "<? print $var:jstr0 ?>";
-var g_msgTextNoFile		= "<? print $var:jstr1 ?>";
+var g_msgTextUpdate		= "Die Anlage wird aktualisiert. Bitte warten...";
+var g_msgTextNoFile		= "Keine Datei angegeben !";
 var g_PicturePath_Success	= "../html/<? echo $var:lang ?>/images/finished-ok-green.gif";
 var g_PicturePath_Failed	= "../html/<? echo $var:lang ?>/images/finished-error.gif";
-var g_WaitText_No_0		= "<? print $var:jstr2 ?>";
-var g_WaitText_No_x		= "<? print $var:jstr3 ?>";
-var g_WaitText_No_10	= "<? print $var:jstr4 ?>";
-var g_stateText_No_0	= "<? print $var:jstr5 ?>";
-var g_stateText_No_1	= "<? print $var:jstr6 ?>";
-var g_stateText_No_2	= "<? print $var:jstr7 ?>";
-var g_stateText_No_3	= "<? print $var:jstr8 ?>";
-var g_stateText_No_4	= "<? print $var:jstr9 ?>";
-var g_stateText_No_5	= "<? print $var:jstr10 ?>";
-var g_stateText_No_6	= "<? print $var:jstr11 ?>";
-var g_stateText_No_7	= "<? print $var:jstr12 ?>";
-var g_stateText_No_8	= "<? print $var:jstr13 ?>";
-var g_stateText_No_9	= "<? print $var:jstr14 ?>";
-var g_stateText_No_10	= "<? print $var:jstr15 ?>";
+var g_WaitText_No_0		= "Es gibt kein neues Firmware-Update, weil keine Suche gestartet wurde.";
+var g_WaitText_No_x		= "Die Suche nach einer neuen Firmware-Version ist fehlgeschlagen.";
+var g_WaitText_No_10	= "Es wurde keine neuere als die bereits installierte Firmware gefunden.";
+var g_stateText_No_0	= "Die Suche nach einer neuen Firmware-Version wurde nicht gestartet.";
+var g_stateText_No_1	= "Bitte haben Sie einen Moment Geduld.";
+var g_stateText_No_2	= "Die Suche nach einer neuen Firmware-Version ist fehlgeschlagen. Grund: Statuscode 2.";
+var g_stateText_No_3	= "Die Suche nach einer neuen Firmware-Version ist fehlgeschlagen. Grund: Statuscode 3.";
+var g_stateText_No_4	= "Die Suche nach einer neuen Firmware-Version ist fehlgeschlagen. Grund: Statuscode 4.";
+var g_stateText_No_5	= "Die Suche nach einer neuen Firmware-Version ist fehlgeschlagen. Grund: Statuscode 5.";
+var g_stateText_No_6	= "Die Suche nach einer neuen Firmware-Version ist fehlgeschlagen. Grund: Statuscode 6.";
+var g_stateText_No_7	= "Die Suche nach einer neuen Firmware-Version ist fehlgeschlagen. Grund: Statuscode 7.";
+var g_stateText_No_8	= "Die Suche nach einer neuen Firmware-Version ist fehlgeschlagen. Grund: Statuscode 8.";
+var g_stateText_No_9	= "Die Suche nach einer neuen Firmware-Version ist fehlgeschlagen. Grund: Statuscode 9.";
+var g_stateText_No_10	= "Es wurde keine neuere als die bereits installierte Firmware gefunden.";
 var g_QueryItems = new Array();
 g_QueryItems[0] = new Item( "<? query updatecheck:status/state ?>", "updatecheck:status/state");
 g_QueryItems[1] = new Item( "<? query updatecheck:status/version ?>", "updatecheck:status/version");
--- usr/www/all/html/de/wlan/common.frm.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/wlan/common.frm	2007-07-26 15:15:54.000000000 +0200
@@ -6,6 +6,4 @@
 <input type="hidden" name="wlan:settings/bg_mode" value="<? query wlan:settings/bg_mode ?>" id="uiPost_Mode">
 <input type="hidden" name="wlan:settings/user_isolation" value="<? query wlan:settings/user_isolation ?>" id="uiPost_UserIsolation">
 <input type="hidden" name="wlan:settings/turbomode" value="<? query wlan:settings/turbomode ?>" id="uiPostTurbo">
-<input type="hidden" name="wlan:settings/wmm_enabled" value="<? query wlan:settings/wmm_enabled ?>" id="uiPostWmm">
-<input type="hidden" name="wlan:settings/IPTVoptimize" value="<? query wlan:settings/IPTVoptimize ?>" id="uiPostIPTV">
 <input type="hidden" name="ctlusb:settings/autoprov_enabled" value="<? query ctlusb:settings/autoprov_enabled ?>" id="uiPostAutoprov">
--- usr/www/all/html/de/wlan/common.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/wlan/common.html	2007-07-26 15:15:54.000000000 +0200
@@ -12,7 +12,7 @@
 			<table>
 				<tr>
 					<td class="c1"><label for="uiView_Channel"><? echo $var:Text4 ?></label></td>
-					<td><select class="Eingabefeld" id="uiView_Channel" onchange="uiSetChannel()">
+					<td><select class="Eingabefeld" id="uiView_Channel">
 						<option value="1"><? echo $var:Text5 ?></option>
 						<option value="2"><? echo $var:Text6 ?></option>
 						<option value="3"><? echo $var:Text7 ?></option>
@@ -33,9 +33,9 @@
 					<td><input type="text" size="33" maxlength="32" class="Eingabefeld" id="uiView_SSID"></td>
 				</tr>
 			</table>
-			<div id="uiViewExpert" style="display:none;">
-				<p class="pCheck25 mb5"><input type="checkbox" id="uiView_ShowSSID">&nbsp;<label for="uiView_ShowSSID"><? echo $var:Text19 ?></label></p>
-				<table class="mt10">
+			<p class="pCheck25"><input type="checkbox" id="uiView_ShowSSID">&nbsp;<label for="uiView_ShowSSID"><? echo $var:Text19 ?></label></p>
+			<div id="uiViewExpert" style="display:none; margin-top: 10px;">
+				<table>
 					<tr>
 						<td class="c1"><label for="uiView_PowerLevel"><? echo $var:Text20 ?></label></td>
 						<td><select class="Eingabefeld" id="uiView_PowerLevel">
@@ -47,8 +47,6 @@
 							</select>
 						</td>
 					</tr>
-				</table>
-				<table class="mt10">
 					<tr>
 						<td class="c1"><label for="uiView_Mode"><? echo $var:Text26 ?></label></td>
 						<td><select class="Eingabefeld" id="uiView_Mode">
@@ -59,12 +57,9 @@
 						</td>
 					</tr>
 				</table>
-				<p class="pCheck25 mb10"><input type="checkbox" id="uiViewTurbo">&nbsp;<label for="uiViewTurbo"><? echo $var:Text31 ?></label></p>
-				<p class="pCheck25"><input type="checkbox" id="uiViewWmm">&nbsp;<label for="uiViewWmm"><? echo $var:Text34 ?></label></p>
-				<p class="pCheck25 mb10"><input type="checkbox" id="uiViewIpTv">&nbsp;<label for="uiViewIpTv"><? echo $var:Text35 ?></label></p>
+				<p class="pCheck25"><input type="checkbox" id="uiViewTurbo">&nbsp;<label for="uiViewTurbo"><? echo $var:Text31 ?></label></p>
 				<p class="pCheck25"><input type="checkbox" id="uiView_UserIsolation">&nbsp;<label for="uiView_UserIsolation"><? echo $var:Text30 ?></label></p>
 			</div>
-			<p class="pCheck25 mt10"><input type="checkbox" id="uiViewAutoprov">&nbsp;<label for="uiViewAutoprov"><? echo $var:Text32 ?></label></p>
 		</div>
 	</div></div></div></div></div></div>
 	<? include ../html/$var:lang/home/rbb_applycancel.html ?>
--- usr/www/all/html/de/wlan/common.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/wlan/common.js	2007-07-26 15:15:54.000000000 +0200
@@ -11,19 +11,6 @@
 <? include ../html/$var:lang/js/jsl.js ?>
 // globals
 var g_expertMode = <? query box:settings/expertmode/activated ?>;
-function uiSetChannel()
-{
- var id = document.getElementById("uiView_Channel");
- if ( id != null )
- {
- var WDS = "<? query wlan:settings/WDS_enabled ?>";
- if( (WDS == "1") && (id.selectedIndex == "0") )
-	{
-	 alert("Wenn der WLAN-Repeater (WDS) aktiviert ist, kann \"WLAN-Autokanal\" nicht ausgewählt werden !"); 
-	 id.selectedIndex = jslGetValue("uiPost_Channel"); // Alter Wert wird beibehalten
-	}
- }
-}
 function uiDoOnLoad() {
 	if (jslGetValue("uiPost_WLANActivated") == "1") {
 		jslSetChecked("uiView_WLANActivated", true);
@@ -34,16 +21,14 @@
 	}
 	jslSetSelection("uiView_Channel", jslGetValue("uiPost_Channel"));
 	jslCopyValue("uiView_SSID", "uiPost_SSID");
+	jslSetChecked("uiView_ShowSSID", jslGetValue("uiPost_HideSSID") == "0");
 	jslSetChecked("uiViewAutoprov", jslGetValue("uiPostAutoprov") == "1");
 	//-- Expert mode ---
 	uiShowExpertMode(g_expertMode);
-	jslSetChecked("uiView_ShowSSID", jslGetValue("uiPost_HideSSID") == "0");
 	jslSetSelection("uiView_PowerLevel", jslGetValue("uiPost_PowerLevel"));
 	jslSetSelection("uiView_Mode", jslGetValue("uiPost_Mode"));
 	jslSetChecked("uiView_UserIsolation", jslGetValue("uiPost_UserIsolation") == "0");
 	jslSetChecked("uiViewTurbo", jslGetValue("uiPostTurbo") == "1");
-	jslSetChecked("uiViewWmm", jslGetValue("uiPostWmm") == "1");
-	jslSetChecked("uiViewIpTv", jslGetValue("uiPostIPTV") == "1");
 }
 function uiOnChangeActivated(idui, idpost) {
 	if (jslGetChecked(idui)) {
@@ -58,16 +43,25 @@
 	uiWLanElementsEnable(uiOnChangeActivated("uiView_WLANActivated", "uiView_WLANActivated"));
 }
 function uiWLanElementsEnable(iActive) {
-	jslSetEnabled("uiView_Channel", iActive == 1);
-	jslSetEnabled("uiView_SSID", iActive == 1);
-	jslSetEnabled("uiView_ShowSSID", iActive == 1);
-	jslSetEnabled("uiView_PowerLevel", iActive == 1);
-	jslSetEnabled("uiView_Mode", iActive == 1);
-	jslSetEnabled("uiView_UserIsolation", iActive == 1);
-	jslSetEnabled("uiViewTurbo", iActive == 1);
-	jslSetEnabled("uiViewWmm", iActive == 1);
-	jslSetEnabled("uiViewIpTv", iActive == 1);
-	jslSetEnabled("uiViewAutoprov", iActive == 1);
+	if (iActive == 1) {
+		jslEnable("uiView_Channel");
+		jslEnable("uiView_SSID");
+		jslEnable("uiView_ShowSSID");
+		jslEnable("uiView_PowerLevel");
+		jslEnable("uiView_Mode");
+		jslEnable("uiView_UserIsolation");
+		jslEnable("uiViewTurbo");
+		jslEnable("uiViewAutoprov");
+	} else {
+		jslDisable("uiView_Channel");
+		jslDisable("uiView_SSID");
+		jslDisable("uiView_ShowSSID");
+		jslDisable("uiView_PowerLevel");
+		jslDisable("uiView_Mode");
+		jslDisable("uiView_UserIsolation");
+		jslDisable("uiViewTurbo");
+		jslDisable("uiViewAutoprov");
+	}
 }
 function uiShowExpertMode(iVisible) {
 	jslDisplay("uiViewExpert", iVisible == 1);
@@ -76,15 +70,13 @@
 	jslSetValue("uiPost_WLANActivated", jslGetChecked("uiView_WLANActivated") ? "1":"0");
 	jslCopyValue("uiPost_Channel", "uiView_Channel");
 	jslCopyValue("uiPost_SSID", "uiView_SSID");
+	jslSetValue("uiPost_HideSSID", jslGetChecked("uiView_ShowSSID") ? "0":"1");
 	jslSetValue("uiPostAutoprov", jslGetChecked("uiViewAutoprov") ? "1":"0");
 	if (g_expertMode == 1) {
-		jslSetValue("uiPost_HideSSID", jslGetChecked("uiView_ShowSSID") ? "0":"1");
 		jslCopyValue("uiPost_PowerLevel", "uiView_PowerLevel");
 		jslCopyValue("uiPost_Mode", "uiView_Mode");
 		jslSetValue("uiPost_UserIsolation", jslGetChecked("uiView_UserIsolation") ? "0":"1");
 		jslSetValue("uiPostTurbo", jslGetChecked("uiViewTurbo") ? "1":"0");
-		jslSetValue("uiPostWmm", jslGetChecked("uiViewWmm") ? "1":"0");
-		jslSetValue("uiPostIPTV", jslGetChecked("uiViewIpTv") ? "1":"0");
 	}
 	jslFormSubmitEx("wlan", "common");
 }
--- usr/www/all/html/de/wlan/encrypt0.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/wlan/encrypt0.html	2007-07-26 15:15:54.000000000 +0200
@@ -6,7 +6,7 @@
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<p style="padding-bottom: 5px;"><? echo $var:Text2 ?></p>
 		<table style="margin:auto">
-			<tr><td><input type="radio" name="Level" id="uiView_SecLevel0" checked>&nbsp;<label for="uiView_SecLevel0"><b><? echo $var:Text3 ?></b></label></td></tr>
+			<tr><td><input type="radio" onclick="uiDoSecLevel(0)" name="Level" id="uiView_SecLevel0" checked>&nbsp;<label for="uiView_SecLevel0"><b><? echo $var:Text3 ?></b></label></td></tr>
 			<tr><td><input type="radio" onclick="uiDoSecLevel(1)" name="Level" id="uiView_SecLevel1">&nbsp;<label for="uiView_SecLevel1"><b><? echo $var:Text4 ?></b></label></td></tr>
 			<tr><td><input type="radio" onclick="uiDoSecLevel(2)" name="Level" id="uiView_SecLevel2">&nbsp;<label for="uiView_SecLevel2"><b><? echo $var:Text5 ?></b></label></td></tr>
 		</table>
--- usr/www/all/html/de/wlan/encrypt0.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/wlan/encrypt0.js	2007-07-26 15:15:54.000000000 +0200
@@ -9,22 +9,26 @@
 <? include ../html/$var:lang/js/jsl.js ?>
 var g_expertMode = <? query box:settings/expertmode/activated ?>;
 function uiDoOnLoad() {
+	jslSetValue("uiPost_Encryption", 0);
 }
 function uiDoSecLevel(iSecLevel) {
+	if (iSecLevel == "2") {
+		var wpaMode = "<? query wlan:settings/encryption ?>";
+		jslGoTo("wlan", wpaMode == "3" ? "encrypt3":"encrypt2");
+	} else {
 	jslGoTo("wlan", "encrypt" + iSecLevel);
+	}
 }
 function uiDoSave() {
-	jslSetValue("uiPost_Encryption", 0);
-	jslFormSubmitEx("wlan", "encrypt0");
+	uiDoSaveGo("encrypt0");
+}
+function uiDoSaveGo(page) {
+	jslSetValue("uiPostMenu" ,"wlan");
+	jslSetValue("uiPostPageName" ,page);
+	jslFormSubmit("uiPostForm");
 }
 function uiDoCancel() {
-	switch ("<? query wlan:settings/encryption ?>") {
-		case "1": jslGoTo("wlan", "encrypt1"); break;
-		case "2": jslGoTo("wlan", "encrypt2"); break;
-		case "3": jslGoTo("wlan", "encrypt2"); break;
-		case "4": jslGoTo("wlan", "encrypt2"); break;
-		default: jslGoTo("wlan", "encrypt0"); break;
-	}
+	jslGoTo("wlan", "encrypt<? query wlan:settings/encryption ?>");
 }
 function uiDoHelp() {
 	jslPopHelp("hilfe_wlan_sicherheit");
--- usr/www/all/html/de/wlan/encrypt1.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/wlan/encrypt1.html	2007-07-26 15:15:54.000000000 +0200
@@ -7,7 +7,7 @@
 		<p style="padding-bottom: 5px;"><? echo $var:Text2 ?></p>
 		<table style="margin:auto">
 			<tr><td><input type="radio" onclick="uiDoSecLevel(0)" name="Level" id="uiView_SecLevel0">&nbsp;<label for="uiView_SecLevel0"><b><? echo $var:Text3 ?></b></label></td></tr>
-			<tr><td><input type="radio" name="Level" id="uiView_SecLevel1" checked>&nbsp;<label for="uiView_SecLevel1"><b><? echo $var:Text4 ?></b></label></td></tr>
+			<tr><td><input type="radio" onclick="uiDoSecLevel(1)" name="Level" id="uiView_SecLevel1" checked>&nbsp;<label for="uiView_SecLevel1"><b><? echo $var:Text4 ?></b></label></td></tr>
 			<tr><td><input type="radio" onclick="uiDoSecLevel(2)" name="Level" id="uiView_SecLevel2">&nbsp;<label for="uiView_SecLevel2"><b><? echo $var:Text5 ?></b></label></td></tr>
 		</table>
 	</div></div></div></div></div></div>
--- usr/www/all/html/de/wlan/encrypt1.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/wlan/encrypt1.js	2007-07-26 15:15:54.000000000 +0200
@@ -28,6 +28,7 @@
 var g_hexlen = 26;		// Länge des verschlüsselten Keys(26/10 Zeichen)
 var g_keylen = 13;		// Länge des Wortes (13/5 Zeichen)
 function uiDoOnLoad() {
+	jslSetValue("uiPost_Encryption", 1);
 	if (g_expertMode == 1) {
 		if (jslGetValue("uiPostWDSAktiv") == "1" && jslGetValue("uiPostWDSLevel") == "1" ) jslDisplay("WdsWep", true);
 		jslDisplay("WEPLen", true);
@@ -55,7 +56,12 @@
 	}
 }
 function uiDoSecLevel(iSecLevel) {
+	if (iSecLevel == "2") {
+		var wpaMode = "<? query wlan:settings/encryption ?>";
+		jslGoTo("wlan", wpaMode == "3" ? "encrypt3":"encrypt2");
+	} else {
 	jslGoTo("wlan", "encrypt" + iSecLevel);
+	}
 }
 function uiDoSetWEPKeyId(value) {
 	jslSetValue("uiPost_WEPKey_Id", value);
@@ -142,7 +148,9 @@
 	ppWindow.focus();
 }
 function uiDoSave() {
-	jslSetValue("uiPost_Encryption", 1);
+	uiDoSaveGo("encrypt1");
+}
+function uiDoSaveGo(page) {
 	if (g_expertMode == 1) {
 		jslCopyValue("uiPost_WEPKey_Value1", "uiView_WEPKey_Value1");
 		jslCopyValue("uiPost_WEPKey_Value2", "uiView_WEPKey_Value2");
@@ -170,16 +178,10 @@
 	}
 	if (uiDoValidateWEPKeys() == false) return;
 	doPopWindow();
-	jslFormSubmitEx("wlan", "encrypt1");
+	jslFormSubmitEx("wlan", page);
 }
 function uiDoCancel() {
-	switch ("<? query wlan:settings/encryption ?>") {
-		case "1": jslGoTo("wlan", "encrypt1"); break;
-		case "2": jslGoTo("wlan", "encrypt2"); break;
-		case "3": jslGoTo("wlan", "encrypt2"); break;
-		case "4": jslGoTo("wlan", "encrypt2"); break;
-		default: jslGoTo("wlan", "encrypt0"); break;
-	}
+	jslGoTo("wlan", "encrypt<? query wlan:settings/encryption ?>");
 }
 function uiDoHelp() {
 	jslPopHelp("hilfe_wlan_wep");
--- usr/www/all/html/de/wlan/encrypt2.frm.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/wlan/encrypt2.frm	2007-07-26 15:15:54.000000000 +0200
@@ -1,6 +1,6 @@
-<input type="hidden" name="var:cryptlevel" value="<? echo $var:cryptlevel ?>" id="uiPostLevel">
 <!-- Refresh variables of encrypt2 begin-->
 <input type="hidden" name="wlan:settings/encryption" value="<? query wlan:settings/encryption ?>" id="uiPost_Encryption"> 
 <input type="hidden" name="wlan:settings/pskvalue" value="<? query wlan:settings/pskvalue ?>" id="uiPost_WPA_Value">
 <input type="hidden" name="wlan:settings/psktype" value="<? query wlan:settings/psktype ?>" id="uiPost_WPA_Type">
+<input type="hidden" name="wlan:settings/interval" value="<? query wlan:settings/interval ?>" id="uiPost_WPA_Interval">
 <!-- Refresh encrypt2 End -->
--- usr/www/all/html/de/wlan/encrypt2.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/wlan/encrypt2.html	2007-07-26 15:15:54.000000000 +0200
@@ -20,10 +20,9 @@
 			<tr>
 				<td class="c1"><label for="uiViewWPAType"><b><? echo $var:Text11 ?></b></label></td>
 				<td class="c1">
-					<select class="Eingabefeld" id="uiViewWPAType">
+					<select class="Eingabefeld" id="uiViewWPAType" onchange="uiDoSecLevel(value)">
 						<option value="2"><? echo $var:Text12 ?></option>
 						<option value="3"><? echo $var:Text13 ?></option>
-						<option value="4"><? echo $var:Text14 ?></option>
 					</select>
 				</td>
 			</tr>
@@ -31,6 +30,10 @@
 				<td class="c1"><label for="uiView_WPA_Value"><b><? echo $var:Text8 ?></b></label></td>
 				<td class="c1"><input type="text" size="40" maxlength="63" class="Eingabefeld" id="uiView_WPA_Value"></td>
 			</tr>
+			<tr id="uiView_Table_Body_User_Expert" style="display:none">
+				<td class="c1"><label for="uiView_WPA_Interval"><b><? echo $var:Text9 ?></b></label></td>
+				<td class="c1"><input type="text" size="15" maxlength="12" class="Eingabefeld" id="uiView_WPA_Interval"><? echo $var:Text10 ?></td>
+			</tr>
 		</table>
 	</div></div></div></div></div></div>
 	<? include ../html/$var:lang/home/rbb_applycancel.html ?>
--- usr/www/all/html/de/wlan/encrypt2.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/wlan/encrypt2.inc	2007-07-26 15:15:54.000000000 +0200
@@ -10,6 +10,5 @@
 <? setvariable var:Text9 'Group Key Intervall' ?>
 <? setvariable var:Text10 ' Sekunden' ?>
 <? setvariable var:Text11 'WPA Modus' ?>
-<? setvariable var:Text12 'WPA (TKIP)' ?>
-<? setvariable var:Text13 'WPA2 (CCMP)' ?>
-<? setvariable var:Text14 'WPA + WPA2' ?>
+<? setvariable var:Text12 'TKIP (WPA)' ?>
+<? setvariable var:Text13 'AES (WPA2)' ?>
--- usr/www/all/html/de/wlan/encrypt2.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/wlan/encrypt2.js	2007-07-26 15:15:54.000000000 +0200
@@ -13,8 +13,10 @@
 var g_mldIllegalChar = "Der WPA-Netzwerkschlüssel enthält unzulässige Zeichen. Die Online-Hilfe enthält eine Liste aller für den WPA-Netzwerkschlüssel gültigen Zeichen.";
 var g_expertMode = <? query box:settings/expertmode/activated ?>;
 function uiDoOnLoad() {
+	jslSetValue("uiPost_Encryption", 2);
 	jslCopyValue("uiView_WPA_Value", "uiPost_WPA_Value");
-	jslSetSelection("uiViewWPAType", jslGetValue("uiPost_Encryption"));
+	jslCopyValue("uiView_WPA_Interval", "uiPost_WPA_Interval");
+	jslSetSelection("uiViewWPAType", "2");
 	uiShowExpertMode(g_expertMode);
 }
 function uiShowExpertMode(iVisible) {
@@ -36,26 +38,33 @@
 	}
 	return true;
 }
+function uiDoValidateWPAInterval(id) {
+	if (valIsZahlVorhanden(jslGetValue(id)) == false) {alert(g_mldInterval); return false;}
+	return true;
+}
 function uiDoValidateWPAKeys() {
 	if (uiDoValidateWPAKey("uiView_WPA_Value") == false) return false;
+	if (g_expertMode == 1) {
+		if (uiDoValidateWPAInterval("uiView_WPA_Interval") == false) return false;
+	}
 	return true;
 }
 function uiDoSave() {
+	uiDoSaveGo("encrypt2");
+}
+function uiDoSaveGo(page)
+{
 	if (uiDoValidateWPAKeys() == true) {
-		jslCopyValue("uiPost_Encryption", "uiViewWPAType");
 		jslCopyValue("uiPost_WPA_Value", "uiView_WPA_Value");
+		jslCopyValue("uiPost_WPA_Interval", "uiView_WPA_Interval");
 		doPopWindow();
-		jslFormSubmitEx("wlan", "encrypt2");
+		jslSetValue("uiPostMenu", "wlan");
+		jslSetValue("uiPostPageName", page);
+		jslFormSubmit("uiPostForm");
 	}
 }
 function uiDoCancel() {
-	switch ("<? query wlan:settings/encryption ?>") {
-		case "1": jslGoTo("wlan", "encrypt1"); break;
-		case "2": jslGoTo("wlan", "encrypt2"); break;
-		case "3": jslGoTo("wlan", "encrypt2"); break;
-		case "4": jslGoTo("wlan", "encrypt2"); break;
-		default: jslGoTo("wlan", "encrypt0"); break;
-	}
+	jslGoTo("wlan", "encrypt<? query wlan:settings/encryption ?>");
 }
 function uiDoHelp() {
 	jslPopHelp("hilfe_wlan_wpa");
@@ -65,7 +74,7 @@
 	var hexkey2 = "";
 	var hexkey3 = "";
 	var hexkey4 = "";
-	var url = "../cgi-bin/webcm?getpage=../html/<? echo $var:lang ?>/wlan/ppEncryption.html&var:lang=<? echo $var:lang ?>&var:encryption="+jslGetValue('uiPost_Encryption')+"&var:wlankey="+PasswortToXCode(jslGetValue('uiPost_WPA_Value'));
+	var url = "../cgi-bin/webcm?getpage=../html/<? echo $var:lang ?>/wlan/ppEncryption.html&var:lang=<? echo $var:lang ?>&var:encryption=2&var:wlankey="+PasswortToXCode(jslGetValue('uiPost_WPA_Value'));
 	url += "&var:hexkey1="+hexkey1+"&var:hexkey2="+hexkey2+"&var:hexkey3="+hexkey3+"&var:hexkey4="+hexkey4;
 	var ppWindow = window.open(url, "Zweitfenster", "width=520,height=375,statusbar,resizable=yes");
 	ppWindow.focus();
--- usr/www/all/html/de/wlan/encrypt3.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/wlan/encrypt3.inc	2007-07-26 15:15:54.000000000 +0200
@@ -10,6 +10,5 @@
 <? setvariable var:Text9 'Group Key Intervall' ?>
 <? setvariable var:Text10 ' Sekunden' ?>
 <? setvariable var:Text11 'WPA Modus' ?>
-<? setvariable var:Text12 'WPA (TKIP)' ?>
-<? setvariable var:Text13 'WPA2 (CCMP)' ?>
-<? setvariable var:Text14 'WPA + WPA2' ?>
+<? setvariable var:Text12 'TKIP (WPA)' ?>
+<? setvariable var:Text13 'AES (WPA2)' ?>
--- usr/www/all/html/de/wlan/mac.frm.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/wlan/mac.frm	2007-07-26 15:15:54.000000000 +0200
@@ -1 +1,2 @@
-<? include ../html/$var:lang/system/mac.frm ?>
+<input type="hidden" name="wlan:settings/wmac_add" value="<? query wlan:settings/wmac_add ?>" id="uiPostMac">
+<input type="hidden" name="wlan:settings/is_macfilter_active" value="<? query wlan:settings/is_macfilter_active ?>" id="uiPostMacFilter">
--- usr/www/all/html/de/wlan/mac.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/wlan/mac.html	2007-07-26 15:15:54.000000000 +0200
@@ -1 +1,16 @@
-<? include ../html/$var:lang/system/mac.html ?>
+<? include ../html/$var:lang/wlan/mac.inc ?>
+<div id="content">
+ 	<div class="backtitel"><div class="rundrt"><div class="rundlt"><div class="ecklb"><div class="eckrb"><div class="foretitel">
+		MAC-Adresse hinzufügen
+	</div></div></div></div></div></div>
+	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<p class="mb5">MAC-Adresse des WLAN-Netzwerkgerätes</p>
+		<p class="ac"><input type="text" id="uiViewMac0" class="Eingabefeld" size="3" maxlength="2"> :
+		<input type="text" id="uiViewMac1" class="Eingabefeld" size="3" maxlength="2"> :
+		<input type="text" id="uiViewMac2" class="Eingabefeld" size="3" maxlength="2"> :
+		<input type="text" id="uiViewMac3" class="Eingabefeld" size="3" maxlength="2"> :
+		<input type="text" id="uiViewMac4" class="Eingabefeld" size="3" maxlength="2"> :
+		<input type="text" id="uiViewMac5" class="Eingabefeld" size="3" maxlength="2"></p>
+	</div></div></div></div></div></div>
+	<? include ../html/$var:lang/home/rbb_applycancel.html ?>
+</div>
--- usr/www/all/html/de/wlan/mac.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/wlan/mac.js	2007-07-26 15:15:54.000000000 +0200
@@ -1 +1,42 @@
-<? include ../html/$var:lang/system/mac.js ?>
+<!--		../wlan/mac.js		-->
+<style type="text/css">
+<!--
+#content {width: 520px; margin: auto;}
+.ac {text-align:center;}
+-->
+</style>
+<script type="text/javascript">
+<? include ../html/$var:lang/js/val.js ?>
+<? include ../html/$var:lang/js/jsl.js ?>
+// globals
+var g_mldMacPart	= "Alle Felder der Mac-Adresse müssen genau zwei Zeichen (Ziffern oder die Buchstaben A-F) enthalten.";
+var g_mldWlan 	= "Die neuen Einstellungen für die WLAN-Zugangsbeschränkung werden übernommen. Alle aktiven WLAN-Verbindungen werden nun kurz unterbrochen.";
+function uiDoOnLoad() {
+	var mac = jslGetValue("uiPostMac");
+	if (mac.length==17) {
+		for (i=0; i<6; i++) jslSetValue("uiViewMac"+i, mac.substr(i*3,2));
+	}
+}
+function uiDoSave() {
+	for (i=0; i<6; i++) {
+		var part = jslGetValue("uiViewMac"+i);
+		if (!part.match(/^[\dA-F]{2}$/i)) {alert(g_mldMacPart); document.getElementById("uiViewMac"+i).focus();	return false;}
+	}
+	var mac = "";
+	for (i=0; i<6; i++) {
+		mac += jslGetValue("uiViewMac"+i)+((i<5) ? ":" : "");
+	}
+	if (mac == "00:00:00:00:00:00") {alert("Mac-Adresse 00:00:00:00:00:00 ist ungültig."); return false;}
+	if (mac.toUpperCase() == "FF:FF:FF:FF:FF:FF") {alert("Mac-Adresse FF:FF:FF:FF:FF:FF ist ungültig."); return false;}
+	jslSetValue("uiPostMac", mac);
+	alert(g_mldWlan);	
+	jslSetValue("uiPostMacFilter", "1");
+	jslFormSubmitEx("wlan", "monitor", "mac");
+}
+function uiDoCancel() {
+	jslGoTo("wlan", "monitor");
+}
+function uiDoHelp() {
+	jslPopHelp("hilfe_wlan_monitor");
+}
+</script>
--- usr/www/all/html/de/wlan/monitor.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/wlan/monitor.html	2007-07-26 15:15:54.000000000 +0200
@@ -10,21 +10,22 @@
 				<th class="c2"><? echo $var:Text2 ?></th>
 				<th class="c3"><p><? echo $var:Text3 ?></p><p><? echo $var:Text4 ?></p></th>
 				<th class="c4"><p><? echo $var:Text6 ?></p><p><? echo $var:Text19 ?></p></th>
-				<th class="c5"><p><? echo $var:Text7 ?></p><p><? echo $var:Text22 ?></p></th>
+				<th class="c5"><? echo $var:Text7 ?></th>
 				<th class="c6"></th>
 			</tr>
-<? multiquery wlan:settings/wlanlist/list(hostname,ip,mac,state,speed,is_turbo,quality,cipher,powersave,wmm_active) `
+<? multiquery wlan:settings/wlanlist/list(hostname,ip,mac,state,speed,is_turbo,quality) `
 			<tr>
 				<!-- "$0" / "$1" -->
 				<td class="c1"><script type="text/javascript">document.write(uiAktivLed("$5", "$2"));</script></td>
 				<td class="c2"><span title="$2">$2</span></td>
 				<td class="c3"><p>$3</p><p><script type="text/javascript">document.write(uiMac("$4"));</script></p></td>
 				<td class="c4"><p><script type="text/javascript">document.write(uiSpeed("$6", "$7"));</script></p><p><script type="text/javascript">document.write(uiQuality("$8"));</script></p></td>
-				<td class="c5"><p><script type="text/javascript">document.write(uiEncryptState("$5","$9","$b"));</script></p><script type="text/javascript">document.write(uiPowerSave("$5","$a"));</script></p></td>
-				<td class="c6"><button type="button" id="uiViewDelete$1" onClick="uiDoDelete('$1')" value="$var:Text11" title="<? echo $var:txtIconBtnDelete ?>" style="width:30px; display:none"><img src="../html/$var:lang/images/loeschen.gif" align=bottom width=16 height=16 hspace=4></button></td>
+				<td class="c5"><script type="text/javascript">document.write(uiState("$5"));</script></td>
+				<td class="c6"><button type="button" id="uiViewDelete$1" onClick="uiDoDelete('$1')" value="$var:Text11" title="$var:Text11" style="width:30px; display:none"><img src="../html/$var:lang/images/loeschen.gif" align=bottom width=16 height=16 hspace=4></button></td>
 			</tr>
 ` ?>
 		</table>
+		<p class="ar mt10" id="uiNewMac" style="display:none"><input type="button" id="uiMac" onclick="uiDoMac()" value="<? echo $var:Text21 ?>"></p>
 	</div></div></div></div></div></div>
 	<div class="backdialog" id="uiMyMac" style="display:none"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 		<p><? echo $var:Text20 ?><? query wlan:settings/my_wlanmac ?></p>
@@ -33,7 +34,10 @@
 		<p style="font-weight: bold" class="mb5"><? echo $var:Text12 ?></p>
 		<p class="ml25"><input type="radio" name="macfilter" id="uiViewOpen" onclick="OnChangeMacFilter(0)">&nbsp;<label for="uiViewOpen"><? echo $var:Text13 ?></label></p>
 		<p class="ml25"><input type="radio" name="macfilter" id="uiViewClose" onclick="OnChangeMacFilter(1)">&nbsp;<label for="uiViewClose"><? echo $var:Text14 ?></label></p>
-		<p class="ar mt10" id="uiNewMac" style="display:none"><input type="button" id="uiMac" onclick="uiDoMac()" value="<? echo $var:Text21 ?>"></p>
+	</div></div></div></div></div></div>
+	<div class="backdialog" id="uiDetails" style="display:none"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
+		<p style="float: left;"><? echo $var:Text15 ?></p>
+		<p style="text-align:right"><input type="button" onclick="uiDoDetails()" value="<? echo $var:Text16 ?>" class="Pushbutton"></p>
 	</div></div></div></div></div></div>
 	<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="forebuttons">
 		<input type="button" onclick="uiDoSave()" value="<? echo $var:txtApply ?>" class="Pushbutton">
--- usr/www/all/html/de/wlan/monitor.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/wlan/monitor.inc	2007-07-26 15:15:54.000000000 +0200
@@ -5,7 +5,7 @@
 <? setvariable var:Text4 'MAC-Adresse' ?>
 <? setvariable var:Text5 'Aktiv' ?>
 <? setvariable var:Text6 'Geschwindigkeit' ?>
-<? setvariable var:Text7 'Verbindungs-' ?>
+<? setvariable var:Text7 'Zustand' ?>
 <? setvariable var:Text8 'WXP_Kandidate_mit_langer_Bezeichnung' ?>
 <? setvariable var:Text9 '192.168.178.24' ?>
 <? setvariable var:Text10 '00:0c:6e:40:92:b2' ?>
@@ -20,8 +20,3 @@
 <? setvariable var:Text19 'Qualität' ?>
 <? setvariable var:Text20 'Eigene WLAN-MAC-Adresse dieser FRITZ!Box: ' ?>
 <? setvariable var:Text21 'Neues WLAN-Netzwerkgerät' ?>
-<? setvariable var:Text22 'eigenschaften' ?>
-<? setvariable var:Text23 'AVM WLAN-Eco-Modus' ?>
-<? setvariable var:Text24 'Wenn WLAN nicht genutzt wird, verringert der AVM WLAN-Eco-Modus die Energieaufnahme von FRITZ!Box.' ?>
-<? setvariable var:Text25 'Status: ' ?>
-<? setvariable var:Text26 'aktueller WLAN - Energieverbrauch' ?>
--- usr/www/all/html/de/wlan/monitor.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/wlan/monitor.js	2007-07-26 15:15:54.000000000 +0200
@@ -1,38 +1,19 @@
 <!--		../wlan/monitor.js		-->
 <style type="text/css">
 <!--
-#tBalken {margin: 0px;}
-#tBalken td {padding: 1px;}
-.bar {
-	width: 406px;
-	background-position: center;
-	background-image: url(../html/<? echo $var:lang ?>/images/progress_back_2.gif);
-	background-repeat: no-repeat;
-	vertical-align: middle;
-}
-#tBalken .s1 {text-align: right; width:35px;}
-#tBalken .s2 {text-align: left; width:40px;}
 #content {width: 580px; margin: auto;}
 #tWlan {width: 100%; table-layout: fixed; font-size: 12px; }
 #tWlan td, #tWlan th {padding: 2px 2px; vertical-align:top; overflow: hidden}
 #tWlan p {font-size: 12px;}
-#tWlan .c1 {text-align: center; width:28px;}
+#tWlan .c1 {text-align: center; width:30px;}
 #tWlan .c2 {}
-#tWlan .c3 {width:116px;}
-#tWlan .c4 {text-align: right; width:105px;}
-#tWlan .c5 {text-align: right; width:130px;}
-#tWlan .c6 {text-align: right; width:32px;}
-#tChannels {margin-left:25px;}
-#tChannels td {padding: 0px; margin: 0px;}
+#tWlan .c3 {width:110px;}
+#tWlan .c4 {text-align: right; width:100px;}
+#tWlan .c5 {text-align: right; width:70px;}
+#tWlan .c6 {text-align: right; width:30px;}
 .ml25 {margin-left: 25px;}
 .mt10 {margin-top: 10px;}
 .ar {text-align: right;}
-#t1Channels1350TNET {
- width: 559px;
- background-position: center center;
- background-image:url(../html/<? echo $var:lang ?>/images/graphdarst-wlanumgebung.gif); 
-	 background-repeat: no-repeat;		 
-				 }
 -->
 </style>
 <script type="text/javascript">
@@ -50,44 +31,30 @@
 var g_txtState4 = "Einbuchen";
 var g_txtState5 = "Verbunden";
 var g_txtState6 = "Abmelden";
-var g_txt_U_APSD_State_0 = " ";
-var g_txt_U_APSD_State_1 = "WMM Power Save";
-var g_txt_Wlan_Eco_State_0 = "WLAN ist nicht aktiviert";
-var g_txt_Wlan_Eco_State_1 = "AVM WLAN-Eco-Modus ist aktiv, keine WLAN-Station angemeldet";
-var g_txt_Wlan_Eco_State_2 = "WLAN ist aktiv, 1 WLAN-Station ist angemeldet";
-var g_txt_Wlan_Eco_State_2x = "WLAN ist aktiv, %1 WLAN-Stationen sind angemeldet";
-var g_txt_Wlan_Cipher_State_0 = "unverschlüsselt";
-var g_txt_Wlan_Cipher_State_1 = "WPA";
-var g_txt_Wlan_Cipher_State_2 = "WEP";
-var g_txt_Wlan_Cipher_State_3 = "WPA2";
-var g_Wlan_Kanal = "<? query wlan:settings/channel ?>";
 function uiDoOnLoad() {
 	var n = jslGetValue("uiPostMacFilter");
 	jslSetChecked("uiViewOpen", n != "1");
 	jslSetChecked("uiViewClose", n == "1");
 	jslSetEnabled("uiMac", n=="1");
 	jslZebrastreifen("tWlan");
-	
 	if (jslGetChecked("uiViewClose")) {
-<? multiquery wlan:settings/wlanlist/list(is_repeater) `
-		if ( "$2" != "1") {
+<? multiquery wlan:settings/wlanlist/list `
 			jslDisplay("uiViewDelete$1", true);
-		}
 ` ?>
 	}
 	if (g_expertMode == "1") {
 		jslDisplay("uiNewMac", true);
 		jslDisplay("uiMyMac", true);
 		jslDisplay("uiFilter", true);
+		jslDisplay("uiDetails", true);
 	}
 }
 function OnChangeMacFilter (n) {
 	jslSetChecked("uiViewOpen", n== 0);
 	jslSetChecked("uiViewClose", n== 1);
 	jslSetEnabled("uiMac", n==1);
-	if (n == 1 && <? query wlan:settings/wlanlist/count ?> <= 0) {
+	if (n == 1 && <? multiquerycount wlan:settings/wlanlist/list ?> <= 0) {
 		alert(g_mldClose);
-		jslSetValue("uiPostPageMaster", "monitor");
 		jslFormSubmitEx("wlan", "mac");
 	}
 }
@@ -109,35 +76,6 @@
 	}
 	return state;
 }
-function uiEncryptState (state, encrpState, isQoS){
-	if ( state != "5") return "";
-	var l_txtQoS = "";
-	if ( isQoS == "1") l_txtQoS = ", WMM";
-	switch (encrpState) {
-		case "0": return g_txt_Wlan_Cipher_State_0 + l_txtQoS;
-		case "1": return g_txt_Wlan_Cipher_State_1 + l_txtQoS;
-		case "2": return g_txt_Wlan_Cipher_State_2 + l_txtQoS;
-		case "3": return g_txt_Wlan_Cipher_State_3 + l_txtQoS;
-	}
-	return encrpState + l_txtQoS;
-}
-function uiPowerSave (state, powerState){
-	if ( state != "5") return "";
-	switch (powerState) {
-		case "0": return g_txt_U_APSD_State_0;
-		case "1": return g_txt_U_APSD_State_1;
-	}
-	return powerState;
-}
-function uiEcoState (state) {
-	var n = "<? query wlan:settings/active_stations ?>";
-	switch (state) {
-		case "0": return g_txt_Wlan_Eco_State_0;
-		case "1": return g_txt_Wlan_Eco_State_1;
-		case "2": return n=="1" ? g_txt_Wlan_Eco_State_2 : jslPrintf1(g_txt_Wlan_Eco_State_2x, n);
-	}
-	return state;
-}
 function uiAktivLed (state, name) {
 	if (g_WdsAktiv == "1" && g_WdsEncryption != "2" && g_WdsEncryption != "3" && (name.indexOf("Repeater")==0 || name.indexOf("Basisstation")==0)) return ""
 	if (state == "5") return "<img src=\"../html/<? echo $var:lang ?>/images/led_green.gif\">";
@@ -162,8 +100,11 @@
 function uiDoHelp() {
 	jslPopHelp("hilfe_wlan_monitor");
 }
+function uiDoDetails() {
+	jslGoTo("wlan","details");
+}
 function uiDoDelete (n) {
-	if (<? query wlan:settings/wlanlist/count ?> <= 1) {
+	if (<? multiquerycount wlan:settings/wlanlist/list ?> <= 1) {
 		alert(g_mldLastWlan); return;
 	}
 	alert(g_mldWlan);
@@ -180,7 +121,6 @@
 	jslFormSubmit("uiPostForm");
 }
 function uiDoMac () {
-	jslSetValue("uiPostPageMaster", "monitor");
-	jslFormSubmitEx(jslGetValue("uiPostMenu"), "mac");
+	jslGoTo("wlan", "mac");
 }
 </script>
--- usr/www/all/html/de/wlan/ppEncryption.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/wlan/ppEncryption.html	2007-07-26 15:15:54.000000000 +0200
@@ -34,7 +34,7 @@
 			jslSetSpanText("Key", FormatKey(ShiftBlanks(XCodeToPasswort("<? echo $var:wlankey ?>"))));
 			document.getElementById("HexkeyNormal").style.display="";
 		}
-	} else if ((encryption == "2")||(encryption == "3")||(encryption == "4")){
+	} else if ((encryption == "2")||(encryption == "3")){
 		document.getElementById("Asciikey").style.display="";
 		jslSetSpanText("Key", FormatKey(ShiftBlanks(XCodeToPasswort("<? echo $var:wlankey ?>"))));
 	}
@@ -82,7 +82,6 @@
 ` ?>
 <? if eq $var:encryption 2 `<? setvariable var:crypt 'WPA' ?>` ?>
 <? if eq $var:encryption 3 `<? setvariable var:crypt 'WPA2' ?>` ?>
-<? if eq $var:encryption 4 `<? setvariable var:crypt 'WPA + WPA2' ?>` ?>
 				<tr>
 					<td class="c1"><? echo $var:Text5 ?></td>
 					<td class="c2"><? echo $var:crypt ?></td>
@@ -101,7 +100,6 @@
 <? if eq `$var:shared` `1` `<? setvariable var:authentication '$var:Text27' ?>` ?>
 <? if eq `$var:encryption` `2` `<? setvariable var:authentication '$var:Text12' ?>` ?>
 <? if eq `$var:encryption` `3` `<? setvariable var:authentication '$var:Text26' ?>` ?>
-<? if eq `$var:encryption` `4` `<? setvariable var:authentication '$var:Text12, $var:Text26' ?>` ?>
 					<td class="c2"><? echo $var:authentication ?></td>
 				</tr>
 <? if eq $var:encryption 2 `
--- usr/www/all/html/de/wlan/ppWds.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/wlan/ppWds.html	2007-07-26 15:15:54.000000000 +0200
@@ -13,8 +13,8 @@
 <style type="text/css">
 <!-- 
 #t1, #t2 {margin:auto;}
-.c1 {width: 190px; text-align: left; padding: 2px;}
-.c2 {width: 270px; padding: 2px;}
+.c1 {width: 180px; text-align: left; padding: 2px;}
+.c2 {width: 280px; padding: 2px;}
 .mb20 	{ margin-bottom: 20px; }
 @media print {input {display:none;}}
  -->
@@ -107,14 +107,14 @@
 			 </table>
 		</div>
 		<div class="mb20" id="uiRepeater" style="display:none">
-			<p class="mb10"><b><? echo $var:Text29 ?></b><? echo $var:Text30 ?></p>
+			<p class="mb10"><b>Diese</b> FRITZ!Box ist ab sofort unter der folgenden IP-Adresse erreichbar.</p>
 			<table id="t2" class="tborder">
 				<tr>
-					<td class="c1"><? echo $var:Text31 ?></td>
+					<td class="c1">IP-Adresse:</td>
 					<td class="c2"><? echo $var:wdsipadr ?></td>
 				</tr>
 				<tr>
-					<td class="c1"><? echo $var:Text32 ?></td>
+					<td class="c1">Subnetzmaske:</td>
 					<td class="c2"><? echo $var:wdsnetmask ?></td>
 				</tr>
 			 </table>
--- usr/www/all/html/de/wlan/ppWds.inc.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/wlan/ppWds.inc	2007-07-26 15:15:54.000000000 +0200
@@ -30,13 +30,5 @@
 <? setvariable var:Text24 'Fenster schließen' ?>
 <? setvariable var:Text25 'AES' ?>
 <? setvariable var:Text26 'WPA2-PSK' ?>
-<? if eq $var:wdsmode 0 `
-<? setvariable var:Text27 'MAC-Adresse der Basisstation:' ?>
-` `
-<? setvariable var:Text27 'MAC-Adresse des Repeaters:' ?>
-` ?>
+<? setvariable var:Text27 'Mac-Adresse des Repeaters:' ?>
 <? setvariable var:Text28 'Kanal:' ?>
-<? setvariable var:Text29 'Diese' ?>
-<? setvariable var:Text30 ' FRITZ!Box ist ab sofort unter der folgenden IP-Adresse erreichbar.' ?>
-<? setvariable var:Text31 'IP-Adresse:' ?>
-<? setvariable var:Text32 'Subnetzmaske:' ?>
--- usr/www/all/html/de/wlan/wds.frm.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/wlan/wds.frm	2007-07-26 15:15:54.000000000 +0200
@@ -11,7 +11,6 @@
 <input type="hidden" name="wlan:settings/key_value0" value="<? query wlan:settings/key_value0 ?>" id="uiPostWepValue1" disabled>
 <input type="hidden" name="wlan:settings/key_len0" value="<? query wlan:settings/key_len0 ?>" id="uiPostWepLen1" disabled>
 <input type="hidden" name="wlan:settings/night_time_control_enabled" value="<? query wlan:settings/night_time_control_enabled ?>" id="uiPostNachtWlan" disabled>
-<input type="hidden" name="wlan:settings/night_time_control_no_forced_off" value="<? query wlan:settings/night_time_control_no_forced_off" ?>" id="uiPostWlanForcedOff" disabled>
 <input type="hidden" name="wlan:settings/encryption" value="<? query wlan:settings/encryption ?>" id="uiPost_Encryption" disabled>
 <input type="hidden" name="connection0:settings/type" value="<? query connection0:settings/type ?>" id="uiPostType" disabled>
 <input type="hidden" name="var:activtype" value="<? echo $var:activtype?>" id="uiPostActivType" disabled>
--- usr/www/all/html/de/wlan/wds.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/wlan/wds.html	2007-07-26 15:15:54.000000000 +0200
@@ -6,12 +6,11 @@
 	<div class="backframe"><div class="ecklm"><div class="eckrm"><div class="rundrb"><div class="rundlb"><div class="foredialog"><div class="ie_b10">
 	 	<div id="uiRepeater" style="display:none">
 		 	<ul class="tabs">
-		 		<li class="tabs_on"><a href="javascript:Tabs(0)"><? echo $var:Text3 ?></a></li>
-		 		<li><a href="javascript:Tabs(1)"><? echo $var:Text45 ?></a></li>
+		 		<li class="tabs_on"><a href="javascript:Tabs(0)">Betriebsart</a></li>
+		 		<li><a href="javascript:Tabs(1)">Sicherheit</a></li>
 		 	</ul>
 			<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-				<p id="uiViewChangeWDS" ><input type="checkbox" onclick="uiOnChangeWDS()" id="uiViewWDS">&nbsp;<label for="uiViewWDS"><? echo $var:Text2 ?></label></p>
-				<script type="text/javascript">document.write(doEnableWDS());</script>
+				<p><input type="checkbox" onclick="uiOnChangeWDS()" id="uiViewWDS">&nbsp;<label for="uiViewWDS"><? echo $var:Text2 ?></label></p>
 			</div></div></div></div></div></div>
 			<div class="backtitel"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foretitel">
 				<? echo $var:Text3 ?>
@@ -40,26 +39,26 @@
 				</div>
 			</div></div></div></div></div></div>
 			<div class="backdialog" id="uiWanIp" style="display:none"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
-				<p class="mb10"><? echo $var:Text48 ?></p>
+				<p class="mb10">IP-Einstellungen für den Repeaterbetrieb</p>
 				<table id="tWanIp" style="margin:auto">
 					<tr>
-						<td><label for="uiViewWanIpIpaddr"><? echo $var:Text49 ?></label></td>
+						<td><label for="uiViewWanIpIpaddr">IP-Adresse</label></td>
 						<td><input type="text" size="16" maxlength="15" id="uiViewWanIpIpaddr"></td>
 					</tr>
 					<tr>
-						<td><label for="uiViewWanIpNetmask"><? echo $var:Text50 ?></label></td>
+						<td><label for="uiViewWanIpNetmask">Subnetzmaske</label></td>
 						<td><input type="text" size="16" maxlength="15" id="uiViewWanIpNetmask"></td>
 					</tr>
 					<tr>
-						<td><label for="uiViewWanIpGateway"><? echo $var:Text51 ?></label></td>
+						<td><label for="uiViewWanIpGateway">Standard-Gateway</label></td>
 						<td><input type="text" size="16" maxlength="15" id="uiViewWanIpGateway"></td>
 					</tr>
 					<tr>
-						<td><label for="uiViewWanIpDns0"><? echo $var:Text52 ?></label></td>
+						<td><label for="uiViewWanIpDns0">Primärer DNS-Server</label></td>
 						<td><input type="text" size="16" maxlength="15" id="uiViewWanIpDns0"></td>
 					</tr>
 					<tr>
-						<td><label for="uiViewWanIpDns1"><? echo $var:Text53 ?></label></td>
+						<td><label for="uiViewWanIpDns1">Sekundärer DNS-Server</label></td>
 						<td><input type="text" size="16" maxlength="15" id="uiViewWanIpDns1"></td>
 					</tr>
 				</table>
@@ -73,8 +72,8 @@
 		</div>			
 		<div id="uiEncryption" style="display:none">
 			<ul class="tabs">
-				<li><a href="javascript:Tabs(0)"><? echo $var:Text3 ?></a></li>
-				<li class="tabs_on"><a href="javascript:Tabs(1)"><? echo $var:Text45 ?></a></li>
+		 		<li><a href="javascript:Tabs(0)">Betriebsart</a></li>
+		 		<li class="tabs_on"><a href="javascript:Tabs(1)">Sicherheit</a></li>
 			</ul>
 			<div class="backdialog"><div class="ecklm"><div class="eckrm"><div class="ecklb"><div class="eckrb"><div class="foredialog">
 				<p class="mb5"><? echo $var:Text21 ?></p>
@@ -89,8 +88,8 @@
 					<p class="ml25"><? echo $var:Text29 ?>&nbsp;<? query wlan:settings/key_value0 ?></p>
 				</div>
 				<div id="uiLevel1edit" style="display:none">
-					<p class="ml25 mb10"><label for="uiViewWEPValue"><? echo $var:Text46 ?></label>&nbsp;<input type="text" size="27" maxlength="26" class="Eingabefeld" id="uiViewWEPValue"></p>
-					<p><? echo $var:Text47 ?></p>
+					<p class="ml25 mb10"><label for="uiViewWEPValue">WEP-Schlüssel 1:</label>&nbsp;<input type="text" size="27" maxlength="26" class="Eingabefeld" id="uiViewWEPValue"></p>
+					<p>Geben Sie den WEP-Schlüssel im hexadezimalen Format (26 Stellen) ein.</p>
 				</div>
 				<div id="uiLevel2" style="display:none">
 					<p class="ml25 mb10"><label for="uiViewWPAValue"><? echo $var:Text42 ?></label>&nbsp;<input type="text" size="40" maxlength="63" class="Eingabefeld" id="uiViewWPAValue"></p>
--- usr/www/all/html/de/wlan/wds.js.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/de/wlan/wds.js	2007-07-26 15:15:54.000000000 +0200
@@ -26,25 +26,6 @@
 var g_oldLevel = "<? query wlan:settings/WDS_encryption ?>";
 var g_mldNacht = "Die Unterstützung für WLAN-Repeater (WDS) kann nicht zusammen mit der Nachtschaltung für das Funknetz (WLAN) genutzt werden. Die WLAN-Nachtschaltung wird deaktiviert.";
 var g_mldNoAVM = "Sie haben für die WDS-Verbindung WPA2-Verschlüsselung konfiguriert. WPA2-Verschlüsselung für die WDS-Verbindung kann nur zusammen mit anderen AVM WLAN-Geräten genutzt werden. Mindestens eine der angegebenen MAC-Adressen verweist jedoch nicht auf ein AVM-Gerät.";
-var g_mldLanBridge= "Sie haben die Option \"Alle Computer befinden sich im selben IP-Netzwerk\" deaktiviert. Um die Unterstützung für WLAN-Repeater zu nutzen, müssen sich alle Computer in einem IP-Netzwerk befinden.";
-function doEnableWDS()
-{
- var Kanal = "<? query wlan:settings/channel ?>"; 
- jslSetEnabled("uiViewWDS",(Kanal == "0" ? false : true));
- 
- var str = "";
- if( Kanal == "0" )
- {
- 
- var id = document.getElementById("uiViewChangeWDS");
- if( id != null ) id.style.color = "#999999";
-	 
- str = "<div style=\"color:#ff0000\"><p>&nbsp;</p><p>\"WLAN-Autokanal\" ist z.Z. aktiviert.</p>";
- str += "<p>Um den WLAN-Repeater (WDS)-Modus nutzen zu können, muß \"WLAN-Autokanal\" abgeschaltet und ein Funkkanal manuell gewählt werden. </p></div>";
- }
- 
- return str; 
-}
 function uiDoOnLoad() {
 	jslSetChecked("uiViewWDS", jslGetValue("uiPostWDSAktiv") == "1");
 	switch (jslGetValue("uiPostWDSMode")) {
@@ -58,7 +39,7 @@
 		default: uiDoWDSLevel(0); break;
 	}
 	Tabs(jslGetValue("uiPostTab") == "1" ? 1:0);
-	UpdateWDS();
+	uiOnChangeWDS();
 }
 function uiDoValidateWPAKey(id) {
 	var value = jslGetValue(id);
@@ -106,9 +87,10 @@
 		if (jslGetChecked("uiViewMode0")) {
 <? repeat [ 0 3 ] `			if (!valIsMac(jslGetValue("uiViewMAC0$0"))) {alert(jslGetValue('uiViewMAC0$0') + g_mldNoMac); return;}
 ` ?>
-//		if (jslGetChecked("uiViewWDSLevel2")) {
-//			if (!isAvmMac(jslGetValue("uiViewMAC00")) || !isAvmMac(jslGetValue("uiViewMAC01")) || !isAvmMac(jslGetValue("uiViewMAC02")) || !isAvmMac(jslGetValue("uiViewMAC03"))) alert(g_mldNoAVM);
-//		}	
+		if (jslGetChecked("uiViewWDSLevel2")) {
+			if (!isAvmMac(jslGetValue("uiViewMAC00")) || !isAvmMac(jslGetValue("uiViewMAC01")) || !isAvmMac(jslGetValue("uiViewMAC02")) || !isAvmMac(jslGetValue("uiViewMAC03"))) alert(g_mldNoAVM);
+		}
+		
 <? repeat [ 0 3 ] `			jslCopyValue("uiPostWDSSlave$0", "uiViewMAC0$0");
 ` ?>
 <? repeat [ 0 3 ] `			jslEnable("uiPostWDSSlave$0");
@@ -174,11 +156,12 @@
 			jslCopyValue("uiPostWDSKey", "uiViewWPAValue");
 			jslEnable("uiPostWDSKey");
 		}
-		jslSetValue("uiPostWlanForcedOff", "0");
-		jslEnable("uiPostWlanForcedOff");
-		if ( bShowPopUp) {
-			doPopWindow();
+		if (jslGetValue("uiPostNachtWlan") == "1") {
+			jslSetValue("uiPostNachtWlan", "0");
+			jslEnable("uiPostNachtWlan");
 		}
+		if ( bShowPopUp)
+			doPopWindow();
 	} else {
 			if ( ( bWDSActive) && (wdsmode == "1")) {
 <? if eq $var:isAta 0 `
@@ -194,6 +177,7 @@
 				jslSetValue("uiPostGetPage", "../html/networkchange.html");
 ` ?>
 			}
+		
 	}
 	jslFormSubmitEx("wlan", "wds");
 }
@@ -223,13 +207,6 @@
 	}
 }
 function uiOnChangeWDS () {
-	if (jslGetChecked("uiViewWDS") && "<? query box:settings/lanbridge/activated ?>" == "0") {
-		alert(g_mldLanBridge);
-		jslSetChecked("uiViewWDS", false);
-	}
-	UpdateWDS();
-}
-function UpdateWDS () {
 	var b = jslGetChecked("uiViewWDS");
 	jslSetEnabled("uiViewMode0", b);
 	jslSetEnabled("uiViewMode1", b && g_EnableMode1);
@@ -242,7 +219,7 @@
 	jslSetEnabled("uiViewWDSLevel1", b);
 	jslSetEnabled("uiViewWDSLevel2", b);
 	jslSetEnabled("uiViewWPAValue", b);
-//	if (b && (jslGetValue("uiPostNachtWlan") == "1")) alert(g_mldNacht);
+	if (b && (jslGetValue("uiPostNachtWlan") == "1")) alert(g_mldNacht);
 }
 var g_initMode0 = false;
 function InitMode0 () {
@@ -317,7 +294,7 @@
 	if (mac.length == 0) return true;
 	if (mac == "00:00:00:00:00:00") return true;
 	var bigmac = mac.toUpperCase();
-	return bigmac.indexOf("00:04:0E") == 0 || bigmac.indexOf("00:1A:4F") == 0;
+	return bigmac.indexOf("00:04:0E") == 0 || bigmac.indexOf("00:15:0C") == 0;
 }
 function CheckWEPKey (key) {
 	if (key.length == 0) return null;	// leere Einträge sind gültig
--- usr/www/all/html/import_reboot.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/import_reboot.html	2007-07-26 15:15:54.000000000 +0200
@@ -27,6 +27,7 @@
 table			{ border-collapse: collapse; }
 .pTitel, .pTitelo
 				{ font-weight: bold; text-align: center; background-color: #E1F4FF; padding: 5px 10px; border: 1px solid #C6C7BF; }
+				 
 .pDialog, .pDialogo, .pDialogb, .pDialogob
 				{ padding: 10px 10px; text-align: left; background-color: #FBFAF7/*#FEFCF0*/; border: 1px solid #C6C7BF; }
 .pButtonbar 	{ text-align: right; padding: 5px 10px; background-color: #E1F4FF; border: 1px solid #C6C7BF; }
--- usr/www/all/html/logincheck.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/logincheck.html	2007-07-26 15:15:54.000000000 +0200
@@ -21,15 +21,6 @@
 		document.getElementById("uiPostMenu").value = "tr69_autoconfig";
 		document.getElementById("uiPostPageName").value = "tr69_sync";
 	}
-	else
-	{
-		var hide_warning = ("<? query tr069:settings/suppress_autoFWUpdate_notify ?>" != "0");
-		if (!hide_warning)
-		{
-			document.getElementById("uiPostMenu").value = "tr69_autoconfig";
-			document.getElementById("uiPostPageName").value = "tr69_warning";
-		}
-	}
 ` ?>
 ' ?>
 ` ?>
--- usr/www/all/html/login.html.orig	2007-07-10 13:48:28.000000000 +0200
+++ usr/www/all/html/login.html	2007-07-26 15:15:54.000000000 +0200
@@ -49,8 +49,6 @@
 .foretitel		{ text-align: center; font-weight: bold; padding: 5px 10px;}
 .foredialog		{ padding: 10px; }
 .forebuttons	{ text-align: right; padding: 7px 10px;}
-.errorMessage { font-family: Arial, Helvetica, sans-serif; font-size: 13px; font-weight: bold; color: #CC0000; text-align: center;
-				 margin: 5px; padding: 2px; background-color: white; }
 #Menuspalte	{ width: 200px; padding: 0px; vertical-align: top; }
 #Dataspalte	{ width: 606px; height: 400px; vertical-align: top; }
 -->
@@ -104,7 +102,7 @@
 				<table style="margin: auto;">
 					<tr>
 						<td style="width: 80px;"><label for="uiViewPassword">Kennwort</label>&nbsp;</td>
-						<td><input type="password" size="15" maxlength="128" id="uiViewPassword" name="pass"></td>
+						<td><input type="password" size="15" maxlength="128" id="uiViewPassword"></td>
 					</tr>
 				</table>
 			</div>
