--- src/netsh.c.orig
+++ src/netsh.c
@@ -452,7 +452,7 @@ parse_protocol(char protocol_string[])
     return IPPROTO_SDP;
   }
 #endif
-#ifdef IPPROTO_DCCP
+#if defined(IPPROTO_DCCP) && defined(SOCK_DCCP)
   if (!strcasecmp(temp,"dccp")) {
     socket_type = SOCK_DCCP;
     return IPPROTO_DCCP;
