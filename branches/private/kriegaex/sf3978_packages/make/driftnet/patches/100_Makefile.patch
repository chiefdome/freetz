--- Makefile.orig	2011-05-22 09:37:42.000000000 +0200
+++ Makefile	2011-05-22 11:30:30.000000000 +0200
@@ -16,29 +16,29 @@
 #CC = gcc
 
 # Basic compiler, linker flags; should not need any changes.
-CFLAGS += -g -Wall
-LDFLAGS += -g
+## CFLAGS += -g -Wall
+## LDFLAGS += -g
 
 # You might need these if libpcap is installed somewhere random.
-CFLAGS += -I/usr/include/pcap
+## CFLAGS += -I/usr/include/pcap
 #LDFLAGS += -L/path/to/libpcap.so
 
 # Required on Linux to get BSDish definitions of the TCP/IP structs.
-CFLAGS += -D_BSD_SOURCE
+## CFLAGS += -D_BSD_SOURCE
 
 # We always need the pcap and pthread libraries.
-LDLIBS += -lpcap -lpthread
+## LDLIBS += -lpcap -lpthread
 
 # Optional C compiler and linker flags. Typical driftnet builds have support
 # for displaying captured images in an X window, and need the following flags:
-CFLAGS  += `gtk-config --cflags`
-LDLIBS  += -ljpeg -lungif `gtk-config --libs`
+#CFLAGS  += `gtk-config --cflags`
+#LDLIBS  += -ljpeg -lungif `gtk-config --libs`
 
 # Alternatively, you can build a version of driftnet which can only be used
 # in `adjunct' mode as the back end for some other image-processing program. To
 # use this, comment out the two preceding CFLAGS and LDLIBS lines and uncomment
 # the following line:
-#CFLAGS += -DNO_DISPLAY_WINDOW
+## CFLAGS += -DNO_DISPLAY_WINDOW
 
 # On systems with a C99 compiler, driftnet will use <stdint.h> for the
 # definitions of types such as uint8_t. On other systems like Solaris, these
@@ -58,13 +58,20 @@
 # No user-serviceable parts below this point.
 #
 
+
+
 # Driftnet version.
 VERSION = 0.1.6
-CFLAGS += -DDRIFTNET_VERSION='"$(VERSION)"'
+## CFLAGS += -DDRIFTNET_VERSION='"$(VERSION)"'
+
+CC=
+CFLAGS=
+LDFLAGS=
+LDLIBS=
 
 SUBDIRS = 
 
-TXTS = README TODO COPYING CHANGES CREDITS driftnet.1 driftnet.1.in endian.c
+TXTS = README TODO COPYING CHANGES CREDITS driftnet.1 driftnet.1.in
 SRCS = audio.c mpeghdr.c gif.c img.c jpeg.c png.c driftnet.c image.c \
        display.c playaudio.c connection.c media.c
 HDRS = img.h driftnet.h mpeghdr.h
@@ -72,13 +79,13 @@
 
 OBJS = $(SRCS:.c=.o)
 
-default: driftnet driftnet.1
+default: driftnet ##driftnet.1
 
-driftnet:   depend $(OBJS)
+driftnet:  $(OBJS)
 	$(CC) -o driftnet $(OBJS) $(LDFLAGS) $(LDLIBS)
 
-driftnet.1: driftnet.1.in Makefile
-	( echo '.\" DO NOT EDIT THIS FILE-- edit driftnet.1.in instead' ; sed s/@@@VERSION@@@/$(VERSION)/ ) < driftnet.1.in > driftnet.1
+##driftnet.1: driftnet.1.in Makefile
+##	( echo '.\" DO NOT EDIT THIS FILE-- edit driftnet.1.in instead' ; sed s/@@@VERSION@@@/$(VERSION)/ ) < driftnet.1.in > driftnet.1
 
 endianness: endian
 	./endian > endianness
@@ -86,29 +93,197 @@
 endian: endian.c
 	$(CC) $(CFLAGS) -o endian endian.c
 
-%.o:    %.c Makefile endianness
-	$(CC) $(CFLAGS) `cat endianness` -c -o $@ $<
+%.o:    %.c Makefile
+	$(CC) $(CFLAGS) -c -o $@ $<
 
-clean:  nodepend
-	rm -f *~ *.bak *.o core $(BINS) TAGS driftnet.1 endian endianness
+##clean:  nodepend
+##	rm -f *~ *.bak *.o core $(BINS) TAGS driftnet.1 ##endian endianness
 
 tags:
 	etags *.c *.h
 
-tarball: nodepend $(SRCS) $(HDRS) $(TXTS)
-	mkdir driftnet-$(VERSION)
-	set -e ; for i in Makefile $(SRCS) $(HDRS) $(TXTS) ; do cp $$i driftnet-$(VERSION)/$$i ; done
-	tar cvzf driftnet-$(VERSION).tar.gz driftnet-$(VERSION)
-	rm -rf driftnet-$(VERSION)
-	mv driftnet-$(VERSION).tar.gz ..
+##tarball: nodepend $(SRCS) $(HDRS) $(TXTS)
+##	mkdir driftnet-$(VERSION)
+##	set -e ; for i in Makefile $(SRCS) $(HDRS) $(TXTS) ; do cp $$i driftnet-$(VERSION)/$$i ; done
+##	tar cvzf driftnet-$(VERSION).tar.gz driftnet-$(VERSION)
+##	rm -rf driftnet-$(VERSION)
+##	mv driftnet-$(VERSION).tar.gz ..
 	
-depend: endianness
-	makedepend -- $(CFLAGS) `cat endianness` -- $(SRCS)
-	touch depend
-	rm -f Makefile.bak
-
-nodepend:
-	makedepend -- --
-	rm -f depend Makefile.bak
+##depend: endianness
+##	makedepend -- $(CFLAGS) `cat endianness` -- $(SRCS)
+##	touch depend
+##	rm -f Makefile.bak
+
+##nodepend:
+##	makedepend -- --
+##	rm -f depend Makefile.bak
 
 # DO NOT DELETE
+
+audio.o: /usr/include/string.h /usr/include/features.h
+audio.o: /usr/include/sys/cdefs.h /usr/include/bits/wordsize.h
+audio.o: /usr/include/gnu/stubs.h /usr/include/gnu/stubs-64.h
+audio.o: /usr/include/xlocale.h driftnet.h /usr/include/sys/types.h
+audio.o: /usr/include/bits/types.h /usr/include/bits/typesizes.h
+audio.o: /usr/include/time.h ##/usr/include/endian.h /usr/include/bits/endian.h
+audio.o: /usr/include/bits/byteswap.h /usr/include/sys/select.h
+audio.o: /usr/include/bits/select.h /usr/include/bits/sigset.h
+audio.o: /usr/include/bits/time.h /usr/include/sys/sysmacros.h
+audio.o: /usr/include/bits/pthreadtypes.h /usr/include/sys/socket.h
+audio.o: /usr/include/sys/uio.h /usr/include/bits/uio.h
+audio.o: /usr/include/bits/socket.h /usr/include/bits/sockaddr.h
+audio.o: /usr/include/asm/socket.h /usr/include/asm-generic/socket.h
+audio.o: /usr/include/asm/sockios.h /usr/include/asm-generic/sockios.h
+audio.o: /usr/include/netinet/in.h /usr/include/stdint.h
+audio.o: /usr/include/bits/wchar.h /usr/include/bits/in.h
+audio.o: /usr/include/arpa/inet.h /usr/include/sys/time.h
+audio.o: /usr/include/stdio.h /usr/include/libio.h /usr/include/_G_config.h
+audio.o: /usr/include/wchar.h /usr/include/bits/stdio_lim.h
+audio.o: /usr/include/bits/sys_errlist.h mpeghdr.h
+mpeghdr.o: /usr/include/stdio.h /usr/include/features.h
+mpeghdr.o: /usr/include/sys/cdefs.h /usr/include/bits/wordsize.h
+mpeghdr.o: /usr/include/gnu/stubs.h /usr/include/gnu/stubs-64.h
+mpeghdr.o: /usr/include/bits/types.h /usr/include/bits/typesizes.h
+mpeghdr.o: /usr/include/libio.h /usr/include/_G_config.h /usr/include/wchar.h
+mpeghdr.o: /usr/include/bits/stdio_lim.h /usr/include/bits/sys_errlist.h
+mpeghdr.o: mpeghdr.h /usr/include/stdint.h /usr/include/bits/wchar.h
+driftnet.o: /usr/include/assert.h /usr/include/features.h
+driftnet.o: /usr/include/sys/cdefs.h /usr/include/bits/wordsize.h
+driftnet.o: /usr/include/gnu/stubs.h /usr/include/gnu/stubs-64.h
+driftnet.o: /usr/include/dirent.h /usr/include/bits/types.h
+driftnet.o: /usr/include/bits/typesizes.h /usr/include/bits/dirent.h
+driftnet.o: /usr/include/bits/posix1_lim.h /usr/include/bits/local_lim.h
+driftnet.o: /usr/include/linux/limits.h /usr/include/errno.h
+driftnet.o: /usr/include/bits/errno.h /usr/include/linux/errno.h
+driftnet.o: /usr/include/asm/errno.h /usr/include/asm-generic/errno.h
+driftnet.o: /usr/include/asm-generic/errno-base.h /usr/include/pcap/pcap.h
+driftnet.o: /usr/include/sys/types.h /usr/include/time.h
+##driftnet.o: /usr/include/endian.h /usr/include/bits/endian.h
+driftnet.o: /usr/include/bits/byteswap.h /usr/include/sys/select.h
+driftnet.o: /usr/include/bits/select.h /usr/include/bits/sigset.h
+driftnet.o: /usr/include/bits/time.h /usr/include/sys/sysmacros.h
+driftnet.o: /usr/include/bits/pthreadtypes.h /usr/include/sys/time.h
+driftnet.o: /usr/include/pcap/bpf.h /usr/include/stdio.h /usr/include/libio.h
+driftnet.o: /usr/include/_G_config.h /usr/include/wchar.h
+driftnet.o: /usr/include/bits/stdio_lim.h /usr/include/bits/sys_errlist.h
+driftnet.o: /usr/include/netinet/in.h /usr/include/stdint.h
+driftnet.o: /usr/include/bits/wchar.h /usr/include/sys/socket.h
+driftnet.o: /usr/include/sys/uio.h /usr/include/bits/uio.h
+driftnet.o: /usr/include/bits/socket.h /usr/include/bits/sockaddr.h
+driftnet.o: /usr/include/asm/socket.h /usr/include/asm-generic/socket.h
+driftnet.o: /usr/include/asm/sockios.h /usr/include/asm-generic/sockios.h
+driftnet.o: /usr/include/bits/in.h /usr/include/arpa/inet.h
+driftnet.o: /usr/include/limits.h /usr/include/bits/posix2_lim.h
+driftnet.o: /usr/include/netinet/in_systm.h /usr/include/netinet/ip.h
+driftnet.o: /usr/include/netinet/tcp.h /usr/include/ctype.h
+driftnet.o: /usr/include/xlocale.h /usr/include/fcntl.h
+driftnet.o: /usr/include/bits/fcntl.h /usr/include/pthread.h
+driftnet.o: /usr/include/sched.h /usr/include/bits/sched.h
+driftnet.o: /usr/include/signal.h /usr/include/bits/setjmp.h
+driftnet.o: /usr/include/stdlib.h /usr/include/alloca.h /usr/include/string.h
+driftnet.o: /usr/include/unistd.h /usr/include/bits/posix_opt.h
+driftnet.o: /usr/include/bits/confname.h /usr/include/getopt.h
+driftnet.o: /usr/include/sys/stat.h /usr/include/bits/stat.h
+driftnet.o: /usr/include/sys/wait.h /usr/include/sys/resource.h
+driftnet.o: /usr/include/bits/resource.h /usr/include/bits/waitflags.h
+driftnet.o: /usr/include/bits/waitstatus.h driftnet.h
+image.o: /usr/include/stdio.h /usr/include/features.h
+image.o: /usr/include/sys/cdefs.h /usr/include/bits/wordsize.h
+image.o: /usr/include/gnu/stubs.h /usr/include/gnu/stubs-64.h
+image.o: /usr/include/bits/types.h /usr/include/bits/typesizes.h
+image.o: /usr/include/libio.h /usr/include/_G_config.h /usr/include/wchar.h
+image.o: /usr/include/bits/stdio_lim.h /usr/include/bits/sys_errlist.h
+image.o: /usr/include/stdlib.h /usr/include/sys/types.h /usr/include/time.h
+##image.o: /usr/include/endian.h /usr/include/bits/endian.h
+image.o: /usr/include/bits/byteswap.h /usr/include/sys/select.h
+image.o: /usr/include/bits/select.h /usr/include/bits/sigset.h
+image.o: /usr/include/bits/time.h /usr/include/sys/sysmacros.h
+image.o: /usr/include/bits/pthreadtypes.h /usr/include/alloca.h
+image.o: /usr/include/string.h /usr/include/xlocale.h /usr/include/png.h
+image.o: /usr/include/zlib.h /usr/include/zconf.h /usr/include/unistd.h
+image.o: /usr/include/bits/posix_opt.h /usr/include/bits/confname.h
+image.o: /usr/include/getopt.h /usr/include/pngconf.h /usr/include/limits.h
+image.o: /usr/include/bits/posix1_lim.h /usr/include/bits/local_lim.h
+image.o: /usr/include/linux/limits.h /usr/include/bits/posix2_lim.h
+image.o: /usr/include/setjmp.h /usr/include/bits/setjmp.h
+playaudio.o: /usr/include/sys/types.h /usr/include/features.h
+playaudio.o: /usr/include/sys/cdefs.h /usr/include/bits/wordsize.h
+playaudio.o: /usr/include/gnu/stubs.h /usr/include/gnu/stubs-64.h
+playaudio.o: /usr/include/bits/types.h /usr/include/bits/typesizes.h
+playaudio.o: /usr/include/time.h ##/usr/include/endian.h
+playaudio.o: /usr/include/bits/byteswap.h
+playaudio.o: /usr/include/sys/select.h /usr/include/bits/select.h
+playaudio.o: /usr/include/bits/sigset.h /usr/include/bits/time.h
+playaudio.o: /usr/include/sys/sysmacros.h /usr/include/bits/pthreadtypes.h
+playaudio.o: /usr/include/errno.h /usr/include/bits/errno.h
+playaudio.o: /usr/include/linux/errno.h /usr/include/asm/errno.h
+playaudio.o: /usr/include/asm-generic/errno.h
+playaudio.o: /usr/include/asm-generic/errno-base.h /usr/include/pthread.h
+playaudio.o: /usr/include/sched.h /usr/include/bits/sched.h
+playaudio.o: /usr/include/signal.h /usr/include/bits/setjmp.h
+playaudio.o: /usr/include/stdio.h /usr/include/libio.h
+playaudio.o: /usr/include/_G_config.h /usr/include/wchar.h
+playaudio.o: /usr/include/bits/stdio_lim.h /usr/include/bits/sys_errlist.h
+playaudio.o: /usr/include/stdlib.h /usr/include/alloca.h
+playaudio.o: /usr/include/string.h /usr/include/xlocale.h
+playaudio.o: /usr/include/unistd.h /usr/include/bits/posix_opt.h
+playaudio.o: /usr/include/bits/confname.h /usr/include/getopt.h
+playaudio.o: /usr/include/sys/wait.h /usr/include/sys/resource.h
+playaudio.o: /usr/include/bits/resource.h /usr/include/bits/waitflags.h
+playaudio.o: /usr/include/bits/waitstatus.h driftnet.h
+playaudio.o: /usr/include/sys/socket.h /usr/include/sys/uio.h
+playaudio.o: /usr/include/bits/uio.h /usr/include/bits/socket.h
+playaudio.o: /usr/include/bits/sockaddr.h /usr/include/asm/socket.h
+playaudio.o: /usr/include/asm-generic/socket.h /usr/include/asm/sockios.h
+playaudio.o: /usr/include/asm-generic/sockios.h /usr/include/netinet/in.h
+playaudio.o: /usr/include/stdint.h /usr/include/bits/wchar.h
+playaudio.o: /usr/include/bits/in.h /usr/include/arpa/inet.h
+playaudio.o: /usr/include/sys/time.h
+connection.o: /usr/include/assert.h /usr/include/features.h
+connection.o: /usr/include/sys/cdefs.h /usr/include/bits/wordsize.h
+connection.o: /usr/include/gnu/stubs.h /usr/include/gnu/stubs-64.h
+connection.o: /usr/include/stdio.h /usr/include/bits/types.h
+connection.o: /usr/include/bits/typesizes.h /usr/include/libio.h
+connection.o: /usr/include/_G_config.h /usr/include/wchar.h
+connection.o: /usr/include/bits/stdio_lim.h /usr/include/bits/sys_errlist.h
+connection.o: /usr/include/stdlib.h /usr/include/sys/types.h
+connection.o: /usr/include/time.h ##/usr/include/endian.h
+connection.o: /usr/include/bits/byteswap.h
+connection.o: /usr/include/sys/select.h /usr/include/bits/select.h
+connection.o: /usr/include/bits/sigset.h /usr/include/bits/time.h
+connection.o: /usr/include/sys/sysmacros.h /usr/include/bits/pthreadtypes.h
+connection.o: /usr/include/alloca.h /usr/include/string.h
+connection.o: /usr/include/xlocale.h driftnet.h /usr/include/sys/socket.h
+connection.o: /usr/include/sys/uio.h /usr/include/bits/uio.h
+connection.o: /usr/include/bits/socket.h /usr/include/bits/sockaddr.h
+connection.o: /usr/include/asm/socket.h /usr/include/asm-generic/socket.h
+connection.o: /usr/include/asm/sockios.h /usr/include/asm-generic/sockios.h
+connection.o: /usr/include/netinet/in.h /usr/include/stdint.h
+connection.o: /usr/include/bits/wchar.h /usr/include/bits/in.h
+connection.o: /usr/include/arpa/inet.h /usr/include/sys/time.h
+media.o: /usr/include/assert.h /usr/include/features.h
+media.o: /usr/include/sys/cdefs.h /usr/include/bits/wordsize.h
+media.o: /usr/include/gnu/stubs.h /usr/include/gnu/stubs-64.h
+media.o: /usr/include/dirent.h /usr/include/bits/types.h
+media.o: /usr/include/bits/typesizes.h /usr/include/bits/dirent.h
+media.o: /usr/include/bits/posix1_lim.h /usr/include/bits/local_lim.h
+media.o: /usr/include/linux/limits.h /usr/include/fcntl.h
+media.o: /usr/include/bits/fcntl.h /usr/include/sys/types.h
+media.o: /usr/include/time.h ##/usr/include/endian.h /usr/include/bits/endian.h
+media.o: /usr/include/bits/byteswap.h /usr/include/sys/select.h
+media.o: /usr/include/bits/select.h /usr/include/bits/sigset.h
+media.o: /usr/include/bits/time.h /usr/include/sys/sysmacros.h
+media.o: /usr/include/bits/pthreadtypes.h /usr/include/stdio.h
+media.o: /usr/include/libio.h /usr/include/_G_config.h /usr/include/wchar.h
+media.o: /usr/include/bits/stdio_lim.h /usr/include/bits/sys_errlist.h
+media.o: /usr/include/stdlib.h /usr/include/alloca.h /usr/include/string.h
+media.o: /usr/include/xlocale.h /usr/include/unistd.h
+media.o: /usr/include/bits/posix_opt.h /usr/include/bits/confname.h
+media.o: /usr/include/getopt.h driftnet.h /usr/include/sys/socket.h
+media.o: /usr/include/sys/uio.h /usr/include/bits/uio.h
+media.o: /usr/include/bits/socket.h /usr/include/bits/sockaddr.h
+media.o: /usr/include/asm/socket.h /usr/include/asm-generic/socket.h
+media.o: /usr/include/asm/sockios.h /usr/include/asm-generic/sockios.h
+media.o: /usr/include/netinet/in.h /usr/include/stdint.h
+media.o: /usr/include/bits/wchar.h /usr/include/bits/in.h
+media.o: /usr/include/arpa/inet.h /usr/include/sys/time.h
