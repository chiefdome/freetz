--- lib/zebra.h.orig	2009-11-30 12:50:11.000000000 +0100
+++ lib/zebra.h	2009-11-30 12:50:16.000000000 +0100
@@ -25,6 +25,26 @@
 #include "config.h"
 #endif /* HAVE_CONFIG_H */
 
+#ifdef HAVE_IPV6
+#if defined IPV6_RECVHOPLIMIT || defined IPV6_RECVPKTINFO
+#include <linux/version.h>
+#if LINUX_VERSION_CODE < KERNEL_VERSION(2,6,14)
+#if defined IPV6_RECVHOPLIMIT && defined IPV6_2292HOPLIMIT
+#undef IPV6_RECVHOPLIMIT
+#undef IPV6_HOPLIMIT
+#define IPV6_RECVHOPLIMIT IPV6_2292HOPLIMIT
+#define IPV6_HOPLIMIT IPV6_2292HOPLIMIT
+#endif
+#if defined IPV6_RECVPKTINFO && defined IPV6_2292PKTINFO
+#undef IPV6_RECVPKTINFO
+#undef IPV6_PKTINFO
+#define IPV6_RECVPKTINFO IPV6_2292PKTINFO
+#define IPV6_PKTINFO IPV6_2292PKTINFO
+#endif
+#endif
+#endif
+#endif
+
 #ifdef SUNOS_5
 #define _XPG4_2
 #define __EXTENSIONS__
