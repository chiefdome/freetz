#!/bin/sh

. /etc/init.d/modlibrc

DAEMON=httpd

if [ ! -r "/mod/etc/conf/mod.cfg" ]; then
	echo "Error[$DAEMON]: not configured" 1>&2
	exit 1
fi

. /mod/etc/conf/mod.cfg

homedir=/usr/mww-proto/

[ -e /var/htmltext.fa ] || ln -s /usr/mww-proto/conf/htmltext_de.fa /var/htmltext.fa
[ -e /mod/etc/fapasswd ] || ln -s /usr/mww-proto/conf/fapasswd /mod/etc/fapasswd
/usr/mww-proto/conf/httpd_conf > /mod/etc/httpd-proto.conf

exec $DAEMON "$@" -p 8181 -c /mod/etc/httpd-proto.conf -h "$homedir" -r "Freetz"
