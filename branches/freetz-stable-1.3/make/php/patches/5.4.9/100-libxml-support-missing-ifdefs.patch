--- ext/libxml/libxml.c
+++ ext/libxml/libxml.c
@@ -799,11 +799,11 @@
 	REGISTER_LONG_CONSTANT("LIBXML_NOEMPTYTAG",	LIBXML_SAVE_NOEMPTYTAG,	CONST_CS | CONST_PERSISTENT);
 
 	/* Additional constants for use with loading html */
-#if LIBXML_VERSION >= 20707
+#if LIBXML_VERSION >= 20707 && defined(LIBXML_HTML_ENABLED)
 	REGISTER_LONG_CONSTANT("LIBXML_HTML_NOIMPLIED",	HTML_PARSE_NOIMPLIED,		CONST_CS | CONST_PERSISTENT);
 #endif
 
-#if LIBXML_VERSION >= 20708
+#if LIBXML_VERSION >= 20708 && defined(LIBXML_HTML_ENABLED)
 	REGISTER_LONG_CONSTANT("LIBXML_HTML_NODEFDTD",	HTML_PARSE_NODEFDTD,		CONST_CS | CONST_PERSISTENT);
 #endif
 
